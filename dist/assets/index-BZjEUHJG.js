(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))l(f);new MutationObserver(f=>{for(const u of f)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&l(d)}).observe(document,{childList:!0,subtree:!0});function a(f){const u={};return f.integrity&&(u.integrity=f.integrity),f.referrerPolicy&&(u.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?u.credentials="include":f.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function l(f){if(f.ep)return;f.ep=!0;const u=a(f);fetch(f.href,u)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Nn(e){const n=Object.create(null);for(const a of e.split(","))n[a]=1;return a=>a in n}const ht={},De=[],te=()=>{},da=()=>!1,Xi=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Hn=e=>e.startsWith("onUpdate:"),Et=Object.assign,Gn=(e,n)=>{const a=e.indexOf(n);a>-1&&e.splice(a,1)},pa=Object.prototype.hasOwnProperty,lt=(e,n)=>pa.call(e,n),tt=Array.isArray,Oe=e=>Si(e)==="[object Map]",xs=e=>Si(e)==="[object Set]",br=e=>Si(e)==="[object Date]",nt=e=>typeof e=="function",vt=e=>typeof e=="string",ie=e=>typeof e=="symbol",_t=e=>e!==null&&typeof e=="object",bs=e=>(_t(e)||nt(e))&&nt(e.then)&&nt(e.catch),As=Object.prototype.toString,Si=e=>As.call(e),_a=e=>Si(e).slice(8,-1),Ss=e=>Si(e)==="[object Object]",Vn=e=>vt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,ni=Nn(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Zi=e=>{const n=Object.create(null);return a=>n[a]||(n[a]=e(a))},ga=/-(\w)/g,Gt=Zi(e=>e.replace(ga,(n,a)=>a?a.toUpperCase():"")),ya=/\B([A-Z])/g,Le=Zi(e=>e.replace(ya,"-$1").toLowerCase()),Ji=Zi(e=>e.charAt(0).toUpperCase()+e.slice(1)),hn=Zi(e=>e?`on${Ji(e)}`:""),ge=(e,n)=>!Object.is(e,n),Li=(e,...n)=>{for(let a=0;a<e.length;a++)e[a](...n)},Us=(e,n,a,l=!1)=>{Object.defineProperty(e,n,{configurable:!0,enumerable:!1,writable:l,value:a})},Un=e=>{const n=parseFloat(e);return isNaN(n)?e:n};let Ar;const Qi=()=>Ar||(Ar=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function jn(e){if(tt(e)){const n={};for(let a=0;a<e.length;a++){const l=e[a],f=vt(l)?xa(l):jn(l);if(f)for(const u in f)n[u]=f[u]}return n}else if(vt(e)||_t(e))return e}const ma=/;(?![^(]*\))/g,va=/:([^]+)/,wa=/\/\*[^]*?\*\//g;function xa(e){const n={};return e.replace(wa,"").split(ma).forEach(a=>{if(a){const l=a.split(va);l.length>1&&(n[l[0].trim()]=l[1].trim())}}),n}function Yn(e){let n="";if(vt(e))n=e;else if(tt(e))for(let a=0;a<e.length;a++){const l=Yn(e[a]);l&&(n+=l+" ")}else if(_t(e))for(const a in e)e[a]&&(n+=a+" ");return n.trim()}const ba="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Aa=Nn(ba);function Es(e){return!!e||e===""}function Sa(e,n){if(e.length!==n.length)return!1;let a=!0;for(let l=0;a&&l<e.length;l++)a=Oi(e[l],n[l]);return a}function Oi(e,n){if(e===n)return!0;let a=br(e),l=br(n);if(a||l)return a&&l?e.getTime()===n.getTime():!1;if(a=ie(e),l=ie(n),a||l)return e===n;if(a=tt(e),l=tt(n),a||l)return a&&l?Sa(e,n):!1;if(a=_t(e),l=_t(n),a||l){if(!a||!l)return!1;const f=Object.keys(e).length,u=Object.keys(n).length;if(f!==u)return!1;for(const d in e){const o=e.hasOwnProperty(d),p=n.hasOwnProperty(d);if(o&&!p||!o&&p||!Oi(e[d],n[d]))return!1}}return String(e)===String(n)}const Cs=e=>!!(e&&e.__v_isRef===!0),je=e=>vt(e)?e:e==null?"":tt(e)||_t(e)&&(e.toString===As||!nt(e.toString))?Cs(e)?je(e.value):JSON.stringify(e,Bs,2):String(e),Bs=(e,n)=>Cs(n)?Bs(e,n.value):Oe(n)?{[`Map(${n.size})`]:[...n.entries()].reduce((a,[l,f],u)=>(a[dn(l,u)+" =>"]=f,a),{})}:xs(n)?{[`Set(${n.size})`]:[...n.values()].map(a=>dn(a))}:ie(n)?dn(n):_t(n)&&!tt(n)&&!Ss(n)?String(n):n,dn=(e,n="")=>{var a;return ie(e)?`Symbol(${(a=e.description)!=null?a:n})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Mt;class Ua{constructor(n=!1){this.detached=n,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Mt,!n&&Mt&&(this.index=(Mt.scopes||(Mt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let n,a;if(this.scopes)for(n=0,a=this.scopes.length;n<a;n++)this.scopes[n].pause();for(n=0,a=this.effects.length;n<a;n++)this.effects[n].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let n,a;if(this.scopes)for(n=0,a=this.scopes.length;n<a;n++)this.scopes[n].resume();for(n=0,a=this.effects.length;n<a;n++)this.effects[n].resume()}}run(n){if(this._active){const a=Mt;try{return Mt=this,n()}finally{Mt=a}}}on(){Mt=this}off(){Mt=this.parent}stop(n){if(this._active){this._active=!1;let a,l;for(a=0,l=this.effects.length;a<l;a++)this.effects[a].stop();for(this.effects.length=0,a=0,l=this.cleanups.length;a<l;a++)this.cleanups[a]();if(this.cleanups.length=0,this.scopes){for(a=0,l=this.scopes.length;a<l;a++)this.scopes[a].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!n){const f=this.parent.scopes.pop();f&&f!==this&&(this.parent.scopes[this.index]=f,f.index=this.index)}this.parent=void 0}}}function Ea(){return Mt}let pt;const pn=new WeakSet;class Ts{constructor(n){this.fn=n,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Mt&&Mt.active&&Mt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,pn.has(this)&&(pn.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Ps(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Sr(this),Fs(this);const n=pt,a=jt;pt=this,jt=!0;try{return this.fn()}finally{Ls(this),pt=n,jt=a,this.flags&=-3}}stop(){if(this.flags&1){for(let n=this.deps;n;n=n.nextDep)$n(n);this.deps=this.depsTail=void 0,Sr(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?pn.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){En(this)&&this.run()}get dirty(){return En(this)}}let Is=0,ri,si;function Ps(e,n=!1){if(e.flags|=8,n){e.next=si,si=e;return}e.next=ri,ri=e}function Kn(){Is++}function qn(){if(--Is>0)return;if(si){let n=si;for(si=void 0;n;){const a=n.next;n.next=void 0,n.flags&=-9,n=a}}let e;for(;ri;){let n=ri;for(ri=void 0;n;){const a=n.next;if(n.next=void 0,n.flags&=-9,n.flags&1)try{n.trigger()}catch(l){e||(e=l)}n=a}}if(e)throw e}function Fs(e){for(let n=e.deps;n;n=n.nextDep)n.version=-1,n.prevActiveLink=n.dep.activeLink,n.dep.activeLink=n}function Ls(e){let n,a=e.depsTail,l=a;for(;l;){const f=l.prevDep;l.version===-1?(l===a&&(a=f),$n(l),Ca(l)):n=l,l.dep.activeLink=l.prevActiveLink,l.prevActiveLink=void 0,l=f}e.deps=n,e.depsTail=a}function En(e){for(let n=e.deps;n;n=n.nextDep)if(n.dep.version!==n.version||n.dep.computed&&(ks(n.dep.computed)||n.dep.version!==n.version))return!0;return!!e._dirty}function ks(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===di))return;e.globalVersion=di;const n=e.dep;if(e.flags|=2,n.version>0&&!e.isSSR&&e.deps&&!En(e)){e.flags&=-3;return}const a=pt,l=jt;pt=e,jt=!0;try{Fs(e);const f=e.fn(e._value);(n.version===0||ge(f,e._value))&&(e._value=f,n.version++)}catch(f){throw n.version++,f}finally{pt=a,jt=l,Ls(e),e.flags&=-3}}function $n(e,n=!1){const{dep:a,prevSub:l,nextSub:f}=e;if(l&&(l.nextSub=f,e.prevSub=void 0),f&&(f.prevSub=l,e.nextSub=void 0),a.subs===e&&(a.subs=l,!l&&a.computed)){a.computed.flags&=-5;for(let u=a.computed.deps;u;u=u.nextDep)$n(u,!0)}!n&&!--a.sc&&a.map&&a.map.delete(a.key)}function Ca(e){const{prevDep:n,nextDep:a}=e;n&&(n.nextDep=a,e.prevDep=void 0),a&&(a.prevDep=n,e.nextDep=void 0)}let jt=!0;const Rs=[];function we(){Rs.push(jt),jt=!1}function xe(){const e=Rs.pop();jt=e===void 0?!0:e}function Sr(e){const{cleanup:n}=e;if(e.cleanup=void 0,n){const a=pt;pt=void 0;try{n()}finally{pt=a}}}let di=0;class Ba{constructor(n,a){this.sub=n,this.dep=a,this.version=a.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Wn{constructor(n){this.computed=n,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(n){if(!pt||!jt||pt===this.computed)return;let a=this.activeLink;if(a===void 0||a.sub!==pt)a=this.activeLink=new Ba(pt,this),pt.deps?(a.prevDep=pt.depsTail,pt.depsTail.nextDep=a,pt.depsTail=a):pt.deps=pt.depsTail=a,zs(a);else if(a.version===-1&&(a.version=this.version,a.nextDep)){const l=a.nextDep;l.prevDep=a.prevDep,a.prevDep&&(a.prevDep.nextDep=l),a.prevDep=pt.depsTail,a.nextDep=void 0,pt.depsTail.nextDep=a,pt.depsTail=a,pt.deps===a&&(pt.deps=l)}return a}trigger(n){this.version++,di++,this.notify(n)}notify(n){Kn();try{for(let a=this.subs;a;a=a.prevSub)a.sub.notify()&&a.sub.dep.notify()}finally{qn()}}}function zs(e){if(e.dep.sc++,e.sub.flags&4){const n=e.dep.computed;if(n&&!e.dep.subs){n.flags|=20;for(let l=n.deps;l;l=l.nextDep)zs(l)}const a=e.dep.subs;a!==e&&(e.prevSub=a,a&&(a.nextSub=e)),e.dep.subs=e}}const Cn=new WeakMap,Te=Symbol(""),Bn=Symbol(""),pi=Symbol("");function At(e,n,a){if(jt&&pt){let l=Cn.get(e);l||Cn.set(e,l=new Map);let f=l.get(a);f||(l.set(a,f=new Wn),f.map=l,f.key=a),f.track()}}function le(e,n,a,l,f,u){const d=Cn.get(e);if(!d){di++;return}const o=p=>{p&&p.trigger()};if(Kn(),n==="clear")d.forEach(o);else{const p=tt(e),m=p&&Vn(a);if(p&&a==="length"){const y=Number(l);d.forEach((v,S)=>{(S==="length"||S===pi||!ie(S)&&S>=y)&&o(v)})}else switch((a!==void 0||d.has(void 0))&&o(d.get(a)),m&&o(d.get(pi)),n){case"add":p?m&&o(d.get("length")):(o(d.get(Te)),Oe(e)&&o(d.get(Bn)));break;case"delete":p||(o(d.get(Te)),Oe(e)&&o(d.get(Bn)));break;case"set":Oe(e)&&o(d.get(Te));break}}qn()}function Re(e){const n=at(e);return n===e?n:(At(n,"iterate",pi),Yt(e)?n:n.map(Bt))}function Xn(e){return At(e=at(e),"iterate",pi),e}const Ta={__proto__:null,[Symbol.iterator](){return _n(this,Symbol.iterator,Bt)},concat(...e){return Re(this).concat(...e.map(n=>tt(n)?Re(n):n))},entries(){return _n(this,"entries",e=>(e[1]=Bt(e[1]),e))},every(e,n){return re(this,"every",e,n,void 0,arguments)},filter(e,n){return re(this,"filter",e,n,a=>a.map(Bt),arguments)},find(e,n){return re(this,"find",e,n,Bt,arguments)},findIndex(e,n){return re(this,"findIndex",e,n,void 0,arguments)},findLast(e,n){return re(this,"findLast",e,n,Bt,arguments)},findLastIndex(e,n){return re(this,"findLastIndex",e,n,void 0,arguments)},forEach(e,n){return re(this,"forEach",e,n,void 0,arguments)},includes(...e){return gn(this,"includes",e)},indexOf(...e){return gn(this,"indexOf",e)},join(e){return Re(this).join(e)},lastIndexOf(...e){return gn(this,"lastIndexOf",e)},map(e,n){return re(this,"map",e,n,void 0,arguments)},pop(){return Ze(this,"pop")},push(...e){return Ze(this,"push",e)},reduce(e,...n){return Ur(this,"reduce",e,n)},reduceRight(e,...n){return Ur(this,"reduceRight",e,n)},shift(){return Ze(this,"shift")},some(e,n){return re(this,"some",e,n,void 0,arguments)},splice(...e){return Ze(this,"splice",e)},toReversed(){return Re(this).toReversed()},toSorted(e){return Re(this).toSorted(e)},toSpliced(...e){return Re(this).toSpliced(...e)},unshift(...e){return Ze(this,"unshift",e)},values(){return _n(this,"values",Bt)}};function _n(e,n,a){const l=Xn(e),f=l[n]();return l!==e&&!Yt(e)&&(f._next=f.next,f.next=()=>{const u=f._next();return u.value&&(u.value=a(u.value)),u}),f}const Ia=Array.prototype;function re(e,n,a,l,f,u){const d=Xn(e),o=d!==e&&!Yt(e),p=d[n];if(p!==Ia[n]){const v=p.apply(e,u);return o?Bt(v):v}let m=a;d!==e&&(o?m=function(v,S){return a.call(this,Bt(v),S,e)}:a.length>2&&(m=function(v,S){return a.call(this,v,S,e)}));const y=p.call(d,m,l);return o&&f?f(y):y}function Ur(e,n,a,l){const f=Xn(e);let u=a;return f!==e&&(Yt(e)?a.length>3&&(u=function(d,o,p){return a.call(this,d,o,p,e)}):u=function(d,o,p){return a.call(this,d,Bt(o),p,e)}),f[n](u,...l)}function gn(e,n,a){const l=at(e);At(l,"iterate",pi);const f=l[n](...a);return(f===-1||f===!1)&&Qn(a[0])?(a[0]=at(a[0]),l[n](...a)):f}function Ze(e,n,a=[]){we(),Kn();const l=at(e)[n].apply(e,a);return qn(),xe(),l}const Pa=Nn("__proto__,__v_isRef,__isVue"),Ms=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(ie));function Fa(e){ie(e)||(e=String(e));const n=at(this);return At(n,"has",e),n.hasOwnProperty(e)}class Ds{constructor(n=!1,a=!1){this._isReadonly=n,this._isShallow=a}get(n,a,l){if(a==="__v_skip")return n.__v_skip;const f=this._isReadonly,u=this._isShallow;if(a==="__v_isReactive")return!f;if(a==="__v_isReadonly")return f;if(a==="__v_isShallow")return u;if(a==="__v_raw")return l===(f?u?Ga:Gs:u?Hs:Ns).get(n)||Object.getPrototypeOf(n)===Object.getPrototypeOf(l)?n:void 0;const d=tt(n);if(!f){let p;if(d&&(p=Ta[a]))return p;if(a==="hasOwnProperty")return Fa}const o=Reflect.get(n,a,Ut(n)?n:l);return(ie(a)?Ms.has(a):Pa(a))||(f||At(n,"get",a),u)?o:Ut(o)?d&&Vn(a)?o:o.value:_t(o)?f?js(o):tn(o):o}}class Os extends Ds{constructor(n=!1){super(!1,n)}set(n,a,l,f){let u=n[a];if(!this._isShallow){const p=Pe(u);if(!Yt(l)&&!Pe(l)&&(u=at(u),l=at(l)),!tt(n)&&Ut(u)&&!Ut(l))return p?!1:(u.value=l,!0)}const d=tt(n)&&Vn(a)?Number(a)<n.length:lt(n,a),o=Reflect.set(n,a,l,Ut(n)?n:f);return n===at(f)&&(d?ge(l,u)&&le(n,"set",a,l):le(n,"add",a,l)),o}deleteProperty(n,a){const l=lt(n,a);n[a];const f=Reflect.deleteProperty(n,a);return f&&l&&le(n,"delete",a,void 0),f}has(n,a){const l=Reflect.has(n,a);return(!ie(a)||!Ms.has(a))&&At(n,"has",a),l}ownKeys(n){return At(n,"iterate",tt(n)?"length":Te),Reflect.ownKeys(n)}}class La extends Ds{constructor(n=!1){super(!0,n)}set(n,a){return!0}deleteProperty(n,a){return!0}}const ka=new Os,Ra=new La,za=new Os(!0);const Tn=e=>e,Bi=e=>Reflect.getPrototypeOf(e);function Ma(e,n,a){return function(...l){const f=this.__v_raw,u=at(f),d=Oe(u),o=e==="entries"||e===Symbol.iterator&&d,p=e==="keys"&&d,m=f[e](...l),y=a?Tn:n?In:Bt;return!n&&At(u,"iterate",p?Bn:Te),{next(){const{value:v,done:S}=m.next();return S?{value:v,done:S}:{value:o?[y(v[0]),y(v[1])]:y(v),done:S}},[Symbol.iterator](){return this}}}}function Ti(e){return function(...n){return e==="delete"?!1:e==="clear"?void 0:this}}function Da(e,n){const a={get(f){const u=this.__v_raw,d=at(u),o=at(f);e||(ge(f,o)&&At(d,"get",f),At(d,"get",o));const{has:p}=Bi(d),m=n?Tn:e?In:Bt;if(p.call(d,f))return m(u.get(f));if(p.call(d,o))return m(u.get(o));u!==d&&u.get(f)},get size(){const f=this.__v_raw;return!e&&At(at(f),"iterate",Te),Reflect.get(f,"size",f)},has(f){const u=this.__v_raw,d=at(u),o=at(f);return e||(ge(f,o)&&At(d,"has",f),At(d,"has",o)),f===o?u.has(f):u.has(f)||u.has(o)},forEach(f,u){const d=this,o=d.__v_raw,p=at(o),m=n?Tn:e?In:Bt;return!e&&At(p,"iterate",Te),o.forEach((y,v)=>f.call(u,m(y),m(v),d))}};return Et(a,e?{add:Ti("add"),set:Ti("set"),delete:Ti("delete"),clear:Ti("clear")}:{add(f){!n&&!Yt(f)&&!Pe(f)&&(f=at(f));const u=at(this);return Bi(u).has.call(u,f)||(u.add(f),le(u,"add",f,f)),this},set(f,u){!n&&!Yt(u)&&!Pe(u)&&(u=at(u));const d=at(this),{has:o,get:p}=Bi(d);let m=o.call(d,f);m||(f=at(f),m=o.call(d,f));const y=p.call(d,f);return d.set(f,u),m?ge(u,y)&&le(d,"set",f,u):le(d,"add",f,u),this},delete(f){const u=at(this),{has:d,get:o}=Bi(u);let p=d.call(u,f);p||(f=at(f),p=d.call(u,f)),o&&o.call(u,f);const m=u.delete(f);return p&&le(u,"delete",f,void 0),m},clear(){const f=at(this),u=f.size!==0,d=f.clear();return u&&le(f,"clear",void 0,void 0),d}}),["keys","values","entries",Symbol.iterator].forEach(f=>{a[f]=Ma(f,e,n)}),a}function Zn(e,n){const a=Da(e,n);return(l,f,u)=>f==="__v_isReactive"?!e:f==="__v_isReadonly"?e:f==="__v_raw"?l:Reflect.get(lt(a,f)&&f in l?a:l,f,u)}const Oa={get:Zn(!1,!1)},Na={get:Zn(!1,!0)},Ha={get:Zn(!0,!1)};const Ns=new WeakMap,Hs=new WeakMap,Gs=new WeakMap,Ga=new WeakMap;function Va(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ja(e){return e.__v_skip||!Object.isExtensible(e)?0:Va(_a(e))}function tn(e){return Pe(e)?e:Jn(e,!1,ka,Oa,Ns)}function Vs(e){return Jn(e,!1,za,Na,Hs)}function js(e){return Jn(e,!0,Ra,Ha,Gs)}function Jn(e,n,a,l,f){if(!_t(e)||e.__v_raw&&!(n&&e.__v_isReactive))return e;const u=f.get(e);if(u)return u;const d=ja(e);if(d===0)return e;const o=new Proxy(e,d===2?l:a);return f.set(e,o),o}function oi(e){return Pe(e)?oi(e.__v_raw):!!(e&&e.__v_isReactive)}function Pe(e){return!!(e&&e.__v_isReadonly)}function Yt(e){return!!(e&&e.__v_isShallow)}function Qn(e){return e?!!e.__v_raw:!1}function at(e){const n=e&&e.__v_raw;return n?at(n):e}function Ya(e){return!lt(e,"__v_skip")&&Object.isExtensible(e)&&Us(e,"__v_skip",!0),e}const Bt=e=>_t(e)?tn(e):e,In=e=>_t(e)?js(e):e;function Ut(e){return e?e.__v_isRef===!0:!1}function Ka(e){return Ys(e,!1)}function qa(e){return Ys(e,!0)}function Ys(e,n){return Ut(e)?e:new $a(e,n)}class $a{constructor(n,a){this.dep=new Wn,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=a?n:at(n),this._value=a?n:Bt(n),this.__v_isShallow=a}get value(){return this.dep.track(),this._value}set value(n){const a=this._rawValue,l=this.__v_isShallow||Yt(n)||Pe(n);n=l?n:at(n),ge(n,a)&&(this._rawValue=n,this._value=l?n:Bt(n),this.dep.trigger())}}function Ne(e){return Ut(e)?e.value:e}const Wa={get:(e,n,a)=>n==="__v_raw"?e:Ne(Reflect.get(e,n,a)),set:(e,n,a,l)=>{const f=e[n];return Ut(f)&&!Ut(a)?(f.value=a,!0):Reflect.set(e,n,a,l)}};function Ks(e){return oi(e)?e:new Proxy(e,Wa)}class Xa{constructor(n,a,l){this.fn=n,this.setter=a,this._value=void 0,this.dep=new Wn(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=di-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!a,this.isSSR=l}notify(){if(this.flags|=16,!(this.flags&8)&&pt!==this)return Ps(this,!0),!0}get value(){const n=this.dep.track();return ks(this),n&&(n.version=this.dep.version),this._value}set value(n){this.setter&&this.setter(n)}}function Za(e,n,a=!1){let l,f;return nt(e)?l=e:(l=e.get,f=e.set),new Xa(l,f,a)}const Ii={},Ni=new WeakMap;let Ue;function Ja(e,n=!1,a=Ue){if(a){let l=Ni.get(a);l||Ni.set(a,l=[]),l.push(e)}}function Qa(e,n,a=ht){const{immediate:l,deep:f,once:u,scheduler:d,augmentJob:o,call:p}=a,m=h=>f?h:Yt(h)||f===!1||f===0?fe(h,1):fe(h);let y,v,S,U,b=!1,z=!1;if(Ut(e)?(v=()=>e.value,b=Yt(e)):oi(e)?(v=()=>m(e),b=!0):tt(e)?(z=!0,b=e.some(h=>oi(h)||Yt(h)),v=()=>e.map(h=>{if(Ut(h))return h.value;if(oi(h))return m(h);if(nt(h))return p?p(h,2):h()})):nt(e)?n?v=p?()=>p(e,2):e:v=()=>{if(S){we();try{S()}finally{xe()}}const h=Ue;Ue=y;try{return p?p(e,3,[U]):e(U)}finally{Ue=h}}:v=te,n&&f){const h=v,_=f===!0?1/0:f;v=()=>fe(h(),_)}const t=Ea(),r=()=>{y.stop(),t&&t.active&&Gn(t.effects,y)};if(u&&n){const h=n;n=(..._)=>{h(..._),r()}}let s=z?new Array(e.length).fill(Ii):Ii;const c=h=>{if(!(!(y.flags&1)||!y.dirty&&!h))if(n){const _=y.run();if(f||b||(z?_.some((g,A)=>ge(g,s[A])):ge(_,s))){S&&S();const g=Ue;Ue=y;try{const A=[_,s===Ii?void 0:z&&s[0]===Ii?[]:s,U];p?p(n,3,A):n(...A),s=_}finally{Ue=g}}}else y.run()};return o&&o(c),y=new Ts(v),y.scheduler=d?()=>d(c,!1):c,U=h=>Ja(h,!1,y),S=y.onStop=()=>{const h=Ni.get(y);if(h){if(p)p(h,4);else for(const _ of h)_();Ni.delete(y)}},n?l?c(!0):s=y.run():d?d(c.bind(null,!0),!0):y.run(),r.pause=y.pause.bind(y),r.resume=y.resume.bind(y),r.stop=r,r}function fe(e,n=1/0,a){if(n<=0||!_t(e)||e.__v_skip||(a=a||new Set,a.has(e)))return e;if(a.add(e),n--,Ut(e))fe(e.value,n,a);else if(tt(e))for(let l=0;l<e.length;l++)fe(e[l],n,a);else if(xs(e)||Oe(e))e.forEach(l=>{fe(l,n,a)});else if(Ss(e)){for(const l in e)fe(e[l],n,a);for(const l of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,l)&&fe(e[l],n,a)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ui(e,n,a,l){try{return l?e(...l):e()}catch(f){en(f,n,a)}}function ne(e,n,a,l){if(nt(e)){const f=Ui(e,n,a,l);return f&&bs(f)&&f.catch(u=>{en(u,n,a)}),f}if(tt(e)){const f=[];for(let u=0;u<e.length;u++)f.push(ne(e[u],n,a,l));return f}}function en(e,n,a,l=!0){const f=n?n.vnode:null,{errorHandler:u,throwUnhandledErrorInProduction:d}=n&&n.appContext.config||ht;if(n){let o=n.parent;const p=n.proxy,m=`https://vuejs.org/error-reference/#runtime-${a}`;for(;o;){const y=o.ec;if(y){for(let v=0;v<y.length;v++)if(y[v](e,p,m)===!1)return}o=o.parent}if(u){we(),Ui(u,null,10,[e,p,m]),xe();return}}tl(e,a,f,l,d)}function tl(e,n,a,l=!0,f=!1){if(f)throw e;console.error(e)}const Tt=[];let Jt=-1;const He=[];let de=null,ze=0;const qs=Promise.resolve();let Hi=null;function $s(e){const n=Hi||qs;return e?n.then(this?e.bind(this):e):n}function el(e){let n=Jt+1,a=Tt.length;for(;n<a;){const l=n+a>>>1,f=Tt[l],u=_i(f);u<e||u===e&&f.flags&2?n=l+1:a=l}return n}function tr(e){if(!(e.flags&1)){const n=_i(e),a=Tt[Tt.length-1];!a||!(e.flags&2)&&n>=_i(a)?Tt.push(e):Tt.splice(el(n),0,e),e.flags|=1,Ws()}}function Ws(){Hi||(Hi=qs.then(Zs))}function il(e){tt(e)?He.push(...e):de&&e.id===-1?de.splice(ze+1,0,e):e.flags&1||(He.push(e),e.flags|=1),Ws()}function Er(e,n,a=Jt+1){for(;a<Tt.length;a++){const l=Tt[a];if(l&&l.flags&2){if(e&&l.id!==e.uid)continue;Tt.splice(a,1),a--,l.flags&4&&(l.flags&=-2),l(),l.flags&4||(l.flags&=-2)}}}function Xs(e){if(He.length){const n=[...new Set(He)].sort((a,l)=>_i(a)-_i(l));if(He.length=0,de){de.push(...n);return}for(de=n,ze=0;ze<de.length;ze++){const a=de[ze];a.flags&4&&(a.flags&=-2),a.flags&8||a(),a.flags&=-2}de=null,ze=0}}const _i=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Zs(e){try{for(Jt=0;Jt<Tt.length;Jt++){const n=Tt[Jt];n&&!(n.flags&8)&&(n.flags&4&&(n.flags&=-2),Ui(n,n.i,n.i?15:14),n.flags&4||(n.flags&=-2))}}finally{for(;Jt<Tt.length;Jt++){const n=Tt[Jt];n&&(n.flags&=-2)}Jt=-1,Tt.length=0,Xs(),Hi=null,(Tt.length||He.length)&&Zs()}}let Dt=null,Js=null;function Gi(e){const n=Dt;return Dt=e,Js=e&&e.type.__scopeId||null,n}function ei(e,n=Dt,a){if(!n||e._n)return e;const l=(...f)=>{l._d&&Mr(-1);const u=Gi(n);let d;try{d=e(...f)}finally{Gi(u),l._d&&Mr(1)}return d};return l._n=!0,l._c=!0,l._d=!0,l}function Pt(e,n){if(Dt===null)return e;const a=on(Dt),l=e.dirs||(e.dirs=[]);for(let f=0;f<n.length;f++){let[u,d,o,p=ht]=n[f];u&&(nt(u)&&(u={mounted:u,updated:u}),u.deep&&fe(d),l.push({dir:u,instance:a,value:d,oldValue:void 0,arg:o,modifiers:p}))}return e}function Ae(e,n,a,l){const f=e.dirs,u=n&&n.dirs;for(let d=0;d<f.length;d++){const o=f[d];u&&(o.oldValue=u[d].value);let p=o.dir[l];p&&(we(),ne(p,a,8,[e.el,o,e,n]),xe())}}const nl=Symbol("_vte"),rl=e=>e.__isTeleport;function er(e,n){e.shapeFlag&6&&e.component?(e.transition=n,er(e.component.subTree,n)):e.shapeFlag&128?(e.ssContent.transition=n.clone(e.ssContent),e.ssFallback.transition=n.clone(e.ssFallback)):e.transition=n}/*! #__NO_SIDE_EFFECTS__ */function Qs(e,n){return nt(e)?Et({name:e.name},n,{setup:e}):e}function to(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Vi(e,n,a,l,f=!1){if(tt(e)){e.forEach((b,z)=>Vi(b,n&&(tt(n)?n[z]:n),a,l,f));return}if(ai(l)&&!f){l.shapeFlag&512&&l.type.__asyncResolved&&l.component.subTree.component&&Vi(e,n,a,l.component.subTree);return}const u=l.shapeFlag&4?on(l.component):l.el,d=f?null:u,{i:o,r:p}=e,m=n&&n.r,y=o.refs===ht?o.refs={}:o.refs,v=o.setupState,S=at(v),U=v===ht?()=>!1:b=>lt(S,b);if(m!=null&&m!==p&&(vt(m)?(y[m]=null,U(m)&&(v[m]=null)):Ut(m)&&(m.value=null)),nt(p))Ui(p,o,12,[d,y]);else{const b=vt(p),z=Ut(p);if(b||z){const t=()=>{if(e.f){const r=b?U(p)?v[p]:y[p]:p.value;f?tt(r)&&Gn(r,u):tt(r)?r.includes(u)||r.push(u):b?(y[p]=[u],U(p)&&(v[p]=y[p])):(p.value=[u],e.k&&(y[e.k]=p.value))}else b?(y[p]=d,U(p)&&(v[p]=d)):z&&(p.value=d,e.k&&(y[e.k]=d))};d?(t.id=-1,zt(t,a)):t()}}}Qi().requestIdleCallback;Qi().cancelIdleCallback;const ai=e=>!!e.type.__asyncLoader,eo=e=>e.type.__isKeepAlive;function sl(e,n){io(e,"a",n)}function ol(e,n){io(e,"da",n)}function io(e,n,a=St){const l=e.__wdc||(e.__wdc=()=>{let f=a;for(;f;){if(f.isDeactivated)return;f=f.parent}return e()});if(nn(n,l,a),a){let f=a.parent;for(;f&&f.parent;)eo(f.parent.vnode)&&al(l,n,a,f),f=f.parent}}function al(e,n,a,l){const f=nn(n,e,l,!0);no(()=>{Gn(l[n],f)},a)}function nn(e,n,a=St,l=!1){if(a){const f=a[e]||(a[e]=[]),u=n.__weh||(n.__weh=(...d)=>{we();const o=Ei(a),p=ne(n,a,e,d);return o(),xe(),p});return l?f.unshift(u):f.push(u),u}}const ue=e=>(n,a=St)=>{(!yi||e==="sp")&&nn(e,(...l)=>n(...l),a)},ll=ue("bm"),fl=ue("m"),cl=ue("bu"),ul=ue("u"),hl=ue("bum"),no=ue("um"),dl=ue("sp"),pl=ue("rtg"),_l=ue("rtc");function gl(e,n=St){nn("ec",e,n)}const yl="components";function Cr(e,n){return vl(yl,e,!0,n)||e}const ml=Symbol.for("v-ndc");function vl(e,n,a=!0,l=!1){const f=Dt||St;if(f){const u=f.type;{const o=af(u,!1);if(o&&(o===n||o===Gt(n)||o===Ji(Gt(n))))return u}const d=Br(f[e]||u[e],n)||Br(f.appContext[e],n);return!d&&l?u:d}}function Br(e,n){return e&&(e[n]||e[Gt(n)]||e[Ji(Gt(n))])}const Pn=e=>e?Eo(e)?on(e):Pn(e.parent):null,li=Et(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Pn(e.parent),$root:e=>Pn(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>so(e),$forceUpdate:e=>e.f||(e.f=()=>{tr(e.update)}),$nextTick:e=>e.n||(e.n=$s.bind(e.proxy)),$watch:e=>Nl.bind(e)}),yn=(e,n)=>e!==ht&&!e.__isScriptSetup&&lt(e,n),wl={get({_:e},n){if(n==="__v_skip")return!0;const{ctx:a,setupState:l,data:f,props:u,accessCache:d,type:o,appContext:p}=e;let m;if(n[0]!=="$"){const U=d[n];if(U!==void 0)switch(U){case 1:return l[n];case 2:return f[n];case 4:return a[n];case 3:return u[n]}else{if(yn(l,n))return d[n]=1,l[n];if(f!==ht&&lt(f,n))return d[n]=2,f[n];if((m=e.propsOptions[0])&&lt(m,n))return d[n]=3,u[n];if(a!==ht&&lt(a,n))return d[n]=4,a[n];Fn&&(d[n]=0)}}const y=li[n];let v,S;if(y)return n==="$attrs"&&At(e.attrs,"get",""),y(e);if((v=o.__cssModules)&&(v=v[n]))return v;if(a!==ht&&lt(a,n))return d[n]=4,a[n];if(S=p.config.globalProperties,lt(S,n))return S[n]},set({_:e},n,a){const{data:l,setupState:f,ctx:u}=e;return yn(f,n)?(f[n]=a,!0):l!==ht&&lt(l,n)?(l[n]=a,!0):lt(e.props,n)||n[0]==="$"&&n.slice(1)in e?!1:(u[n]=a,!0)},has({_:{data:e,setupState:n,accessCache:a,ctx:l,appContext:f,propsOptions:u}},d){let o;return!!a[d]||e!==ht&&lt(e,d)||yn(n,d)||(o=u[0])&&lt(o,d)||lt(l,d)||lt(li,d)||lt(f.config.globalProperties,d)},defineProperty(e,n,a){return a.get!=null?e._.accessCache[n]=0:lt(a,"value")&&this.set(e,n,a.value,null),Reflect.defineProperty(e,n,a)}};function Tr(e){return tt(e)?e.reduce((n,a)=>(n[a]=null,n),{}):e}let Fn=!0;function xl(e){const n=so(e),a=e.proxy,l=e.ctx;Fn=!1,n.beforeCreate&&Ir(n.beforeCreate,e,"bc");const{data:f,computed:u,methods:d,watch:o,provide:p,inject:m,created:y,beforeMount:v,mounted:S,beforeUpdate:U,updated:b,activated:z,deactivated:t,beforeDestroy:r,beforeUnmount:s,destroyed:c,unmounted:h,render:_,renderTracked:g,renderTriggered:A,errorCaptured:B,serverPrefetch:T,expose:E,inheritAttrs:I,components:L,directives:R,filters:W}=n;if(m&&bl(m,l,null),d)for(const O in d){const H=d[O];nt(H)&&(l[O]=H.bind(a))}if(f){const O=f.call(a,a);_t(O)&&(e.data=tn(O))}if(Fn=!0,u)for(const O in u){const H=u[O],rt=nt(H)?H.bind(a,a):nt(H.get)?H.get.bind(a,a):te,ct=!nt(H)&&nt(H.set)?H.set.bind(a):te,yt=Vt({get:rt,set:ct});Object.defineProperty(l,O,{enumerable:!0,configurable:!0,get:()=>yt.value,set:gt=>yt.value=gt})}if(o)for(const O in o)ro(o[O],l,a,O);if(p){const O=nt(p)?p.call(a):p;Reflect.ownKeys(O).forEach(H=>{ki(H,O[H])})}y&&Ir(y,e,"c");function it(O,H){tt(H)?H.forEach(rt=>O(rt.bind(a))):H&&O(H.bind(a))}if(it(ll,v),it(fl,S),it(cl,U),it(ul,b),it(sl,z),it(ol,t),it(gl,B),it(_l,g),it(pl,A),it(hl,s),it(no,h),it(dl,T),tt(E))if(E.length){const O=e.exposed||(e.exposed={});E.forEach(H=>{Object.defineProperty(O,H,{get:()=>a[H],set:rt=>a[H]=rt})})}else e.exposed||(e.exposed={});_&&e.render===te&&(e.render=_),I!=null&&(e.inheritAttrs=I),L&&(e.components=L),R&&(e.directives=R),T&&to(e)}function bl(e,n,a=te){tt(e)&&(e=Ln(e));for(const l in e){const f=e[l];let u;_t(f)?"default"in f?u=ce(f.from||l,f.default,!0):u=ce(f.from||l):u=ce(f),Ut(u)?Object.defineProperty(n,l,{enumerable:!0,configurable:!0,get:()=>u.value,set:d=>u.value=d}):n[l]=u}}function Ir(e,n,a){ne(tt(e)?e.map(l=>l.bind(n.proxy)):e.bind(n.proxy),n,a)}function ro(e,n,a,l){let f=l.includes(".")?wo(a,l):()=>a[l];if(vt(e)){const u=n[e];nt(u)&&Ri(f,u)}else if(nt(e))Ri(f,e.bind(a));else if(_t(e))if(tt(e))e.forEach(u=>ro(u,n,a,l));else{const u=nt(e.handler)?e.handler.bind(a):n[e.handler];nt(u)&&Ri(f,u,e)}}function so(e){const n=e.type,{mixins:a,extends:l}=n,{mixins:f,optionsCache:u,config:{optionMergeStrategies:d}}=e.appContext,o=u.get(n);let p;return o?p=o:!f.length&&!a&&!l?p=n:(p={},f.length&&f.forEach(m=>ji(p,m,d,!0)),ji(p,n,d)),_t(n)&&u.set(n,p),p}function ji(e,n,a,l=!1){const{mixins:f,extends:u}=n;u&&ji(e,u,a,!0),f&&f.forEach(d=>ji(e,d,a,!0));for(const d in n)if(!(l&&d==="expose")){const o=Al[d]||a&&a[d];e[d]=o?o(e[d],n[d]):n[d]}return e}const Al={data:Pr,props:Fr,emits:Fr,methods:ii,computed:ii,beforeCreate:Ct,created:Ct,beforeMount:Ct,mounted:Ct,beforeUpdate:Ct,updated:Ct,beforeDestroy:Ct,beforeUnmount:Ct,destroyed:Ct,unmounted:Ct,activated:Ct,deactivated:Ct,errorCaptured:Ct,serverPrefetch:Ct,components:ii,directives:ii,watch:Ul,provide:Pr,inject:Sl};function Pr(e,n){return n?e?function(){return Et(nt(e)?e.call(this,this):e,nt(n)?n.call(this,this):n)}:n:e}function Sl(e,n){return ii(Ln(e),Ln(n))}function Ln(e){if(tt(e)){const n={};for(let a=0;a<e.length;a++)n[e[a]]=e[a];return n}return e}function Ct(e,n){return e?[...new Set([].concat(e,n))]:n}function ii(e,n){return e?Et(Object.create(null),e,n):n}function Fr(e,n){return e?tt(e)&&tt(n)?[...new Set([...e,...n])]:Et(Object.create(null),Tr(e),Tr(n??{})):n}function Ul(e,n){if(!e)return n;if(!n)return e;const a=Et(Object.create(null),e);for(const l in n)a[l]=Ct(e[l],n[l]);return a}function oo(){return{app:null,config:{isNativeTag:da,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let El=0;function Cl(e,n){return function(l,f=null){nt(l)||(l=Et({},l)),f!=null&&!_t(f)&&(f=null);const u=oo(),d=new WeakSet,o=[];let p=!1;const m=u.app={_uid:El++,_component:l,_props:f,_container:null,_context:u,_instance:null,version:ff,get config(){return u.config},set config(y){},use(y,...v){return d.has(y)||(y&&nt(y.install)?(d.add(y),y.install(m,...v)):nt(y)&&(d.add(y),y(m,...v))),m},mixin(y){return u.mixins.includes(y)||u.mixins.push(y),m},component(y,v){return v?(u.components[y]=v,m):u.components[y]},directive(y,v){return v?(u.directives[y]=v,m):u.directives[y]},mount(y,v,S){if(!p){const U=m._ceVNode||mt(l,f);return U.appContext=u,S===!0?S="svg":S===!1&&(S=void 0),e(U,y,S),p=!0,m._container=y,y.__vue_app__=m,on(U.component)}},onUnmount(y){o.push(y)},unmount(){p&&(ne(o,m._instance,16),e(null,m._container),delete m._container.__vue_app__)},provide(y,v){return u.provides[y]=v,m},runWithContext(y){const v=Ge;Ge=m;try{return y()}finally{Ge=v}}};return m}}let Ge=null;function ki(e,n){if(St){let a=St.provides;const l=St.parent&&St.parent.provides;l===a&&(a=St.provides=Object.create(l)),a[e]=n}}function ce(e,n,a=!1){const l=St||Dt;if(l||Ge){const f=Ge?Ge._context.provides:l?l.parent==null?l.vnode.appContext&&l.vnode.appContext.provides:l.parent.provides:void 0;if(f&&e in f)return f[e];if(arguments.length>1)return a&&nt(n)?n.call(l&&l.proxy):n}}const ao={},lo=()=>Object.create(ao),fo=e=>Object.getPrototypeOf(e)===ao;function Bl(e,n,a,l=!1){const f={},u=lo();e.propsDefaults=Object.create(null),co(e,n,f,u);for(const d in e.propsOptions[0])d in f||(f[d]=void 0);a?e.props=l?f:Vs(f):e.type.props?e.props=f:e.props=u,e.attrs=u}function Tl(e,n,a,l){const{props:f,attrs:u,vnode:{patchFlag:d}}=e,o=at(f),[p]=e.propsOptions;let m=!1;if((l||d>0)&&!(d&16)){if(d&8){const y=e.vnode.dynamicProps;for(let v=0;v<y.length;v++){let S=y[v];if(rn(e.emitsOptions,S))continue;const U=n[S];if(p)if(lt(u,S))U!==u[S]&&(u[S]=U,m=!0);else{const b=Gt(S);f[b]=kn(p,o,b,U,e,!1)}else U!==u[S]&&(u[S]=U,m=!0)}}}else{co(e,n,f,u)&&(m=!0);let y;for(const v in o)(!n||!lt(n,v)&&((y=Le(v))===v||!lt(n,y)))&&(p?a&&(a[v]!==void 0||a[y]!==void 0)&&(f[v]=kn(p,o,v,void 0,e,!0)):delete f[v]);if(u!==o)for(const v in u)(!n||!lt(n,v))&&(delete u[v],m=!0)}m&&le(e.attrs,"set","")}function co(e,n,a,l){const[f,u]=e.propsOptions;let d=!1,o;if(n)for(let p in n){if(ni(p))continue;const m=n[p];let y;f&&lt(f,y=Gt(p))?!u||!u.includes(y)?a[y]=m:(o||(o={}))[y]=m:rn(e.emitsOptions,p)||(!(p in l)||m!==l[p])&&(l[p]=m,d=!0)}if(u){const p=at(a),m=o||ht;for(let y=0;y<u.length;y++){const v=u[y];a[v]=kn(f,p,v,m[v],e,!lt(m,v))}}return d}function kn(e,n,a,l,f,u){const d=e[a];if(d!=null){const o=lt(d,"default");if(o&&l===void 0){const p=d.default;if(d.type!==Function&&!d.skipFactory&&nt(p)){const{propsDefaults:m}=f;if(a in m)l=m[a];else{const y=Ei(f);l=m[a]=p.call(null,n),y()}}else l=p;f.ce&&f.ce._setProp(a,l)}d[0]&&(u&&!o?l=!1:d[1]&&(l===""||l===Le(a))&&(l=!0))}return l}const Il=new WeakMap;function uo(e,n,a=!1){const l=a?Il:n.propsCache,f=l.get(e);if(f)return f;const u=e.props,d={},o=[];let p=!1;if(!nt(e)){const y=v=>{p=!0;const[S,U]=uo(v,n,!0);Et(d,S),U&&o.push(...U)};!a&&n.mixins.length&&n.mixins.forEach(y),e.extends&&y(e.extends),e.mixins&&e.mixins.forEach(y)}if(!u&&!p)return _t(e)&&l.set(e,De),De;if(tt(u))for(let y=0;y<u.length;y++){const v=Gt(u[y]);Lr(v)&&(d[v]=ht)}else if(u)for(const y in u){const v=Gt(y);if(Lr(v)){const S=u[y],U=d[v]=tt(S)||nt(S)?{type:S}:Et({},S),b=U.type;let z=!1,t=!0;if(tt(b))for(let r=0;r<b.length;++r){const s=b[r],c=nt(s)&&s.name;if(c==="Boolean"){z=!0;break}else c==="String"&&(t=!1)}else z=nt(b)&&b.name==="Boolean";U[0]=z,U[1]=t,(z||lt(U,"default"))&&o.push(v)}}const m=[d,o];return _t(e)&&l.set(e,m),m}function Lr(e){return e[0]!=="$"&&!ni(e)}const ho=e=>e[0]==="_"||e==="$stable",ir=e=>tt(e)?e.map(Qt):[Qt(e)],Pl=(e,n,a)=>{if(n._n)return n;const l=ei((...f)=>ir(n(...f)),a);return l._c=!1,l},po=(e,n,a)=>{const l=e._ctx;for(const f in e){if(ho(f))continue;const u=e[f];if(nt(u))n[f]=Pl(f,u,l);else if(u!=null){const d=ir(u);n[f]=()=>d}}},_o=(e,n)=>{const a=ir(n);e.slots.default=()=>a},go=(e,n,a)=>{for(const l in n)(a||l!=="_")&&(e[l]=n[l])},Fl=(e,n,a)=>{const l=e.slots=lo();if(e.vnode.shapeFlag&32){const f=n._;f?(go(l,n,a),a&&Us(l,"_",f,!0)):po(n,l)}else n&&_o(e,n)},Ll=(e,n,a)=>{const{vnode:l,slots:f}=e;let u=!0,d=ht;if(l.shapeFlag&32){const o=n._;o?a&&o===1?u=!1:go(f,n,a):(u=!n.$stable,po(n,f)),d=n}else n&&(_o(e,n),d={default:1});if(u)for(const o in f)!ho(o)&&d[o]==null&&delete f[o]},zt=ql;function kl(e){return Rl(e)}function Rl(e,n){const a=Qi();a.__VUE__=!0;const{insert:l,remove:f,patchProp:u,createElement:d,createText:o,createComment:p,setText:m,setElementText:y,parentNode:v,nextSibling:S,setScopeId:U=te,insertStaticContent:b}=e,z=(w,x,C,F=null,M=null,k=null,j=void 0,G=null,N=!!x.dynamicChildren)=>{if(w===x)return;w&&!Je(w,x)&&(F=P(w),gt(w,M,k,!0),w=null),x.patchFlag===-2&&(N=!1,x.dynamicChildren=null);const{type:D,ref:J,shapeFlag:Y}=x;switch(D){case sn:t(w,x,C,F);break;case Fe:r(w,x,C,F);break;case zi:w==null&&s(x,C,F,j);break;case ae:L(w,x,C,F,M,k,j,G,N);break;default:Y&1?_(w,x,C,F,M,k,j,G,N):Y&6?R(w,x,C,F,M,k,j,G,N):(Y&64||Y&128)&&D.process(w,x,C,F,M,k,j,G,N,X)}J!=null&&M&&Vi(J,w&&w.ref,k,x||w,!x)},t=(w,x,C,F)=>{if(w==null)l(x.el=o(x.children),C,F);else{const M=x.el=w.el;x.children!==w.children&&m(M,x.children)}},r=(w,x,C,F)=>{w==null?l(x.el=p(x.children||""),C,F):x.el=w.el},s=(w,x,C,F)=>{[w.el,w.anchor]=b(w.children,x,C,F,w.el,w.anchor)},c=({el:w,anchor:x},C,F)=>{let M;for(;w&&w!==x;)M=S(w),l(w,C,F),w=M;l(x,C,F)},h=({el:w,anchor:x})=>{let C;for(;w&&w!==x;)C=S(w),f(w),w=C;f(x)},_=(w,x,C,F,M,k,j,G,N)=>{x.type==="svg"?j="svg":x.type==="math"&&(j="mathml"),w==null?g(x,C,F,M,k,j,G,N):T(w,x,M,k,j,G,N)},g=(w,x,C,F,M,k,j,G)=>{let N,D;const{props:J,shapeFlag:Y,transition:Z,dirs:et}=w;if(N=w.el=d(w.type,k,J&&J.is,J),Y&8?y(N,w.children):Y&16&&B(w.children,N,null,F,M,mn(w,k),j,G),et&&Ae(w,null,F,"created"),A(N,w,w.scopeId,j,F),J){for(const dt in J)dt!=="value"&&!ni(dt)&&u(N,dt,null,J[dt],k,F);"value"in J&&u(N,"value",null,J.value,k),(D=J.onVnodeBeforeMount)&&Zt(D,F,w)}et&&Ae(w,null,F,"beforeMount");const st=zl(M,Z);st&&Z.beforeEnter(N),l(N,x,C),((D=J&&J.onVnodeMounted)||st||et)&&zt(()=>{D&&Zt(D,F,w),st&&Z.enter(N),et&&Ae(w,null,F,"mounted")},M)},A=(w,x,C,F,M)=>{if(C&&U(w,C),F)for(let k=0;k<F.length;k++)U(w,F[k]);if(M){let k=M.subTree;if(x===k||bo(k.type)&&(k.ssContent===x||k.ssFallback===x)){const j=M.vnode;A(w,j,j.scopeId,j.slotScopeIds,M.parent)}}},B=(w,x,C,F,M,k,j,G,N=0)=>{for(let D=N;D<w.length;D++){const J=w[D]=G?pe(w[D]):Qt(w[D]);z(null,J,x,C,F,M,k,j,G)}},T=(w,x,C,F,M,k,j)=>{const G=x.el=w.el;let{patchFlag:N,dynamicChildren:D,dirs:J}=x;N|=w.patchFlag&16;const Y=w.props||ht,Z=x.props||ht;let et;if(C&&Se(C,!1),(et=Z.onVnodeBeforeUpdate)&&Zt(et,C,x,w),J&&Ae(x,w,C,"beforeUpdate"),C&&Se(C,!0),(Y.innerHTML&&Z.innerHTML==null||Y.textContent&&Z.textContent==null)&&y(G,""),D?E(w.dynamicChildren,D,G,C,F,mn(x,M),k):j||H(w,x,G,null,C,F,mn(x,M),k,!1),N>0){if(N&16)I(G,Y,Z,C,M);else if(N&2&&Y.class!==Z.class&&u(G,"class",null,Z.class,M),N&4&&u(G,"style",Y.style,Z.style,M),N&8){const st=x.dynamicProps;for(let dt=0;dt<st.length;dt++){const ft=st[dt],kt=Y[ft],It=Z[ft];(It!==kt||ft==="value")&&u(G,ft,kt,It,M,C)}}N&1&&w.children!==x.children&&y(G,x.children)}else!j&&D==null&&I(G,Y,Z,C,M);((et=Z.onVnodeUpdated)||J)&&zt(()=>{et&&Zt(et,C,x,w),J&&Ae(x,w,C,"updated")},F)},E=(w,x,C,F,M,k,j)=>{for(let G=0;G<x.length;G++){const N=w[G],D=x[G],J=N.el&&(N.type===ae||!Je(N,D)||N.shapeFlag&70)?v(N.el):C;z(N,D,J,null,F,M,k,j,!0)}},I=(w,x,C,F,M)=>{if(x!==C){if(x!==ht)for(const k in x)!ni(k)&&!(k in C)&&u(w,k,x[k],null,M,F);for(const k in C){if(ni(k))continue;const j=C[k],G=x[k];j!==G&&k!=="value"&&u(w,k,G,j,M,F)}"value"in C&&u(w,"value",x.value,C.value,M)}},L=(w,x,C,F,M,k,j,G,N)=>{const D=x.el=w?w.el:o(""),J=x.anchor=w?w.anchor:o("");let{patchFlag:Y,dynamicChildren:Z,slotScopeIds:et}=x;et&&(G=G?G.concat(et):et),w==null?(l(D,C,F),l(J,C,F),B(x.children||[],C,J,M,k,j,G,N)):Y>0&&Y&64&&Z&&w.dynamicChildren?(E(w.dynamicChildren,Z,C,M,k,j,G),(x.key!=null||M&&x===M.subTree)&&yo(w,x,!0)):H(w,x,C,J,M,k,j,G,N)},R=(w,x,C,F,M,k,j,G,N)=>{x.slotScopeIds=G,w==null?x.shapeFlag&512?M.ctx.activate(x,C,F,j,N):W(x,C,F,M,k,j,N):$(w,x,N)},W=(w,x,C,F,M,k,j)=>{const G=w.component=ef(w,F,M);if(eo(w)&&(G.ctx.renderer=X),nf(G,!1,j),G.asyncDep){if(M&&M.registerDep(G,it,j),!w.el){const N=G.subTree=mt(Fe);r(null,N,x,C)}}else it(G,w,x,C,M,k,j)},$=(w,x,C)=>{const F=x.component=w.component;if(Yl(w,x,C))if(F.asyncDep&&!F.asyncResolved){O(F,x,C);return}else F.next=x,F.update();else x.el=w.el,F.vnode=x},it=(w,x,C,F,M,k,j)=>{const G=()=>{if(w.isMounted){let{next:Y,bu:Z,u:et,parent:st,vnode:dt}=w;{const Wt=mo(w);if(Wt){Y&&(Y.el=dt.el,O(w,Y,j)),Wt.asyncDep.then(()=>{w.isUnmounted||G()});return}}let ft=Y,kt;Se(w,!1),Y?(Y.el=dt.el,O(w,Y,j)):Y=dt,Z&&Li(Z),(kt=Y.props&&Y.props.onVnodeBeforeUpdate)&&Zt(kt,st,Y,dt),Se(w,!0);const It=Rr(w),$t=w.subTree;w.subTree=It,z($t,It,v($t.el),P($t),w,M,k),Y.el=It.el,ft===null&&Kl(w,It.el),et&&zt(et,M),(kt=Y.props&&Y.props.onVnodeUpdated)&&zt(()=>Zt(kt,st,Y,dt),M)}else{let Y;const{el:Z,props:et}=x,{bm:st,m:dt,parent:ft,root:kt,type:It}=w,$t=ai(x);Se(w,!1),st&&Li(st),!$t&&(Y=et&&et.onVnodeBeforeMount)&&Zt(Y,ft,x),Se(w,!0);{kt.ce&&kt.ce._injectChildStyle(It);const Wt=w.subTree=Rr(w);z(null,Wt,C,F,w,M,k),x.el=Wt.el}if(dt&&zt(dt,M),!$t&&(Y=et&&et.onVnodeMounted)){const Wt=x;zt(()=>Zt(Y,ft,Wt),M)}(x.shapeFlag&256||ft&&ai(ft.vnode)&&ft.vnode.shapeFlag&256)&&w.a&&zt(w.a,M),w.isMounted=!0,x=C=F=null}};w.scope.on();const N=w.effect=new Ts(G);w.scope.off();const D=w.update=N.run.bind(N),J=w.job=N.runIfDirty.bind(N);J.i=w,J.id=w.uid,N.scheduler=()=>tr(J),Se(w,!0),D()},O=(w,x,C)=>{x.component=w;const F=w.vnode.props;w.vnode=x,w.next=null,Tl(w,x.props,F,C),Ll(w,x.children,C),we(),Er(w),xe()},H=(w,x,C,F,M,k,j,G,N=!1)=>{const D=w&&w.children,J=w?w.shapeFlag:0,Y=x.children,{patchFlag:Z,shapeFlag:et}=x;if(Z>0){if(Z&128){ct(D,Y,C,F,M,k,j,G,N);return}else if(Z&256){rt(D,Y,C,F,M,k,j,G,N);return}}et&8?(J&16&&bt(D,M,k),Y!==D&&y(C,Y)):J&16?et&16?ct(D,Y,C,F,M,k,j,G,N):bt(D,M,k,!0):(J&8&&y(C,""),et&16&&B(Y,C,F,M,k,j,G,N))},rt=(w,x,C,F,M,k,j,G,N)=>{w=w||De,x=x||De;const D=w.length,J=x.length,Y=Math.min(D,J);let Z;for(Z=0;Z<Y;Z++){const et=x[Z]=N?pe(x[Z]):Qt(x[Z]);z(w[Z],et,C,null,M,k,j,G,N)}D>J?bt(w,M,k,!0,!1,Y):B(x,C,F,M,k,j,G,N,Y)},ct=(w,x,C,F,M,k,j,G,N)=>{let D=0;const J=x.length;let Y=w.length-1,Z=J-1;for(;D<=Y&&D<=Z;){const et=w[D],st=x[D]=N?pe(x[D]):Qt(x[D]);if(Je(et,st))z(et,st,C,null,M,k,j,G,N);else break;D++}for(;D<=Y&&D<=Z;){const et=w[Y],st=x[Z]=N?pe(x[Z]):Qt(x[Z]);if(Je(et,st))z(et,st,C,null,M,k,j,G,N);else break;Y--,Z--}if(D>Y){if(D<=Z){const et=Z+1,st=et<J?x[et].el:F;for(;D<=Z;)z(null,x[D]=N?pe(x[D]):Qt(x[D]),C,st,M,k,j,G,N),D++}}else if(D>Z)for(;D<=Y;)gt(w[D],M,k,!0),D++;else{const et=D,st=D,dt=new Map;for(D=st;D<=Z;D++){const Rt=x[D]=N?pe(x[D]):Qt(x[D]);Rt.key!=null&&dt.set(Rt.key,D)}let ft,kt=0;const It=Z-st+1;let $t=!1,Wt=0;const Xe=new Array(It);for(D=0;D<It;D++)Xe[D]=0;for(D=et;D<=Y;D++){const Rt=w[D];if(kt>=It){gt(Rt,M,k,!0);continue}let Xt;if(Rt.key!=null)Xt=dt.get(Rt.key);else for(ft=st;ft<=Z;ft++)if(Xe[ft-st]===0&&Je(Rt,x[ft])){Xt=ft;break}Xt===void 0?gt(Rt,M,k,!0):(Xe[Xt-st]=D+1,Xt>=Wt?Wt=Xt:$t=!0,z(Rt,x[Xt],C,null,M,k,j,G,N),kt++)}const wr=$t?Ml(Xe):De;for(ft=wr.length-1,D=It-1;D>=0;D--){const Rt=st+D,Xt=x[Rt],xr=Rt+1<J?x[Rt+1].el:F;Xe[D]===0?z(null,Xt,C,xr,M,k,j,G,N):$t&&(ft<0||D!==wr[ft]?yt(Xt,C,xr,2):ft--)}}},yt=(w,x,C,F,M=null)=>{const{el:k,type:j,transition:G,children:N,shapeFlag:D}=w;if(D&6){yt(w.component.subTree,x,C,F);return}if(D&128){w.suspense.move(x,C,F);return}if(D&64){j.move(w,x,C,X);return}if(j===ae){l(k,x,C);for(let Y=0;Y<N.length;Y++)yt(N[Y],x,C,F);l(w.anchor,x,C);return}if(j===zi){c(w,x,C);return}if(F!==2&&D&1&&G)if(F===0)G.beforeEnter(k),l(k,x,C),zt(()=>G.enter(k),M);else{const{leave:Y,delayLeave:Z,afterLeave:et}=G,st=()=>l(k,x,C),dt=()=>{Y(k,()=>{st(),et&&et()})};Z?Z(k,st,dt):dt()}else l(k,x,C)},gt=(w,x,C,F=!1,M=!1)=>{const{type:k,props:j,ref:G,children:N,dynamicChildren:D,shapeFlag:J,patchFlag:Y,dirs:Z,cacheIndex:et}=w;if(Y===-2&&(M=!1),G!=null&&Vi(G,null,C,w,!0),et!=null&&(x.renderCache[et]=void 0),J&256){x.ctx.deactivate(w);return}const st=J&1&&Z,dt=!ai(w);let ft;if(dt&&(ft=j&&j.onVnodeBeforeUnmount)&&Zt(ft,x,w),J&6)Q(w.component,C,F);else{if(J&128){w.suspense.unmount(C,F);return}st&&Ae(w,null,x,"beforeUnmount"),J&64?w.type.remove(w,x,C,X,F):D&&!D.hasOnce&&(k!==ae||Y>0&&Y&64)?bt(D,x,C,!1,!0):(k===ae&&Y&384||!M&&J&16)&&bt(N,x,C),F&&wt(w)}(dt&&(ft=j&&j.onVnodeUnmounted)||st)&&zt(()=>{ft&&Zt(ft,x,w),st&&Ae(w,null,x,"unmounted")},C)},wt=w=>{const{type:x,el:C,anchor:F,transition:M}=w;if(x===ae){xt(C,F);return}if(x===zi){h(w);return}const k=()=>{f(C),M&&!M.persisted&&M.afterLeave&&M.afterLeave()};if(w.shapeFlag&1&&M&&!M.persisted){const{leave:j,delayLeave:G}=M,N=()=>j(C,k);G?G(w.el,k,N):N()}else k()},xt=(w,x)=>{let C;for(;w!==x;)C=S(w),f(w),w=C;f(x)},Q=(w,x,C)=>{const{bum:F,scope:M,job:k,subTree:j,um:G,m:N,a:D}=w;kr(N),kr(D),F&&Li(F),M.stop(),k&&(k.flags|=8,gt(j,w,x,C)),G&&zt(G,x),zt(()=>{w.isUnmounted=!0},x),x&&x.pendingBranch&&!x.isUnmounted&&w.asyncDep&&!w.asyncResolved&&w.suspenseId===x.pendingId&&(x.deps--,x.deps===0&&x.resolve())},bt=(w,x,C,F=!1,M=!1,k=0)=>{for(let j=k;j<w.length;j++)gt(w[j],x,C,F,M)},P=w=>{if(w.shapeFlag&6)return P(w.component.subTree);if(w.shapeFlag&128)return w.suspense.next();const x=S(w.anchor||w.el),C=x&&x[nl];return C?S(C):x};let K=!1;const V=(w,x,C)=>{w==null?x._vnode&&gt(x._vnode,null,null,!0):z(x._vnode||null,w,x,null,null,null,C),x._vnode=w,K||(K=!0,Er(),Xs(),K=!1)},X={p:z,um:gt,m:yt,r:wt,mt:W,mc:B,pc:H,pbc:E,n:P,o:e};return{render:V,hydrate:void 0,createApp:Cl(V)}}function mn({type:e,props:n},a){return a==="svg"&&e==="foreignObject"||a==="mathml"&&e==="annotation-xml"&&n&&n.encoding&&n.encoding.includes("html")?void 0:a}function Se({effect:e,job:n},a){a?(e.flags|=32,n.flags|=4):(e.flags&=-33,n.flags&=-5)}function zl(e,n){return(!e||e&&!e.pendingBranch)&&n&&!n.persisted}function yo(e,n,a=!1){const l=e.children,f=n.children;if(tt(l)&&tt(f))for(let u=0;u<l.length;u++){const d=l[u];let o=f[u];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=f[u]=pe(f[u]),o.el=d.el),!a&&o.patchFlag!==-2&&yo(d,o)),o.type===sn&&(o.el=d.el)}}function Ml(e){const n=e.slice(),a=[0];let l,f,u,d,o;const p=e.length;for(l=0;l<p;l++){const m=e[l];if(m!==0){if(f=a[a.length-1],e[f]<m){n[l]=f,a.push(l);continue}for(u=0,d=a.length-1;u<d;)o=u+d>>1,e[a[o]]<m?u=o+1:d=o;m<e[a[u]]&&(u>0&&(n[l]=a[u-1]),a[u]=l)}}for(u=a.length,d=a[u-1];u-- >0;)a[u]=d,d=n[d];return a}function mo(e){const n=e.subTree.component;if(n)return n.asyncDep&&!n.asyncResolved?n:mo(n)}function kr(e){if(e)for(let n=0;n<e.length;n++)e[n].flags|=8}const Dl=Symbol.for("v-scx"),Ol=()=>ce(Dl);function Ri(e,n,a){return vo(e,n,a)}function vo(e,n,a=ht){const{immediate:l,deep:f,flush:u,once:d}=a,o=Et({},a),p=n&&l||!n&&u!=="post";let m;if(yi){if(u==="sync"){const U=Ol();m=U.__watcherHandles||(U.__watcherHandles=[])}else if(!p){const U=()=>{};return U.stop=te,U.resume=te,U.pause=te,U}}const y=St;o.call=(U,b,z)=>ne(U,y,b,z);let v=!1;u==="post"?o.scheduler=U=>{zt(U,y&&y.suspense)}:u!=="sync"&&(v=!0,o.scheduler=(U,b)=>{b?U():tr(U)}),o.augmentJob=U=>{n&&(U.flags|=4),v&&(U.flags|=2,y&&(U.id=y.uid,U.i=y))};const S=Qa(e,n,o);return yi&&(m?m.push(S):p&&S()),S}function Nl(e,n,a){const l=this.proxy,f=vt(e)?e.includes(".")?wo(l,e):()=>l[e]:e.bind(l,l);let u;nt(n)?u=n:(u=n.handler,a=n);const d=Ei(this),o=vo(f,u.bind(l),a);return d(),o}function wo(e,n){const a=n.split(".");return()=>{let l=e;for(let f=0;f<a.length&&l;f++)l=l[a[f]];return l}}const Hl=(e,n)=>n==="modelValue"||n==="model-value"?e.modelModifiers:e[`${n}Modifiers`]||e[`${Gt(n)}Modifiers`]||e[`${Le(n)}Modifiers`];function Gl(e,n,...a){if(e.isUnmounted)return;const l=e.vnode.props||ht;let f=a;const u=n.startsWith("update:"),d=u&&Hl(l,n.slice(7));d&&(d.trim&&(f=a.map(y=>vt(y)?y.trim():y)),d.number&&(f=a.map(Un)));let o,p=l[o=hn(n)]||l[o=hn(Gt(n))];!p&&u&&(p=l[o=hn(Le(n))]),p&&ne(p,e,6,f);const m=l[o+"Once"];if(m){if(!e.emitted)e.emitted={};else if(e.emitted[o])return;e.emitted[o]=!0,ne(m,e,6,f)}}function xo(e,n,a=!1){const l=n.emitsCache,f=l.get(e);if(f!==void 0)return f;const u=e.emits;let d={},o=!1;if(!nt(e)){const p=m=>{const y=xo(m,n,!0);y&&(o=!0,Et(d,y))};!a&&n.mixins.length&&n.mixins.forEach(p),e.extends&&p(e.extends),e.mixins&&e.mixins.forEach(p)}return!u&&!o?(_t(e)&&l.set(e,null),null):(tt(u)?u.forEach(p=>d[p]=null):Et(d,u),_t(e)&&l.set(e,d),d)}function rn(e,n){return!e||!Xi(n)?!1:(n=n.slice(2).replace(/Once$/,""),lt(e,n[0].toLowerCase()+n.slice(1))||lt(e,Le(n))||lt(e,n))}function Rr(e){const{type:n,vnode:a,proxy:l,withProxy:f,propsOptions:[u],slots:d,attrs:o,emit:p,render:m,renderCache:y,props:v,data:S,setupState:U,ctx:b,inheritAttrs:z}=e,t=Gi(e);let r,s;try{if(a.shapeFlag&4){const h=f||l,_=h;r=Qt(m.call(_,h,y,v,U,S,b)),s=o}else{const h=n;r=Qt(h.length>1?h(v,{attrs:o,slots:d,emit:p}):h(v,null)),s=n.props?o:Vl(o)}}catch(h){fi.length=0,en(h,e,1),r=mt(Fe)}let c=r;if(s&&z!==!1){const h=Object.keys(s),{shapeFlag:_}=c;h.length&&_&7&&(u&&h.some(Hn)&&(s=jl(s,u)),c=Ye(c,s,!1,!0))}return a.dirs&&(c=Ye(c,null,!1,!0),c.dirs=c.dirs?c.dirs.concat(a.dirs):a.dirs),a.transition&&er(c,a.transition),r=c,Gi(t),r}const Vl=e=>{let n;for(const a in e)(a==="class"||a==="style"||Xi(a))&&((n||(n={}))[a]=e[a]);return n},jl=(e,n)=>{const a={};for(const l in e)(!Hn(l)||!(l.slice(9)in n))&&(a[l]=e[l]);return a};function Yl(e,n,a){const{props:l,children:f,component:u}=e,{props:d,children:o,patchFlag:p}=n,m=u.emitsOptions;if(n.dirs||n.transition)return!0;if(a&&p>=0){if(p&1024)return!0;if(p&16)return l?zr(l,d,m):!!d;if(p&8){const y=n.dynamicProps;for(let v=0;v<y.length;v++){const S=y[v];if(d[S]!==l[S]&&!rn(m,S))return!0}}}else return(f||o)&&(!o||!o.$stable)?!0:l===d?!1:l?d?zr(l,d,m):!0:!!d;return!1}function zr(e,n,a){const l=Object.keys(n);if(l.length!==Object.keys(e).length)return!0;for(let f=0;f<l.length;f++){const u=l[f];if(n[u]!==e[u]&&!rn(a,u))return!0}return!1}function Kl({vnode:e,parent:n},a){for(;n;){const l=n.subTree;if(l.suspense&&l.suspense.activeBranch===e&&(l.el=e.el),l===e)(e=n.vnode).el=a,n=n.parent;else break}}const bo=e=>e.__isSuspense;function ql(e,n){n&&n.pendingBranch?tt(e)?n.effects.push(...e):n.effects.push(e):il(e)}const ae=Symbol.for("v-fgt"),sn=Symbol.for("v-txt"),Fe=Symbol.for("v-cmt"),zi=Symbol.for("v-stc"),fi=[];let Ot=null;function Ft(e=!1){fi.push(Ot=e?null:[])}function $l(){fi.pop(),Ot=fi[fi.length-1]||null}let gi=1;function Mr(e,n=!1){gi+=e,e<0&&Ot&&n&&(Ot.hasOnce=!0)}function Ao(e){return e.dynamicChildren=gi>0?Ot||De:null,$l(),gi>0&&Ot&&Ot.push(e),e}function Nt(e,n,a,l,f,u){return Ao(q(e,n,a,l,f,u,!0))}function Wl(e,n,a,l,f){return Ao(mt(e,n,a,l,f,!0))}function Yi(e){return e?e.__v_isVNode===!0:!1}function Je(e,n){return e.type===n.type&&e.key===n.key}const So=({key:e})=>e??null,Mi=({ref:e,ref_key:n,ref_for:a})=>(typeof e=="number"&&(e=""+e),e!=null?vt(e)||Ut(e)||nt(e)?{i:Dt,r:e,k:n,f:!!a}:e:null);function q(e,n=null,a=null,l=0,f=null,u=e===ae?0:1,d=!1,o=!1){const p={__v_isVNode:!0,__v_skip:!0,type:e,props:n,key:n&&So(n),ref:n&&Mi(n),scopeId:Js,slotScopeIds:null,children:a,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:u,patchFlag:l,dynamicProps:f,dynamicChildren:null,appContext:null,ctx:Dt};return o?(nr(p,a),u&128&&e.normalize(p)):a&&(p.shapeFlag|=vt(a)?8:16),gi>0&&!d&&Ot&&(p.patchFlag>0||u&6)&&p.patchFlag!==32&&Ot.push(p),p}const mt=Xl;function Xl(e,n=null,a=null,l=0,f=null,u=!1){if((!e||e===ml)&&(e=Fe),Yi(e)){const o=Ye(e,n,!0);return a&&nr(o,a),gi>0&&!u&&Ot&&(o.shapeFlag&6?Ot[Ot.indexOf(e)]=o:Ot.push(o)),o.patchFlag=-2,o}if(lf(e)&&(e=e.__vccOpts),n){n=Zl(n);let{class:o,style:p}=n;o&&!vt(o)&&(n.class=Yn(o)),_t(p)&&(Qn(p)&&!tt(p)&&(p=Et({},p)),n.style=jn(p))}const d=vt(e)?1:bo(e)?128:rl(e)?64:_t(e)?4:nt(e)?2:0;return q(e,n,a,l,f,d,u,!0)}function Zl(e){return e?Qn(e)||fo(e)?Et({},e):e:null}function Ye(e,n,a=!1,l=!1){const{props:f,ref:u,patchFlag:d,children:o,transition:p}=e,m=n?Jl(f||{},n):f,y={__v_isVNode:!0,__v_skip:!0,type:e.type,props:m,key:m&&So(m),ref:n&&n.ref?a&&u?tt(u)?u.concat(Mi(n)):[u,Mi(n)]:Mi(n):u,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:n&&e.type!==ae?d===-1?16:d|16:d,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:p,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Ye(e.ssContent),ssFallback:e.ssFallback&&Ye(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return p&&l&&er(y,p.clone(y)),y}function Be(e=" ",n=0){return mt(sn,null,e,n)}function Uo(e,n){const a=mt(zi,null,e);return a.staticCount=n,a}function ye(e="",n=!1){return n?(Ft(),Wl(Fe,null,e)):mt(Fe,null,e)}function Qt(e){return e==null||typeof e=="boolean"?mt(Fe):tt(e)?mt(ae,null,e.slice()):Yi(e)?pe(e):mt(sn,null,String(e))}function pe(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Ye(e)}function nr(e,n){let a=0;const{shapeFlag:l}=e;if(n==null)n=null;else if(tt(n))a=16;else if(typeof n=="object")if(l&65){const f=n.default;f&&(f._c&&(f._d=!1),nr(e,f()),f._c&&(f._d=!0));return}else{a=32;const f=n._;!f&&!fo(n)?n._ctx=Dt:f===3&&Dt&&(Dt.slots._===1?n._=1:(n._=2,e.patchFlag|=1024))}else nt(n)?(n={default:n,_ctx:Dt},a=32):(n=String(n),l&64?(a=16,n=[Be(n)]):a=8);e.children=n,e.shapeFlag|=a}function Jl(...e){const n={};for(let a=0;a<e.length;a++){const l=e[a];for(const f in l)if(f==="class")n.class!==l.class&&(n.class=Yn([n.class,l.class]));else if(f==="style")n.style=jn([n.style,l.style]);else if(Xi(f)){const u=n[f],d=l[f];d&&u!==d&&!(tt(u)&&u.includes(d))&&(n[f]=u?[].concat(u,d):d)}else f!==""&&(n[f]=l[f])}return n}function Zt(e,n,a,l=null){ne(e,n,7,[a,l])}const Ql=oo();let tf=0;function ef(e,n,a){const l=e.type,f=(n?n.appContext:e.appContext)||Ql,u={uid:tf++,vnode:e,type:l,parent:n,appContext:f,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Ua(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(f.provides),ids:n?n.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:uo(l,f),emitsOptions:xo(l,f),emit:null,emitted:null,propsDefaults:ht,inheritAttrs:l.inheritAttrs,ctx:ht,data:ht,props:ht,attrs:ht,slots:ht,refs:ht,setupState:ht,setupContext:null,suspense:a,suspenseId:a?a.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return u.ctx={_:u},u.root=n?n.root:u,u.emit=Gl.bind(null,u),e.ce&&e.ce(u),u}let St=null,Ki,Rn;{const e=Qi(),n=(a,l)=>{let f;return(f=e[a])||(f=e[a]=[]),f.push(l),u=>{f.length>1?f.forEach(d=>d(u)):f[0](u)}};Ki=n("__VUE_INSTANCE_SETTERS__",a=>St=a),Rn=n("__VUE_SSR_SETTERS__",a=>yi=a)}const Ei=e=>{const n=St;return Ki(e),e.scope.on(),()=>{e.scope.off(),Ki(n)}},Dr=()=>{St&&St.scope.off(),Ki(null)};function Eo(e){return e.vnode.shapeFlag&4}let yi=!1;function nf(e,n=!1,a=!1){n&&Rn(n);const{props:l,children:f}=e.vnode,u=Eo(e);Bl(e,l,u,n),Fl(e,f,a);const d=u?rf(e,n):void 0;return n&&Rn(!1),d}function rf(e,n){const a=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,wl);const{setup:l}=a;if(l){we();const f=e.setupContext=l.length>1?of(e):null,u=Ei(e),d=Ui(l,e,0,[e.props,f]),o=bs(d);if(xe(),u(),(o||e.sp)&&!ai(e)&&to(e),o){if(d.then(Dr,Dr),n)return d.then(p=>{Or(e,p)}).catch(p=>{en(p,e,0)});e.asyncDep=d}else Or(e,d)}else Co(e)}function Or(e,n,a){nt(n)?e.type.__ssrInlineRender?e.ssrRender=n:e.render=n:_t(n)&&(e.setupState=Ks(n)),Co(e)}function Co(e,n,a){const l=e.type;e.render||(e.render=l.render||te);{const f=Ei(e);we();try{xl(e)}finally{xe(),f()}}}const sf={get(e,n){return At(e,"get",""),e[n]}};function of(e){const n=a=>{e.exposed=a||{}};return{attrs:new Proxy(e.attrs,sf),slots:e.slots,emit:e.emit,expose:n}}function on(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Ks(Ya(e.exposed)),{get(n,a){if(a in n)return n[a];if(a in li)return li[a](e)},has(n,a){return a in n||a in li}})):e.proxy}function af(e,n=!0){return nt(e)?e.displayName||e.name:e.name||n&&e.__name}function lf(e){return nt(e)&&"__vccOpts"in e}const Vt=(e,n)=>Za(e,n,yi);function Bo(e,n,a){const l=arguments.length;return l===2?_t(n)&&!tt(n)?Yi(n)?mt(e,null,[n]):mt(e,n):mt(e,null,n):(l>3?a=Array.prototype.slice.call(arguments,2):l===3&&Yi(a)&&(a=[a]),mt(e,n,a))}const ff="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let zn;const Nr=typeof window<"u"&&window.trustedTypes;if(Nr)try{zn=Nr.createPolicy("vue",{createHTML:e=>e})}catch{}const To=zn?e=>zn.createHTML(e):e=>e,cf="http://www.w3.org/2000/svg",uf="http://www.w3.org/1998/Math/MathML",oe=typeof document<"u"?document:null,Hr=oe&&oe.createElement("template"),hf={insert:(e,n,a)=>{n.insertBefore(e,a||null)},remove:e=>{const n=e.parentNode;n&&n.removeChild(e)},createElement:(e,n,a,l)=>{const f=n==="svg"?oe.createElementNS(cf,e):n==="mathml"?oe.createElementNS(uf,e):a?oe.createElement(e,{is:a}):oe.createElement(e);return e==="select"&&l&&l.multiple!=null&&f.setAttribute("multiple",l.multiple),f},createText:e=>oe.createTextNode(e),createComment:e=>oe.createComment(e),setText:(e,n)=>{e.nodeValue=n},setElementText:(e,n)=>{e.textContent=n},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>oe.querySelector(e),setScopeId(e,n){e.setAttribute(n,"")},insertStaticContent(e,n,a,l,f,u){const d=a?a.previousSibling:n.lastChild;if(f&&(f===u||f.nextSibling))for(;n.insertBefore(f.cloneNode(!0),a),!(f===u||!(f=f.nextSibling)););else{Hr.innerHTML=To(l==="svg"?`<svg>${e}</svg>`:l==="mathml"?`<math>${e}</math>`:e);const o=Hr.content;if(l==="svg"||l==="mathml"){const p=o.firstChild;for(;p.firstChild;)o.appendChild(p.firstChild);o.removeChild(p)}n.insertBefore(o,a)}return[d?d.nextSibling:n.firstChild,a?a.previousSibling:n.lastChild]}},df=Symbol("_vtc");function pf(e,n,a){const l=e[df];l&&(n=(n?[n,...l]:[...l]).join(" ")),n==null?e.removeAttribute("class"):a?e.setAttribute("class",n):e.className=n}const qi=Symbol("_vod"),Io=Symbol("_vsh"),Gr={beforeMount(e,{value:n},{transition:a}){e[qi]=e.style.display==="none"?"":e.style.display,a&&n?a.beforeEnter(e):Qe(e,n)},mounted(e,{value:n},{transition:a}){a&&n&&a.enter(e)},updated(e,{value:n,oldValue:a},{transition:l}){!n!=!a&&(l?n?(l.beforeEnter(e),Qe(e,!0),l.enter(e)):l.leave(e,()=>{Qe(e,!1)}):Qe(e,n))},beforeUnmount(e,{value:n}){Qe(e,n)}};function Qe(e,n){e.style.display=n?e[qi]:"none",e[Io]=!n}const _f=Symbol(""),gf=/(^|;)\s*display\s*:/;function yf(e,n,a){const l=e.style,f=vt(a);let u=!1;if(a&&!f){if(n)if(vt(n))for(const d of n.split(";")){const o=d.slice(0,d.indexOf(":")).trim();a[o]==null&&Di(l,o,"")}else for(const d in n)a[d]==null&&Di(l,d,"");for(const d in a)d==="display"&&(u=!0),Di(l,d,a[d])}else if(f){if(n!==a){const d=l[_f];d&&(a+=";"+d),l.cssText=a,u=gf.test(a)}}else n&&e.removeAttribute("style");qi in e&&(e[qi]=u?l.display:"",e[Io]&&(l.display="none"))}const Vr=/\s*!important$/;function Di(e,n,a){if(tt(a))a.forEach(l=>Di(e,n,l));else if(a==null&&(a=""),n.startsWith("--"))e.setProperty(n,a);else{const l=mf(e,n);Vr.test(a)?e.setProperty(Le(l),a.replace(Vr,""),"important"):e[l]=a}}const jr=["Webkit","Moz","ms"],vn={};function mf(e,n){const a=vn[n];if(a)return a;let l=Gt(n);if(l!=="filter"&&l in e)return vn[n]=l;l=Ji(l);for(let f=0;f<jr.length;f++){const u=jr[f]+l;if(u in e)return vn[n]=u}return n}const Yr="http://www.w3.org/1999/xlink";function Kr(e,n,a,l,f,u=Aa(n)){l&&n.startsWith("xlink:")?a==null?e.removeAttributeNS(Yr,n.slice(6,n.length)):e.setAttributeNS(Yr,n,a):a==null||u&&!Es(a)?e.removeAttribute(n):e.setAttribute(n,u?"":ie(a)?String(a):a)}function qr(e,n,a,l,f){if(n==="innerHTML"||n==="textContent"){a!=null&&(e[n]=n==="innerHTML"?To(a):a);return}const u=e.tagName;if(n==="value"&&u!=="PROGRESS"&&!u.includes("-")){const o=u==="OPTION"?e.getAttribute("value")||"":e.value,p=a==null?e.type==="checkbox"?"on":"":String(a);(o!==p||!("_value"in e))&&(e.value=p),a==null&&e.removeAttribute(n),e._value=a;return}let d=!1;if(a===""||a==null){const o=typeof e[n];o==="boolean"?a=Es(a):a==null&&o==="string"?(a="",d=!0):o==="number"&&(a=0,d=!0)}try{e[n]=a}catch{}d&&e.removeAttribute(f||n)}function Ce(e,n,a,l){e.addEventListener(n,a,l)}function vf(e,n,a,l){e.removeEventListener(n,a,l)}const $r=Symbol("_vei");function wf(e,n,a,l,f=null){const u=e[$r]||(e[$r]={}),d=u[n];if(l&&d)d.value=l;else{const[o,p]=xf(n);if(l){const m=u[n]=Sf(l,f);Ce(e,o,m,p)}else d&&(vf(e,o,d,p),u[n]=void 0)}}const Wr=/(?:Once|Passive|Capture)$/;function xf(e){let n;if(Wr.test(e)){n={};let l;for(;l=e.match(Wr);)e=e.slice(0,e.length-l[0].length),n[l[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Le(e.slice(2)),n]}let wn=0;const bf=Promise.resolve(),Af=()=>wn||(bf.then(()=>wn=0),wn=Date.now());function Sf(e,n){const a=l=>{if(!l._vts)l._vts=Date.now();else if(l._vts<=a.attached)return;ne(Uf(l,a.value),n,5,[l])};return a.value=e,a.attached=Af(),a}function Uf(e,n){if(tt(n)){const a=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{a.call(e),e._stopped=!0},n.map(l=>f=>!f._stopped&&l&&l(f))}else return n}const Xr=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Ef=(e,n,a,l,f,u)=>{const d=f==="svg";n==="class"?pf(e,l,d):n==="style"?yf(e,a,l):Xi(n)?Hn(n)||wf(e,n,a,l,u):(n[0]==="."?(n=n.slice(1),!0):n[0]==="^"?(n=n.slice(1),!1):Cf(e,n,l,d))?(qr(e,n,l),!e.tagName.includes("-")&&(n==="value"||n==="checked"||n==="selected")&&Kr(e,n,l,d,u,n!=="value")):e._isVueCE&&(/[A-Z]/.test(n)||!vt(l))?qr(e,Gt(n),l,u,n):(n==="true-value"?e._trueValue=l:n==="false-value"&&(e._falseValue=l),Kr(e,n,l,d))};function Cf(e,n,a,l){if(l)return!!(n==="innerHTML"||n==="textContent"||n in e&&Xr(n)&&nt(a));if(n==="spellcheck"||n==="draggable"||n==="translate"||n==="form"||n==="list"&&e.tagName==="INPUT"||n==="type"&&e.tagName==="TEXTAREA")return!1;if(n==="width"||n==="height"){const f=e.tagName;if(f==="IMG"||f==="VIDEO"||f==="CANVAS"||f==="SOURCE")return!1}return Xr(n)&&vt(a)?!1:n in e}const $i=e=>{const n=e.props["onUpdate:modelValue"]||!1;return tt(n)?a=>Li(n,a):n};function Bf(e){e.target.composing=!0}function Zr(e){const n=e.target;n.composing&&(n.composing=!1,n.dispatchEvent(new Event("input")))}const Ve=Symbol("_assign"),ee={created(e,{modifiers:{lazy:n,trim:a,number:l}},f){e[Ve]=$i(f);const u=l||f.props&&f.props.type==="number";Ce(e,n?"change":"input",d=>{if(d.target.composing)return;let o=e.value;a&&(o=o.trim()),u&&(o=Un(o)),e[Ve](o)}),a&&Ce(e,"change",()=>{e.value=e.value.trim()}),n||(Ce(e,"compositionstart",Bf),Ce(e,"compositionend",Zr),Ce(e,"change",Zr))},mounted(e,{value:n}){e.value=n??""},beforeUpdate(e,{value:n,oldValue:a,modifiers:{lazy:l,trim:f,number:u}},d){if(e[Ve]=$i(d),e.composing)return;const o=(u||e.type==="number")&&!/^0\d/.test(e.value)?Un(e.value):e.value,p=n??"";o!==p&&(document.activeElement===e&&e.type!=="range"&&(l&&n===a||f&&e.value.trim()===p)||(e.value=p))}},Jr={created(e,{value:n},a){e.checked=Oi(n,a.props.value),e[Ve]=$i(a),Ce(e,"change",()=>{e[Ve](Tf(e))})},beforeUpdate(e,{value:n,oldValue:a},l){e[Ve]=$i(l),n!==a&&(e.checked=Oi(n,l.props.value))}};function Tf(e){return"_value"in e?e._value:e.value}const If=Et({patchProp:Ef},hf);let Qr;function Pf(){return Qr||(Qr=kl(If))}const Ff=(...e)=>{const n=Pf().createApp(...e),{mount:a}=n;return n.mount=l=>{const f=kf(l);if(!f)return;const u=n._component;!nt(u)&&!u.render&&!u.template&&(u.template=f.innerHTML),f.nodeType===1&&(f.textContent="");const d=a(f,!1,Lf(f));return f instanceof Element&&(f.removeAttribute("v-cloak"),f.setAttribute("data-v-app","")),d},n};function Lf(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function kf(e){return vt(e)?document.querySelector(e):e}const Ci=(e,n)=>{const a=e.__vccOpts||e;for(const[l,f]of n)a[l]=f;return a},Rf={name:"App",computed:{supportsFileAPI(){return"showSaveFilePicker"in window}}},zf={id:"app"};function Mf(e,n,a,l,f,u){const d=Cr("router-link"),o=Cr("router-view");return Ft(),Nt("div",zf,[q("nav",null,[mt(d,{to:"/message"},{default:ei(()=>n[0]||(n[0]=[Be("消息")])),_:1}),Pt(mt(d,{to:"/file"},{default:ei(()=>n[1]||(n[1]=[Be("文件")])),_:1},512),[[Gr,u.supportsFileAPI]]),Pt(mt(d,{to:"/file-classic"},{default:ei(()=>n[2]||(n[2]=[Be("文件2")])),_:1},512),[[Gr,!u.supportsFileAPI]]),mt(d,{to:"/video-decrypt"},{default:ei(()=>n[3]||(n[3]=[Be("视频解密")])),_:1})]),mt(o)])}const Df=Ci(Rf,[["render",Mf]]);/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Me=typeof document<"u";function Po(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Of(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&Po(e.default)}const ot=Object.assign;function xn(e,n){const a={};for(const l in n){const f=n[l];a[l]=qt(f)?f.map(e):e(f)}return a}const ci=()=>{},qt=Array.isArray,Fo=/#/g,Nf=/&/g,Hf=/\//g,Gf=/=/g,Vf=/\?/g,Lo=/\+/g,jf=/%5B/g,Yf=/%5D/g,ko=/%5E/g,Kf=/%60/g,Ro=/%7B/g,qf=/%7C/g,zo=/%7D/g,$f=/%20/g;function rr(e){return encodeURI(""+e).replace(qf,"|").replace(jf,"[").replace(Yf,"]")}function Wf(e){return rr(e).replace(Ro,"{").replace(zo,"}").replace(ko,"^")}function Mn(e){return rr(e).replace(Lo,"%2B").replace($f,"+").replace(Fo,"%23").replace(Nf,"%26").replace(Kf,"`").replace(Ro,"{").replace(zo,"}").replace(ko,"^")}function Xf(e){return Mn(e).replace(Gf,"%3D")}function Zf(e){return rr(e).replace(Fo,"%23").replace(Vf,"%3F")}function Jf(e){return e==null?"":Zf(e).replace(Hf,"%2F")}function mi(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const Qf=/\/$/,tc=e=>e.replace(Qf,"");function bn(e,n,a="/"){let l,f={},u="",d="";const o=n.indexOf("#");let p=n.indexOf("?");return o<p&&o>=0&&(p=-1),p>-1&&(l=n.slice(0,p),u=n.slice(p+1,o>-1?o:n.length),f=e(u)),o>-1&&(l=l||n.slice(0,o),d=n.slice(o,n.length)),l=rc(l??n,a),{fullPath:l+(u&&"?")+u+d,path:l,query:f,hash:mi(d)}}function ec(e,n){const a=n.query?e(n.query):"";return n.path+(a&&"?")+a+(n.hash||"")}function ts(e,n){return!n||!e.toLowerCase().startsWith(n.toLowerCase())?e:e.slice(n.length)||"/"}function ic(e,n,a){const l=n.matched.length-1,f=a.matched.length-1;return l>-1&&l===f&&Ke(n.matched[l],a.matched[f])&&Mo(n.params,a.params)&&e(n.query)===e(a.query)&&n.hash===a.hash}function Ke(e,n){return(e.aliasOf||e)===(n.aliasOf||n)}function Mo(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const a in e)if(!nc(e[a],n[a]))return!1;return!0}function nc(e,n){return qt(e)?es(e,n):qt(n)?es(n,e):e===n}function es(e,n){return qt(n)?e.length===n.length&&e.every((a,l)=>a===n[l]):e.length===1&&e[0]===n}function rc(e,n){if(e.startsWith("/"))return e;if(!e)return n;const a=n.split("/"),l=e.split("/"),f=l[l.length-1];(f===".."||f===".")&&l.push("");let u=a.length-1,d,o;for(d=0;d<l.length;d++)if(o=l[d],o!==".")if(o==="..")u>1&&u--;else break;return a.slice(0,u).join("/")+"/"+l.slice(d).join("/")}const he={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var vi;(function(e){e.pop="pop",e.push="push"})(vi||(vi={}));var ui;(function(e){e.back="back",e.forward="forward",e.unknown=""})(ui||(ui={}));function sc(e){if(!e)if(Me){const n=document.querySelector("base");e=n&&n.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),tc(e)}const oc=/^[^#]+#/;function ac(e,n){return e.replace(oc,"#")+n}function lc(e,n){const a=document.documentElement.getBoundingClientRect(),l=e.getBoundingClientRect();return{behavior:n.behavior,left:l.left-a.left-(n.left||0),top:l.top-a.top-(n.top||0)}}const an=()=>({left:window.scrollX,top:window.scrollY});function fc(e){let n;if("el"in e){const a=e.el,l=typeof a=="string"&&a.startsWith("#"),f=typeof a=="string"?l?document.getElementById(a.slice(1)):document.querySelector(a):a;if(!f)return;n=lc(f,e)}else n=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(n):window.scrollTo(n.left!=null?n.left:window.scrollX,n.top!=null?n.top:window.scrollY)}function is(e,n){return(history.state?history.state.position-n:-1)+e}const Dn=new Map;function cc(e,n){Dn.set(e,n)}function uc(e){const n=Dn.get(e);return Dn.delete(e),n}let hc=()=>location.protocol+"//"+location.host;function Do(e,n){const{pathname:a,search:l,hash:f}=n,u=e.indexOf("#");if(u>-1){let o=f.includes(e.slice(u))?e.slice(u).length:1,p=f.slice(o);return p[0]!=="/"&&(p="/"+p),ts(p,"")}return ts(a,e)+l+f}function dc(e,n,a,l){let f=[],u=[],d=null;const o=({state:S})=>{const U=Do(e,location),b=a.value,z=n.value;let t=0;if(S){if(a.value=U,n.value=S,d&&d===b){d=null;return}t=z?S.position-z.position:0}else l(U);f.forEach(r=>{r(a.value,b,{delta:t,type:vi.pop,direction:t?t>0?ui.forward:ui.back:ui.unknown})})};function p(){d=a.value}function m(S){f.push(S);const U=()=>{const b=f.indexOf(S);b>-1&&f.splice(b,1)};return u.push(U),U}function y(){const{history:S}=window;S.state&&S.replaceState(ot({},S.state,{scroll:an()}),"")}function v(){for(const S of u)S();u=[],window.removeEventListener("popstate",o),window.removeEventListener("beforeunload",y)}return window.addEventListener("popstate",o),window.addEventListener("beforeunload",y,{passive:!0}),{pauseListeners:p,listen:m,destroy:v}}function ns(e,n,a,l=!1,f=!1){return{back:e,current:n,forward:a,replaced:l,position:window.history.length,scroll:f?an():null}}function pc(e){const{history:n,location:a}=window,l={value:Do(e,a)},f={value:n.state};f.value||u(l.value,{back:null,current:l.value,forward:null,position:n.length-1,replaced:!0,scroll:null},!0);function u(p,m,y){const v=e.indexOf("#"),S=v>-1?(a.host&&document.querySelector("base")?e:e.slice(v))+p:hc()+e+p;try{n[y?"replaceState":"pushState"](m,"",S),f.value=m}catch(U){console.error(U),a[y?"replace":"assign"](S)}}function d(p,m){const y=ot({},n.state,ns(f.value.back,p,f.value.forward,!0),m,{position:f.value.position});u(p,y,!0),l.value=p}function o(p,m){const y=ot({},f.value,n.state,{forward:p,scroll:an()});u(y.current,y,!0);const v=ot({},ns(l.value,p,null),{position:y.position+1},m);u(p,v,!1),l.value=p}return{location:l,state:f,push:o,replace:d}}function _c(e){e=sc(e);const n=pc(e),a=dc(e,n.state,n.location,n.replace);function l(u,d=!0){d||a.pauseListeners(),history.go(u)}const f=ot({location:"",base:e,go:l,createHref:ac.bind(null,e)},n,a);return Object.defineProperty(f,"location",{enumerable:!0,get:()=>n.location.value}),Object.defineProperty(f,"state",{enumerable:!0,get:()=>n.state.value}),f}function gc(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),_c(e)}function yc(e){return typeof e=="string"||e&&typeof e=="object"}function Oo(e){return typeof e=="string"||typeof e=="symbol"}const No=Symbol("");var rs;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(rs||(rs={}));function qe(e,n){return ot(new Error,{type:e,[No]:!0},n)}function se(e,n){return e instanceof Error&&No in e&&(n==null||!!(e.type&n))}const ss="[^/]+?",mc={sensitive:!1,strict:!1,start:!0,end:!0},vc=/[.+*?^${}()[\]/\\]/g;function wc(e,n){const a=ot({},mc,n),l=[];let f=a.start?"^":"";const u=[];for(const m of e){const y=m.length?[]:[90];a.strict&&!m.length&&(f+="/");for(let v=0;v<m.length;v++){const S=m[v];let U=40+(a.sensitive?.25:0);if(S.type===0)v||(f+="/"),f+=S.value.replace(vc,"\\$&"),U+=40;else if(S.type===1){const{value:b,repeatable:z,optional:t,regexp:r}=S;u.push({name:b,repeatable:z,optional:t});const s=r||ss;if(s!==ss){U+=10;try{new RegExp(`(${s})`)}catch(h){throw new Error(`Invalid custom RegExp for param "${b}" (${s}): `+h.message)}}let c=z?`((?:${s})(?:/(?:${s}))*)`:`(${s})`;v||(c=t&&m.length<2?`(?:/${c})`:"/"+c),t&&(c+="?"),f+=c,U+=20,t&&(U+=-8),z&&(U+=-20),s===".*"&&(U+=-50)}y.push(U)}l.push(y)}if(a.strict&&a.end){const m=l.length-1;l[m][l[m].length-1]+=.7000000000000001}a.strict||(f+="/?"),a.end?f+="$":a.strict&&!f.endsWith("/")&&(f+="(?:/|$)");const d=new RegExp(f,a.sensitive?"":"i");function o(m){const y=m.match(d),v={};if(!y)return null;for(let S=1;S<y.length;S++){const U=y[S]||"",b=u[S-1];v[b.name]=U&&b.repeatable?U.split("/"):U}return v}function p(m){let y="",v=!1;for(const S of e){(!v||!y.endsWith("/"))&&(y+="/"),v=!1;for(const U of S)if(U.type===0)y+=U.value;else if(U.type===1){const{value:b,repeatable:z,optional:t}=U,r=b in m?m[b]:"";if(qt(r)&&!z)throw new Error(`Provided param "${b}" is an array but it is not repeatable (* or + modifiers)`);const s=qt(r)?r.join("/"):r;if(!s)if(t)S.length<2&&(y.endsWith("/")?y=y.slice(0,-1):v=!0);else throw new Error(`Missing required param "${b}"`);y+=s}}return y||"/"}return{re:d,score:l,keys:u,parse:o,stringify:p}}function xc(e,n){let a=0;for(;a<e.length&&a<n.length;){const l=n[a]-e[a];if(l)return l;a++}return e.length<n.length?e.length===1&&e[0]===80?-1:1:e.length>n.length?n.length===1&&n[0]===80?1:-1:0}function Ho(e,n){let a=0;const l=e.score,f=n.score;for(;a<l.length&&a<f.length;){const u=xc(l[a],f[a]);if(u)return u;a++}if(Math.abs(f.length-l.length)===1){if(os(l))return 1;if(os(f))return-1}return f.length-l.length}function os(e){const n=e[e.length-1];return e.length>0&&n[n.length-1]<0}const bc={type:0,value:""},Ac=/[a-zA-Z0-9_]/;function Sc(e){if(!e)return[[]];if(e==="/")return[[bc]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function n(U){throw new Error(`ERR (${a})/"${m}": ${U}`)}let a=0,l=a;const f=[];let u;function d(){u&&f.push(u),u=[]}let o=0,p,m="",y="";function v(){m&&(a===0?u.push({type:0,value:m}):a===1||a===2||a===3?(u.length>1&&(p==="*"||p==="+")&&n(`A repeatable param (${m}) must be alone in its segment. eg: '/:ids+.`),u.push({type:1,value:m,regexp:y,repeatable:p==="*"||p==="+",optional:p==="*"||p==="?"})):n("Invalid state to consume buffer"),m="")}function S(){m+=p}for(;o<e.length;){if(p=e[o++],p==="\\"&&a!==2){l=a,a=4;continue}switch(a){case 0:p==="/"?(m&&v(),d()):p===":"?(v(),a=1):S();break;case 4:S(),a=l;break;case 1:p==="("?a=2:Ac.test(p)?S():(v(),a=0,p!=="*"&&p!=="?"&&p!=="+"&&o--);break;case 2:p===")"?y[y.length-1]=="\\"?y=y.slice(0,-1)+p:a=3:y+=p;break;case 3:v(),a=0,p!=="*"&&p!=="?"&&p!=="+"&&o--,y="";break;default:n("Unknown state");break}}return a===2&&n(`Unfinished custom RegExp for param "${m}"`),v(),d(),f}function Uc(e,n,a){const l=wc(Sc(e.path),a),f=ot(l,{record:e,parent:n,children:[],alias:[]});return n&&!f.record.aliasOf==!n.record.aliasOf&&n.children.push(f),f}function Ec(e,n){const a=[],l=new Map;n=cs({strict:!1,end:!0,sensitive:!1},n);function f(v){return l.get(v)}function u(v,S,U){const b=!U,z=ls(v);z.aliasOf=U&&U.record;const t=cs(n,v),r=[z];if("alias"in v){const h=typeof v.alias=="string"?[v.alias]:v.alias;for(const _ of h)r.push(ls(ot({},z,{components:U?U.record.components:z.components,path:_,aliasOf:U?U.record:z})))}let s,c;for(const h of r){const{path:_}=h;if(S&&_[0]!=="/"){const g=S.record.path,A=g[g.length-1]==="/"?"":"/";h.path=S.record.path+(_&&A+_)}if(s=Uc(h,S,t),U?U.alias.push(s):(c=c||s,c!==s&&c.alias.push(s),b&&v.name&&!fs(s)&&d(v.name)),Go(s)&&p(s),z.children){const g=z.children;for(let A=0;A<g.length;A++)u(g[A],s,U&&U.children[A])}U=U||s}return c?()=>{d(c)}:ci}function d(v){if(Oo(v)){const S=l.get(v);S&&(l.delete(v),a.splice(a.indexOf(S),1),S.children.forEach(d),S.alias.forEach(d))}else{const S=a.indexOf(v);S>-1&&(a.splice(S,1),v.record.name&&l.delete(v.record.name),v.children.forEach(d),v.alias.forEach(d))}}function o(){return a}function p(v){const S=Tc(v,a);a.splice(S,0,v),v.record.name&&!fs(v)&&l.set(v.record.name,v)}function m(v,S){let U,b={},z,t;if("name"in v&&v.name){if(U=l.get(v.name),!U)throw qe(1,{location:v});t=U.record.name,b=ot(as(S.params,U.keys.filter(c=>!c.optional).concat(U.parent?U.parent.keys.filter(c=>c.optional):[]).map(c=>c.name)),v.params&&as(v.params,U.keys.map(c=>c.name))),z=U.stringify(b)}else if(v.path!=null)z=v.path,U=a.find(c=>c.re.test(z)),U&&(b=U.parse(z),t=U.record.name);else{if(U=S.name?l.get(S.name):a.find(c=>c.re.test(S.path)),!U)throw qe(1,{location:v,currentLocation:S});t=U.record.name,b=ot({},S.params,v.params),z=U.stringify(b)}const r=[];let s=U;for(;s;)r.unshift(s.record),s=s.parent;return{name:t,path:z,params:b,matched:r,meta:Bc(r)}}e.forEach(v=>u(v));function y(){a.length=0,l.clear()}return{addRoute:u,resolve:m,removeRoute:d,clearRoutes:y,getRoutes:o,getRecordMatcher:f}}function as(e,n){const a={};for(const l of n)l in e&&(a[l]=e[l]);return a}function ls(e){const n={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:Cc(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(n,"mods",{value:{}}),n}function Cc(e){const n={},a=e.props||!1;if("component"in e)n.default=a;else for(const l in e.components)n[l]=typeof a=="object"?a[l]:a;return n}function fs(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Bc(e){return e.reduce((n,a)=>ot(n,a.meta),{})}function cs(e,n){const a={};for(const l in e)a[l]=l in n?n[l]:e[l];return a}function Tc(e,n){let a=0,l=n.length;for(;a!==l;){const u=a+l>>1;Ho(e,n[u])<0?l=u:a=u+1}const f=Ic(e);return f&&(l=n.lastIndexOf(f,l-1)),l}function Ic(e){let n=e;for(;n=n.parent;)if(Go(n)&&Ho(e,n)===0)return n}function Go({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function Pc(e){const n={};if(e===""||e==="?")return n;const l=(e[0]==="?"?e.slice(1):e).split("&");for(let f=0;f<l.length;++f){const u=l[f].replace(Lo," "),d=u.indexOf("="),o=mi(d<0?u:u.slice(0,d)),p=d<0?null:mi(u.slice(d+1));if(o in n){let m=n[o];qt(m)||(m=n[o]=[m]),m.push(p)}else n[o]=p}return n}function us(e){let n="";for(let a in e){const l=e[a];if(a=Xf(a),l==null){l!==void 0&&(n+=(n.length?"&":"")+a);continue}(qt(l)?l.map(u=>u&&Mn(u)):[l&&Mn(l)]).forEach(u=>{u!==void 0&&(n+=(n.length?"&":"")+a,u!=null&&(n+="="+u))})}return n}function Fc(e){const n={};for(const a in e){const l=e[a];l!==void 0&&(n[a]=qt(l)?l.map(f=>f==null?null:""+f):l==null?l:""+l)}return n}const Lc=Symbol(""),hs=Symbol(""),sr=Symbol(""),Vo=Symbol(""),On=Symbol("");function ti(){let e=[];function n(l){return e.push(l),()=>{const f=e.indexOf(l);f>-1&&e.splice(f,1)}}function a(){e=[]}return{add:n,list:()=>e.slice(),reset:a}}function _e(e,n,a,l,f,u=d=>d()){const d=l&&(l.enterCallbacks[f]=l.enterCallbacks[f]||[]);return()=>new Promise((o,p)=>{const m=S=>{S===!1?p(qe(4,{from:a,to:n})):S instanceof Error?p(S):yc(S)?p(qe(2,{from:n,to:S})):(d&&l.enterCallbacks[f]===d&&typeof S=="function"&&d.push(S),o())},y=u(()=>e.call(l&&l.instances[f],n,a,m));let v=Promise.resolve(y);e.length<3&&(v=v.then(m)),v.catch(S=>p(S))})}function An(e,n,a,l,f=u=>u()){const u=[];for(const d of e)for(const o in d.components){let p=d.components[o];if(!(n!=="beforeRouteEnter"&&!d.instances[o]))if(Po(p)){const y=(p.__vccOpts||p)[n];y&&u.push(_e(y,a,l,d,o,f))}else{let m=p();u.push(()=>m.then(y=>{if(!y)throw new Error(`Couldn't resolve component "${o}" at "${d.path}"`);const v=Of(y)?y.default:y;d.mods[o]=y,d.components[o]=v;const U=(v.__vccOpts||v)[n];return U&&_e(U,a,l,d,o,f)()}))}}return u}function ds(e){const n=ce(sr),a=ce(Vo),l=Vt(()=>{const p=Ne(e.to);return n.resolve(p)}),f=Vt(()=>{const{matched:p}=l.value,{length:m}=p,y=p[m-1],v=a.matched;if(!y||!v.length)return-1;const S=v.findIndex(Ke.bind(null,y));if(S>-1)return S;const U=ps(p[m-2]);return m>1&&ps(y)===U&&v[v.length-1].path!==U?v.findIndex(Ke.bind(null,p[m-2])):S}),u=Vt(()=>f.value>-1&&Dc(a.params,l.value.params)),d=Vt(()=>f.value>-1&&f.value===a.matched.length-1&&Mo(a.params,l.value.params));function o(p={}){if(Mc(p)){const m=n[Ne(e.replace)?"replace":"push"](Ne(e.to)).catch(ci);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>m),m}return Promise.resolve()}return{route:l,href:Vt(()=>l.value.href),isActive:u,isExactActive:d,navigate:o}}function kc(e){return e.length===1?e[0]:e}const Rc=Qs({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:ds,setup(e,{slots:n}){const a=tn(ds(e)),{options:l}=ce(sr),f=Vt(()=>({[_s(e.activeClass,l.linkActiveClass,"router-link-active")]:a.isActive,[_s(e.exactActiveClass,l.linkExactActiveClass,"router-link-exact-active")]:a.isExactActive}));return()=>{const u=n.default&&kc(n.default(a));return e.custom?u:Bo("a",{"aria-current":a.isExactActive?e.ariaCurrentValue:null,href:a.href,onClick:a.navigate,class:f.value},u)}}}),zc=Rc;function Mc(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const n=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(n))return}return e.preventDefault&&e.preventDefault(),!0}}function Dc(e,n){for(const a in n){const l=n[a],f=e[a];if(typeof l=="string"){if(l!==f)return!1}else if(!qt(f)||f.length!==l.length||l.some((u,d)=>u!==f[d]))return!1}return!0}function ps(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const _s=(e,n,a)=>e??n??a,Oc=Qs({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:n,slots:a}){const l=ce(On),f=Vt(()=>e.route||l.value),u=ce(hs,0),d=Vt(()=>{let m=Ne(u);const{matched:y}=f.value;let v;for(;(v=y[m])&&!v.components;)m++;return m}),o=Vt(()=>f.value.matched[d.value]);ki(hs,Vt(()=>d.value+1)),ki(Lc,o),ki(On,f);const p=Ka();return Ri(()=>[p.value,o.value,e.name],([m,y,v],[S,U,b])=>{y&&(y.instances[v]=m,U&&U!==y&&m&&m===S&&(y.leaveGuards.size||(y.leaveGuards=U.leaveGuards),y.updateGuards.size||(y.updateGuards=U.updateGuards))),m&&y&&(!U||!Ke(y,U)||!S)&&(y.enterCallbacks[v]||[]).forEach(z=>z(m))},{flush:"post"}),()=>{const m=f.value,y=e.name,v=o.value,S=v&&v.components[y];if(!S)return gs(a.default,{Component:S,route:m});const U=v.props[y],b=U?U===!0?m.params:typeof U=="function"?U(m):U:null,t=Bo(S,ot({},b,n,{onVnodeUnmounted:r=>{r.component.isUnmounted&&(v.instances[y]=null)},ref:p}));return gs(a.default,{Component:t,route:m})||t}}});function gs(e,n){if(!e)return null;const a=e(n);return a.length===1?a[0]:a}const Nc=Oc;function Hc(e){const n=Ec(e.routes,e),a=e.parseQuery||Pc,l=e.stringifyQuery||us,f=e.history,u=ti(),d=ti(),o=ti(),p=qa(he);let m=he;Me&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const y=xn.bind(null,P=>""+P),v=xn.bind(null,Jf),S=xn.bind(null,mi);function U(P,K){let V,X;return Oo(P)?(V=n.getRecordMatcher(P),X=K):X=P,n.addRoute(X,V)}function b(P){const K=n.getRecordMatcher(P);K&&n.removeRoute(K)}function z(){return n.getRoutes().map(P=>P.record)}function t(P){return!!n.getRecordMatcher(P)}function r(P,K){if(K=ot({},K||p.value),typeof P=="string"){const C=bn(a,P,K.path),F=n.resolve({path:C.path},K),M=f.createHref(C.fullPath);return ot(C,F,{params:S(F.params),hash:mi(C.hash),redirectedFrom:void 0,href:M})}let V;if(P.path!=null)V=ot({},P,{path:bn(a,P.path,K.path).path});else{const C=ot({},P.params);for(const F in C)C[F]==null&&delete C[F];V=ot({},P,{params:v(C)}),K.params=v(K.params)}const X=n.resolve(V,K),ut=P.hash||"";X.params=y(S(X.params));const w=ec(l,ot({},P,{hash:Wf(ut),path:X.path})),x=f.createHref(w);return ot({fullPath:w,hash:ut,query:l===us?Fc(P.query):P.query||{}},X,{redirectedFrom:void 0,href:x})}function s(P){return typeof P=="string"?bn(a,P,p.value.path):ot({},P)}function c(P,K){if(m!==P)return qe(8,{from:K,to:P})}function h(P){return A(P)}function _(P){return h(ot(s(P),{replace:!0}))}function g(P){const K=P.matched[P.matched.length-1];if(K&&K.redirect){const{redirect:V}=K;let X=typeof V=="function"?V(P):V;return typeof X=="string"&&(X=X.includes("?")||X.includes("#")?X=s(X):{path:X},X.params={}),ot({query:P.query,hash:P.hash,params:X.path!=null?{}:P.params},X)}}function A(P,K){const V=m=r(P),X=p.value,ut=P.state,w=P.force,x=P.replace===!0,C=g(V);if(C)return A(ot(s(C),{state:typeof C=="object"?ot({},ut,C.state):ut,force:w,replace:x}),K||V);const F=V;F.redirectedFrom=K;let M;return!w&&ic(l,X,V)&&(M=qe(16,{to:F,from:X}),yt(X,X,!0,!1)),(M?Promise.resolve(M):E(F,X)).catch(k=>se(k)?se(k,2)?k:ct(k):H(k,F,X)).then(k=>{if(k){if(se(k,2))return A(ot({replace:x},s(k.to),{state:typeof k.to=="object"?ot({},ut,k.to.state):ut,force:w}),K||F)}else k=L(F,X,!0,x,ut);return I(F,X,k),k})}function B(P,K){const V=c(P,K);return V?Promise.reject(V):Promise.resolve()}function T(P){const K=xt.values().next().value;return K&&typeof K.runWithContext=="function"?K.runWithContext(P):P()}function E(P,K){let V;const[X,ut,w]=Gc(P,K);V=An(X.reverse(),"beforeRouteLeave",P,K);for(const C of X)C.leaveGuards.forEach(F=>{V.push(_e(F,P,K))});const x=B.bind(null,P,K);return V.push(x),bt(V).then(()=>{V=[];for(const C of u.list())V.push(_e(C,P,K));return V.push(x),bt(V)}).then(()=>{V=An(ut,"beforeRouteUpdate",P,K);for(const C of ut)C.updateGuards.forEach(F=>{V.push(_e(F,P,K))});return V.push(x),bt(V)}).then(()=>{V=[];for(const C of w)if(C.beforeEnter)if(qt(C.beforeEnter))for(const F of C.beforeEnter)V.push(_e(F,P,K));else V.push(_e(C.beforeEnter,P,K));return V.push(x),bt(V)}).then(()=>(P.matched.forEach(C=>C.enterCallbacks={}),V=An(w,"beforeRouteEnter",P,K,T),V.push(x),bt(V))).then(()=>{V=[];for(const C of d.list())V.push(_e(C,P,K));return V.push(x),bt(V)}).catch(C=>se(C,8)?C:Promise.reject(C))}function I(P,K,V){o.list().forEach(X=>T(()=>X(P,K,V)))}function L(P,K,V,X,ut){const w=c(P,K);if(w)return w;const x=K===he,C=Me?history.state:{};V&&(X||x?f.replace(P.fullPath,ot({scroll:x&&C&&C.scroll},ut)):f.push(P.fullPath,ut)),p.value=P,yt(P,K,V,x),ct()}let R;function W(){R||(R=f.listen((P,K,V)=>{if(!Q.listening)return;const X=r(P),ut=g(X);if(ut){A(ot(ut,{replace:!0,force:!0}),X).catch(ci);return}m=X;const w=p.value;Me&&cc(is(w.fullPath,V.delta),an()),E(X,w).catch(x=>se(x,12)?x:se(x,2)?(A(ot(s(x.to),{force:!0}),X).then(C=>{se(C,20)&&!V.delta&&V.type===vi.pop&&f.go(-1,!1)}).catch(ci),Promise.reject()):(V.delta&&f.go(-V.delta,!1),H(x,X,w))).then(x=>{x=x||L(X,w,!1),x&&(V.delta&&!se(x,8)?f.go(-V.delta,!1):V.type===vi.pop&&se(x,20)&&f.go(-1,!1)),I(X,w,x)}).catch(ci)}))}let $=ti(),it=ti(),O;function H(P,K,V){ct(P);const X=it.list();return X.length?X.forEach(ut=>ut(P,K,V)):console.error(P),Promise.reject(P)}function rt(){return O&&p.value!==he?Promise.resolve():new Promise((P,K)=>{$.add([P,K])})}function ct(P){return O||(O=!P,W(),$.list().forEach(([K,V])=>P?V(P):K()),$.reset()),P}function yt(P,K,V,X){const{scrollBehavior:ut}=e;if(!Me||!ut)return Promise.resolve();const w=!V&&uc(is(P.fullPath,0))||(X||!V)&&history.state&&history.state.scroll||null;return $s().then(()=>ut(P,K,w)).then(x=>x&&fc(x)).catch(x=>H(x,P,K))}const gt=P=>f.go(P);let wt;const xt=new Set,Q={currentRoute:p,listening:!0,addRoute:U,removeRoute:b,clearRoutes:n.clearRoutes,hasRoute:t,getRoutes:z,resolve:r,options:e,push:h,replace:_,go:gt,back:()=>gt(-1),forward:()=>gt(1),beforeEach:u.add,beforeResolve:d.add,afterEach:o.add,onError:it.add,isReady:rt,install(P){const K=this;P.component("RouterLink",zc),P.component("RouterView",Nc),P.config.globalProperties.$router=K,Object.defineProperty(P.config.globalProperties,"$route",{enumerable:!0,get:()=>Ne(p)}),Me&&!wt&&p.value===he&&(wt=!0,h(f.location).catch(ut=>{}));const V={};for(const ut in he)Object.defineProperty(V,ut,{get:()=>p.value[ut],enumerable:!0});P.provide(sr,K),P.provide(Vo,Vs(V)),P.provide(On,p);const X=P.unmount;xt.add(P),P.unmount=function(){xt.delete(P),xt.size<1&&(m=he,R&&R(),R=null,p.value=he,wt=!1,O=!1),X()}}};function bt(P){return P.reduce((K,V)=>K.then(()=>T(V)),Promise.resolve())}return Q}function Gc(e,n){const a=[],l=[],f=[],u=Math.max(n.matched.length,e.matched.length);for(let d=0;d<u;d++){const o=n.matched[d];o&&(e.matched.find(m=>Ke(m,o))?l.push(o):a.push(o));const p=e.matched[d];p&&(n.matched.find(m=>Ke(m,p))||f.push(p))}return[a,l,f]}var Vc=Object.defineProperty,jo=(e,n)=>{for(var a in n)Vc(e,a,{get:n[a],enumerable:!0})},Yo=new Array(256);for(let e=0;e<256;e++)Yo[e]=e.toString(16).padStart(2,"0");function wi(e){if(!e||!(e instanceof Uint8Array))throw new TypeError("Input must be a Uint8Array");const n=e.length,a=new Array(n);for(let l=0;l<n;l++)a[l]=Yo[e[l]];return a.join("")}var ys={get InvalidHexStringException(){throw new TypeError("Invalid hex string")}};function me(e){if(typeof e!="string")throw new TypeError("Input must be a string");const n=e.length;if(n%2!==0)throw new TypeError("Hex string must have even length");e=e.toLowerCase();const a=new Uint8Array(n>>1);for(let l=0;l<n;l+=2){const f=e.charCodeAt(l),u=e.charCodeAt(l+1),d=f>=97&&f<=102?f-87:f>=48&&f<=57?f-48:ys.InvalidHexStringException,o=u>=97&&u<=102?u-87:u>=48&&u<=57?u-48:ys.InvalidHexStringException;a[l>>1]=d<<4|o}return a}function xi(e){const n=new Uint8Array(e);return crypto.getRandomValues(n),n}function jc(){const e=xi(1);return new Uint8Array(e)[0]}function Ie(e,n="utf-8"){if(typeof e!="string")throw new TypeError("Input must be a string");if(n.toLowerCase()!=="utf-8")throw new Error("Only 'utf-8' encoding is supported");return new TextEncoder().encode(e)}function Lt(e,n="utf-8"){if(e instanceof Uint8Array||(e=new Uint8Array(e)),n.toLowerCase()!=="utf-8")throw new Error("Only 'utf-8' encoding is supported");return new TextDecoder().decode(e)}var Yc={};jo(Yc,{BadDataException:()=>hi,CannotDecryptException:()=>hr,ChaCha20NotSupportedException:()=>na,CryptContextNotInitedException:()=>ta,CryptContextReleasedException:()=>ia,CryptContextReusedException:()=>Qo,DangerousEncryptionAlgorithmException:()=>ra,DataError:()=>ke,EncryptionAlgorithmNotSupportedException:()=>Ai,EncryptionError:()=>ar,EncryptionVersionMismatchException:()=>bi,EndOfFileException:()=>Kc,ExpectedError:()=>qo,FileCorruptedException:()=>cr,IVException:()=>Zo,InputError:()=>fn,InternalError:()=>Kt,InvalidCryptContextTypeException:()=>ea,InvalidEndMarkerException:()=>ur,InvalidFileFormatException:()=>fr,InvalidParameterException:()=>Ht,InvalidScryptParameterException:()=>Xo,LibraryError:()=>or,NetworkError:()=>Ko,NotSupportedException:()=>dr,OperationNotPermittedException:()=>pr,ParameterError:()=>be,RuntimeException:()=>ln,UnexpectedError:()=>lr,UnexpectedFailureInChunkDecryptionException:()=>Jo,UserException:()=>$o,VersionSystemError:()=>Wo});var or=class extends Error{constructor(e="Library Error",n=void 0){super(e,n),this.name="LibraryError"}},ar=class extends or{constructor(e="Encryption Error",n=void 0){super(e,n),this.name="EncryptionError"}},Ko=class extends or{constructor(e="(Network Error)",n=void 0){super(e,n),this.name="NetworkError"}},qo=class extends ar{constructor(e="(Expected Error)",n=void 0){super(e,n),this.name="ExpectedError"}},ln=class extends ar{constructor(e="(Runtime Error)",n=void 0){super(e,n),this.name="RuntimeException"}},lr=class extends ln{constructor(e="(Unexpected Error)",n=void 0){super(e,n),this.name="UnexpectedError"}},Kt=class extends lr{constructor(e="(Internal Error)",n=void 0){super(e,n),this.name="InternalError"}},fn=class extends ln{constructor(e="(Input Error)",n=void 0){super(e,n),this.name="InputError"}},be=class extends fn{constructor(e="(Data Error)",n=void 0){super(e,n),this.name="ParameterError"}},ke=class extends fn{constructor(e="(Data Error)",n=void 0){super(e,n),this.name="DataError"}},$o=class extends ln{constructor(e="(The end user has a fault that caused the exception. This is not code bug.)",n=void 0){super(e,n),this.name="UserException"}},Wo=class extends ke{constructor(e="(Version System Error)",n=void 0){super(e,n),this.name="VersionSystemError"}},Ht=class extends be{constructor(e="The parameter provided is invalid.",n=void 0){super(e,n),this.name="InvalidParameterException"}},hi=class extends ke{constructor(e="The data is bad.",n=void 0){super(e,n),this.name="BadDataException"}},Xo=class extends be{constructor(e="The N, r, or p is not valid or out of range.",n=void 0){super(e,n),this.name="InvalidScryptParameterException"}},bi=class extends Wo{constructor(e="The version of the encryption library doesn't match.",n=void 0){super(e,n),this.name="EncryptionVersionMismatchException"}},fr=class extends ke{constructor(e="The file format is invalid.",n=void 0){super(e,n),this.name="InvalidFileFormatException"}},Zo=class extends Kt{constructor(e="IV Exception.",n=void 0){super(e,n),this.name="IVException"}},cr=class extends ke{constructor(e="File is corrupted.",n=void 0){super(e,n),this.name="FileCorruptedException"}},ur=class extends ke{constructor(e="The end marker is invalid.",n=void 0){super(e,n),this.name="InvalidEndMarkerException"}},hr=class extends $o{constructor(e="Cannot decrypt",n=void 0){super(e,n),this.name="CannotDecryptException"}},Jo=class extends lr{constructor(e="An unexpected failure occurred while decrypting the chunk. The file may be corrupted.",n=void 0){super(e,n),this.name="UnexpectedFailureInChunkDecryptionException"}},Qo=class extends be{constructor(e="Not allowed to reuse a crypt context.",n=void 0){super(e,n),this.name="CryptContextReusedException"}},dr=class extends fn{constructor(e="Operation not supported",n=void 0){super(e,n),this.name="NotSupportedException"}},Kc=class extends qo{constructor(e="End of File",n=void 0){super(e,n),this.name="EndOfFileException"}},ta=class extends be{constructor(e="Crypt context is not initialized.",n=void 0){super(e,n),this.name="CryptContextNotInitedException"}},ea=class extends be{constructor(e="Invalid crypt context type.",n=void 0){super(e,n),this.name="InvalidCryptContextTypeException"}},ia=class extends be{constructor(e="Crypt context has been released.",n=void 0){super(e,n),this.name="CryptContextReleasedException"}},pr=class extends be{constructor(e="Operation not permitted.",n=void 0){super(e,n),this.name="OperationNotPermittedException"}},Ai=class extends ke{constructor(e="The specified encryption algorithm is not supported.",n=void 0){super(e,n),this.name="EncryptionAlgorithmNotSupportedException"}},na=class extends Ai{constructor(e="ChaCha20 is not supported yet.",n=void 0){super(e,n),this.name="ChaCha20NotSupportedException"}},ra=class extends Ai{constructor(e="The specified encryption algorithm is DANGEROUS.",n=void 0){super(e,n),this.name="DangerousEncryptionAlgorithmException"}},_r={};(function(){const e=_r;var n;(function(u){function d(b){return U?new U(b):new Array(b)}function o(b){return U?new U(b):b}function p(b){for(var z=b.length/2,t=d(z),r=0;r<z;r++){var s=parseInt(b.substr(2*r,2),16);if(isNaN(s))throw Error("invalid hex data");t[r]=s}return t}function m(b){for(var z=b.length,t="",r=0;r<z;r++){var s=255&b[r],c=s.toString(16);s<16&&(c="0"+c),t+=c}return t}function y(b){var z=e.TextEncoder;if(z)return new z().encode(b);for(var t=[],r=0,s=0,c=encodeURI(b),h=c.length;r<h;){var _=c.charCodeAt(r);if(_==37){var g=c.substr(r+1,2);_=parseInt(g,16),r+=3}else r++;t[s++]=_}return o(t)}function v(b){for(var z=b.length,t="",r=0;r<z;r++){var s=b[r],c=s.toString(16);s<16&&(c="0"+c),t+="%"+c}return decodeURIComponent(t)}function S(b){b.style.cssText="position:absolute;top:-999px"}var U=e.Uint8Array;u.hexToBytes=p,u.bytesToHex=m,u.strToBytes=y,u.bytesToStr=v,u.hideDom=S})(n||(n={}));var a;(function(u){function d(){return"Worker"in e}function o(z){f.__asmjs_cb=U,async function(){try{const t=`
const window = globalThis["scrypt_loader_9470f487e3aa154f278269e99e6a42502ca77b8da3867a46a548909659a3db4a"]
/// START ASM.JS
!function(){function A(){"use strict";function A(A){return r(self,{},A)}function e(){return 8200}var r=function(A,e,r){"use asm";var n=new A.Int32Array(r),t=A.Math.imul,i=new A.Int8Array(r),a=new A.Uint8Array(r);function o(A,e,r,o,u,c,s){A=A|0;e=e|0;r=r|0;o=o|0;u=u|0;c=c|0;s=s|0;var l=0,w=0,h=0,v=0,d=0,y=0,p=0,g=0,b=0,m=0,M=0,k=0,U=0,L=0,I=0,x=0,E=0,D=0,K=0,R=0,B=0,F=0,O=0,_=0,C=0,H=0,j=0,q=0,G=0,N=0,P=0,S=0;C=e<<7;q=e<<5;N=o+C|0;M=o+(e<<8)|0;if(u|0){A:do if(c>>>0<s>>>0){k=C+-64|0;U=o+k|0;L=A+-1|0;I=q&1073741792;x=N+k|0;if(!I){b=c;while(1){f(o,N,e);f(N,o,e);b=b+2|0;if(b>>>0>=s>>>0)break A}}else g=c;do{_=M+((t(n[U>>2]&L,q)|0)<<2)|0;v=0;do{H=o+(v<<2)|0;n[H>>2]=n[H>>2]^n[_+(v<<2)>>2];v=v+1|0}while((v|0)!=(I|0));f(o,N,e);j=M+((t(n[x>>2]&L,q)|0)<<2)|0;d=0;do{G=N+(d<<2)|0;n[G>>2]=n[G>>2]^n[j+(d<<2)>>2];d=d+1|0}while((d|0)!=(I|0));f(N,o,e);g=g+2|0}while(g>>>0<s>>>0)}while(0);if((s|0)==(A|0)&(q|0)!=0)m=0;else return;do{P=r+(m<<2)|0;S=n[o+(m<<2)>>2]|0;i[P>>0]=S;i[P+1>>0]=S>>>8;i[P+2>>0]=S>>>16;i[P+3>>0]=S>>>24;m=m+1|0}while((m|0)!=(q|0));return}if((c|0)==0&(q|0)!=0){p=0;do{E=r+(p<<2)|0;n[o+(p<<2)>>2]=(a[E+1>>0]|0)<<8|(a[E>>0]|0)|(a[E+2>>0]|0)<<16|(a[E+3>>0]|0)<<24;p=p+1|0}while((p|0)!=(q|0))}D=t(q,c)|0;K=t(q,s)|0;if(D>>>0>=K>>>0)return;R=q&1073741792;if(!R){w=D;do{f(o,N,e);w=w+q+q|0;f(N,o,e)}while(w>>>0<K>>>0);return}else l=D;do{B=M+(l<<2)|0;h=0;do{n[B+(h<<2)>>2]=n[o+(h<<2)>>2];h=h+1|0}while((h|0)!=(R|0));F=l+q|0;f(o,N,e);O=M+(F<<2)|0;y=0;do{n[O+(y<<2)>>2]=n[N+(y<<2)>>2];y=y+1|0}while((y|0)!=(R|0));l=F+q|0;f(N,o,e)}while(l>>>0<K>>>0);return}function f(A,e,r){A=A|0;e=e|0;r=r|0;var t=0,i=0,a=0,o=0,f=0,u=0,c=0,s=0,l=0,w=0,h=0,v=0,d=0,y=0,p=0,g=0,b=0,m=0,M=0,k=0,U=0,L=0,I=0,x=0,E=0,D=0,K=0,R=0,B=0,F=0,O=0,_=0,C=0,H=0,j=0,q=0,G=0,N=0,P=0,S=0,V=0,Z=0,Q=0,T=0,J=0,Y=0,W=0,z=0,X=0,$=0,AA=0,eA=0,rA=0,nA=0,tA=0,iA=0,aA=0,oA=0,fA=0,uA=0,cA=0,sA=0,lA=0,wA=0,hA=0,vA=0,dA=0,yA=0,pA=0,gA=0,bA=0,mA=0,MA=0,kA=0,UA=0,LA=0,IA=0,xA=0,EA=0,DA=0,KA=0,RA=0,BA=0,FA=0,OA=0,_A=0,CA=0,HA=0,jA=0,qA=0,GA=0,NA=0,PA=0,SA=0,VA=0,ZA=0,QA=0,TA=0,JA=0,YA=0,WA=0,zA=0,XA=0,$A=0,Ae=0,ee=0,re=0,ne=0,te=0,ie=0,ae=0,oe=0,fe=0,ue=0,ce=0,se=0,le=0,we=0,he=0,ve=0,de=0,ye=0,pe=0,ge=0,be=0,me=0,Me=0,ke=0,Ue=0,Le=0,Ie=0,xe=0,Ee=0,De=0,Ke=0,Re=0,Be=0,Fe=0,Oe=0,_e=0,Ce=0,He=0,je=0,qe=0,Ge=0,Ne=0,Pe=0,Se=0,Ve=0,Ze=0,Qe=0,Te=0,Je=0,Ye=0,We=0,ze=0,Xe=0,$e=0,Ar=0,er=0,rr=0,nr=0,tr=0,ir=0,ar=0,or=0,fr=0,ur=0,cr=0,sr=0,lr=0,wr=0,hr=0,vr=0,dr=0,yr=0,pr=0,gr=0,br=0,mr=0,Mr=0,kr=0,Ur=0,Lr=0,Ir=0,xr=0,Er=0,Dr=0,Kr=0,Rr=0,Br=0,Fr=0,Or=0,_r=0,Cr=0,Hr=0,jr=0,qr=0,Gr=0,Nr=0,Pr=0,Sr=0,Vr=0,Zr=0,Qr=0,Tr=0,Jr=0,Yr=0,Wr=0,zr=0,Xr=0,$r=0,An=0,en=0,rn=0,nn=0,tn=0,an=0,on=0,fn=0,un=0,cn=0,sn=0,ln=0,wn=0,hn=0,vn=0,dn=0,yn=0,pn=0,gn=0,bn=0,mn=0,Mn=0,kn=0,Un=0,Ln=0,In=0,xn=0,En=0,Dn=0,Kn=0,Rn=0,Bn=0,Fn=0,On=0,_n=0,Cn=0,Hn=0,jn=0,qn=0,Gn=0,Nn=0,Pn=0,Sn=0,Vn=0,Zn=0,Qn=0,Tn=0,Jn=0,Yn=0,Wn=0,zn=0,Xn=0,$n=0,At=0,et=0,rt=0,nt=0,tt=0,it=0,at=0,ot=0,ft=0,ut=0,ct=0,st=0,lt=0,wt=0,ht=0,vt=0,dt=0,yt=0,pt=0,gt=0,bt=0,mt=0,Mt=0,kt=0,Ut=0,Lt=0,It=0,xt=0,Et=0,Dt=0,Kt=0,Rt=0,Bt=0,Ft=0,Ot=0,_t=0,Ct=0,Ht=0,jt=0,qt=0,Gt=0,Nt=0,Pt=0,St=0,Vt=0,Zt=0,Qt=0,Tt=0,Jt=0,Yt=0,Wt=0,zt=0,Xt=0,$t=0,Ai=0,ei=0,ri=0,ni=0,ti=0,ii=0,ai=0,oi=0,fi=0,ui=0,ci=0,si=0,li=0,wi=0,hi=0,vi=0,di=0,yi=0,pi=0,gi=0,bi=0,mi=0,Mi=0,ki=0,Ui=0,Li=0,Ii=0,xi=0,Ei=0,Di=0,Ki=0,Ri=0,Bi=0,Fi=0,Oi=0,_i=0,Ci=0,Hi=0,ji=0,qi=0,Gi=0,Ni=0,Pi=0,Si=0,Vi=0,Zi=0,Qi=0,Ti=0,Ji=0,Yi=0,Wi=0,zi=0,Xi=0,$i=0,Aa=0,ea=0,ra=0,na=0,ta=0,ia=0,aa=0,oa=0,fa=0,ua=0,ca=0,sa=0,la=0,wa=0,ha=0,va=0,da=0,ya=0,pa=0,ga=0,ba=0,ma=0,Ma=0,ka=0,Ua=0,La=0,Ia=0,xa=0,Ea=0,Da=0,Ka=0,Ra=0,Ba=0,Fa=0,Oa=0,_a=0,Ca=0,Ha=0,ja=0,qa=0,Ga=0,Na=0,Pa=0,Sa=0,Va=0,Za=0,Qa=0,Ta=0,Ja=0,Ya=0,Wa=0,za=0,Xa=0,$a=0,Ao=0,eo=0,ro=0,no=0,to=0,io=0,ao=0,oo=0,fo=0,uo=0,co=0,so=0,lo=0,wo=0,ho=0,vo=0,yo=0,po=0,go=0,bo=0,mo=0,Mo=0,ko=0,Uo=0,Lo=0,Io=0,xo=0,Eo=0,Do=0,Ko=0,Ro=0,Bo=0,Fo=0,Oo=0,_o=0,Co=0,Ho=0,jo=0,qo=0,Go=0,No=0,Po=0,So=0,Vo=0,Zo=0,Qo=0,To=0,Jo=0,Yo=0,Wo=0,zo=0,Xo=0,$o=0,Af=0,ef=0,rf=0,nf=0,tf=0,af=0,of=0,ff=0,uf=0,cf=0,sf=0,lf=0,wf=0,hf=0,vf=0,df=0,yf=0,pf=0,gf=0,bf=0,mf=0,Mf=0,kf=0,Uf=0,Lf=0,If=0,xf=0,Ef=0,Df=0,Kf=0,Rf=0,Bf=0,Ff=0,Of=0,_f=0,Cf=0,Hf=0,jf=0,qf=0,Gf=0,Nf=0,Pf=0,Sf=0,Vf=0,Zf=0,Qf=0,Tf=0,Jf=0,Yf=0,Wf=0,zf=0,Xf=0,$f=0,Au=0,eu=0,ru=0,nu=0,tu=0,iu=0,au=0,ou=0,fu=0,uu=0,cu=0,su=0,lu=0,wu=0,hu=0,vu=0,du=0,yu=0,pu=0,gu=0,bu=0,mu=0,Mu=0,ku=0,Uu=0,Lu=0,Iu=0,xu=0,Eu=0,Du=0,Ku=0,Ru=0,Bu=0,Fu=0,Ou=0,_u=0,Cu=0,Hu=0,ju=0,qu=0,Gu=0,Nu=0,Pu=0,Su=0,Vu=0;ct=r<<1;Ba=A+((r<<5)+-16<<2)|0;if(!ct)return;Tt=r<<4;t=n[Ba>>2]|0;i=n[Ba+4>>2]|0;a=n[Ba+8>>2]|0;o=n[Ba+12>>2]|0;f=n[Ba+16>>2]|0;u=n[Ba+20>>2]|0;c=n[Ba+24>>2]|0;s=n[Ba+28>>2]|0;l=n[Ba+32>>2]|0;w=n[Ba+36>>2]|0;h=n[Ba+40>>2]|0;v=n[Ba+44>>2]|0;d=n[Ba+48>>2]|0;y=n[Ba+52>>2]|0;p=n[Ba+56>>2]|0;g=n[Ba+60>>2]|0;b=0;do{Xt=b<<4;ni=A+(Xt<<2)|0;li=n[ni>>2]^t;Li=n[ni+4>>2]^i;ji=n[ni+8>>2]^a;zi=n[ni+12>>2]^o;ca=n[ni+16>>2]^f;ka=n[ni+20>>2]^u;Ha=n[ni+24>>2]^c;Wa=n[ni+28>>2]^s;fo=n[ni+32>>2]^l;mo=n[ni+36>>2]^w;Bo=n[ni+40>>2]^h;Wo=n[ni+44>>2]^v;ff=n[ni+48>>2]^d;gf=n[ni+52>>2]^y;Bf=n[ni+56>>2]^p;Zf=n[ni+60>>2]^g;Wf=ff+li|0;wu=(Wf<<7|Wf>>>25)^ca;pu=wu+li|0;_u=(pu<<9|pu>>>23)^fo;Gu=_u+wu|0;F=(Gu<<13|Gu>>>19)^ff;j=F+_u|0;eA=(j<<18|j>>>14)^li;aA=ka+Li|0;kA=mo^(aA<<7|aA>>>25);EA=kA+ka|0;ZA=gf^(EA<<9|EA>>>23);WA=ZA+kA|0;we=(WA<<13|WA>>>19)^Li;pe=we+ZA|0;_e=(pe<<18|pe>>>14)^ka;Ge=Bo+Ha|0;nr=Bf^(Ge<<7|Ge>>>25);fr=nr+Bo|0;Lr=(fr<<9|fr>>>23)^ji;Kr=Lr+nr|0;Zr=(Kr<<13|Kr>>>19)^Ha;Yr=Zr+Lr|0;en=(Yr<<18|Yr>>>14)^Bo;rn=Zf+Wo|0;nn=(rn<<7|rn>>>25)^zi;tn=nn+Zf|0;an=(tn<<9|tn>>>23)^Wa;on=an+nn|0;fn=(on<<13|on>>>19)^Wo;un=fn+an|0;cn=(un<<18|un>>>14)^Zf;sn=eA+nn|0;ln=(sn<<7|sn>>>25)^we;wn=ln+eA|0;hn=(wn<<9|wn>>>23)^Lr;vn=hn+ln|0;dn=(vn<<13|vn>>>19)^nn;yn=dn+hn|0;pn=(yn<<18|yn>>>14)^eA;gn=_e+wu|0;bn=(gn<<7|gn>>>25)^Zr;mn=bn+_e|0;Mn=(mn<<9|mn>>>23)^an;kn=Mn+bn|0;Un=(kn<<13|kn>>>19)^wu;Ln=Un+Mn|0;In=(Ln<<18|Ln>>>14)^_e;xn=en+kA|0;En=(xn<<7|xn>>>25)^fn;Dn=En+en|0;Kn=(Dn<<9|Dn>>>23)^_u;Rn=Kn+En|0;Bn=(Rn<<13|Rn>>>19)^kA;Fn=Bn+Kn|0;On=(Fn<<18|Fn>>>14)^en;_n=cn+nr|0;Cn=(_n<<7|_n>>>25)^F;Hn=Cn+cn|0;jn=(Hn<<9|Hn>>>23)^ZA;qn=jn+Cn|0;Gn=(qn<<13|qn>>>19)^nr;Nn=Gn+jn|0;Pn=(Nn<<18|Nn>>>14)^cn;Sn=pn+Cn|0;Vn=(Sn<<7|Sn>>>25)^Un;Zn=Vn+pn|0;Qn=(Zn<<9|Zn>>>23)^Kn;Tn=Qn+Vn|0;Jn=(Tn<<13|Tn>>>19)^Cn;Yn=Jn+Qn|0;Wn=(Yn<<18|Yn>>>14)^pn;zn=In+ln|0;Xn=(zn<<7|zn>>>25)^Bn;$n=Xn+In|0;At=($n<<9|$n>>>23)^jn;et=At+Xn|0;rt=(et<<13|et>>>19)^ln;nt=rt+At|0;tt=(nt<<18|nt>>>14)^In;it=On+bn|0;at=(it<<7|it>>>25)^Gn;ot=at+On|0;ft=(ot<<9|ot>>>23)^hn;ut=ft+at|0;st=(ut<<13|ut>>>19)^bn;lt=st+ft|0;wt=(lt<<18|lt>>>14)^On;ht=Pn+En|0;vt=(ht<<7|ht>>>25)^dn;dt=vt+Pn|0;yt=(dt<<9|dt>>>23)^Mn;pt=yt+vt|0;gt=(pt<<13|pt>>>19)^En;bt=gt+yt|0;mt=(bt<<18|bt>>>14)^Pn;Mt=Wn+vt|0;kt=(Mt<<7|Mt>>>25)^rt;Ut=kt+Wn|0;Lt=(Ut<<9|Ut>>>23)^ft;It=Lt+kt|0;xt=(It<<13|It>>>19)^vt;Et=xt+Lt|0;Dt=(Et<<18|Et>>>14)^Wn;Kt=tt+Vn|0;Rt=(Kt<<7|Kt>>>25)^st;Bt=Rt+tt|0;Ft=(Bt<<9|Bt>>>23)^yt;Ot=Ft+Rt|0;_t=(Ot<<13|Ot>>>19)^Vn;Ct=_t+Ft|0;Ht=(Ct<<18|Ct>>>14)^tt;jt=wt+Xn|0;qt=(jt<<7|jt>>>25)^gt;Gt=qt+wt|0;Nt=(Gt<<9|Gt>>>23)^Qn;Pt=Nt+qt|0;St=(Pt<<13|Pt>>>19)^Xn;Vt=St+Nt|0;Zt=(Vt<<18|Vt>>>14)^wt;Qt=mt+at|0;Jt=(Qt<<7|Qt>>>25)^Jn;Yt=Jt+mt|0;Wt=(Yt<<9|Yt>>>23)^At;zt=Wt+Jt|0;$t=(zt<<13|zt>>>19)^at;Ai=$t+Wt|0;ei=(Ai<<18|Ai>>>14)^mt;ri=Dt+Jt|0;ti=(ri<<7|ri>>>25)^_t;ii=ti+Dt|0;ai=(ii<<9|ii>>>23)^Nt;oi=ai+ti|0;fi=(oi<<13|oi>>>19)^Jt;ui=fi+ai|0;ci=(ui<<18|ui>>>14)^Dt;si=Ht+kt|0;wi=(si<<7|si>>>25)^St;hi=wi+Ht|0;vi=(hi<<9|hi>>>23)^Wt;di=vi+wi|0;yi=(di<<13|di>>>19)^kt;pi=yi+vi|0;gi=(pi<<18|pi>>>14)^Ht;bi=Zt+Rt|0;mi=(bi<<7|bi>>>25)^$t;Mi=mi+Zt|0;ki=(Mi<<9|Mi>>>23)^Lt;Ui=ki+mi|0;Ii=(Ui<<13|Ui>>>19)^Rt;xi=Ii+ki|0;Ei=(xi<<18|xi>>>14)^Zt;Di=ei+qt|0;Ki=(Di<<7|Di>>>25)^xt;Ri=Ki+ei|0;Bi=(Ri<<9|Ri>>>23)^Ft;Fi=Bi+Ki|0;Oi=(Fi<<13|Fi>>>19)^qt;_i=Oi+Bi|0;Ci=(_i<<18|_i>>>14)^ei;Hi=ci+Ki|0;qi=(Hi<<7|Hi>>>25)^yi;Gi=qi+ci|0;Ni=(Gi<<9|Gi>>>23)^ki;Pi=Ni+qi|0;Si=(Pi<<13|Pi>>>19)^Ki;Vi=Si+Ni|0;Zi=(Vi<<18|Vi>>>14)^ci;Qi=gi+ti|0;Ti=(Qi<<7|Qi>>>25)^Ii;Ji=Ti+gi|0;Yi=(Ji<<9|Ji>>>23)^Bi;Wi=Yi+Ti|0;Xi=(Wi<<13|Wi>>>19)^ti;$i=Xi+Yi|0;Aa=($i<<18|$i>>>14)^gi;ea=Ei+wi|0;ra=(ea<<7|ea>>>25)^Oi;na=ra+Ei|0;ta=(na<<9|na>>>23)^ai;ia=ta+ra|0;aa=(ia<<13|ia>>>19)^wi;oa=aa+ta|0;fa=(oa<<18|oa>>>14)^Ei;ua=Ci+mi|0;sa=(ua<<7|ua>>>25)^fi;la=sa+Ci|0;wa=(la<<9|la>>>23)^vi;ha=wa+sa|0;va=(ha<<13|ha>>>19)^mi;da=va+wa|0;ya=(da<<18|da>>>14)^Ci;pa=Zi+sa|0;ga=(pa<<7|pa>>>25)^Xi;ba=ga+Zi|0;ma=(ba<<9|ba>>>23)^ta;Ma=ma+ga|0;Ua=(Ma<<13|Ma>>>19)^sa;La=Ua+ma|0;Ia=(La<<18|La>>>14)^Zi;xa=Aa+qi|0;Ea=(xa<<7|xa>>>25)^aa;Da=Ea+Aa|0;Ka=(Da<<9|Da>>>23)^wa;Ra=Ka+Ea|0;Fa=(Ra<<13|Ra>>>19)^qi;Oa=Fa+Ka|0;_a=(Oa<<18|Oa>>>14)^Aa;Ca=fa+Ti|0;ja=(Ca<<7|Ca>>>25)^va;qa=ja+fa|0;Ga=(qa<<9|qa>>>23)^Ni;Na=Ga+ja|0;Pa=(Na<<13|Na>>>19)^Ti;Sa=Pa+Ga|0;Va=(Sa<<18|Sa>>>14)^fa;Za=ya+ra|0;Qa=(Za<<7|Za>>>25)^Si;Ta=Qa+ya|0;Ja=(Ta<<9|Ta>>>23)^Yi;Ya=Ja+Qa|0;za=(Ya<<13|Ya>>>19)^ra;Xa=za+Ja|0;$a=(Xa<<18|Xa>>>14)^ya;Ao=Ia+Qa|0;eo=(Ao<<7|Ao>>>25)^Fa;ro=eo+Ia|0;no=(ro<<9|ro>>>23)^Ga;to=no+eo|0;io=(to<<13|to>>>19)^Qa;ao=io+no|0;oo=_a+ga|0;uo=(oo<<7|oo>>>25)^Pa;co=uo+_a|0;so=(co<<9|co>>>23)^Ja;lo=so+uo|0;wo=(lo<<13|lo>>>19)^ga;ho=wo+so|0;vo=Va+Ea|0;yo=(vo<<7|vo>>>25)^za;po=yo+Va|0;go=(po<<9|po>>>23)^ma;bo=go+yo|0;Mo=(bo<<13|bo>>>19)^Ea;ko=Mo+go|0;Uo=$a+ja|0;Lo=(Uo<<7|Uo>>>25)^Ua;Io=Lo+$a|0;xo=(Io<<9|Io>>>23)^Ka;Eo=xo+Lo|0;Do=(Eo<<13|Eo>>>19)^ja;Ko=Do+xo|0;Ro=((ao<<18|ao>>>14)^Ia)+li|0;Fo=eo+Li|0;Oo=no+ji|0;_o=io+zi|0;Co=wo+ca|0;Ho=((ho<<18|ho>>>14)^_a)+ka|0;jo=uo+Ha|0;qo=so+Wa|0;Go=go+fo|0;No=Mo+mo|0;Po=((ko<<18|ko>>>14)^Va)+Bo|0;So=yo+Wo|0;Vo=Lo+ff|0;Zo=xo+gf|0;Qo=Do+Bf|0;To=((Ko<<18|Ko>>>14)^$a)+Zf|0;Jo=b<<3;Yo=e+(Jo<<2)|0;n[Yo>>2]=Ro;n[Yo+4>>2]=Fo;n[Yo+8>>2]=Oo;n[Yo+12>>2]=_o;n[Yo+16>>2]=Co;n[Yo+20>>2]=Ho;n[Yo+24>>2]=jo;n[Yo+28>>2]=qo;n[Yo+32>>2]=Go;n[Yo+36>>2]=No;n[Yo+40>>2]=Po;n[Yo+44>>2]=So;n[Yo+48>>2]=Vo;n[Yo+52>>2]=Zo;n[Yo+56>>2]=Qo;n[Yo+60>>2]=To;zo=A+((Xt|16)<<2)|0;Xo=Ro^n[zo>>2];$o=Fo^n[zo+4>>2];Af=Oo^n[zo+8>>2];ef=_o^n[zo+12>>2];rf=Co^n[zo+16>>2];nf=Ho^n[zo+20>>2];tf=jo^n[zo+24>>2];af=qo^n[zo+28>>2];of=Go^n[zo+32>>2];uf=No^n[zo+36>>2];cf=Po^n[zo+40>>2];sf=So^n[zo+44>>2];lf=Vo^n[zo+48>>2];wf=Zo^n[zo+52>>2];hf=Qo^n[zo+56>>2];vf=To^n[zo+60>>2];df=Xo+lf|0;yf=(df<<7|df>>>25)^rf;pf=yf+Xo|0;bf=(pf<<9|pf>>>23)^of;mf=bf+yf|0;Mf=(mf<<13|mf>>>19)^lf;kf=Mf+bf|0;Uf=(kf<<18|kf>>>14)^Xo;Lf=nf+$o|0;If=(Lf<<7|Lf>>>25)^uf;xf=If+nf|0;Ef=(xf<<9|xf>>>23)^wf;Df=Ef+If|0;Kf=(Df<<13|Df>>>19)^$o;Rf=Kf+Ef|0;Ff=(Rf<<18|Rf>>>14)^nf;Of=cf+tf|0;_f=(Of<<7|Of>>>25)^hf;Cf=_f+cf|0;Hf=(Cf<<9|Cf>>>23)^Af;jf=Hf+_f|0;qf=(jf<<13|jf>>>19)^tf;Gf=qf+Hf|0;Nf=(Gf<<18|Gf>>>14)^cf;Pf=vf+sf|0;Sf=(Pf<<7|Pf>>>25)^ef;Vf=Sf+vf|0;Qf=(Vf<<9|Vf>>>23)^af;Tf=Qf+Sf|0;Jf=(Tf<<13|Tf>>>19)^sf;Yf=Jf+Qf|0;zf=(Yf<<18|Yf>>>14)^vf;Xf=Uf+Sf|0;$f=(Xf<<7|Xf>>>25)^Kf;Au=$f+Uf|0;eu=(Au<<9|Au>>>23)^Hf;ru=eu+$f|0;nu=(ru<<13|ru>>>19)^Sf;tu=nu+eu|0;iu=(tu<<18|tu>>>14)^Uf;au=Ff+yf|0;ou=(au<<7|au>>>25)^qf;fu=ou+Ff|0;uu=(fu<<9|fu>>>23)^Qf;cu=uu+ou|0;su=(cu<<13|cu>>>19)^yf;lu=su+uu|0;hu=(lu<<18|lu>>>14)^Ff;vu=Nf+If|0;du=(vu<<7|vu>>>25)^Jf;yu=du+Nf|0;gu=(yu<<9|yu>>>23)^bf;bu=gu+du|0;mu=(bu<<13|bu>>>19)^If;Mu=mu+gu|0;ku=(Mu<<18|Mu>>>14)^Nf;Uu=zf+_f|0;Lu=(Uu<<7|Uu>>>25)^Mf;Iu=Lu+zf|0;xu=(Iu<<9|Iu>>>23)^Ef;Eu=xu+Lu|0;Du=(Eu<<13|Eu>>>19)^_f;Ku=Du+xu|0;Ru=(Ku<<18|Ku>>>14)^zf;Bu=iu+Lu|0;Fu=(Bu<<7|Bu>>>25)^su;Ou=Fu+iu|0;Cu=(Ou<<9|Ou>>>23)^gu;Hu=Cu+Fu|0;ju=(Hu<<13|Hu>>>19)^Lu;qu=ju+Cu|0;Nu=(qu<<18|qu>>>14)^iu;Pu=hu+$f|0;Su=(Pu<<7|Pu>>>25)^mu;Vu=Su+hu|0;m=(Vu<<9|Vu>>>23)^xu;M=m+Su|0;k=(M<<13|M>>>19)^$f;U=k+m|0;L=(U<<18|U>>>14)^hu;I=ku+ou|0;x=(I<<7|I>>>25)^Du;E=x+ku|0;D=(E<<9|E>>>23)^eu;K=D+x|0;R=(K<<13|K>>>19)^ou;B=R+D|0;O=(B<<18|B>>>14)^ku;_=Ru+du|0;C=(_<<7|_>>>25)^nu;H=C+Ru|0;q=(H<<9|H>>>23)^uu;G=q+C|0;N=(G<<13|G>>>19)^du;P=N+q|0;S=(P<<18|P>>>14)^Ru;V=Nu+C|0;Z=(V<<7|V>>>25)^k;Q=Z+Nu|0;T=(Q<<9|Q>>>23)^D;J=T+Z|0;Y=(J<<13|J>>>19)^C;W=Y+T|0;z=(W<<18|W>>>14)^Nu;X=L+Fu|0;$=(X<<7|X>>>25)^R;AA=$+L|0;rA=(AA<<9|AA>>>23)^q;nA=rA+$|0;tA=(nA<<13|nA>>>19)^Fu;iA=tA+rA|0;oA=(iA<<18|iA>>>14)^L;fA=O+Su|0;uA=(fA<<7|fA>>>25)^N;cA=uA+O|0;sA=(cA<<9|cA>>>23)^Cu;lA=sA+uA|0;wA=(lA<<13|lA>>>19)^Su;hA=wA+sA|0;vA=(hA<<18|hA>>>14)^O;dA=S+x|0;yA=(dA<<7|dA>>>25)^ju;pA=yA+S|0;gA=(pA<<9|pA>>>23)^m;bA=gA+yA|0;mA=(bA<<13|bA>>>19)^x;MA=mA+gA|0;UA=(MA<<18|MA>>>14)^S;LA=z+yA|0;IA=(LA<<7|LA>>>25)^tA;xA=IA+z|0;DA=(xA<<9|xA>>>23)^sA;KA=DA+IA|0;RA=(KA<<13|KA>>>19)^yA;BA=RA+DA|0;FA=(BA<<18|BA>>>14)^z;OA=oA+Z|0;_A=(OA<<7|OA>>>25)^wA;CA=_A+oA|0;HA=(CA<<9|CA>>>23)^gA;jA=HA+_A|0;qA=(jA<<13|jA>>>19)^Z;GA=qA+HA|0;NA=(GA<<18|GA>>>14)^oA;PA=vA+$|0;SA=(PA<<7|PA>>>25)^mA;VA=SA+vA|0;QA=(VA<<9|VA>>>23)^T;TA=QA+SA|0;JA=(TA<<13|TA>>>19)^$;YA=JA+QA|0;zA=(YA<<18|YA>>>14)^vA;XA=UA+uA|0;$A=(XA<<7|XA>>>25)^Y;Ae=$A+UA|0;ee=(Ae<<9|Ae>>>23)^rA;re=ee+$A|0;ne=(re<<13|re>>>19)^uA;te=ne+ee|0;ie=(te<<18|te>>>14)^UA;ae=FA+$A|0;oe=(ae<<7|ae>>>25)^qA;fe=oe+FA|0;ue=(fe<<9|fe>>>23)^QA;ce=ue+oe|0;se=(ce<<13|ce>>>19)^$A;le=se+ue|0;he=(le<<18|le>>>14)^FA;ve=NA+IA|0;de=(ve<<7|ve>>>25)^JA;ye=de+NA|0;ge=(ye<<9|ye>>>23)^ee;be=ge+de|0;me=(be<<13|be>>>19)^IA;Me=me+ge|0;ke=(Me<<18|Me>>>14)^NA;Ue=zA+_A|0;Le=(Ue<<7|Ue>>>25)^ne;Ie=Le+zA|0;xe=(Ie<<9|Ie>>>23)^DA;Ee=xe+Le|0;De=(Ee<<13|Ee>>>19)^_A;Ke=De+xe|0;Re=(Ke<<18|Ke>>>14)^zA;Be=ie+SA|0;Fe=(Be<<7|Be>>>25)^RA;Oe=Fe+ie|0;Ce=(Oe<<9|Oe>>>23)^HA;He=Ce+Fe|0;je=(He<<13|He>>>19)^SA;qe=je+Ce|0;Ne=(qe<<18|qe>>>14)^ie;Pe=he+Fe|0;Se=(Pe<<7|Pe>>>25)^me;Ve=Se+he|0;Ze=(Ve<<9|Ve>>>23)^xe;Qe=Ze+Se|0;Te=(Qe<<13|Qe>>>19)^Fe;Je=Te+Ze|0;Ye=(Je<<18|Je>>>14)^he;We=ke+oe|0;ze=(We<<7|We>>>25)^De;Xe=ze+ke|0;$e=(Xe<<9|Xe>>>23)^Ce;Ar=$e+ze|0;er=(Ar<<13|Ar>>>19)^oe;rr=er+$e|0;tr=(rr<<18|rr>>>14)^ke;ir=Re+de|0;ar=(ir<<7|ir>>>25)^je;or=ar+Re|0;ur=(or<<9|or>>>23)^ue;cr=ur+ar|0;sr=(cr<<13|cr>>>19)^de;lr=sr+ur|0;wr=(lr<<18|lr>>>14)^Re;hr=Ne+Le|0;vr=(hr<<7|hr>>>25)^se;dr=vr+Ne|0;yr=(dr<<9|dr>>>23)^ge;pr=yr+vr|0;gr=(pr<<13|pr>>>19)^Le;br=gr+yr|0;mr=(br<<18|br>>>14)^Ne;Mr=Ye+vr|0;kr=(Mr<<7|Mr>>>25)^er;Ur=kr+Ye|0;Ir=(Ur<<9|Ur>>>23)^ur;xr=Ir+kr|0;Er=(xr<<13|xr>>>19)^vr;Dr=Er+Ir|0;Rr=tr+Se|0;Br=(Rr<<7|Rr>>>25)^sr;Fr=Br+tr|0;Or=(Fr<<9|Fr>>>23)^yr;_r=Or+Br|0;Cr=(_r<<13|_r>>>19)^Se;Hr=Cr+Or|0;jr=wr+ze|0;qr=(jr<<7|jr>>>25)^gr;Gr=qr+wr|0;Nr=(Gr<<9|Gr>>>23)^Ze;Pr=Nr+qr|0;Sr=(Pr<<13|Pr>>>19)^ze;Vr=Sr+Nr|0;Qr=mr+ar|0;Tr=(Qr<<7|Qr>>>25)^Te;Jr=Tr+mr|0;Wr=(Jr<<9|Jr>>>23)^$e;zr=Wr+Tr|0;Xr=(zr<<13|zr>>>19)^ar;$r=Xr+Wr|0;t=((Dr<<18|Dr>>>14)^Ye)+Xo|0;i=kr+$o|0;a=Ir+Af|0;o=Er+ef|0;f=Cr+rf|0;u=((Hr<<18|Hr>>>14)^tr)+nf|0;c=Br+tf|0;s=Or+af|0;l=Nr+of|0;w=Sr+uf|0;h=((Vr<<18|Vr>>>14)^wr)+cf|0;v=qr+sf|0;d=Tr+lf|0;y=Wr+wf|0;p=Xr+hf|0;g=(($r<<18|$r>>>14)^mr)+vf|0;An=e+(Jo+Tt<<2)|0;n[An>>2]=t;n[An+4>>2]=i;n[An+8>>2]=a;n[An+12>>2]=o;n[An+16>>2]=f;n[An+20>>2]=u;n[An+24>>2]=c;n[An+28>>2]=s;n[An+32>>2]=l;n[An+36>>2]=w;n[An+40>>2]=h;n[An+44>>2]=v;n[An+48>>2]=d;n[An+52>>2]=y;n[An+56>>2]=p;n[An+60>>2]=g;b=b+2|0}while(b>>>0<ct>>>0);return}return{_SMix:o}};return{create:A,getHeap:e}}function e(){"use strict";function A(A){for(var e=new Uint8Array(A),n=atob("mC+KQpFEN3HP+8C1pdu16VvCVjnxEfFZpII/ktVeHKuYqgfYAVuDEr6FMSTDfQxVdF2+cv6x3oCnBtybdPGbwcFpm+SGR77vxp3BD8yhDCRvLOktqoR0StypsFzaiPl2UlE+mG3GMajIJwOwx39Zv/ML4MZHkafVUWPKBmcpKRSFCrcnOCEbLvxtLE0TDThTVHMKZbsKanYuycKBhSxykqHov6JLZhqocItLwqNRbMcZ6JLRJAaZ1oU1DvRwoGoQFsGkGQhsNx5Md0gntbywNLMMHDlKqthOT8qcW/NvLmjugo90b2OleBR4yIQIAseM+v++kOtsUKT3o/m+8nhxxgUAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAACAAAAYAcAAAAEAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAr/////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAQAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=="),t=8,i=0;i<n.length;i++)e[t+i]=n.charCodeAt(i);return r(self,{},A)}function e(){return 8636}var r=function(A,e,r){"use asm";var n=new A.Int32Array(r),t=new A.Int8Array(r),i=new A.Uint8Array(r);function a(A,e,r,i,a,u){A=A|0;e=e|0;r=r|0;i=i|0;a=a|0;u=u|0;var s=0,l=0,w=0,h=0,v=0,d=0,y=0,p=0,g=0,b=0,m=0;if(e>>>0>64){n[191]=0;n[183]=1779033703;n[184]=-1150833019;n[185]=1013904242;n[186]=-1521486534;n[187]=1359893119;n[188]=-1694144372;n[189]=528734635;n[190]=1541459225;o(732,A,e);c(1816,732);l=1816;w=32}else{l=A;w=e}n[191]=0;n[183]=1779033703;n[184]=-1150833019;n[185]=1013904242;n[186]=-1521486534;n[187]=1359893119;n[188]=-1694144372;n[189]=528734635;n[190]=1541459225;g=1752;m=g+64|0;do{t[g>>0]=54;g=g+1|0}while((g|0)<(m|0));if(!w)h=1;else{t[1752]=t[l>>0]^54;if((w|0)==1)h=0;else{t[1753]=t[l+1>>0]^54;if((w|0)==2)h=0;else{t[1754]=t[l+2>>0]^54;if((w|0)==3)h=0;else{v=3;do{t[1752+v>>0]=t[l+v>>0]^t[1752+v>>0];v=v+1|0}while((v|0)!=(w|0));h=0}}}}o(732,1752,64);n[216]=0;n[208]=1779033703;n[209]=-1150833019;n[210]=1013904242;n[211]=-1521486534;n[212]=1359893119;n[213]=-1694144372;n[214]=528734635;n[215]=1541459225;g=1752;m=g+64|0;do{t[g>>0]=92;g=g+1|0}while((g|0)<(m|0));if(!h){t[1752]=t[l>>0]^92;if((w|0)!=1){t[1753]=t[l+1>>0]^92;if((w|0)!=2){t[1754]=t[l+2>>0]^92;if((w|0)!=3){d=3;do{t[1752+d>>0]=t[l+d>>0]^t[1752+d>>0];d=d+1|0}while((d|0)!=(w|0))}}}}o(832,1752,64);o(732,r,i);if(u|0){s=0;p=0;do{s=s+1|0;t[1687]=s;t[1686]=s>>>8;t[1685]=s>>>16;t[1684]=s>>>24;f(932,732,200)|0;o(932,1684,4);c(1848,932);o(1032,1848,32);c(1688,1032);g=1720;b=1688;m=g+32|0;do{t[g>>0]=t[b>>0]|0;g=g+1|0;b=b+1|0}while((g|0)<(m|0));y=u-p|0;f(a+p|0,1720,(y>>>0>32?32:y)|0)|0;p=s<<5}while(p>>>0<u>>>0)}return}function o(A,e,r){A=A|0;e=e|0;r=r|0;var t=0,i=0,a=0,o=0,c=0,s=0,l=0,w=0,h=0,v=0,d=0,y=0,p=0,g=0,b=0;do if(r|0){p=A+32|0;g=n[p>>2]|0;b=g>>>3&63;n[p>>2]=g+(r<<3);c=64-b|0;s=A+36+b|0;if(c>>>0>r>>>0){f(s|0,e|0,r|0)|0;break}f(s|0,e|0,c|0)|0;l=A+36|0;u(A,l);w=e+c|0;h=r-c|0;if(h>>>0>63){v=b+r+-128|0;d=v&-64;y=d+128-b|0;a=h;o=w;while(1){u(A,o);a=a+-64|0;if(a>>>0<=63)break;else o=o+64|0}t=e+y|0;i=v-d|0}else{t=w;i=h}f(l|0,t|0,i|0)|0}while(0);return}function f(A,e,r){A=A|0;e=e|0;r=r|0;var i=0;i=A|0;if((A&3)==(e&3)){while(A&3){if(!r)return i|0;t[A>>0]=t[e>>0]|0;A=A+1|0;e=e+1|0;r=r-1|0}while((r|0)>=4){n[A>>2]=n[e>>2];A=A+4|0;e=e+4|0;r=r-4|0}}while((r|0)>0){t[A>>0]=t[e>>0]|0;A=A+1|0;e=e+1|0;r=r-1|0}return i|0}function u(A,e){A=A|0;e=e|0;var r=0,t=0,a=0,o=0,f=0,u=0,c=0,s=0,l=0,w=0,h=0,v=0,d=0,y=0,p=0,g=0,b=0;r=0;do{w=e+(r<<2)|0;n[444+(r<<2)>>2]=(i[w+2>>0]|0)<<8|(i[w+3>>0]|0)|(i[w+1>>0]|0)<<16|(i[w>>0]|0)<<24;r=r+1|0}while((r|0)!=16);t=16;h=n[111]|0;do{l=n[444+(t+-2<<2)>>2]|0;b=h;h=n[444+(t+-15<<2)>>2]|0;n[444+(t<<2)>>2]=b+(n[444+(t+-7<<2)>>2]|0)+((l>>>19|l<<13)^l>>>10^(l>>>17|l<<15))+((h>>>18|h<<14)^h>>>3^(h>>>7|h<<25));t=t+1|0}while((t|0)!=64);n[175]=n[A>>2];n[176]=n[A+4>>2];n[177]=n[A+8>>2];n[178]=n[A+12>>2];n[179]=n[A+16>>2];n[180]=n[A+20>>2];n[181]=n[A+24>>2];n[182]=n[A+28>>2];a=0;do{v=700+(((71-a|0)%8|0)<<2)|0;d=n[700+(((68-a|0)%8|0)<<2)>>2]|0;y=n[700+(((70-a|0)%8|0)<<2)>>2]|0;p=(n[444+(a<<2)>>2]|0)+(n[v>>2]|0)+((d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7))+(n[8+(a<<2)>>2]|0)+((y^n[700+(((69-a|0)%8|0)<<2)>>2])&d^y)|0;g=n[700+(((64-a|0)%8|0)<<2)>>2]|0;f=n[700+(((65-a|0)%8|0)<<2)>>2]|0;u=n[700+(((66-a|0)%8|0)<<2)>>2]|0;c=700+(((67-a|0)%8|0)<<2)|0;n[c>>2]=(n[c>>2]|0)+p;n[v>>2]=((g>>>2|g<<30)^(g>>>13|g<<19)^(g>>>22|g<<10))+p+((u|f)&g|u&f);a=a+1|0}while((a|0)!=64);o=0;do{s=A+(o<<2)|0;n[s>>2]=(n[s>>2]|0)+(n[700+(o<<2)>>2]|0);o=o+1|0}while((o|0)!=8);return}function c(A,e){A=A|0;e=e|0;var r=0,i=0,a=0,f=0,u=0;u=n[e+32>>2]|0;t[1139]=u;t[1138]=u>>>8;t[1137]=u>>>16;t[1136]=u>>>24;i=u>>>3&63;n[283]=0;o(e,380,(i>>>0<56?56:120)-i|0);o(e,1132,8);r=0;do{a=A+(r<<2)|0;f=n[e+(r<<2)>>2]|0;t[a+3>>0]=f;t[a+2>>0]=f>>>8;t[a+1>>0]=f>>>16;t[a>>0]=f>>>24;r=r+1|0}while((r|0)!=8);return}return{_PBKDF2_OneIter:a}};return{create:A,getHeap:e}}var r,n=function(){"use strict";function e(){}function r(A,r){u=A,c=r,f=128*r,o=d+f;var n=d+f*(3+A),t=16777216*Math.ceil(n/16777216);if(!s||s.byteLength<t){try{s=new ArrayBuffer(t)}catch(A){return!1}l=new Uint8Array(s),p=y.create(s),e()}return!0}function n(A){var e=new Uint8Array(A);l.set(e,d),h=262144/c,w=0,v=!0}function t(A){h=h*A>>1<<1}function i(){var A,e=h,r=w,n=r+e,i=0;switch(n>=u&&(n=u,e=n-r,i=v?1:2),2!=i&&g(e),0==i&&(A=b()),p._SMix(u,c,d,o,v?0:1,r,n),i){case 0:A=b()-A,w=n,t(100/A);break;case 1:w=0,v=!1,t(.7);break;case 2:var a=s.slice(d,d+f);g({state:"done",step:e,output:a},[a])}}function a(A){var e=A.data;if(e===!0)return void i();switch(e.cmd){case"task":n(e.input),i();break;case"config":var t=r(e.N,e.r);g({state:t?"ready":"fail"});break;case"free":p=l=s=null}}var o,f,u,c,s,l,w,h,v,d=64,y=A(),p=null,g=self.postMessage,b=Date.now;addEventListener("message",a)};!function(r){function t(A,e,r,n,t,i,a){L=128*e,h=r,E=r*A*2,I=n,K=0;var o=O.getHeap();p=o,o+=t,g=o,o+=i,b=o,o+=a,m=o,o+=L*r,o=65536*Math.ceil(o/65536),(!d||d.byteLength<o)&&(d=new ArrayBuffer(o),y=new Uint8Array(d),_=O.create(d)),v||(v=u());for(var f=0;f<I;f++){var c=C[f];c||(c=new Worker(v),c.onmessage=s,c.tag=0,C[f]=c),c.postMessage({cmd:"config",N:A,r:e})}}function i(A,e,r){y.set(A,p),y.set(e,g),M=A.length,k=e.length,U=r,x=!0,D=0,R=0,B=0,_._PBKDF2_OneIter(p,M,g,k,m,L*h);for(var n=0;n<I;n++)l(C[n])}function a(){x=!1}function o(){C.forEach(function(A){A.postMessage({cmd:"free"})})}function f(){C.forEach(function(A){A.terminate()}),C=[],d=y=O=null,URL.revokeObjectURL(v)}function u(){var e="("+n+")();"+A,r=new Blob([e],{type:"text/javascript"});return URL.createObjectURL(r)}function c(){_._PBKDF2_OneIter(p,M,m,L*h,b,U>32?U:32);var A=new Uint8Array(d,b,U);x=!1,w("oncomplete",A)}function s(A){var e=this,r=A.data;if("number"==typeof r){if(!x)return;e.postMessage(!0),D+=r;var n=Date.now();return n-F>50&&w("onprogress",D/E),void(F=n)}switch(r.state){case"done":if(!x)return;var t=new Uint8Array(r.output),i=e.tag;y.set(t,m+L*i),D+=r.step,++B==h?c():R<h&&l(e);break;case"ready":++K==I&&w("onready");break;case"fail":w("onerror","memory alloc fail")}}function l(A){var e=m+R*L,r=d.slice(e,e+L);A.tag=R++,A.postMessage({cmd:"task",input:r},[r])}function w(A,e){var r=window.scrypt;r&&r.__asmjs_cb(A,e)}var h,v,d,y,p,g,b,m,M,k,U,L,I,x,E,D,K,R,B,F,O=e(),_=null,C=[];r.config=t,r.hash=i,r.stop=a,r.free=o,r.unload=f,w("onload",r)}(r||(r={}))}();
//# sourceMappingURL=../sourcemap/asmjs.js.map
///END ASM.JS
`,r=new Blob([t],{type:"text/javascript"});await import(URL.createObjectURL(r))}catch{u.onerror("script load fail")}}()}function p(z,t,r){b.hash(z,t,r)}function m(z,t,r,s,c,h,_){b.config.apply(this,arguments)}function y(){b.stop()}function v(){b.free()}function S(){b&&(b.unload(),b=null)}function U(z,t){z=="onload"&&(b=t),u[z](t),z==="onload"&&delete globalThis.scrypt_loader_9470f487e3aa154f278269e99e6a42502ca77b8da3867a46a548909659a3db4a}var b;u.check=d,u.load=o,u.hash=p,u.config=m,u.stop=y,u.free=v,u.unload=S})(a||(a={}));var l,f;(function(u){function d(){return"asmjs"}function o(O,H){if(O)switch(arguments.length){case 1:return O();case 2:return O(H)}}function p(){I&&(clearTimeout(I),I=0)}function m(O,H,rt){if(T<2)throw Error("scrypt not loaded");if(T<4)throw Error("scrypt not configed");if(T==5)throw Error("scrypt is running");if(T=5,rt=rt||$,O=O||[],H=H||[],O.length>R)throw Error("pass.length > maxPassLen");if(H.length>W)throw Error("salt.length > maxSaltLen");if(rt>$)throw Error("dkLen > maxDkLen");g.hash(O,H,rt)}function y(){if(!A){A=[];for(var O in B)B[O].check()&&A.push(O)}return A}function v(O){if(!(T>=1)){if(!O&&(O=d(),!O))throw Error("no available mod");if(g=B[O],!g)throw Error("unsupported mod: "+O);g.onload=function(){p(),o(u.onload)},g.onerror=function(H){b(),o(u.onerror,H)},g.onready=function(){T=4,o(u.onready)},g.onprogress=function(H){o(u.onprogress,H)},g.oncomplete=function(H){T=4,o(u.onprogress,1),o(u.oncomplete,H)},p(),I=setTimeout(function(){b(),o(u.onerror,"load timeout")},L),T=1,g.load(E)}}function S(){g.stop(),T=4}function U(){T==4&&(g.free(),T=2)}function b(){T!=0&&(g.unload(),T=0),p()}function z(O,H,rt){if(!O)throw Error("config() takes at least 1 argument");var ct=0|O.N;if(!(1<ct&&ct<=8388608))throw Error("param N out of range (1 < N <= 2^23)");if(ct&ct-1)throw Error("param N must be power of 2");var yt=0|O.r;if(!(0<yt&&yt<256))throw Error("param r out of range (0 < r < 256)");var gt=0|O.P;if(!(0<gt&&gt<256))throw Error("param P out of range (0 < P < 256)");var wt=ct*yt*128;if(wt>1073741824)throw Error("memory limit exceeded (N * r * 128 > 1G)");if(H){var xt=H.maxPassLen;if(xt==null)xt=R;else if(xt<=0)throw Error("invalid maxPassLen");var Q=H.maxSaltLen;if(Q==null)Q=W;else if(Q<=0)throw Error("invalid maxSaltLen");var bt=H.maxDkLen;if(bt==null)bt=$;else if(bt<=0)throw Error("invalid maxDkLen");var P=H.maxThread;if(P==null)P=it;else if(P<=0)throw Error("invalid maxThread");rt||(R=0|xt,W=0|Q,$=0|bt,it=0|P)}if(!rt){var K=Math.ceil(gt/it),V=Math.ceil(gt/K);g.config(ct,yt,gt,V,R,W,$),T=3}}function t(O){return n.strToBytes(O)}function r(O){return n.bytesToStr(O)}function s(O){if(O.length%2)throw Error("invalid hex length");return n.hexToBytes(O)}function c(O){return n.bytesToHex(O)}function h(O){/\/$/.test(O)||(O+="/"),E=O}function _(O){L=O}var g,A,B={asmjs:a,flash:l},T=0,E="",I=0,L=3e4,R=64,W=64,$=64,it=1;u.hash=m,u.getAvailableMod=y,u.load=v,u.stop=S,u.free=U,u.unload=b,u.config=z,u.strToBin=t,u.binToStr=r,u.hexToBin=s,u.binToHex=c,u.setResPath=h,u.setResTimeout=_,e.scrypt=u})(f||(f={}))})();globalThis.scrypt_loader_9470f487e3aa154f278269e99e6a42502ca77b8da3867a46a548909659a3db4a=_r;var Ee=_r.scrypt;Ee.load();var qc=function(){const e=[];let n=!1;const a=f=>new Promise(async(u,d)=>{Ee.onprogress=o=>{f.onprogress&&f.onprogress(o)},Ee.oncomplete=o=>{f.resolve(o),u(!0)},Ee.onerror=o=>{f.reject(o),u(!1)};try{Ee.config({N:f.N,r:f.r,P:f.p},{maxPassLen:8192,maxSaltLen:2048,maxDkLen:1024,maxThread:1}),await new Promise(o=>Ee.onready=o),Ee.hash(f.key,f.salt,f.dklen)}catch(o){d(o)}});async function l(){let f=null;for(;e.length;)try{f=e.splice(0,1)[0],await a(f),await $c()}catch(u){f?.reject(u)}n=!1}return function(u,d,o,p,m,y,v=null){return new Promise((S,U)=>{e.push({key:u,salt:d,N:o,r:p,p:m,dklen:y,resolve:S,reject:U,onprogress:v}),n||(n=!0,setTimeout(l))})}}();function $c(){return new Promise(e=>setTimeout(e))}var ve=4096,sa=[85,170,85,170,85,170,85,170],gr=[85,170,85,170,85,170,85,170,170,85,170,85,170,85,170,85,85,170,85,170,85,170,85,170,170,85,170,85,170,85,170,85],yr=[85,170,85,170,85,170,85,170,85,170,85,170,85,170,85,170,85,170,85,170,85,170,85,170,85,170,85,170,85,170,85,170],Wi=[255,253,240,16,19,208,18,24,85,170],Wc=typeof process>"u"?requestAnimationFrame:setTimeout;function mr(){return new Promise(e=>Wc(e))}function cn(e,n){return e?(String(e)==="1.1"&&(n=null),n?`${e}/${n}`:`${e}/0`):"Unknown Version"}var oa=cn("1.1"),Xc=cn("1.2",10020);async function aa(e){const n=await e(0,13);if(Lt(n)!=="MyEncryption/")throw new fr;const a=Lt(await e(13,16));if(!["1.1","1.2"].includes(a))throw new bi;const l=new DataView((await e(16,20)).buffer).getUint32(0,!0);return cn(a,l)}function la(e){if(e&&e!=="AES-GCM")throw e==="ChaCha20"||e==="ChaCha20-Poly1305"?new na:e==="DES"||e==="RC4"?new ra:e==="XTS-AES"?new Ai("XTS-AES Not supported yet"):new Ai(void 0,{cause:new Error(String(e))})}function Zc(e){try{return JSON.parse(e)}catch{throw new Ht("The JSON is not valid.")}}async function un(e,n,a=null,l=null){const f=xi(12),{derived_key:u,parameter:d,N:o}=await We(n,f,a,l);l=o;const p=await crypto.subtle.importKey("raw",u,"AES-GCM",!1,["encrypt"]);if(typeof e!="string")throw new pr("The ability to directly encrypt binary data has been removed in the new version. Please use `encrypt_file` instead.");const m="AES-GCM",y=await crypto.subtle.encrypt({name:m,iv:f},p,Ie(e)),v=new Uint8Array(f.length+y.byteLength);return v.set(f,0),v.set(new Uint8Array(y),f.length),`:${wi(v)}:${d}:${l}:${5.6}:${m}:`}async function $e(e,n){let a;if(e.charAt(0)===":"){const b=e.split(":");if(b.length!==8)throw new hi("The message is bad.");const[,z,t,r,s,c,h]=b;a={data:z,phrase:t,salt:r,N:+s,v:+c,a:h}}else a=Zc(e);const l=parseInt(a.N),f=a.a;la(f);const u=me(a.data);let d,o;a.parameter?[d,o]=a.parameter.split(":"):(d=a.phrase,o=a.salt);const p=me(o);if(isNaN(l)||!d||!u||!p)throw new hi("The message or parameters are bad.");if(u.length<28)throw new hi("The message was too short.");const m=u.slice(0,12),y=u.slice(12,-16),v=u.slice(-16),S=typeof n=="string"?(await We(n,m,d,l,p)).derived_key:n,U=await crypto.subtle.importKey("raw",S,"AES-GCM",!1,["decrypt"]);try{const b=await crypto.subtle.decrypt({name:"AES-GCM",iv:m},U,new Uint8Array([...y,...v]));try{return Lt(b)}catch{throw new pr("The ability to directly decrypt binary data has been removed in the new version. If you have encrypted binary data, please recover it using the old version.")}}catch(b){if(!b)throw new Kt("Internal error.",{cause:b});const z=b.name;if(z==="InvalidAccessError")throw new Ht("InvalidAccessError.",{cause:b});if(z==="OperationError")throw new hr("Cannot decrypt. Did you provide the correct password?",{cause:b});if(!b)throw new Kt("Unexpected error.",{cause:b})}}var ms=["Furina","Neuvillette","Venti","Nahida","Kinich","Kazuha"];async function We(e,n,a=null,l=null,f=null,u=8,d=1,o=32){if(l===null&&(l=262144),typeof l!="number"||l>2097152)throw new Xo;if(f||(f=xi(64)),a||(a=ms[jc()%ms.length]),a.includes(":"))throw new Ht('phrase MUST NOT contain ":"');const p=`${a}:${wi(f)}`,m=`MyEncryption/1.1 Fontaine/4.2 Iv/${wi(n)} user_parameter=${p} user_key=${e}`;return{derived_key:await qc(Ie(m),f,l,u,d,o),parameter:p,N:l}}async function fa(e,n,a,l=null,f=null,u=null,d=32*1024*1024){if(!d)throw new Ht("chunk_size must be greater than 0.");await n(Ie("MyEncryption/1.2"));const o=10020,p=new ArrayBuffer(4);new DataView(p).setUint32(0,o,!0),await n(new Uint8Array(p));const m=wi(xi(64)),y=await un(m,a),v=Ie(y);if(v.length>ve)throw new Kt("(Internal Error) This should not happen. Contact the application developer.");const S=new ArrayBuffer(4);new DataView(S).setUint32(0,v.length,!0),await n(new Uint8Array(S)),await n(v);const U=new Uint8Array(ve-v.length-4).fill(0);await n(U),l?.(0),await mr();const b=xi(12),{derived_key:z,parameter:t,N:r}=await We(m,b,f,u);u=r;const s={parameter:t,N:u,v:5.5,a:"AES-GCM",iv:wi(b)},c=Ie(JSON.stringify(s)),h=new ArrayBuffer(4);new DataView(h).setUint32(0,c.length,!0),await n(new Uint8Array(h)),await n(c);const _=new ArrayBuffer(8);new DataView(_).setBigUint64(0,BigInt(d),!0),await n(new Uint8Array(_));let g=0,A=1,B=0;const T=new ArrayBuffer(8);new DataView(T).setBigUint64(0,BigInt(A),!0),await n(new Uint8Array(T)),l?.(0);const E=await crypto.subtle.importKey("raw",z,{name:"AES-GCM"},!1,["encrypt"]);for(;;){const L=await e(B,B+d);if(!(L instanceof Uint8Array))throw new hi("The file chunk is not a Uint8Array.");if(L.length===0)break;const R=L.length<d,W=new ArrayBuffer(12);if(A>=2**64||A>=Number.MAX_SAFE_INTEGER)throw new Zo("nonce_counter exceeded the maximum value.");if(new DataView(W).setBigUint64(4,BigInt(A),!0),A++,R){await n(new Uint8Array(gr));const H=new ArrayBuffer(8);new DataView(H).setBigUint64(0,BigInt(L.length),!0),await n(new Uint8Array(H))}const $=new Uint8Array(W),it=await crypto.subtle.encrypt({name:"AES-GCM",iv:$},E,L),O=new Uint8Array(it);await n(O),g+=L.length,B+=L.length,l?.(g)}await n(new Uint8Array(yr));const I=new ArrayBuffer(8);return new DataView(I).setBigUint64(0,BigInt(g),!0),await n(new Uint8Array(I)),await n(new Uint8Array(Wi)),!0}async function Jc(e,n,a,l=null){const f=await e(0,16);if(Lt(f)!=="MyEncryption/1.1")throw new TypeError("Invalid file format");let u=16;const d=await e(u,u+4),o=new DataView(d.buffer).getUint32(0,!0);u+=4;const p=Lt(await e(u,u+o));u+=1024;const m=await $e(p,a),y=await e(u,u+4),v=new DataView(y.buffer).getUint32(0,!0);u+=4;const S=JSON.parse(Lt(await e(u,u+v)));u+=v;const[U,b]=S.parameter.split(":"),z=me(b),t=me(S.iv),r=S.N;l?.(0),await mr();const{derived_key:s}=await We(m,t,U,r,z);let c=0;const h=await crypto.subtle.importKey("raw",s,{name:"AES-GCM"},!1,["decrypt"]);for(;;){const B=await e(u,u+8);if(u+=8,B.every((W,$)=>W===[255,253,240,16,19,208,18,24][$]))break;const T=Number(new DataView(B.buffer).getBigUint64(0,!0)),E=await e(u,u+12);u+=12;const I=await e(u,u+T+16);u+=T+16;const L=I,R=await crypto.subtle.decrypt({name:"AES-GCM",iv:E},h,L);await n(new Uint8Array(R)),c+=R.byteLength,l&&l(c)}const _=await e(u,u+8),g=Number(new DataView(_.buffer).getBigUint64(0,!0));u+=8;const A=await e(u,u+2);if(c!==g)throw new cr("File corrupted: total bytes mismatch");if(!A.every((B,T)=>B===[85,170][T]))throw new ur("Invalid end marker");return!0}async function ca(e,n,a,l=null){let f=20;if(await aa(e)===oa){if(typeof a!="string")throw new dr("operation not supported");return await Jc(e,n,a,l)}const d=new DataView((await e(f,f+4)).buffer).getUint32(0,!0),o=Lt(await e(f+4,f+4+d));if(f+=ve,d>ve)throw new Kt("(Internal Error) This should not happen. Contact the application developer.");const p=typeof a=="string"?await $e(o,a):null,m=await e(f,f+4),y=new DataView(m.buffer).getUint32(0,!0);f+=4;const v=JSON.parse(Lt(await e(f,f+y)));f+=y;const S=v.v;if(![5.5].includes(S))throw new bi;const[U,b]=v.parameter.split(":"),z=me(b),t=me(v.iv),r=v.N,s=v.a;la(s);const c=Number(new DataView((await e(f,f+8)).buffer).getBigUint64(0,!0));let h=Number(new DataView((await e(f+8,f+16)).buffer).getBigUint64(0,!0));f+=16,l?.(0),await mr();const _=typeof a=="string"?(await We(p,t,U,r,z)).derived_key:a;let g=0,A=!1;const B=await crypto.subtle.importKey("raw",_,{name:"AES-GCM"},!1,["decrypt"]);for(;;){const L=await e(f,f+8);let R=0;if(L.every((H,rt)=>H===sa[rt])){const H=await e(f,f+32);if(H.every((rt,ct)=>rt===yr[ct])){f+=32;break}if(H.every((rt,ct)=>rt===gr[ct])){A=!0,f+=32;const rt=await e(f,f+8);if(f+=8,R=Number(new DataView(rt.buffer).getBigUint64(0,!0)),R===0)break}}const W=A?R:c,$=new ArrayBuffer(12);new DataView($).setBigUint64(4,BigInt(h),!0),h++;const it=await e(f,f+W+16);f+=W+16;const O=it;try{const H=await crypto.subtle.decrypt({name:"AES-GCM",iv:new Uint8Array($)},B,O);await n(new Uint8Array(H)),g+=H.byteLength}catch(H){if(!H)throw new Kt("Internal error.",{cause:H});const rt=H.name;if(rt==="InvalidAccessError")throw new Ht("InvalidAccessError.",{cause:H});if(rt==="OperationError")throw new Jo(void 0,{cause:H});if(!H)throw new Kt("Unexpected error.",{cause:H})}l&&l(g)}const T=await e(f,f+8),E=Number(new DataView(T.buffer).getBigUint64(0,!0));f+=8;const I=await e(f,f+Wi.length);if(g!==E)throw new cr("total bytes mismatch");if(!I.every((L,R)=>L===Wi[R]))throw new ur;return!0}async function Qc(e,n,a){if(e.size<1044)throw new Error("Data not enough");const l=e.slice(0,16);if(await l.text()!=="MyEncryption/1.1")throw new TypeError("Invalid file format");const u=new DataView(await e.slice(16,20).arrayBuffer()).getUint32(0,!0),d=Lt(await e.slice(20,20+u).arrayBuffer()),o=await un(await $e(d,n),a);if(o.length>1024)throw new Error("(Internal Error) This should not happen. Contact the application developer.");const p=o.length,m=new ArrayBuffer(4);new DataView(m).setUint32(0,p,!0);const v=[l,m,Ie(o)],S=new Uint8Array(1024-o.length).fill(0);return v.push(S),new Blob(v)}async function ua(e,n,a){if(e.size<1044)throw new Error("Data not enough");if(await aa(async(S,U)=>new Uint8Array(await e.slice(S,U).arrayBuffer()))===oa)return await Qc(e,n,a);const f=new DataView(await e.slice(20,24).arrayBuffer()).getUint32(0,!0),u=Lt(await e.slice(24,24+f).arrayBuffer()),d=await un(await $e(u,n),a);if(d.length>1024)throw new Error("(Internal Error) This should not happen. Contact the application developer.");const o=d.length,p=new ArrayBuffer(4);new DataView(p).setUint32(0,o,!0);const y=[e.slice(0,20),p,Ie(d)],v=new Uint8Array(ve-d.length-4).fill(0);return y.push(v),new Blob(y)}var vr=Object.create(null);vr[Symbol.toStringTag]="CryptContext";vr.toString=function(){return`${this[Symbol.toStringTag]} Object`};async function Pi(e){return e instanceof Promise?await e:e}async function tu(){const e=Object.create(vr);return Object.defineProperty(e,"_created",{value:!0}),e}async function eu(e){if(!e||e._released)throw new Ht("Invalid context");for(const n of Reflect.ownKeys(e)){if(typeof n=="symbol"){Reflect.deleteProperty(e,n);continue}const a=Reflect.get(e,n);a&&(a.release?await Pi(a.release()):a.free?await Pi(a.free()):a.reset?await Pi(a.reset()):a.clear&&await Pi(a.clear())),n.startsWith("_")||Reflect.deleteProperty(e,n)}return Object.defineProperty(e,"_released",{value:!0}),!0}var iu=class{#i=null;#t={position:null,end:null,data:null};#e=null;get[Symbol.toStringTag](){return"Stream"}constructor(e,n){if(typeof e!="function")throw new Ht("Stream: Invalid reader");if(this.#i=e,typeof n!="number")throw new Ht("Stream: Invalid size");this.#e=n}get size(){return this.#e}#n=null;async read(e,n,a=null,l=null){if(!this.#i)throw new Error("Stream: The stream has been closed.");if(this.#t.position!=null&&this.#t.end&&this.#t.data&&e>=this.#t.position&&n<=this.#t.end)return this.#t.data.slice(e-this.#t.position,n-this.#t.position);if(e<0)throw new Ht("Stream: Invalid start position");if(n>this.#e&&(n=this.#e),a>this.#e&&(a=this.#e),this.#n=l,a){const u=await this.#i(e,a,l?.signal);return this.#n=null,this.#t.position=e,this.#t.end=e+u.length,this.#t.data=u,u.slice(0,n-e)}const f=await this.#i(e,n,l?.signal);return this.#n=null,f}abort(){this.#n?.abort()}purge(){this.#t.position=this.#t.data=this.#t.end=null}close(){this.#i=null,this.purge()}};async function nu(e,n,a,{cache:l=!0,cache_max_size:f=256*1024*1024}={}){if(e._inited)throw new Qo;Object.defineProperty(e,"_inited",{value:!0}),e._type="@decrypt_stream",e.stream={stream:n,release:()=>e.stream.stream.close()};const u=await n.read(0,13,5e3);if(Lt(u)!=="MyEncryption/")throw new fr;const d=Lt(await n.read(13,16));if(!["1.1","1.2"].includes(d))throw new bi;const o=new DataView((await n.read(16,20)).buffer).getUint32(0,!0),p=cn(d,o);let m=20;if(p!==Xc)throw new dr("Cannot perform a streamed decryption on V1.1 files");const y=new DataView((await n.read(m,m+4)).buffer).getUint32(0,!0),v=Lt(await n.read(m+4,m+4+y));if(m+=ve,y>ve)throw new Kt("(Internal Error) This should not happen. Contact the application developer.");const S=await $e(v,a),U=await n.read(m,m+4),b=new DataView(U.buffer).getUint32(0,!0);m+=4;const z=JSON.parse(Lt(await n.read(m,m+b)));m+=b;const t=z.v;if(![5.5].includes(t))throw new bi;const[r,s]=z.parameter.split(":"),c=me(s),h=me(z.iv),_=z.N,g=Number(new DataView((await n.read(m,m+8)).buffer).getBigUint64(0,!0));let A=Number(new DataView((await n.read(m+8,m+16)).buffer).getBigUint64(0,!0));m+=16;const{derived_key:B}=await We(S,h,r,_,c),T=await crypto.subtle.importKey("raw",B,{name:"AES-GCM"},!1,["decrypt"]);return e.key=T,e.chunk_size=g,e.nonce_counter=A,e.header_json_length=b,e.cache_enabled=!!l,e.cached_chunks=new Map,e.cached_chunks_add_order=new Array,e.cached_size=0,e.cache_max_size=f,!0}async function ru(e,n,a,l){if(!e._inited)throw new ta;if(e._type!=="@decrypt_stream")throw new ea(e._type);if(e._released)throw new ia;const f=e.stream.stream,u=e.chunk_size,d=e.nonce_counter,o=[],p=20+ve+4+e.header_json_length+8+8,m=u+16,y=Math.floor((f.size-p-(80+Wi.length))/m),v=Math.max(0,Math.floor(n/u)),S=Math.min(y,Math.floor(a/u));if(S<0||v>y)throw new Ht("Out of range");const U=async s=>{if(e.cache_enabled&&e.cached_chunks.has(s))return e.cached_chunks.get(s);let c=p+s*m;const h=await f.read(c,c+8,c+2*m,l);let _=0;if(h.every((E,I)=>E===sa[I])){const E=await f.read(c,c+32,null,l);if(c+=32,E.every((I,L)=>I===yr[L]))return!1;if(E.every((I,L)=>I===gr[L])){const I=await f.read(c,c+8,null,l);if(c+=8,_=Number(new DataView(I.buffer).getBigUint64(0,!0)),_===0)return!1}}const g=_||u,A=await f.read(c,c+g+16,null,l),B=d+s,T=new ArrayBuffer(12);new DataView(T).setBigUint64(4,BigInt(B),!0);try{const E=await crypto.subtle.decrypt({name:"AES-GCM",iv:new Uint8Array(T)},e.key,A);if(e.cache_enabled)for(E.byteLength<e.cache_max_size&&(e.cached_chunks_add_order.push(s),e.cached_chunks.set(s,E),e.cached_size+=E.byteLength);e.cached_size>e.cache_max_size;){const I=e.cached_chunks_add_order.shift();e.cached_size-=e.cached_chunks.get(I).byteLength,e.cached_chunks.delete(I)}return E}catch(E){if(!E)throw new Kt("Internal error.",{cause:E});const I=E.name;if(I==="InvalidAccessError")throw new Ht("InvalidAccessError.",{cause:E});if(I==="OperationError")throw new hr("Cannot decrypt. Did you provide the correct password?",{cause:E});if(!E)throw new Kt("Unexpected error.",{cause:E})}};let b=!1;for(let s=v;s<=S;s++){const c=await U(s);if(!c){b=!0;break}o.push(c)}const z=new Blob(o),t=v*u,r=z.slice(n-t,a-t);return b&&(r.eof=!0),r}var su={};jo(su,{createReaderForFileSystemHandle:()=>ou,createReaderForLocalFile:()=>ha,createReaderForRemoteObject:()=>au,createWriterForFileSystemHandle:()=>lu,createWriterForMemoryBuffer:()=>fu});async function ha(e){return async(n,a)=>new Uint8Array(await e.slice(n,a).arrayBuffer())}async function ou(e){const n=await e.getFile();return await ha(n)}async function au(e){return async(n,a)=>{const l=await fetch(e,{headers:{Range:`bytes=${n}-${a-1}`}});if(!l.ok)throw new Ko(`Network Error: HTTP ${l.status} : ${l.statusText}`,{response:l});return new Uint8Array(await l.arrayBuffer())}}async function lu(e){const n=await e.createWritable();return async a=>{await n.write(a)}}async function fu(e){return async n=>{e.push(n)}}const cu={name:"MessagePage",data(){return{inputText:"",password:"",outputText:"",copyButtonText:"复制结果",isLoading:!1}},methods:{async encryptText(){if(!this.inputText||!this.password){this.outputText="请输入消息和密码";return}try{this.isLoading=!0,this.outputText="加密中...",this.outputText=await un(this.inputText,this.password)}catch(e){this.outputText="加密失败: "+e.message}finally{this.isLoading=!1}},async decryptText(){if(!this.inputText||!this.password){this.outputText="请输入密文和密码";return}try{this.isLoading=!0,this.outputText="解密中...",this.outputText=await $e(this.inputText,this.password)}catch(e){this.outputText="解密失败: "+e.message}finally{this.isLoading=!1}},clearAll(){this.inputText="",this.password="",this.outputText=""},async copyToClipboard(){if(!this.outputText)return;const e=this.copyButtonText;try{await navigator.clipboard.writeText(this.outputText),this.copyButtonText="复制成功!"}catch{this.copyButtonText="复制失败!"}setTimeout(()=>{this.copyButtonText=e},1500)}}},uu={class:"message-page"},hu={class:"input-section"},du={class:"button-group"},pu=["disabled"],_u=["disabled"],gu=["disabled"],yu={class:"output-section"},mu={class:"output-box"};function vu(e,n,a,l,f,u){return Ft(),Nt("div",uu,[n[7]||(n[7]=q("h2",null,"消息加密/解密",-1)),q("div",hu,[Pt(q("textarea",{"onUpdate:modelValue":n[0]||(n[0]=d=>f.inputText=d),placeholder:"输入要加密的消息或要解密的密文"},null,512),[[ee,f.inputText]]),Pt(q("input",{type:"password","onUpdate:modelValue":n[1]||(n[1]=d=>f.password=d),placeholder:"输入密码"},null,512),[[ee,f.password]]),q("div",du,[q("button",{onClick:n[2]||(n[2]=(...d)=>u.encryptText&&u.encryptText(...d)),disabled:f.isLoading},"加密",8,pu),q("button",{onClick:n[3]||(n[3]=(...d)=>u.decryptText&&u.decryptText(...d)),disabled:f.isLoading},"解密",8,_u),q("button",{onClick:n[4]||(n[4]=(...d)=>u.clearAll&&u.clearAll(...d)),disabled:f.isLoading},"清空",8,gu)])]),q("div",yu,[n[6]||(n[6]=q("h3",null,"结果:",-1)),q("div",mu,je(f.outputText),1),f.outputText?(Ft(),Nt("button",{key:0,onClick:n[5]||(n[5]=(...d)=>u.copyToClipboard&&u.copyToClipboard(...d)),class:"copy-button"},je(f.copyButtonText),1)):ye("",!0)])])}const wu=Ci(cu,[["render",vu],["__scopeId","data-v-6d09f3d5"]]),xu={name:"FilePage",data(){return{selectedFileHandle:null,selectedFile:null,password:"",chunkSize:32,statusMessage:"",isLoading:!1,showPasswordChange:!1,newPassword:""}},methods:{async selectFile(){try{const[e]=await window.showOpenFilePicker({writable:!0,multiple:!1});this.selectedFileHandle=e,this.selectedFile=await e.getFile(),this.statusMessage=`已选择文件: ${this.selectedFile.name}`}catch(e){this.statusMessage="文件选择取消或出错: "+e.message}},async encryptFile(){if(!this.selectedFile){this.statusMessage="请选择文件";return}if(!(!this.password&&!confirm("确定要使用空密码？这非常不安全！"))){this.isLoading=!0;try{const e=`${this.selectedFile.name}.enc`,a=await(await window.showSaveFilePicker({suggestedName:e})).createWritable(),l=this.chunkSize*1024*1024;await fa(async(f,u)=>{const d=await this.selectedFile.slice(f,u).arrayBuffer();return new Uint8Array(d)},f=>a.write(f),this.password,f=>{const u=Number(f/this.selectedFile.size*100);f>=this.selectedFile.size||u===100||u.toFixed(2)==="100.00"?this.statusMessage="正在保存文件，请稍候...这可能需要一些时间。":this.statusMessage=`加密中... ${u.toFixed(2)}%`},null,null,l),await a.close(),this.statusMessage=`文件加密成功: ${e}`}catch(e){this.statusMessage="加密失败: "+e.message}finally{this.isLoading=!1}}},async decryptFile(){if(!this.selectedFile){this.statusMessage="请选择文件";return}this.isLoading=!0;try{const e=this.selectedFile.name.endsWith(".enc")?this.selectedFile.name.slice(0,-4):`decrypted_${this.selectedFile.name}`,a=await(await window.showSaveFilePicker({suggestedName:e})).createWritable();await ca(async(l,f)=>{const u=await this.selectedFile.slice(l,f).arrayBuffer();return new Uint8Array(u)},l=>a.write(l),this.password,l=>{const f=Number(l/this.selectedFile.size*100);l>=this.selectedFile.size||f===100||f.toFixed(2)==="100.00"?this.statusMessage="正在保存文件，请稍候...这可能需要一些时间。":this.statusMessage=`解密中... ${f.toFixed(2)}%`}),await a.close(),this.statusMessage=`文件解密成功: ${e}`}catch(e){this.statusMessage="解密失败: "+e.message}finally{this.isLoading=!1}},clearAll(){this.selectedFile=null,this.password="",this.statusMessage=""},changePassword(){if(!this.selectedFile){this.statusMessage="请选择文件";return}this.showPasswordChange=!0,this.newPassword="",this.confirmPassword=""},cancelPasswordChange(){this.showPasswordChange=!1,this.newPassword="",this.confirmPassword=""},async confirmPasswordChange(){if(!(!this.newPassword&&!confirm("确定要使用空密码？这非常不安全！"))){this.isLoading=!0;try{this.statusMessage="正在处理...";const e=this.selectedFileHandle,a=this.selectedFile.slice(0,5e3);this.statusMessage="正在更改密码，请稍候...";const l=await ua(a,this.password,this.newPassword);this.statusMessage="正在保存文件，请稍候...这可能需要一些时间。";const f=await e.createWritable({keepExistingData:!0});await f.write(l),await f.close(),this.statusMessage="密码更改成功",this.showPasswordChange=!1,this.newPassword="",this.confirmPassword=""}catch(e){this.statusMessage="密码更改失败: "+e.message}finally{this.isLoading=!1}}}}},bu={class:"file-page"},Au={class:"input-section"},Su={class:"file-select-group"},Uu={class:"file-name"},Eu={class:"chunk-size-group"},Cu={class:"chunk-size-header"},Bu={class:"button-group",style:{"margin-top":"0.5em"}},Tu=["disabled"],Iu=["disabled"],Pu=["disabled"],Fu=["disabled"],Lu={key:0,class:"password-change-section"},ku={class:"button-group"},Ru=["disabled"],zu=["disabled"],Mu={key:1,class:"status-section"},Du={class:"status-box"};function Ou(e,n,a,l,f,u){return Ft(),Nt("div",bu,[n[14]||(n[14]=q("h2",null,"文件加密/解密",-1)),q("div",Au,[q("div",Su,[q("button",{onClick:n[0]||(n[0]=(...d)=>u.selectFile&&u.selectFile(...d)),style:{flex:"unset",padding:"10px 20px"}},"选择文件"),q("div",Uu,je(f.selectedFile?.name||"没有选择文件"),1)]),Pt(q("input",{type:"password","onUpdate:modelValue":n[1]||(n[1]=d=>f.password=d),placeholder:"输入密码"},null,512),[[ee,f.password]]),q("div",Eu,[q("div",Cu,[n[10]||(n[10]=q("label",null,"分块大小(MiB):",-1)),Pt(q("input",{type:"number","onUpdate:modelValue":n[2]||(n[2]=d=>f.chunkSize=d),min:"1",max:"128"},null,512),[[ee,f.chunkSize,void 0,{number:!0}]])]),n[11]||(n[11]=Uo('<details class="hint-box" open data-v-0db39e02><summary class="hint-title" data-v-0db39e02>分块大小建议:</summary><ul class="hint-list" data-v-0db39e02><li data-v-0db39e02><strong data-v-0db39e02>大文件(32MiB)</strong>: 整体文件处理，提高性能</li><li data-v-0db39e02><strong data-v-0db39e02>视频文件(5-32MiB)</strong>: 增强随机读取性能</li><li data-v-0db39e02><strong data-v-0db39e02>一般视频(5MiB)</strong>: 适合大多数视频文件</li><li data-v-0db39e02><strong data-v-0db39e02>较大视频(16-32MiB)</strong>: 适合高清/4K视频</li></ul><div class="warning-text" data-v-0db39e02> ⚠️ 注意: 分块太小会导致文件被分成过多块，可能产生大量请求次数，造成额外费用。 请根据文件类型和大小选择合适的分块大小。 </div></details>',1))]),q("div",Bu,[q("button",{onClick:n[3]||(n[3]=(...d)=>u.encryptFile&&u.encryptFile(...d)),disabled:f.isLoading},"加密",8,Tu),q("button",{onClick:n[4]||(n[4]=(...d)=>u.decryptFile&&u.decryptFile(...d)),disabled:f.isLoading},"解密",8,Iu),q("button",{onClick:n[5]||(n[5]=(...d)=>u.changePassword&&u.changePassword(...d)),disabled:f.isLoading},"改密",8,Pu),q("button",{onClick:n[6]||(n[6]=(...d)=>u.clearAll&&u.clearAll(...d)),disabled:f.isLoading},"清除",8,Fu)])]),f.showPasswordChange?(Ft(),Nt("div",Lu,[n[12]||(n[12]=q("h3",null,"更改密码",-1)),Pt(q("input",{type:"password","onUpdate:modelValue":n[7]||(n[7]=d=>f.newPassword=d),placeholder:"输入新密码"},null,512),[[ee,f.newPassword]]),q("div",ku,[q("button",{onClick:n[8]||(n[8]=(...d)=>u.confirmPasswordChange&&u.confirmPasswordChange(...d)),disabled:f.isLoading},"确认更改",8,Ru),q("button",{onClick:n[9]||(n[9]=(...d)=>u.cancelPasswordChange&&u.cancelPasswordChange(...d)),disabled:f.isLoading},"取消",8,zu)])])):ye("",!0),f.statusMessage?(Ft(),Nt("div",Mu,[n[13]||(n[13]=q("h3",null,"状态:",-1)),q("div",Du,je(f.statusMessage),1)])):ye("",!0)])}const Nu=Ci(xu,[["render",Ou],["__scopeId","data-v-0db39e02"]]),Hu={name:"FileClassicPage",data(){return{selectedFile:null,password:"",chunkSize:32,statusMessage:"",isLoading:!1,showPasswordChange:!1,newPassword:"",confirmPassword:""}},methods:{handleFileChange(e){this.selectedFile=e.target.files[0],this.selectedFile&&(this.statusMessage=`已选择文件: ${this.selectedFile.name}`)},async encryptFile(){if(!this.selectedFile){this.statusMessage="请选择文件";return}if(!(!this.password&&!confirm("确定要使用空密码？这非常不安全！"))){this.isLoading=!0;try{const e=`${this.selectedFile.name}.enc`,n=document.createElement("a");n.style.display="none",document.body.appendChild(n);const a=this.chunkSize*1024*1024,l=[];await fa(async(d,o)=>{const p=await this.selectedFile.slice(d,o).arrayBuffer();return new Uint8Array(p)},d=>{l.push(d)},this.password,d=>{const o=(d/this.selectedFile.size*100).toFixed(2);this.statusMessage=`加密中... ${o}%`},null,null,a);const f=new Blob(l,{type:"application/octet-stream"}),u=URL.createObjectURL(f);n.href=u,n.download=e,n.click(),URL.revokeObjectURL(u),document.body.removeChild(n),this.statusMessage=`文件加密成功: ${e}`}catch(e){this.statusMessage="加密失败: "+e.message}finally{this.isLoading=!1}}},async decryptFile(){if(!this.selectedFile){this.statusMessage="请选择文件";return}this.isLoading=!0;try{const e=this.selectedFile.name.endsWith(".enc")?this.selectedFile.name.slice(0,-4):`decrypted_${this.selectedFile.name}`,n=document.createElement("a");n.style.display="none",document.body.appendChild(n);const a=[];await ca(async(u,d)=>{const o=await this.selectedFile.slice(u,d).arrayBuffer();return new Uint8Array(o)},u=>{a.push(u)},this.password,u=>{const d=(u/this.selectedFile.size*100).toFixed(2);this.statusMessage=`解密中... ${d}%`});const l=new Blob(a,{type:"application/octet-stream"}),f=URL.createObjectURL(l);n.href=f,n.download=e,n.click(),URL.revokeObjectURL(f),document.body.removeChild(n),this.statusMessage=`文件解密成功: ${e}`}catch(e){this.statusMessage="解密失败: "+e.message}finally{this.isLoading=!1}},clearAll(){this.$refs.fileInput.value="",this.selectedFile=null,this.password="",this.statusMessage="",this.showPasswordChange=!1,this.newPassword="",this.confirmPassword=""},changePassword(){if(!this.selectedFile){this.statusMessage="请选择文件并输入当前密码";return}this.showPasswordChange=!0,this.newPassword="",this.confirmPassword=""},cancelPasswordChange(){this.showPasswordChange=!1,this.newPassword="",this.confirmPassword=""},async confirmPasswordChange(){if(!(!this.newPassword&&!confirm("确定要使用空密码？这非常不安全！"))){this.isLoading=!0;try{const e=this.selectedFile.slice(0,5e3),n=await ua(e,this.password,this.newPassword),a=document.createElement("a");a.style.display="none",document.body.appendChild(a);const l=URL.createObjectURL(new Blob([n,this.selectedFile.slice(n.size)],{type:"application/octet-stream"}));a.href=l,a.download=this.selectedFile.name,a.click(),URL.revokeObjectURL(l),document.body.removeChild(a),this.statusMessage="密码更改成功",this.showPasswordChange=!1,this.newPassword="",this.confirmPassword=""}catch(e){this.statusMessage="密码更改失败: "+e.message}finally{this.isLoading=!1}}}}},Gu={class:"file-page"},Vu={class:"input-section"},ju={class:"chunk-size-group"},Yu={class:"chunk-size-header"},Ku={class:"button-group",style:{"margin-top":"0.5em"}},qu=["disabled"],$u=["disabled"],Wu=["disabled"],Xu=["disabled"],Zu={key:0,class:"password-change-section"},Ju={class:"button-group"},Qu=["disabled"],th=["disabled"],eh={key:0,class:"status-section"},ih={class:"status-box"};function nh(e,n,a,l,f,u){return Ft(),Nt("div",Gu,[n[14]||(n[14]=q("h2",null,"文件加密/解密(兼容版)",-1)),q("div",Vu,[q("input",{type:"file",ref:"fileInput",onChange:n[0]||(n[0]=(...d)=>u.handleFileChange&&u.handleFileChange(...d))},null,544),Pt(q("input",{type:"password","onUpdate:modelValue":n[1]||(n[1]=d=>f.password=d),placeholder:"输入密码"},null,512),[[ee,f.password]]),q("div",ju,[q("div",Yu,[n[10]||(n[10]=q("label",null,"分块大小(MiB):",-1)),Pt(q("input",{type:"number","onUpdate:modelValue":n[2]||(n[2]=d=>f.chunkSize=d),min:"1",max:"128"},null,512),[[ee,f.chunkSize,void 0,{number:!0}]])]),n[11]||(n[11]=Uo('<details class="hint-box" open data-v-a4342bf7><summary class="hint-title" data-v-a4342bf7>分块大小建议:</summary><ul class="hint-list" data-v-a4342bf7><li data-v-a4342bf7><strong data-v-a4342bf7>大文件(32MiB)</strong>: 整体文件处理，提高性能</li><li data-v-a4342bf7><strong data-v-a4342bf7>视频文件(5-32MiB)</strong>: 增强随机读取性能</li><li data-v-a4342bf7><strong data-v-a4342bf7>一般视频(5MiB)</strong>: 适合大多数视频文件</li><li data-v-a4342bf7><strong data-v-a4342bf7>较大视频(16-32MiB)</strong>: 适合高清/4K视频</li></ul><div class="warning-text" data-v-a4342bf7> ⚠️ 注意: 分块太小会导致文件被分成过多块，可能产生大量请求次数，造成额外费用。 请根据文件类型和大小选择合适的分块大小。 </div></details>',1))]),q("div",Ku,[q("button",{onClick:n[3]||(n[3]=(...d)=>u.encryptFile&&u.encryptFile(...d)),disabled:f.isLoading},"加密",8,qu),q("button",{onClick:n[4]||(n[4]=(...d)=>u.decryptFile&&u.decryptFile(...d)),disabled:f.isLoading},"解密",8,$u),q("button",{onClick:n[5]||(n[5]=(...d)=>u.changePassword&&u.changePassword(...d)),disabled:f.isLoading},"改密",8,Wu),q("button",{onClick:n[6]||(n[6]=(...d)=>u.clearAll&&u.clearAll(...d)),disabled:f.isLoading},"清除",8,Xu)]),f.showPasswordChange?(Ft(),Nt("div",Zu,[n[12]||(n[12]=q("h3",null,"更改密码",-1)),Pt(q("input",{type:"password","onUpdate:modelValue":n[7]||(n[7]=d=>f.newPassword=d),placeholder:"输入新密码"},null,512),[[ee,f.newPassword]]),q("div",Ju,[q("button",{onClick:n[8]||(n[8]=(...d)=>u.confirmPasswordChange&&u.confirmPasswordChange(...d)),disabled:f.isLoading},"确认更改",8,Qu),q("button",{onClick:n[9]||(n[9]=(...d)=>u.cancelPasswordChange&&u.cancelPasswordChange(...d)),disabled:f.isLoading},"取消",8,th)])])):ye("",!0)]),f.statusMessage?(Ft(),Nt("div",eh,[n[13]||(n[13]=q("h3",null,"状态:",-1)),q("div",ih,je(f.statusMessage),1)])):ye("",!0)])}const rh=Ci(Hu,[["render",nh],["__scopeId","data-v-a4342bf7"]]);function sh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Sn={},vs;function oh(){return vs||(vs=1,function(e){var n=function(){var t=new Date,r=4,s=3,c=2,h=1,_=r,g={setLogLevel:function(A){A==this.debug?_=h:A==this.info?_=c:A==this.warn?_=s:(A==this.error,_=r)},debug:function(A,B){console.debug===void 0&&(console.debug=console.log),h>=_&&console.debug("["+n.getDurationString(new Date-t,1e3)+"]","["+A+"]",B)},log:function(A,B){this.debug(A.msg)},info:function(A,B){c>=_&&console.info("["+n.getDurationString(new Date-t,1e3)+"]","["+A+"]",B)},warn:function(A,B){s>=_&&console.warn("["+n.getDurationString(new Date-t,1e3)+"]","["+A+"]",B)},error:function(A,B){r>=_&&console.error("["+n.getDurationString(new Date-t,1e3)+"]","["+A+"]",B)}};return g}();n.getDurationString=function(t,r){var s;function c(T,E){for(var I=""+T,L=I.split(".");L[0].length<E;)L[0]="0"+L[0];return L.join(".")}t<0?(s=!0,t=-t):s=!1;var h=r||1,_=t/h,g=Math.floor(_/3600);_-=g*3600;var A=Math.floor(_/60);_-=A*60;var B=_*1e3;return _=Math.floor(_),B-=_*1e3,B=Math.floor(B),(s?"-":"")+g+":"+c(A,2)+":"+c(_,2)+"."+c(B,3)},n.printRanges=function(t){var r=t.length;if(r>0){for(var s="",c=0;c<r;c++)c>0&&(s+=","),s+="["+n.getDurationString(t.start(c))+","+n.getDurationString(t.end(c))+"]";return s}else return"(empty)"},e.Log=n;var a=function(t){if(t instanceof ArrayBuffer)this.buffer=t,this.dataview=new DataView(t);else throw"Needs an array buffer";this.position=0};a.prototype.getPosition=function(){return this.position},a.prototype.getEndPosition=function(){return this.buffer.byteLength},a.prototype.getLength=function(){return this.buffer.byteLength},a.prototype.seek=function(t){var r=Math.max(0,Math.min(this.buffer.byteLength,t));return this.position=isNaN(r)||!isFinite(r)?0:r,!0},a.prototype.isEos=function(){return this.getPosition()>=this.getEndPosition()},a.prototype.readAnyInt=function(t,r){var s=0;if(this.position+t<=this.buffer.byteLength){switch(t){case 1:r?s=this.dataview.getInt8(this.position):s=this.dataview.getUint8(this.position);break;case 2:r?s=this.dataview.getInt16(this.position):s=this.dataview.getUint16(this.position);break;case 3:if(r)throw"No method for reading signed 24 bits values";s=this.dataview.getUint8(this.position)<<16,s|=this.dataview.getUint8(this.position+1)<<8,s|=this.dataview.getUint8(this.position+2);break;case 4:r?s=this.dataview.getInt32(this.position):s=this.dataview.getUint32(this.position);break;case 8:if(r)throw"No method for reading signed 64 bits values";s=this.dataview.getUint32(this.position)<<32,s|=this.dataview.getUint32(this.position+4);break;default:throw"readInt method not implemented for size: "+t}return this.position+=t,s}else throw"Not enough bytes in buffer"},a.prototype.readUint8=function(){return this.readAnyInt(1,!1)},a.prototype.readUint16=function(){return this.readAnyInt(2,!1)},a.prototype.readUint24=function(){return this.readAnyInt(3,!1)},a.prototype.readUint32=function(){return this.readAnyInt(4,!1)},a.prototype.readUint64=function(){return this.readAnyInt(8,!1)},a.prototype.readString=function(t){if(this.position+t<=this.buffer.byteLength){for(var r="",s=0;s<t;s++)r+=String.fromCharCode(this.readUint8());return r}else throw"Not enough bytes in buffer"},a.prototype.readCString=function(){for(var t=[];;){var r=this.readUint8();if(r!==0)t.push(r);else break}return String.fromCharCode.apply(null,t)},a.prototype.readInt8=function(){return this.readAnyInt(1,!0)},a.prototype.readInt16=function(){return this.readAnyInt(2,!0)},a.prototype.readInt32=function(){return this.readAnyInt(4,!0)},a.prototype.readInt64=function(){return this.readAnyInt(8,!1)},a.prototype.readUint8Array=function(t){for(var r=new Uint8Array(t),s=0;s<t;s++)r[s]=this.readUint8();return r},a.prototype.readInt16Array=function(t){for(var r=new Int16Array(t),s=0;s<t;s++)r[s]=this.readInt16();return r},a.prototype.readUint16Array=function(t){for(var r=new Int16Array(t),s=0;s<t;s++)r[s]=this.readUint16();return r},a.prototype.readUint32Array=function(t){for(var r=new Uint32Array(t),s=0;s<t;s++)r[s]=this.readUint32();return r},a.prototype.readInt32Array=function(t){for(var r=new Int32Array(t),s=0;s<t;s++)r[s]=this.readInt32();return r},e.MP4BoxStream=a;var l=function(t,r,s){this._byteOffset=r||0,t instanceof ArrayBuffer?this.buffer=t:typeof t=="object"?(this.dataView=t,r&&(this._byteOffset+=r)):this.buffer=new ArrayBuffer(t||0),this.position=0,this.endianness=s??l.LITTLE_ENDIAN};l.prototype={},l.prototype.getPosition=function(){return this.position},l.prototype._realloc=function(t){if(this._dynamicSize){var r=this._byteOffset+this.position+t,s=this._buffer.byteLength;if(r<=s){r>this._byteLength&&(this._byteLength=r);return}for(s<1&&(s=1);r>s;)s*=2;var c=new ArrayBuffer(s),h=new Uint8Array(this._buffer),_=new Uint8Array(c,0,h.length);_.set(h),this.buffer=c,this._byteLength=r}},l.prototype._trimAlloc=function(){if(this._byteLength!=this._buffer.byteLength){var t=new ArrayBuffer(this._byteLength),r=new Uint8Array(t),s=new Uint8Array(this._buffer,0,r.length);r.set(s),this.buffer=t}},l.BIG_ENDIAN=!1,l.LITTLE_ENDIAN=!0,l.prototype._byteLength=0,Object.defineProperty(l.prototype,"byteLength",{get:function(){return this._byteLength-this._byteOffset}}),Object.defineProperty(l.prototype,"buffer",{get:function(){return this._trimAlloc(),this._buffer},set:function(t){this._buffer=t,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._buffer.byteLength}}),Object.defineProperty(l.prototype,"byteOffset",{get:function(){return this._byteOffset},set:function(t){this._byteOffset=t,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._buffer.byteLength}}),Object.defineProperty(l.prototype,"dataView",{get:function(){return this._dataView},set:function(t){this._byteOffset=t.byteOffset,this._buffer=t.buffer,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._byteOffset+t.byteLength}}),l.prototype.seek=function(t){var r=Math.max(0,Math.min(this.byteLength,t));this.position=isNaN(r)||!isFinite(r)?0:r},l.prototype.isEof=function(){return this.position>=this._byteLength},l.prototype.mapUint8Array=function(t){this._realloc(t*1);var r=new Uint8Array(this._buffer,this.byteOffset+this.position,t);return this.position+=t*1,r},l.prototype.readInt32Array=function(t,r){t=t??this.byteLength-this.position/4;var s=new Int32Array(t);return l.memcpy(s.buffer,0,this.buffer,this.byteOffset+this.position,t*s.BYTES_PER_ELEMENT),l.arrayToNative(s,r??this.endianness),this.position+=s.byteLength,s},l.prototype.readInt16Array=function(t,r){t=t??this.byteLength-this.position/2;var s=new Int16Array(t);return l.memcpy(s.buffer,0,this.buffer,this.byteOffset+this.position,t*s.BYTES_PER_ELEMENT),l.arrayToNative(s,r??this.endianness),this.position+=s.byteLength,s},l.prototype.readInt8Array=function(t){t=t??this.byteLength-this.position;var r=new Int8Array(t);return l.memcpy(r.buffer,0,this.buffer,this.byteOffset+this.position,t*r.BYTES_PER_ELEMENT),this.position+=r.byteLength,r},l.prototype.readUint32Array=function(t,r){t=t??this.byteLength-this.position/4;var s=new Uint32Array(t);return l.memcpy(s.buffer,0,this.buffer,this.byteOffset+this.position,t*s.BYTES_PER_ELEMENT),l.arrayToNative(s,r??this.endianness),this.position+=s.byteLength,s},l.prototype.readUint16Array=function(t,r){t=t??this.byteLength-this.position/2;var s=new Uint16Array(t);return l.memcpy(s.buffer,0,this.buffer,this.byteOffset+this.position,t*s.BYTES_PER_ELEMENT),l.arrayToNative(s,r??this.endianness),this.position+=s.byteLength,s},l.prototype.readUint8Array=function(t){t=t??this.byteLength-this.position;var r=new Uint8Array(t);return l.memcpy(r.buffer,0,this.buffer,this.byteOffset+this.position,t*r.BYTES_PER_ELEMENT),this.position+=r.byteLength,r},l.prototype.readFloat64Array=function(t,r){t=t??this.byteLength-this.position/8;var s=new Float64Array(t);return l.memcpy(s.buffer,0,this.buffer,this.byteOffset+this.position,t*s.BYTES_PER_ELEMENT),l.arrayToNative(s,r??this.endianness),this.position+=s.byteLength,s},l.prototype.readFloat32Array=function(t,r){t=t??this.byteLength-this.position/4;var s=new Float32Array(t);return l.memcpy(s.buffer,0,this.buffer,this.byteOffset+this.position,t*s.BYTES_PER_ELEMENT),l.arrayToNative(s,r??this.endianness),this.position+=s.byteLength,s},l.prototype.readInt32=function(t){var r=this._dataView.getInt32(this.position,t??this.endianness);return this.position+=4,r},l.prototype.readInt16=function(t){var r=this._dataView.getInt16(this.position,t??this.endianness);return this.position+=2,r},l.prototype.readInt8=function(){var t=this._dataView.getInt8(this.position);return this.position+=1,t},l.prototype.readUint32=function(t){var r=this._dataView.getUint32(this.position,t??this.endianness);return this.position+=4,r},l.prototype.readUint16=function(t){var r=this._dataView.getUint16(this.position,t??this.endianness);return this.position+=2,r},l.prototype.readUint8=function(){var t=this._dataView.getUint8(this.position);return this.position+=1,t},l.prototype.readFloat32=function(t){var r=this._dataView.getFloat32(this.position,t??this.endianness);return this.position+=4,r},l.prototype.readFloat64=function(t){var r=this._dataView.getFloat64(this.position,t??this.endianness);return this.position+=8,r},l.endianness=new Int8Array(new Int16Array([1]).buffer)[0]>0,l.memcpy=function(t,r,s,c,h){var _=new Uint8Array(t,r,h),g=new Uint8Array(s,c,h);_.set(g)},l.arrayToNative=function(t,r){return r==this.endianness?t:this.flipArrayEndianness(t)},l.nativeToEndian=function(t,r){return this.endianness==r?t:this.flipArrayEndianness(t)},l.flipArrayEndianness=function(t){for(var r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),s=0;s<t.byteLength;s+=t.BYTES_PER_ELEMENT)for(var c=s+t.BYTES_PER_ELEMENT-1,h=s;c>h;c--,h++){var _=r[h];r[h]=r[c],r[c]=_}return t},l.prototype.failurePosition=0,String.fromCharCodeUint8=function(t){for(var r=[],s=0;s<t.length;s++)r[s]=t[s];return String.fromCharCode.apply(null,r)},l.prototype.readString=function(t,r){return r==null||r=="ASCII"?String.fromCharCodeUint8.apply(null,[this.mapUint8Array(t??this.byteLength-this.position)]):new TextDecoder(r).decode(this.mapUint8Array(t))},l.prototype.readCString=function(t){var r=this.byteLength-this.position,s=new Uint8Array(this._buffer,this._byteOffset+this.position),c=r;t!=null&&(c=Math.min(t,r));for(var h=0;h<c&&s[h]!==0;h++);var _=String.fromCharCodeUint8.apply(null,[this.mapUint8Array(h)]);return t!=null?this.position+=c-h:h!=r&&(this.position+=1),_};var f=Math.pow(2,32);l.prototype.readInt64=function(){return this.readInt32()*f+this.readUint32()},l.prototype.readUint64=function(){return this.readUint32()*f+this.readUint32()},l.prototype.readInt64=function(){return this.readUint32()*f+this.readUint32()},l.prototype.readUint24=function(){return(this.readUint8()<<16)+(this.readUint8()<<8)+this.readUint8()},e.DataStream=l,l.prototype.save=function(t){var r=new Blob([this.buffer]);if(window.URL&&URL.createObjectURL){var s=window.URL.createObjectURL(r),c=document.createElement("a");document.body.appendChild(c),c.setAttribute("href",s),c.setAttribute("download",t),c.setAttribute("target","_self"),c.click(),window.URL.revokeObjectURL(s)}else throw"DataStream.save: Can't create object URL."},l.prototype._dynamicSize=!0,Object.defineProperty(l.prototype,"dynamicSize",{get:function(){return this._dynamicSize},set:function(t){t||this._trimAlloc(),this._dynamicSize=t}}),l.prototype.shift=function(t){var r=new ArrayBuffer(this._byteLength-t),s=new Uint8Array(r),c=new Uint8Array(this._buffer,t,s.length);s.set(c),this.buffer=r,this.position-=t},l.prototype.writeInt32Array=function(t,r){if(this._realloc(t.length*4),t instanceof Int32Array&&this.byteOffset+this.position%t.BYTES_PER_ELEMENT===0)l.memcpy(this._buffer,this.byteOffset+this.position,t.buffer,0,t.byteLength),this.mapInt32Array(t.length,r);else for(var s=0;s<t.length;s++)this.writeInt32(t[s],r)},l.prototype.writeInt16Array=function(t,r){if(this._realloc(t.length*2),t instanceof Int16Array&&this.byteOffset+this.position%t.BYTES_PER_ELEMENT===0)l.memcpy(this._buffer,this.byteOffset+this.position,t.buffer,0,t.byteLength),this.mapInt16Array(t.length,r);else for(var s=0;s<t.length;s++)this.writeInt16(t[s],r)},l.prototype.writeInt8Array=function(t){if(this._realloc(t.length*1),t instanceof Int8Array&&this.byteOffset+this.position%t.BYTES_PER_ELEMENT===0)l.memcpy(this._buffer,this.byteOffset+this.position,t.buffer,0,t.byteLength),this.mapInt8Array(t.length);else for(var r=0;r<t.length;r++)this.writeInt8(t[r])},l.prototype.writeUint32Array=function(t,r){if(this._realloc(t.length*4),t instanceof Uint32Array&&this.byteOffset+this.position%t.BYTES_PER_ELEMENT===0)l.memcpy(this._buffer,this.byteOffset+this.position,t.buffer,0,t.byteLength),this.mapUint32Array(t.length,r);else for(var s=0;s<t.length;s++)this.writeUint32(t[s],r)},l.prototype.writeUint16Array=function(t,r){if(this._realloc(t.length*2),t instanceof Uint16Array&&this.byteOffset+this.position%t.BYTES_PER_ELEMENT===0)l.memcpy(this._buffer,this.byteOffset+this.position,t.buffer,0,t.byteLength),this.mapUint16Array(t.length,r);else for(var s=0;s<t.length;s++)this.writeUint16(t[s],r)},l.prototype.writeUint8Array=function(t){if(this._realloc(t.length*1),t instanceof Uint8Array&&this.byteOffset+this.position%t.BYTES_PER_ELEMENT===0)l.memcpy(this._buffer,this.byteOffset+this.position,t.buffer,0,t.byteLength),this.mapUint8Array(t.length);else for(var r=0;r<t.length;r++)this.writeUint8(t[r])},l.prototype.writeFloat64Array=function(t,r){if(this._realloc(t.length*8),t instanceof Float64Array&&this.byteOffset+this.position%t.BYTES_PER_ELEMENT===0)l.memcpy(this._buffer,this.byteOffset+this.position,t.buffer,0,t.byteLength),this.mapFloat64Array(t.length,r);else for(var s=0;s<t.length;s++)this.writeFloat64(t[s],r)},l.prototype.writeFloat32Array=function(t,r){if(this._realloc(t.length*4),t instanceof Float32Array&&this.byteOffset+this.position%t.BYTES_PER_ELEMENT===0)l.memcpy(this._buffer,this.byteOffset+this.position,t.buffer,0,t.byteLength),this.mapFloat32Array(t.length,r);else for(var s=0;s<t.length;s++)this.writeFloat32(t[s],r)},l.prototype.writeInt32=function(t,r){this._realloc(4),this._dataView.setInt32(this.position,t,r??this.endianness),this.position+=4},l.prototype.writeInt16=function(t,r){this._realloc(2),this._dataView.setInt16(this.position,t,r??this.endianness),this.position+=2},l.prototype.writeInt8=function(t){this._realloc(1),this._dataView.setInt8(this.position,t),this.position+=1},l.prototype.writeUint32=function(t,r){this._realloc(4),this._dataView.setUint32(this.position,t,r??this.endianness),this.position+=4},l.prototype.writeUint16=function(t,r){this._realloc(2),this._dataView.setUint16(this.position,t,r??this.endianness),this.position+=2},l.prototype.writeUint8=function(t){this._realloc(1),this._dataView.setUint8(this.position,t),this.position+=1},l.prototype.writeFloat32=function(t,r){this._realloc(4),this._dataView.setFloat32(this.position,t,r??this.endianness),this.position+=4},l.prototype.writeFloat64=function(t,r){this._realloc(8),this._dataView.setFloat64(this.position,t,r??this.endianness),this.position+=8},l.prototype.writeUCS2String=function(t,r,s){s==null&&(s=t.length);for(var c=0;c<t.length&&c<s;c++)this.writeUint16(t.charCodeAt(c),r);for(;c<s;c++)this.writeUint16(0)},l.prototype.writeString=function(t,r,s){var c=0;if(r==null||r=="ASCII")if(s!=null){var h=Math.min(t.length,s);for(c=0;c<h;c++)this.writeUint8(t.charCodeAt(c));for(;c<s;c++)this.writeUint8(0)}else for(c=0;c<t.length;c++)this.writeUint8(t.charCodeAt(c));else this.writeUint8Array(new TextEncoder(r).encode(t.substring(0,s)))},l.prototype.writeCString=function(t,r){var s=0;if(r!=null){var c=Math.min(t.length,r);for(s=0;s<c;s++)this.writeUint8(t.charCodeAt(s));for(;s<r;s++)this.writeUint8(0)}else{for(s=0;s<t.length;s++)this.writeUint8(t.charCodeAt(s));this.writeUint8(0)}},l.prototype.writeStruct=function(t,r){for(var s=0;s<t.length;s+=2){var c=t[s+1];this.writeType(c,r[t[s]],r)}},l.prototype.writeType=function(t,r,s){var c;if(typeof t=="function")return t(this,r);if(typeof t=="object"&&!(t instanceof Array))return t.set(this,r,s);var h=null,_="ASCII",g=this.position;switch(typeof t=="string"&&/:/.test(t)&&(c=t.split(":"),t=c[0],h=parseInt(c[1])),typeof t=="string"&&/,/.test(t)&&(c=t.split(","),t=c[0],_=parseInt(c[1])),t){case"uint8":this.writeUint8(r);break;case"int8":this.writeInt8(r);break;case"uint16":this.writeUint16(r,this.endianness);break;case"int16":this.writeInt16(r,this.endianness);break;case"uint32":this.writeUint32(r,this.endianness);break;case"int32":this.writeInt32(r,this.endianness);break;case"float32":this.writeFloat32(r,this.endianness);break;case"float64":this.writeFloat64(r,this.endianness);break;case"uint16be":this.writeUint16(r,l.BIG_ENDIAN);break;case"int16be":this.writeInt16(r,l.BIG_ENDIAN);break;case"uint32be":this.writeUint32(r,l.BIG_ENDIAN);break;case"int32be":this.writeInt32(r,l.BIG_ENDIAN);break;case"float32be":this.writeFloat32(r,l.BIG_ENDIAN);break;case"float64be":this.writeFloat64(r,l.BIG_ENDIAN);break;case"uint16le":this.writeUint16(r,l.LITTLE_ENDIAN);break;case"int16le":this.writeInt16(r,l.LITTLE_ENDIAN);break;case"uint32le":this.writeUint32(r,l.LITTLE_ENDIAN);break;case"int32le":this.writeInt32(r,l.LITTLE_ENDIAN);break;case"float32le":this.writeFloat32(r,l.LITTLE_ENDIAN);break;case"float64le":this.writeFloat64(r,l.LITTLE_ENDIAN);break;case"cstring":this.writeCString(r,h);break;case"string":this.writeString(r,_,h);break;case"u16string":this.writeUCS2String(r,this.endianness,h);break;case"u16stringle":this.writeUCS2String(r,l.LITTLE_ENDIAN,h);break;case"u16stringbe":this.writeUCS2String(r,l.BIG_ENDIAN,h);break;default:if(t.length==3){for(var A=t[1],B=0;B<r.length;B++)this.writeType(A,r[B]);break}else{this.writeStruct(t,r);break}}h!=null&&(this.position=g,this._realloc(h),this.position=g+h)},l.prototype.writeUint64=function(t){var r=Math.floor(t/f);this.writeUint32(r),this.writeUint32(t&4294967295)},l.prototype.writeUint24=function(t){this.writeUint8((t&16711680)>>16),this.writeUint8((t&65280)>>8),this.writeUint8(t&255)},l.prototype.adjustUint32=function(t,r){var s=this.position;this.seek(t),this.writeUint32(r),this.seek(s)},l.prototype.mapInt32Array=function(t,r){this._realloc(t*4);var s=new Int32Array(this._buffer,this.byteOffset+this.position,t);return l.arrayToNative(s,r??this.endianness),this.position+=t*4,s},l.prototype.mapInt16Array=function(t,r){this._realloc(t*2);var s=new Int16Array(this._buffer,this.byteOffset+this.position,t);return l.arrayToNative(s,r??this.endianness),this.position+=t*2,s},l.prototype.mapInt8Array=function(t){this._realloc(t*1);var r=new Int8Array(this._buffer,this.byteOffset+this.position,t);return this.position+=t*1,r},l.prototype.mapUint32Array=function(t,r){this._realloc(t*4);var s=new Uint32Array(this._buffer,this.byteOffset+this.position,t);return l.arrayToNative(s,r??this.endianness),this.position+=t*4,s},l.prototype.mapUint16Array=function(t,r){this._realloc(t*2);var s=new Uint16Array(this._buffer,this.byteOffset+this.position,t);return l.arrayToNative(s,r??this.endianness),this.position+=t*2,s},l.prototype.mapFloat64Array=function(t,r){this._realloc(t*8);var s=new Float64Array(this._buffer,this.byteOffset+this.position,t);return l.arrayToNative(s,r??this.endianness),this.position+=t*8,s},l.prototype.mapFloat32Array=function(t,r){this._realloc(t*4);var s=new Float32Array(this._buffer,this.byteOffset+this.position,t);return l.arrayToNative(s,r??this.endianness),this.position+=t*4,s};var u=function(t){this.buffers=[],this.bufferIndex=-1,t&&(this.insertBuffer(t),this.bufferIndex=0)};u.prototype=new l(new ArrayBuffer,0,l.BIG_ENDIAN),u.prototype.initialized=function(){var t;return this.bufferIndex>-1?!0:this.buffers.length>0?(t=this.buffers[0],t.fileStart===0?(this.buffer=t,this.bufferIndex=0,n.debug("MultiBufferStream","Stream ready for parsing"),!0):(n.warn("MultiBufferStream","The first buffer should have a fileStart of 0"),this.logBufferLevel(),!1)):(n.warn("MultiBufferStream","No buffer to start parsing from"),this.logBufferLevel(),!1)},ArrayBuffer.concat=function(t,r){n.debug("ArrayBuffer","Trying to create a new buffer of size: "+(t.byteLength+r.byteLength));var s=new Uint8Array(t.byteLength+r.byteLength);return s.set(new Uint8Array(t),0),s.set(new Uint8Array(r),t.byteLength),s.buffer},u.prototype.reduceBuffer=function(t,r,s){var c;return c=new Uint8Array(s),c.set(new Uint8Array(t,r,s)),c.buffer.fileStart=t.fileStart+r,c.buffer.usedBytes=0,c.buffer},u.prototype.insertBuffer=function(t){for(var r=!0,s=0;s<this.buffers.length;s++){var c=this.buffers[s];if(t.fileStart<=c.fileStart){if(t.fileStart===c.fileStart)if(t.byteLength>c.byteLength){this.buffers.splice(s,1),s--;continue}else n.warn("MultiBufferStream","Buffer (fileStart: "+t.fileStart+" - Length: "+t.byteLength+") already appended, ignoring");else t.fileStart+t.byteLength<=c.fileStart||(t=this.reduceBuffer(t,0,c.fileStart-t.fileStart)),n.debug("MultiBufferStream","Appending new buffer (fileStart: "+t.fileStart+" - Length: "+t.byteLength+")"),this.buffers.splice(s,0,t),s===0&&(this.buffer=t);r=!1;break}else if(t.fileStart<c.fileStart+c.byteLength){var h=c.fileStart+c.byteLength-t.fileStart,_=t.byteLength-h;if(_>0)t=this.reduceBuffer(t,h,_);else{r=!1;break}}}r&&(n.debug("MultiBufferStream","Appending new buffer (fileStart: "+t.fileStart+" - Length: "+t.byteLength+")"),this.buffers.push(t),s===0&&(this.buffer=t))},u.prototype.logBufferLevel=function(t){var r,s,c,h,_=[],g,A="";for(c=0,h=0,r=0;r<this.buffers.length;r++)s=this.buffers[r],r===0?(g={},_.push(g),g.start=s.fileStart,g.end=s.fileStart+s.byteLength,A+="["+g.start+"-"):g.end===s.fileStart?g.end=s.fileStart+s.byteLength:(g={},g.start=s.fileStart,A+=_[_.length-1].end-1+"], ["+g.start+"-",g.end=s.fileStart+s.byteLength,_.push(g)),c+=s.usedBytes,h+=s.byteLength;_.length>0&&(A+=g.end-1+"]");var B=t?n.info:n.debug;this.buffers.length===0?B("MultiBufferStream","No more buffer in memory"):B("MultiBufferStream",""+this.buffers.length+" stored buffer(s) ("+c+"/"+h+" bytes), continuous ranges: "+A)},u.prototype.cleanBuffers=function(){var t,r;for(t=0;t<this.buffers.length;t++)r=this.buffers[t],r.usedBytes===r.byteLength&&(n.debug("MultiBufferStream","Removing buffer #"+t),this.buffers.splice(t,1),t--)},u.prototype.mergeNextBuffer=function(){var t;if(this.bufferIndex+1<this.buffers.length)if(t=this.buffers[this.bufferIndex+1],t.fileStart===this.buffer.fileStart+this.buffer.byteLength){var r=this.buffer.byteLength,s=this.buffer.usedBytes,c=this.buffer.fileStart;return this.buffers[this.bufferIndex]=ArrayBuffer.concat(this.buffer,t),this.buffer=this.buffers[this.bufferIndex],this.buffers.splice(this.bufferIndex+1,1),this.buffer.usedBytes=s,this.buffer.fileStart=c,n.debug("ISOFile","Concatenating buffer for box parsing (length: "+r+"->"+this.buffer.byteLength+")"),!0}else return!1;else return!1},u.prototype.findPosition=function(t,r,s){var c,h=null,_=-1;for(t===!0?c=0:c=this.bufferIndex;c<this.buffers.length&&(h=this.buffers[c],h.fileStart<=r);){_=c,s&&(h.fileStart+h.byteLength<=r?h.usedBytes=h.byteLength:h.usedBytes=r-h.fileStart,this.logBufferLevel());c++}return _!==-1?(h=this.buffers[_],h.fileStart+h.byteLength>=r?(n.debug("MultiBufferStream","Found position in existing buffer #"+_),_):-1):-1},u.prototype.findEndContiguousBuf=function(t){var r,s,c,h=t!==void 0?t:this.bufferIndex;if(s=this.buffers[h],this.buffers.length>h+1)for(r=h+1;r<this.buffers.length&&(c=this.buffers[r],c.fileStart===s.fileStart+s.byteLength);r++)s=c;return s.fileStart+s.byteLength},u.prototype.getEndFilePositionAfter=function(t){var r=this.findPosition(!0,t,!1);return r!==-1?this.findEndContiguousBuf(r):t},u.prototype.addUsedBytes=function(t){this.buffer.usedBytes+=t,this.logBufferLevel()},u.prototype.setAllUsedBytes=function(){this.buffer.usedBytes=this.buffer.byteLength,this.logBufferLevel()},u.prototype.seek=function(t,r,s){var c;return c=this.findPosition(r,t,s),c!==-1?(this.buffer=this.buffers[c],this.bufferIndex=c,this.position=t-this.buffer.fileStart,n.debug("MultiBufferStream","Repositioning parser at buffer position: "+this.position),!0):(n.debug("MultiBufferStream","Position "+t+" not found in buffered data"),!1)},u.prototype.getPosition=function(){if(this.bufferIndex===-1||this.buffers[this.bufferIndex]===null)throw"Error accessing position in the MultiBufferStream";return this.buffers[this.bufferIndex].fileStart+this.position},u.prototype.getLength=function(){return this.byteLength},u.prototype.getEndPosition=function(){if(this.bufferIndex===-1||this.buffers[this.bufferIndex]===null)throw"Error accessing position in the MultiBufferStream";return this.buffers[this.bufferIndex].fileStart+this.byteLength},e.MultiBufferStream=u;var d=function(){var t=3,r=4,s=5,c=6,h=[];h[t]="ES_Descriptor",h[r]="DecoderConfigDescriptor",h[s]="DecoderSpecificInfo",h[c]="SLConfigDescriptor",this.getDescriptorName=function(A){return h[A]};var _=this,g={};return this.parseOneDescriptor=function(A){var B=0,T,E,I;for(T=A.readUint8(),I=A.readUint8();I&128;)B=(B<<7)+(I&127),I=A.readUint8();return B=(B<<7)+(I&127),n.debug("MPEG4DescriptorParser","Found "+(h[T]||"Descriptor "+T)+", size "+B+" at position "+A.getPosition()),h[T]?E=new g[h[T]](B):E=new g.Descriptor(B),E.parse(A),E},g.Descriptor=function(A,B){this.tag=A,this.size=B,this.descs=[]},g.Descriptor.prototype.parse=function(A){this.data=A.readUint8Array(this.size)},g.Descriptor.prototype.findDescriptor=function(A){for(var B=0;B<this.descs.length;B++)if(this.descs[B].tag==A)return this.descs[B];return null},g.Descriptor.prototype.parseRemainingDescriptors=function(A){for(var B=A.position;A.position<B+this.size;){var T=_.parseOneDescriptor(A);this.descs.push(T)}},g.ES_Descriptor=function(A){g.Descriptor.call(this,t,A)},g.ES_Descriptor.prototype=new g.Descriptor,g.ES_Descriptor.prototype.parse=function(A){if(this.ES_ID=A.readUint16(),this.flags=A.readUint8(),this.size-=3,this.flags&128?(this.dependsOn_ES_ID=A.readUint16(),this.size-=2):this.dependsOn_ES_ID=0,this.flags&64){var B=A.readUint8();this.URL=A.readString(B),this.size-=B+1}else this.URL="";this.flags&32?(this.OCR_ES_ID=A.readUint16(),this.size-=2):this.OCR_ES_ID=0,this.parseRemainingDescriptors(A)},g.ES_Descriptor.prototype.getOTI=function(A){var B=this.findDescriptor(r);return B?B.oti:0},g.ES_Descriptor.prototype.getAudioConfig=function(A){var B=this.findDescriptor(r);if(!B)return null;var T=B.findDescriptor(s);if(T&&T.data){var E=(T.data[0]&248)>>3;return E===31&&T.data.length>=2&&(E=32+((T.data[0]&7)<<3)+((T.data[1]&224)>>5)),E}else return null},g.DecoderConfigDescriptor=function(A){g.Descriptor.call(this,r,A)},g.DecoderConfigDescriptor.prototype=new g.Descriptor,g.DecoderConfigDescriptor.prototype.parse=function(A){this.oti=A.readUint8(),this.streamType=A.readUint8(),this.upStream=(this.streamType>>1&1)!==0,this.streamType=this.streamType>>>2,this.bufferSize=A.readUint24(),this.maxBitrate=A.readUint32(),this.avgBitrate=A.readUint32(),this.size-=13,this.parseRemainingDescriptors(A)},g.DecoderSpecificInfo=function(A){g.Descriptor.call(this,s,A)},g.DecoderSpecificInfo.prototype=new g.Descriptor,g.SLConfigDescriptor=function(A){g.Descriptor.call(this,c,A)},g.SLConfigDescriptor.prototype=new g.Descriptor,this};e.MPEG4DescriptorParser=d;var o={ERR_INVALID_DATA:-1,ERR_NOT_ENOUGH_DATA:0,OK:1,BASIC_BOXES:[{type:"mdat",name:"MediaDataBox"},{type:"idat",name:"ItemDataBox"},{type:"free",name:"FreeSpaceBox"},{type:"skip",name:"FreeSpaceBox"},{type:"meco",name:"AdditionalMetadataContainerBox"},{type:"strk",name:"SubTrackBox"}],FULL_BOXES:[{type:"hmhd",name:"HintMediaHeaderBox"},{type:"nmhd",name:"NullMediaHeaderBox"},{type:"iods",name:"ObjectDescriptorBox"},{type:"xml ",name:"XMLBox"},{type:"bxml",name:"BinaryXMLBox"},{type:"ipro",name:"ItemProtectionBox"},{type:"mere",name:"MetaboxRelationBox"}],CONTAINER_BOXES:[[{type:"moov",name:"CompressedMovieBox"},["trak","pssh"]],[{type:"trak",name:"TrackBox"}],[{type:"edts",name:"EditBox"}],[{type:"mdia",name:"MediaBox"}],[{type:"minf",name:"MediaInformationBox"}],[{type:"dinf",name:"DataInformationBox"}],[{type:"stbl",name:"SampleTableBox"},["sgpd","sbgp"]],[{type:"mvex",name:"MovieExtendsBox"},["trex"]],[{type:"moof",name:"CompressedMovieFragmentBox"},["traf"]],[{type:"traf",name:"TrackFragmentBox"},["trun","sgpd","sbgp"]],[{type:"vttc",name:"VTTCueBox"}],[{type:"tref",name:"TrackReferenceBox"}],[{type:"iref",name:"ItemReferenceBox"}],[{type:"mfra",name:"MovieFragmentRandomAccessBox"},["tfra"]],[{type:"meco",name:"AdditionalMetadataContainerBox"}],[{type:"hnti",name:"trackhintinformation"}],[{type:"hinf",name:"hintstatisticsbox"}],[{type:"strk",name:"SubTrackBox"}],[{type:"strd",name:"SubTrackDefinitionBox"}],[{type:"sinf",name:"ProtectionSchemeInfoBox"}],[{type:"rinf",name:"RestrictedSchemeInfoBox"}],[{type:"schi",name:"SchemeInformationBox"}],[{type:"trgr",name:"TrackGroupBox"}],[{type:"udta",name:"UserDataBox"},["kind"]],[{type:"iprp",name:"ItemPropertiesBox"},["ipma"]],[{type:"ipco",name:"ItemPropertyContainerBox"}],[{type:"grpl",name:"GroupsListBox"}],[{type:"j2kH",name:"J2KHeaderInfoBox"}],[{type:"etyp",name:"ExtendedTypeBox"},["tyco"]]],boxCodes:[],fullBoxCodes:[],containerBoxCodes:[],sampleEntryCodes:{},sampleGroupEntryCodes:[],trackGroupTypes:[],UUIDBoxes:{},UUIDs:[],initialize:function(){o.FullBox.prototype=new o.Box,o.ContainerBox.prototype=new o.Box,o.SampleEntry.prototype=new o.Box,o.TrackGroupTypeBox.prototype=new o.FullBox,o.BASIC_BOXES.forEach(function(t){o.createBoxCtor(t.type,t.name)}),o.FULL_BOXES.forEach(function(t){o.createFullBoxCtor(t.type,t.name)}),o.CONTAINER_BOXES.forEach(function(t){o.createContainerBoxCtor(t[0].type,t[0].name,null,t[1])})},Box:function(t,r,s,c){this.type=t,this.box_name=s,this.size=r,this.uuid=c},FullBox:function(t,r,s,c){o.Box.call(this,t,r,s,c),this.flags=0,this.version=0},ContainerBox:function(t,r,s,c){o.Box.call(this,t,r,s,c),this.boxes=[]},SampleEntry:function(t,r,s,c){o.ContainerBox.call(this,t,r),this.hdr_size=s,this.start=c},SampleGroupEntry:function(t){this.grouping_type=t},TrackGroupTypeBox:function(t,r){o.FullBox.call(this,t,r)},createBoxCtor:function(t,r,s){o.boxCodes.push(t),o[t+"Box"]=function(c){o.Box.call(this,t,c,r)},o[t+"Box"].prototype=new o.Box,s&&(o[t+"Box"].prototype.parse=s)},createFullBoxCtor:function(t,r,s){o[t+"Box"]=function(c){o.FullBox.call(this,t,c,r)},o[t+"Box"].prototype=new o.FullBox,o[t+"Box"].prototype.parse=function(c){this.parseFullHeader(c),s&&s.call(this,c)}},addSubBoxArrays:function(t){if(t){this.subBoxNames=t;for(var r=t.length,s=0;s<r;s++)this[t[s]+"s"]=[]}},createContainerBoxCtor:function(t,r,s,c){o[t+"Box"]=function(h){o.ContainerBox.call(this,t,h,r),o.addSubBoxArrays.call(this,c)},o[t+"Box"].prototype=new o.ContainerBox,s&&(o[t+"Box"].prototype.parse=s)},createMediaSampleEntryCtor:function(t,r,s){o.sampleEntryCodes[t]=[],o[t+"SampleEntry"]=function(c,h){o.SampleEntry.call(this,c,h),o.addSubBoxArrays.call(this,s)},o[t+"SampleEntry"].prototype=new o.SampleEntry,r&&(o[t+"SampleEntry"].prototype.parse=r)},createSampleEntryCtor:function(t,r,s,c){o.sampleEntryCodes[t].push(r),o[r+"SampleEntry"]=function(h){o[t+"SampleEntry"].call(this,r,h),o.addSubBoxArrays.call(this,c)},o[r+"SampleEntry"].prototype=new o[t+"SampleEntry"],s&&(o[r+"SampleEntry"].prototype.parse=s)},createEncryptedSampleEntryCtor:function(t,r,s){o.createSampleEntryCtor.call(this,t,r,s,["sinf"])},createSampleGroupCtor:function(t,r){o[t+"SampleGroupEntry"]=function(s){o.SampleGroupEntry.call(this,t,s)},o[t+"SampleGroupEntry"].prototype=new o.SampleGroupEntry,r&&(o[t+"SampleGroupEntry"].prototype.parse=r)},createTrackGroupCtor:function(t,r){o[t+"TrackGroupTypeBox"]=function(s){o.TrackGroupTypeBox.call(this,t,s)},o[t+"TrackGroupTypeBox"].prototype=new o.TrackGroupTypeBox,r&&(o[t+"TrackGroupTypeBox"].prototype.parse=r)},createUUIDBox:function(t,r,s,c,h){o.UUIDs.push(t),o.UUIDBoxes[t]=function(_){s?o.FullBox.call(this,"uuid",_,r,t):c?o.ContainerBox.call(this,"uuid",_,r,t):o.Box.call(this,"uuid",_,r,t)},o.UUIDBoxes[t].prototype=s?new o.FullBox:c?new o.ContainerBox:new o.Box,h&&(s?o.UUIDBoxes[t].prototype.parse=function(_){this.parseFullHeader(_),h&&h.call(this,_)}:o.UUIDBoxes[t].prototype.parse=h)}};o.initialize(),o.TKHD_FLAG_ENABLED=1,o.TKHD_FLAG_IN_MOVIE=2,o.TKHD_FLAG_IN_PREVIEW=4,o.TFHD_FLAG_BASE_DATA_OFFSET=1,o.TFHD_FLAG_SAMPLE_DESC=2,o.TFHD_FLAG_SAMPLE_DUR=8,o.TFHD_FLAG_SAMPLE_SIZE=16,o.TFHD_FLAG_SAMPLE_FLAGS=32,o.TFHD_FLAG_DUR_EMPTY=65536,o.TFHD_FLAG_DEFAULT_BASE_IS_MOOF=131072,o.TRUN_FLAGS_DATA_OFFSET=1,o.TRUN_FLAGS_FIRST_FLAG=4,o.TRUN_FLAGS_DURATION=256,o.TRUN_FLAGS_SIZE=512,o.TRUN_FLAGS_FLAGS=1024,o.TRUN_FLAGS_CTS_OFFSET=2048,o.Box.prototype.add=function(t){return this.addBox(new o[t+"Box"])},o.Box.prototype.addBox=function(t){return this.boxes.push(t),this[t.type+"s"]?this[t.type+"s"].push(t):this[t.type]=t,t},o.Box.prototype.set=function(t,r){return this[t]=r,this},o.Box.prototype.addEntry=function(t,r){var s=r||"entries";return this[s]||(this[s]=[]),this[s].push(t),this},e.BoxParser=o,o.parseUUID=function(t){return o.parseHex16(t)},o.parseHex16=function(t){for(var r="",s=0;s<16;s++){var c=t.readUint8().toString(16);r+=c.length===1?"0"+c:c}return r},o.parseOneBox=function(t,r,s){var c,h=t.getPosition(),_=0,g,A;if(t.getEndPosition()-h<8)return n.debug("BoxParser","Not enough data in stream to parse the type and size of the box"),{code:o.ERR_NOT_ENOUGH_DATA};if(s&&s<8)return n.debug("BoxParser","Not enough bytes left in the parent box to parse a new box"),{code:o.ERR_NOT_ENOUGH_DATA};var B=t.readUint32(),T=t.readString(4),E=T;if(n.debug("BoxParser","Found box of type '"+T+"' and size "+B+" at position "+h),_=8,T=="uuid"){if(t.getEndPosition()-t.getPosition()<16||s-_<16)return t.seek(h),n.debug("BoxParser","Not enough bytes left in the parent box to parse a UUID box"),{code:o.ERR_NOT_ENOUGH_DATA};A=o.parseUUID(t),_+=16,E=A}if(B==1){if(t.getEndPosition()-t.getPosition()<8||s&&s-_<8)return t.seek(h),n.warn("BoxParser",'Not enough data in stream to parse the extended size of the "'+T+'" box'),{code:o.ERR_NOT_ENOUGH_DATA};B=t.readUint64(),_+=8}else if(B===0){if(s)B=s;else if(T!=="mdat")return n.error("BoxParser","Unlimited box size not supported for type: '"+T+"'"),c=new o.Box(T,B),{code:o.OK,box:c,size:c.size}}return B!==0&&B<_?(n.error("BoxParser","Box of type "+T+" has an invalid size "+B+" (too small to be a box)"),{code:o.ERR_NOT_ENOUGH_DATA,type:T,size:B,hdr_size:_,start:h}):B!==0&&s&&B>s?(n.error("BoxParser","Box of type '"+T+"' has a size "+B+" greater than its container size "+s),{code:o.ERR_NOT_ENOUGH_DATA,type:T,size:B,hdr_size:_,start:h}):B!==0&&h+B>t.getEndPosition()?(t.seek(h),n.info("BoxParser","Not enough data in stream to parse the entire '"+T+"' box"),{code:o.ERR_NOT_ENOUGH_DATA,type:T,size:B,hdr_size:_,start:h}):r?{code:o.OK,type:T,size:B,hdr_size:_,start:h}:(o[T+"Box"]?c=new o[T+"Box"](B):T!=="uuid"?(n.warn("BoxParser","Unknown box type: '"+T+"'"),c=new o.Box(T,B),c.has_unparsed_data=!0):o.UUIDBoxes[A]?c=new o.UUIDBoxes[A](B):(n.warn("BoxParser","Unknown uuid type: '"+A+"'"),c=new o.Box(T,B),c.uuid=A,c.has_unparsed_data=!0),c.hdr_size=_,c.start=h,c.write===o.Box.prototype.write&&c.type!=="mdat"&&(n.info("BoxParser","'"+E+"' box writing not yet implemented, keeping unparsed data in memory for later write"),c.parseDataAndRewind(t)),c.parse(t),g=t.getPosition()-(c.start+c.size),g<0?(n.warn("BoxParser","Parsing of box '"+E+"' did not read the entire indicated box data size (missing "+-g+" bytes), seeking forward"),t.seek(c.start+c.size)):g>0&&(n.error("BoxParser","Parsing of box '"+E+"' read "+g+" more bytes than the indicated box data size, seeking backwards"),c.size!==0&&t.seek(c.start+c.size)),{code:o.OK,box:c,size:c.size})},o.Box.prototype.parse=function(t){this.type!="mdat"?this.data=t.readUint8Array(this.size-this.hdr_size):this.size===0?t.seek(t.getEndPosition()):t.seek(this.start+this.size)},o.Box.prototype.parseDataAndRewind=function(t){this.data=t.readUint8Array(this.size-this.hdr_size),t.position-=this.size-this.hdr_size},o.FullBox.prototype.parseDataAndRewind=function(t){this.parseFullHeader(t),this.data=t.readUint8Array(this.size-this.hdr_size),this.hdr_size-=4,t.position-=this.size-this.hdr_size},o.FullBox.prototype.parseFullHeader=function(t){this.version=t.readUint8(),this.flags=t.readUint24(),this.hdr_size+=4},o.FullBox.prototype.parse=function(t){this.parseFullHeader(t),this.data=t.readUint8Array(this.size-this.hdr_size)},o.ContainerBox.prototype.parse=function(t){for(var r,s;t.getPosition()<this.start+this.size;)if(r=o.parseOneBox(t,!1,this.size-(t.getPosition()-this.start)),r.code===o.OK)if(s=r.box,this.boxes.push(s),this.subBoxNames&&this.subBoxNames.indexOf(s.type)!=-1)this[this.subBoxNames[this.subBoxNames.indexOf(s.type)]+"s"].push(s);else{var c=s.type!=="uuid"?s.type:s.uuid;this[c]?n.warn("Box of type "+c+" already stored in field of this type"):this[c]=s}else return},o.Box.prototype.parseLanguage=function(t){this.language=t.readUint16();var r=[];r[0]=this.language>>10&31,r[1]=this.language>>5&31,r[2]=this.language&31,this.languageString=String.fromCharCode(r[0]+96,r[1]+96,r[2]+96)},o.SAMPLE_ENTRY_TYPE_VISUAL="Visual",o.SAMPLE_ENTRY_TYPE_AUDIO="Audio",o.SAMPLE_ENTRY_TYPE_HINT="Hint",o.SAMPLE_ENTRY_TYPE_METADATA="Metadata",o.SAMPLE_ENTRY_TYPE_SUBTITLE="Subtitle",o.SAMPLE_ENTRY_TYPE_SYSTEM="System",o.SAMPLE_ENTRY_TYPE_TEXT="Text",o.SampleEntry.prototype.parseHeader=function(t){t.readUint8Array(6),this.data_reference_index=t.readUint16(),this.hdr_size+=8},o.SampleEntry.prototype.parse=function(t){this.parseHeader(t),this.data=t.readUint8Array(this.size-this.hdr_size)},o.SampleEntry.prototype.parseDataAndRewind=function(t){this.parseHeader(t),this.data=t.readUint8Array(this.size-this.hdr_size),this.hdr_size-=8,t.position-=this.size-this.hdr_size},o.SampleEntry.prototype.parseFooter=function(t){o.ContainerBox.prototype.parse.call(this,t)},o.createMediaSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_HINT),o.createMediaSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_METADATA),o.createMediaSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_SUBTITLE),o.createMediaSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_SYSTEM),o.createMediaSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_TEXT),o.createMediaSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,function(t){var r;this.parseHeader(t),t.readUint16(),t.readUint16(),t.readUint32Array(3),this.width=t.readUint16(),this.height=t.readUint16(),this.horizresolution=t.readUint32(),this.vertresolution=t.readUint32(),t.readUint32(),this.frame_count=t.readUint16(),r=Math.min(31,t.readUint8()),this.compressorname=t.readString(r),r<31&&t.readString(31-r),this.depth=t.readUint16(),t.readUint16(),this.parseFooter(t)}),o.createMediaSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_AUDIO,function(t){this.parseHeader(t),t.readUint32Array(2),this.channel_count=t.readUint16(),this.samplesize=t.readUint16(),t.readUint16(),t.readUint16(),this.samplerate=t.readUint32()/65536,this.parseFooter(t)}),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"avc1"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"avc2"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"avc3"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"avc4"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"av01"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"dav1"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"hvc1"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"hev1"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"hvt1"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"lhe1"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"dvh1"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"dvhe"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"vvc1"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"vvi1"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"vvs1"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"vvcN"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"vp08"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"vp09"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"avs3"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"j2ki"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"mjp2"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"mjpg"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"uncv"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_AUDIO,"mp4a"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_AUDIO,"ac-3"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_AUDIO,"ac-4"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_AUDIO,"ec-3"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_AUDIO,"Opus"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_AUDIO,"mha1"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_AUDIO,"mha2"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_AUDIO,"mhm1"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_AUDIO,"mhm2"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_AUDIO,"fLaC"),o.createEncryptedSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"encv"),o.createEncryptedSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_AUDIO,"enca"),o.createEncryptedSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_SUBTITLE,"encu"),o.createEncryptedSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_SYSTEM,"encs"),o.createEncryptedSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_TEXT,"enct"),o.createEncryptedSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_METADATA,"encm"),o.createBoxCtor("a1lx","AV1LayeredImageIndexingProperty",function(t){var r=t.readUint8()&1,s=((r&1)+1)*16;this.layer_size=[];for(var c=0;c<3;c++)s==16?this.layer_size[c]=t.readUint16():this.layer_size[c]=t.readUint32()}),o.createBoxCtor("a1op","OperatingPointSelectorProperty",function(t){this.op_index=t.readUint8()}),o.createFullBoxCtor("auxC","AuxiliaryTypeProperty",function(t){this.aux_type=t.readCString();var r=this.size-this.hdr_size-(this.aux_type.length+1);this.aux_subtype=t.readUint8Array(r)}),o.createBoxCtor("av1C","AV1CodecConfigurationBox",function(t){var r=t.readUint8();if((r>>7&1)!==1){n.error("av1C marker problem");return}if(this.version=r&127,this.version!==1){n.error("av1C version "+this.version+" not supported");return}if(r=t.readUint8(),this.seq_profile=r>>5&7,this.seq_level_idx_0=r&31,r=t.readUint8(),this.seq_tier_0=r>>7&1,this.high_bitdepth=r>>6&1,this.twelve_bit=r>>5&1,this.monochrome=r>>4&1,this.chroma_subsampling_x=r>>3&1,this.chroma_subsampling_y=r>>2&1,this.chroma_sample_position=r&3,r=t.readUint8(),this.reserved_1=r>>5&7,this.reserved_1!==0){n.error("av1C reserved_1 parsing problem");return}if(this.initial_presentation_delay_present=r>>4&1,this.initial_presentation_delay_present===1)this.initial_presentation_delay_minus_one=r&15;else if(this.reserved_2=r&15,this.reserved_2!==0){n.error("av1C reserved_2 parsing problem");return}var s=this.size-this.hdr_size-4;this.configOBUs=t.readUint8Array(s)});function p(t){var r="<table class='inner-table'>";r+="<thead><tr><th>length</th><th>nalu_data</th></tr></thead>",r+="<tbody>";for(var s=0;s<t.length;s++){var c=t[s];r+="<tr>",r+="<td>"+c.length+"</td>",r+="<td>",r+=c.nalu.reduce(function(h,_){return h+_.toString(16).padStart(2,"0")},"0x"),r+="</td></tr>"}return r+="</tbody></table>",r}o.createBoxCtor("avcC","AVCConfigurationBox",function(t){var r,s;for(this.configurationVersion=t.readUint8(),this.AVCProfileIndication=t.readUint8(),this.profile_compatibility=t.readUint8(),this.AVCLevelIndication=t.readUint8(),this.lengthSizeMinusOne=t.readUint8()&3,this.nb_SPS_nalus=t.readUint8()&31,s=this.size-this.hdr_size-6,this.SPS=[],this.SPS.toString=function(){return p(this)},r=0;r<this.nb_SPS_nalus;r++)this.SPS[r]={},this.SPS[r].length=t.readUint16(),this.SPS[r].nalu=t.readUint8Array(this.SPS[r].length),s-=2+this.SPS[r].length;for(this.nb_PPS_nalus=t.readUint8(),s--,this.PPS=[],this.PPS.toString=function(){return p(this)},r=0;r<this.nb_PPS_nalus;r++)this.PPS[r]={},this.PPS[r].length=t.readUint16(),this.PPS[r].nalu=t.readUint8Array(this.PPS[r].length),s-=2+this.PPS[r].length;s>0&&(this.ext=t.readUint8Array(s))}),o.createBoxCtor("btrt","BitRateBox",function(t){this.bufferSizeDB=t.readUint32(),this.maxBitrate=t.readUint32(),this.avgBitrate=t.readUint32()}),o.createFullBoxCtor("ccst","CodingConstraintsBox",function(t){var r=t.readUint8();this.all_ref_pics_intra=(r&128)==128,this.intra_pred_used=(r&64)==64,this.max_ref_per_pic=(r&63)>>2,t.readUint24()}),o.createBoxCtor("cdef","ComponentDefinitionBox",function(t){var r;for(this.channel_count=t.readUint16(),this.channel_indexes=[],this.channel_types=[],this.channel_associations=[],r=0;r<this.channel_count;r++)this.channel_indexes.push(t.readUint16()),this.channel_types.push(t.readUint16()),this.channel_associations.push(t.readUint16())}),o.createBoxCtor("clap","CleanApertureBox",function(t){this.cleanApertureWidthN=t.readUint32(),this.cleanApertureWidthD=t.readUint32(),this.cleanApertureHeightN=t.readUint32(),this.cleanApertureHeightD=t.readUint32(),this.horizOffN=t.readUint32(),this.horizOffD=t.readUint32(),this.vertOffN=t.readUint32(),this.vertOffD=t.readUint32()}),o.createBoxCtor("clli","ContentLightLevelBox",function(t){this.max_content_light_level=t.readUint16(),this.max_pic_average_light_level=t.readUint16()}),o.createFullBoxCtor("cmex","CameraExtrinsicMatrixProperty",function(t){this.flags&1&&(this.pos_x=t.readInt32()),this.flags&2&&(this.pos_y=t.readInt32()),this.flags&4&&(this.pos_z=t.readInt32()),this.flags&8&&(this.version==0?this.flags&16?(this.quat_x=t.readInt32(),this.quat_y=t.readInt32(),this.quat_z=t.readInt32()):(this.quat_x=t.readInt16(),this.quat_y=t.readInt16(),this.quat_z=t.readInt16()):this.version==1),this.flags&32&&(this.id=t.readUint32())}),o.createFullBoxCtor("cmin","CameraIntrinsicMatrixProperty",function(t){this.focal_length_x=t.readInt32(),this.principal_point_x=t.readInt32(),this.principal_point_y=t.readInt32(),this.flags&1&&(this.focal_length_y=t.readInt32(),this.skew_factor=t.readInt32())}),o.createBoxCtor("cmpd","ComponentDefinitionBox",function(t){for(this.component_count=t.readUint32(),this.component_types=[],this.component_type_urls=[],i=0;i<this.component_count;i++){var r=t.readUint16();this.component_types.push(r),r>=32768&&this.component_type_urls.push(t.readCString())}}),o.createFullBoxCtor("co64","ChunkLargeOffsetBox",function(t){var r,s;if(r=t.readUint32(),this.chunk_offsets=[],this.version===0)for(s=0;s<r;s++)this.chunk_offsets.push(t.readUint64())}),o.createFullBoxCtor("CoLL","ContentLightLevelBox",function(t){this.maxCLL=t.readUint16(),this.maxFALL=t.readUint16()}),o.createBoxCtor("colr","ColourInformationBox",function(t){if(this.colour_type=t.readString(4),this.colour_type==="nclx"){this.colour_primaries=t.readUint16(),this.transfer_characteristics=t.readUint16(),this.matrix_coefficients=t.readUint16();var r=t.readUint8();this.full_range_flag=r>>7}else this.colour_type==="rICC"?this.ICC_profile=t.readUint8Array(this.size-4):this.colour_type==="prof"&&(this.ICC_profile=t.readUint8Array(this.size-4))}),o.createFullBoxCtor("cprt","CopyrightBox",function(t){this.parseLanguage(t),this.notice=t.readCString()}),o.createFullBoxCtor("cslg","CompositionToDecodeBox",function(t){this.version===0&&(this.compositionToDTSShift=t.readInt32(),this.leastDecodeToDisplayDelta=t.readInt32(),this.greatestDecodeToDisplayDelta=t.readInt32(),this.compositionStartTime=t.readInt32(),this.compositionEndTime=t.readInt32())}),o.createFullBoxCtor("ctts","CompositionOffsetBox",function(t){var r,s;if(r=t.readUint32(),this.sample_counts=[],this.sample_offsets=[],this.version===0)for(s=0;s<r;s++){this.sample_counts.push(t.readUint32());var c=t.readInt32();c<0&&n.warn("BoxParser","ctts box uses negative values without using version 1"),this.sample_offsets.push(c)}else if(this.version==1)for(s=0;s<r;s++)this.sample_counts.push(t.readUint32()),this.sample_offsets.push(t.readInt32())}),o.createBoxCtor("dac3","AC3SpecificBox",function(t){var r=t.readUint8(),s=t.readUint8(),c=t.readUint8();this.fscod=r>>6,this.bsid=r>>1&31,this.bsmod=(r&1)<<2|s>>6&3,this.acmod=s>>3&7,this.lfeon=s>>2&1,this.bit_rate_code=s&3|c>>5&7}),o.createBoxCtor("dec3","EC3SpecificBox",function(t){var r=t.readUint16();this.data_rate=r>>3,this.num_ind_sub=r&7,this.ind_subs=[];for(var s=0;s<this.num_ind_sub+1;s++){var c={};this.ind_subs.push(c);var h=t.readUint8(),_=t.readUint8(),g=t.readUint8();c.fscod=h>>6,c.bsid=h>>1&31,c.bsmod=(h&1)<<4|_>>4&15,c.acmod=_>>1&7,c.lfeon=_&1,c.num_dep_sub=g>>1&15,c.num_dep_sub>0&&(c.chan_loc=(g&1)<<8|t.readUint8())}}),o.createFullBoxCtor("dfLa","FLACSpecificBox",function(t){var r=127,s=128,c=[],h=["STREAMINFO","PADDING","APPLICATION","SEEKTABLE","VORBIS_COMMENT","CUESHEET","PICTURE","RESERVED"];do{var _=t.readUint8(),g=Math.min(_&r,h.length-1);if(g?t.readUint8Array(t.readUint24()):(t.readUint8Array(13),this.samplerate=t.readUint32()>>12,t.readUint8Array(20)),c.push(h[g]),_&s)break}while(!0);this.numMetadataBlocks=c.length+" ("+c.join(", ")+")"}),o.createBoxCtor("dimm","hintimmediateBytesSent",function(t){this.bytessent=t.readUint64()}),o.createBoxCtor("dmax","hintlongestpacket",function(t){this.time=t.readUint32()}),o.createBoxCtor("dmed","hintmediaBytesSent",function(t){this.bytessent=t.readUint64()}),o.createBoxCtor("dOps","OpusSpecificBox",function(t){if(this.Version=t.readUint8(),this.OutputChannelCount=t.readUint8(),this.PreSkip=t.readUint16(),this.InputSampleRate=t.readUint32(),this.OutputGain=t.readInt16(),this.ChannelMappingFamily=t.readUint8(),this.ChannelMappingFamily!==0){this.StreamCount=t.readUint8(),this.CoupledCount=t.readUint8(),this.ChannelMapping=[];for(var r=0;r<this.OutputChannelCount;r++)this.ChannelMapping[r]=t.readUint8()}}),o.createFullBoxCtor("dref","DataReferenceBox",function(t){var r,s;this.entries=[];for(var c=t.readUint32(),h=0;h<c;h++)if(r=o.parseOneBox(t,!1,this.size-(t.getPosition()-this.start)),r.code===o.OK)s=r.box,this.entries.push(s);else return}),o.createBoxCtor("drep","hintrepeatedBytesSent",function(t){this.bytessent=t.readUint64()}),o.createFullBoxCtor("elng","ExtendedLanguageBox",function(t){this.extended_language=t.readString(this.size-this.hdr_size)}),o.createFullBoxCtor("elst","EditListBox",function(t){this.entries=[];for(var r=t.readUint32(),s=0;s<r;s++){var c={};this.entries.push(c),this.version===1?(c.segment_duration=t.readUint64(),c.media_time=t.readInt64()):(c.segment_duration=t.readUint32(),c.media_time=t.readInt32()),c.media_rate_integer=t.readInt16(),c.media_rate_fraction=t.readInt16()}}),o.createFullBoxCtor("emsg","EventMessageBox",function(t){this.version==1?(this.timescale=t.readUint32(),this.presentation_time=t.readUint64(),this.event_duration=t.readUint32(),this.id=t.readUint32(),this.scheme_id_uri=t.readCString(),this.value=t.readCString()):(this.scheme_id_uri=t.readCString(),this.value=t.readCString(),this.timescale=t.readUint32(),this.presentation_time_delta=t.readUint32(),this.event_duration=t.readUint32(),this.id=t.readUint32());var r=this.size-this.hdr_size-(4*4+(this.scheme_id_uri.length+1)+(this.value.length+1));this.version==1&&(r-=4),this.message_data=t.readUint8Array(r)}),o.createEntityToGroupCtor=function(t,r){o[t+"Box"]=function(s){o.FullBox.call(this,t,s)},o[t+"Box"].prototype=new o.FullBox,o[t+"Box"].prototype.parse=function(s){if(this.parseFullHeader(s),r)r.call(this,s);else for(this.group_id=s.readUint32(),this.num_entities_in_group=s.readUint32(),this.entity_ids=[],i=0;i<this.num_entities_in_group;i++){var c=s.readUint32();this.entity_ids.push(c)}}},o.createEntityToGroupCtor("aebr"),o.createEntityToGroupCtor("afbr"),o.createEntityToGroupCtor("albc"),o.createEntityToGroupCtor("altr"),o.createEntityToGroupCtor("brst"),o.createEntityToGroupCtor("dobr"),o.createEntityToGroupCtor("eqiv"),o.createEntityToGroupCtor("favc"),o.createEntityToGroupCtor("fobr"),o.createEntityToGroupCtor("iaug"),o.createEntityToGroupCtor("pano"),o.createEntityToGroupCtor("slid"),o.createEntityToGroupCtor("ster"),o.createEntityToGroupCtor("tsyn"),o.createEntityToGroupCtor("wbbr"),o.createEntityToGroupCtor("prgr"),o.createEntityToGroupCtor("pymd",function(t){this.group_id=t.readUint32(),this.num_entities_in_group=t.readUint32(),this.entity_ids=[];for(var r=0;r<this.num_entities_in_group;r++){var s=t.readUint32();this.entity_ids.push(s)}for(this.tile_size_x=t.readUint16(),this.tile_size_y=t.readUint16(),this.layer_binning=[],this.tiles_in_layer_column_minus1=[],this.tiles_in_layer_row_minus1=[],r=0;r<this.num_entities_in_group;r++)this.layer_binning[r]=t.readUint16(),this.tiles_in_layer_row_minus1[r]=t.readUint16(),this.tiles_in_layer_column_minus1[r]=t.readUint16()}),o.createFullBoxCtor("esds","ElementaryStreamDescriptorBox",function(t){var r=t.readUint8Array(this.size-this.hdr_size);if(typeof d<"u"){var s=new d;this.esd=s.parseOneDescriptor(new l(r.buffer,0,l.BIG_ENDIAN))}}),o.createBoxCtor("fiel","FieldHandlingBox",function(t){this.fieldCount=t.readUint8(),this.fieldOrdering=t.readUint8()}),o.createBoxCtor("frma","OriginalFormatBox",function(t){this.data_format=t.readString(4)}),o.createBoxCtor("ftyp","FileTypeBox",function(t){var r=this.size-this.hdr_size;this.major_brand=t.readString(4),this.minor_version=t.readUint32(),r-=8,this.compatible_brands=[];for(var s=0;r>=4;)this.compatible_brands[s]=t.readString(4),r-=4,s++}),o.createFullBoxCtor("hdlr","HandlerBox",function(t){this.version===0&&(t.readUint32(),this.handler=t.readString(4),t.readUint32Array(3),this.name=t.readString(this.size-this.hdr_size-20),this.name[this.name.length-1]==="\0"&&(this.name=this.name.slice(0,-1)))}),o.createBoxCtor("hvcC","HEVCConfigurationBox",function(t){var r,s,c,h;this.configurationVersion=t.readUint8(),h=t.readUint8(),this.general_profile_space=h>>6,this.general_tier_flag=(h&32)>>5,this.general_profile_idc=h&31,this.general_profile_compatibility=t.readUint32(),this.general_constraint_indicator=t.readUint8Array(6),this.general_level_idc=t.readUint8(),this.min_spatial_segmentation_idc=t.readUint16()&4095,this.parallelismType=t.readUint8()&3,this.chroma_format_idc=t.readUint8()&3,this.bit_depth_luma_minus8=t.readUint8()&7,this.bit_depth_chroma_minus8=t.readUint8()&7,this.avgFrameRate=t.readUint16(),h=t.readUint8(),this.constantFrameRate=h>>6,this.numTemporalLayers=(h&13)>>3,this.temporalIdNested=(h&4)>>2,this.lengthSizeMinusOne=h&3,this.nalu_arrays=[],this.nalu_arrays.toString=function(){var T="<table class='inner-table'>";T+="<thead><tr><th>completeness</th><th>nalu_type</th><th>nalu_data</th></tr></thead>",T+="<tbody>";for(var E=0;E<this.length;E++){var I=this[E];T+="<tr>",T+="<td rowspan='"+I.length+"'>"+I.completeness+"</td>",T+="<td rowspan='"+I.length+"'>"+I.nalu_type+"</td>";for(var L=0;L<I.length;L++){var R=I[L];L!==0&&(T+="<tr>"),T+="<td>",T+=R.data.reduce(function(W,$){return W+$.toString(16).padStart(2,"0")},"0x"),T+="</td></tr>"}}return T+="</tbody></table>",T};var _=t.readUint8();for(r=0;r<_;r++){var g=[];this.nalu_arrays.push(g),h=t.readUint8(),g.completeness=(h&128)>>7,g.nalu_type=h&63;var A=t.readUint16();for(s=0;s<A;s++){var B={};g.push(B),c=t.readUint16(),B.data=t.readUint8Array(c)}}}),o.createFullBoxCtor("iinf","ItemInfoBox",function(t){var r;this.version===0?this.entry_count=t.readUint16():this.entry_count=t.readUint32(),this.item_infos=[];for(var s=0;s<this.entry_count;s++)if(r=o.parseOneBox(t,!1,this.size-(t.getPosition()-this.start)),r.code===o.OK)r.box.type!=="infe"&&n.error("BoxParser","Expected 'infe' box, got "+r.box.type),this.item_infos[s]=r.box;else return}),o.createFullBoxCtor("iloc","ItemLocationBox",function(t){var r;r=t.readUint8(),this.offset_size=r>>4&15,this.length_size=r&15,r=t.readUint8(),this.base_offset_size=r>>4&15,this.version===1||this.version===2?this.index_size=r&15:this.index_size=0,this.items=[];var s=0;if(this.version<2)s=t.readUint16();else if(this.version===2)s=t.readUint32();else throw"version of iloc box not supported";for(var c=0;c<s;c++){var h={};if(this.items.push(h),this.version<2)h.item_ID=t.readUint16();else if(this.version===2)h.item_ID=t.readUint32();else throw"version of iloc box not supported";switch(this.version===1||this.version===2?h.construction_method=t.readUint16()&15:h.construction_method=0,h.data_reference_index=t.readUint16(),this.base_offset_size){case 0:h.base_offset=0;break;case 4:h.base_offset=t.readUint32();break;case 8:h.base_offset=t.readUint64();break;default:throw"Error reading base offset size"}var _=t.readUint16();h.extents=[];for(var g=0;g<_;g++){var A={};if(h.extents.push(A),this.version===1||this.version===2)switch(this.index_size){case 0:A.extent_index=0;break;case 4:A.extent_index=t.readUint32();break;case 8:A.extent_index=t.readUint64();break;default:throw"Error reading extent index"}switch(this.offset_size){case 0:A.extent_offset=0;break;case 4:A.extent_offset=t.readUint32();break;case 8:A.extent_offset=t.readUint64();break;default:throw"Error reading extent index"}switch(this.length_size){case 0:A.extent_length=0;break;case 4:A.extent_length=t.readUint32();break;case 8:A.extent_length=t.readUint64();break;default:throw"Error reading extent index"}}}}),o.createBoxCtor("imir","ImageMirror",function(t){var r=t.readUint8();this.reserved=r>>7,this.axis=r&1}),o.createFullBoxCtor("infe","ItemInfoEntry",function(t){if((this.version===0||this.version===1)&&(this.item_ID=t.readUint16(),this.item_protection_index=t.readUint16(),this.item_name=t.readCString(),this.content_type=t.readCString(),this.content_encoding=t.readCString()),this.version===1){this.extension_type=t.readString(4),n.warn("BoxParser","Cannot parse extension type"),t.seek(this.start+this.size);return}this.version>=2&&(this.version===2?this.item_ID=t.readUint16():this.version===3&&(this.item_ID=t.readUint32()),this.item_protection_index=t.readUint16(),this.item_type=t.readString(4),this.item_name=t.readCString(),this.item_type==="mime"?(this.content_type=t.readCString(),this.content_encoding=t.readCString()):this.item_type==="uri "&&(this.item_uri_type=t.readCString()))}),o.createFullBoxCtor("ipma","ItemPropertyAssociationBox",function(t){var r,s;for(entry_count=t.readUint32(),this.associations=[],r=0;r<entry_count;r++){var c={};this.associations.push(c),this.version<1?c.id=t.readUint16():c.id=t.readUint32();var h=t.readUint8();for(c.props=[],s=0;s<h;s++){var _=t.readUint8(),g={};c.props.push(g),g.essential=(_&128)>>7===1,this.flags&1?g.property_index=(_&127)<<8|t.readUint8():g.property_index=_&127}}}),o.createFullBoxCtor("iref","ItemReferenceBox",function(t){var r,s;for(this.references=[];t.getPosition()<this.start+this.size;)if(r=o.parseOneBox(t,!0,this.size-(t.getPosition()-this.start)),r.code===o.OK)this.version===0?s=new o.SingleItemTypeReferenceBox(r.type,r.size,r.hdr_size,r.start):s=new o.SingleItemTypeReferenceBoxLarge(r.type,r.size,r.hdr_size,r.start),s.write===o.Box.prototype.write&&s.type!=="mdat"&&(n.warn("BoxParser",s.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),s.parseDataAndRewind(t)),s.parse(t),this.references.push(s);else return}),o.createBoxCtor("irot","ImageRotation",function(t){this.angle=t.readUint8()&3}),o.createFullBoxCtor("ispe","ImageSpatialExtentsProperty",function(t){this.image_width=t.readUint32(),this.image_height=t.readUint32()}),o.createFullBoxCtor("kind","KindBox",function(t){this.schemeURI=t.readCString(),this.value=t.readCString()}),o.createFullBoxCtor("leva","LevelAssignmentBox",function(t){var r=t.readUint8();this.levels=[];for(var s=0;s<r;s++){var c={};this.levels[s]=c,c.track_ID=t.readUint32();var h=t.readUint8();switch(c.padding_flag=h>>7,c.assignment_type=h&127,c.assignment_type){case 0:c.grouping_type=t.readString(4);break;case 1:c.grouping_type=t.readString(4),c.grouping_type_parameter=t.readUint32();break;case 2:break;case 3:break;case 4:c.sub_track_id=t.readUint32();break;default:n.warn("BoxParser","Unknown leva assignement type")}}}),o.createBoxCtor("lhvC","LHEVCConfigurationBox",function(t){var r,s,c;this.configurationVersion=t.readUint8(),this.min_spatial_segmentation_idc=t.readUint16()&4095,this.parallelismType=t.readUint8()&3,c=t.readUint8(),this.numTemporalLayers=(c&13)>>3,this.temporalIdNested=(c&4)>>2,this.lengthSizeMinusOne=c&3,this.nalu_arrays=[],this.nalu_arrays.toString=function(){var T="<table class='inner-table'>";T+="<thead><tr><th>completeness</th><th>nalu_type</th><th>nalu_data</th></tr></thead>",T+="<tbody>";for(var E=0;E<this.length;E++){var I=this[E];T+="<tr>",T+="<td rowspan='"+I.length+"'>"+I.completeness+"</td>",T+="<td rowspan='"+I.length+"'>"+I.nalu_type+"</td>";for(var L=0;L<I.length;L++){var R=I[L];L!==0&&(T+="<tr>"),T+="<td>",T+=R.data.reduce(function(W,$){return W+$.toString(16).padStart(2,"0")},"0x"),T+="</td></tr>"}}return T+="</tbody></table>",T};var h=t.readUint8();for(r=0;r<h;r++){var _=[];this.nalu_arrays.push(_),c=t.readUint8(),_.completeness=(c&128)>>7,_.nalu_type=c&63;var g=t.readUint16();for(s=0;s<g;s++){var A={};_.push(A);var B=t.readUint16();A.data=t.readUint8Array(B)}}}),o.createBoxCtor("lsel","LayerSelectorProperty",function(t){this.layer_id=t.readUint16()}),o.createBoxCtor("maxr","hintmaxrate",function(t){this.period=t.readUint32(),this.bytes=t.readUint32()});function m(t,r){this.x=t,this.y=r}m.prototype.toString=function(){return"("+this.x+","+this.y+")"},o.createBoxCtor("mdcv","MasteringDisplayColourVolumeBox",function(t){this.display_primaries=[],this.display_primaries[0]=new m(t.readUint16(),t.readUint16()),this.display_primaries[1]=new m(t.readUint16(),t.readUint16()),this.display_primaries[2]=new m(t.readUint16(),t.readUint16()),this.white_point=new m(t.readUint16(),t.readUint16()),this.max_display_mastering_luminance=t.readUint32(),this.min_display_mastering_luminance=t.readUint32()}),o.createFullBoxCtor("mdhd","MediaHeaderBox",function(t){this.version==1?(this.creation_time=t.readUint64(),this.modification_time=t.readUint64(),this.timescale=t.readUint32(),this.duration=t.readUint64()):(this.creation_time=t.readUint32(),this.modification_time=t.readUint32(),this.timescale=t.readUint32(),this.duration=t.readUint32()),this.parseLanguage(t),t.readUint16()}),o.createFullBoxCtor("mehd","MovieExtendsHeaderBox",function(t){this.flags&1&&(n.warn("BoxParser","mehd box incorrectly uses flags set to 1, converting version to 1"),this.version=1),this.version==1?this.fragment_duration=t.readUint64():this.fragment_duration=t.readUint32()}),o.createFullBoxCtor("meta","MetaBox",function(t){this.boxes=[],o.ContainerBox.prototype.parse.call(this,t)}),o.createFullBoxCtor("mfhd","MovieFragmentHeaderBox",function(t){this.sequence_number=t.readUint32()}),o.createFullBoxCtor("mfro","MovieFragmentRandomAccessOffsetBox",function(t){this._size=t.readUint32()}),o.createFullBoxCtor("mskC","MaskConfigurationProperty",function(t){this.bits_per_pixel=t.readUint8()}),o.createFullBoxCtor("mvhd","MovieHeaderBox",function(t){this.version==1?(this.creation_time=t.readUint64(),this.modification_time=t.readUint64(),this.timescale=t.readUint32(),this.duration=t.readUint64()):(this.creation_time=t.readUint32(),this.modification_time=t.readUint32(),this.timescale=t.readUint32(),this.duration=t.readUint32()),this.rate=t.readUint32(),this.volume=t.readUint16()>>8,t.readUint16(),t.readUint32Array(2),this.matrix=t.readUint32Array(9),t.readUint32Array(6),this.next_track_id=t.readUint32()}),o.createBoxCtor("npck","hintPacketsSent",function(t){this.packetssent=t.readUint32()}),o.createBoxCtor("nump","hintPacketsSent",function(t){this.packetssent=t.readUint64()}),o.createFullBoxCtor("padb","PaddingBitsBox",function(t){var r=t.readUint32();this.padbits=[];for(var s=0;s<Math.floor((r+1)/2);s++)this.padbits=t.readUint8()}),o.createBoxCtor("pasp","PixelAspectRatioBox",function(t){this.hSpacing=t.readUint32(),this.vSpacing=t.readUint32()}),o.createBoxCtor("payl","CuePayloadBox",function(t){this.text=t.readString(this.size-this.hdr_size)}),o.createBoxCtor("payt","hintpayloadID",function(t){this.payloadID=t.readUint32();var r=t.readUint8();this.rtpmap_string=t.readString(r)}),o.createFullBoxCtor("pdin","ProgressiveDownloadInfoBox",function(t){var r=(this.size-this.hdr_size)/8;this.rate=[],this.initial_delay=[];for(var s=0;s<r;s++)this.rate[s]=t.readUint32(),this.initial_delay[s]=t.readUint32()}),o.createFullBoxCtor("pitm","PrimaryItemBox",function(t){this.version===0?this.item_id=t.readUint16():this.item_id=t.readUint32()}),o.createFullBoxCtor("pixi","PixelInformationProperty",function(t){var r;for(this.num_channels=t.readUint8(),this.bits_per_channels=[],r=0;r<this.num_channels;r++)this.bits_per_channels[r]=t.readUint8()}),o.createBoxCtor("pmax","hintlargestpacket",function(t){this.bytes=t.readUint32()}),o.createFullBoxCtor("prdi","ProgressiveDerivedImageItemInformationProperty",function(t){if(this.step_count=t.readUint16(),this.item_count=[],this.flags&2)for(var r=0;r<this.step_count;r++)this.item_count[r]=t.readUint16()}),o.createFullBoxCtor("prft","ProducerReferenceTimeBox",function(t){this.ref_track_id=t.readUint32(),this.ntp_timestamp=t.readUint64(),this.version===0?this.media_time=t.readUint32():this.media_time=t.readUint64()}),o.createFullBoxCtor("pssh","ProtectionSystemSpecificHeaderBox",function(t){if(this.system_id=o.parseHex16(t),this.version>0){var r=t.readUint32();this.kid=[];for(var s=0;s<r;s++)this.kid[s]=o.parseHex16(t)}var c=t.readUint32();c>0&&(this.data=t.readUint8Array(c))}),o.createFullBoxCtor("clef","TrackCleanApertureDimensionsBox",function(t){this.width=t.readUint32(),this.height=t.readUint32()}),o.createFullBoxCtor("enof","TrackEncodedPixelsDimensionsBox",function(t){this.width=t.readUint32(),this.height=t.readUint32()}),o.createFullBoxCtor("prof","TrackProductionApertureDimensionsBox",function(t){this.width=t.readUint32(),this.height=t.readUint32()}),o.createContainerBoxCtor("tapt","TrackApertureModeDimensionsBox",null,["clef","prof","enof"]),o.createBoxCtor("rtp ","rtpmoviehintinformation",function(t){this.descriptionformat=t.readString(4),this.sdptext=t.readString(this.size-this.hdr_size-4)}),o.createFullBoxCtor("saio","SampleAuxiliaryInformationOffsetsBox",function(t){this.flags&1&&(this.aux_info_type=t.readString(4),this.aux_info_type_parameter=t.readUint32());var r=t.readUint32();this.offset=[];for(var s=0;s<r;s++)this.version===0?this.offset[s]=t.readUint32():this.offset[s]=t.readUint64()}),o.createFullBoxCtor("saiz","SampleAuxiliaryInformationSizesBox",function(t){if(this.flags&1&&(this.aux_info_type=t.readString(4),this.aux_info_type_parameter=t.readUint32()),this.default_sample_info_size=t.readUint8(),this.sample_count=t.readUint32(),this.sample_info_size=[],this.default_sample_info_size===0)for(var r=0;r<this.sample_count;r++)this.sample_info_size[r]=t.readUint8()}),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_METADATA,"mett",function(t){this.parseHeader(t),this.content_encoding=t.readCString(),this.mime_format=t.readCString(),this.parseFooter(t)}),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_METADATA,"metx",function(t){this.parseHeader(t),this.content_encoding=t.readCString(),this.namespace=t.readCString(),this.schema_location=t.readCString(),this.parseFooter(t)}),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_SUBTITLE,"sbtt",function(t){this.parseHeader(t),this.content_encoding=t.readCString(),this.mime_format=t.readCString(),this.parseFooter(t)}),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_SUBTITLE,"stpp",function(t){this.parseHeader(t),this.namespace=t.readCString(),this.schema_location=t.readCString(),this.auxiliary_mime_types=t.readCString(),this.parseFooter(t)}),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_SUBTITLE,"stxt",function(t){this.parseHeader(t),this.content_encoding=t.readCString(),this.mime_format=t.readCString(),this.parseFooter(t)}),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_SUBTITLE,"tx3g",function(t){this.parseHeader(t),this.displayFlags=t.readUint32(),this.horizontal_justification=t.readInt8(),this.vertical_justification=t.readInt8(),this.bg_color_rgba=t.readUint8Array(4),this.box_record=t.readInt16Array(4),this.style_record=t.readUint8Array(12),this.parseFooter(t)}),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_METADATA,"wvtt",function(t){this.parseHeader(t),this.parseFooter(t)}),o.createSampleGroupCtor("alst",function(t){var r,s=t.readUint16();for(this.first_output_sample=t.readUint16(),this.sample_offset=[],r=0;r<s;r++)this.sample_offset[r]=t.readUint32();var c=this.description_length-4-4*s;for(this.num_output_samples=[],this.num_total_samples=[],r=0;r<c/4;r++)this.num_output_samples[r]=t.readUint16(),this.num_total_samples[r]=t.readUint16()}),o.createSampleGroupCtor("avll",function(t){this.layerNumber=t.readUint8(),this.accurateStatisticsFlag=t.readUint8(),this.avgBitRate=t.readUint16(),this.avgFrameRate=t.readUint16()}),o.createSampleGroupCtor("avss",function(t){this.subSequenceIdentifier=t.readUint16(),this.layerNumber=t.readUint8();var r=t.readUint8();this.durationFlag=r>>7,this.avgRateFlag=r>>6&1,this.durationFlag&&(this.duration=t.readUint32()),this.avgRateFlag&&(this.accurateStatisticsFlag=t.readUint8(),this.avgBitRate=t.readUint16(),this.avgFrameRate=t.readUint16()),this.dependency=[];for(var s=t.readUint8(),c=0;c<s;c++){var h={};this.dependency.push(h),h.subSeqDirectionFlag=t.readUint8(),h.layerNumber=t.readUint8(),h.subSequenceIdentifier=t.readUint16()}}),o.createSampleGroupCtor("dtrt",function(t){n.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),o.createSampleGroupCtor("mvif",function(t){n.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),o.createSampleGroupCtor("prol",function(t){this.roll_distance=t.readInt16()}),o.createSampleGroupCtor("rap ",function(t){var r=t.readUint8();this.num_leading_samples_known=r>>7,this.num_leading_samples=r&127}),o.createSampleGroupCtor("rash",function(t){if(this.operation_point_count=t.readUint16(),this.description_length!==2+(this.operation_point_count===1?2:this.operation_point_count*6)+9)n.warn("BoxParser","Mismatch in "+this.grouping_type+" sample group length"),this.data=t.readUint8Array(this.description_length-2);else{if(this.operation_point_count===1)this.target_rate_share=t.readUint16();else{this.target_rate_share=[],this.available_bitrate=[];for(var r=0;r<this.operation_point_count;r++)this.available_bitrate[r]=t.readUint32(),this.target_rate_share[r]=t.readUint16()}this.maximum_bitrate=t.readUint32(),this.minimum_bitrate=t.readUint32(),this.discard_priority=t.readUint8()}}),o.createSampleGroupCtor("roll",function(t){this.roll_distance=t.readInt16()}),o.SampleGroupEntry.prototype.parse=function(t){n.warn("BoxParser","Unknown Sample Group type: "+this.grouping_type),this.data=t.readUint8Array(this.description_length)},o.createSampleGroupCtor("scif",function(t){n.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),o.createSampleGroupCtor("scnm",function(t){n.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),o.createSampleGroupCtor("seig",function(t){this.reserved=t.readUint8();var r=t.readUint8();this.crypt_byte_block=r>>4,this.skip_byte_block=r&15,this.isProtected=t.readUint8(),this.Per_Sample_IV_Size=t.readUint8(),this.KID=o.parseHex16(t),this.constant_IV_size=0,this.constant_IV=0,this.isProtected===1&&this.Per_Sample_IV_Size===0&&(this.constant_IV_size=t.readUint8(),this.constant_IV=t.readUint8Array(this.constant_IV_size))}),o.createSampleGroupCtor("stsa",function(t){n.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),o.createSampleGroupCtor("sync",function(t){var r=t.readUint8();this.NAL_unit_type=r&63}),o.createSampleGroupCtor("tele",function(t){var r=t.readUint8();this.level_independently_decodable=r>>7}),o.createSampleGroupCtor("tsas",function(t){n.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),o.createSampleGroupCtor("tscl",function(t){n.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),o.createSampleGroupCtor("vipr",function(t){n.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),o.createFullBoxCtor("sbgp","SampleToGroupBox",function(t){this.grouping_type=t.readString(4),this.version===1?this.grouping_type_parameter=t.readUint32():this.grouping_type_parameter=0,this.entries=[];for(var r=t.readUint32(),s=0;s<r;s++){var c={};this.entries.push(c),c.sample_count=t.readInt32(),c.group_description_index=t.readInt32()}});function y(t,r){this.bad_pixel_row=t,this.bad_pixel_column=r}y.prototype.toString=function(){return"[row: "+this.bad_pixel_row+", column: "+this.bad_pixel_column+"]"},o.createFullBoxCtor("sbpm","SensorBadPixelsMapBox",function(t){var r;for(this.component_count=t.readUint16(),this.component_index=[],r=0;r<this.component_count;r++)this.component_index.push(t.readUint16());var s=t.readUint8();for(this.correction_applied=(s&128)==128,this.num_bad_rows=t.readUint32(),this.num_bad_cols=t.readUint32(),this.num_bad_pixels=t.readUint32(),this.bad_rows=[],this.bad_columns=[],this.bad_pixels=[],r=0;r<this.num_bad_rows;r++)this.bad_rows.push(t.readUint32());for(r=0;r<this.num_bad_cols;r++)this.bad_columns.push(t.readUint32());for(r=0;r<this.num_bad_pixels;r++){var c=t.readUint32(),h=t.readUint32();this.bad_pixels.push(new y(c,h))}}),o.createFullBoxCtor("schm","SchemeTypeBox",function(t){this.scheme_type=t.readString(4),this.scheme_version=t.readUint32(),this.flags&1&&(this.scheme_uri=t.readString(this.size-this.hdr_size-8))}),o.createBoxCtor("sdp ","rtptracksdphintinformation",function(t){this.sdptext=t.readString(this.size-this.hdr_size)}),o.createFullBoxCtor("sdtp","SampleDependencyTypeBox",function(t){var r,s=this.size-this.hdr_size;this.is_leading=[],this.sample_depends_on=[],this.sample_is_depended_on=[],this.sample_has_redundancy=[];for(var c=0;c<s;c++)r=t.readUint8(),this.is_leading[c]=r>>6,this.sample_depends_on[c]=r>>4&3,this.sample_is_depended_on[c]=r>>2&3,this.sample_has_redundancy[c]=r&3}),o.createFullBoxCtor("senc","SampleEncryptionBox"),o.createFullBoxCtor("sgpd","SampleGroupDescriptionBox",function(t){this.grouping_type=t.readString(4),n.debug("BoxParser","Found Sample Groups of type "+this.grouping_type),this.version===1?this.default_length=t.readUint32():this.default_length=0,this.version>=2&&(this.default_group_description_index=t.readUint32()),this.entries=[];for(var r=t.readUint32(),s=0;s<r;s++){var c;o[this.grouping_type+"SampleGroupEntry"]?c=new o[this.grouping_type+"SampleGroupEntry"](this.grouping_type):c=new o.SampleGroupEntry(this.grouping_type),this.entries.push(c),this.version===1?this.default_length===0?c.description_length=t.readUint32():c.description_length=this.default_length:c.description_length=this.default_length,c.write===o.SampleGroupEntry.prototype.write&&(n.info("BoxParser","SampleGroup for type "+this.grouping_type+" writing not yet implemented, keeping unparsed data in memory for later write"),c.data=t.readUint8Array(c.description_length),t.position-=c.description_length),c.parse(t)}}),o.createFullBoxCtor("sidx","CompressedSegmentIndexBox",function(t){this.reference_ID=t.readUint32(),this.timescale=t.readUint32(),this.version===0?(this.earliest_presentation_time=t.readUint32(),this.first_offset=t.readUint32()):(this.earliest_presentation_time=t.readUint64(),this.first_offset=t.readUint64()),t.readUint16(),this.references=[];for(var r=t.readUint16(),s=0;s<r;s++){var c={};this.references.push(c);var h=t.readUint32();c.reference_type=h>>31&1,c.referenced_size=h&2147483647,c.subsegment_duration=t.readUint32(),h=t.readUint32(),c.starts_with_SAP=h>>31&1,c.SAP_type=h>>28&7,c.SAP_delta_time=h&268435455}}),o.SingleItemTypeReferenceBox=function(t,r,s,c){o.Box.call(this,t,r),this.hdr_size=s,this.start=c},o.SingleItemTypeReferenceBox.prototype=new o.Box,o.SingleItemTypeReferenceBox.prototype.parse=function(t){this.from_item_ID=t.readUint16();var r=t.readUint16();this.references=[];for(var s=0;s<r;s++)this.references[s]={},this.references[s].to_item_ID=t.readUint16()},o.SingleItemTypeReferenceBoxLarge=function(t,r,s,c){o.Box.call(this,t,r),this.hdr_size=s,this.start=c},o.SingleItemTypeReferenceBoxLarge.prototype=new o.Box,o.SingleItemTypeReferenceBoxLarge.prototype.parse=function(t){this.from_item_ID=t.readUint32();var r=t.readUint16();this.references=[];for(var s=0;s<r;s++)this.references[s]={},this.references[s].to_item_ID=t.readUint32()},o.createFullBoxCtor("SmDm","SMPTE2086MasteringDisplayMetadataBox",function(t){this.primaryRChromaticity_x=t.readUint16(),this.primaryRChromaticity_y=t.readUint16(),this.primaryGChromaticity_x=t.readUint16(),this.primaryGChromaticity_y=t.readUint16(),this.primaryBChromaticity_x=t.readUint16(),this.primaryBChromaticity_y=t.readUint16(),this.whitePointChromaticity_x=t.readUint16(),this.whitePointChromaticity_y=t.readUint16(),this.luminanceMax=t.readUint32(),this.luminanceMin=t.readUint32()}),o.createFullBoxCtor("smhd","SoundMediaHeaderBox",function(t){this.balance=t.readUint16(),t.readUint16()}),o.createFullBoxCtor("ssix","CompressedSubsegmentIndexBox",function(t){this.subsegments=[];for(var r=t.readUint32(),s=0;s<r;s++){var c={};this.subsegments.push(c),c.ranges=[];for(var h=t.readUint32(),_=0;_<h;_++){var g={};c.ranges.push(g),g.level=t.readUint8(),g.range_size=t.readUint24()}}}),o.createFullBoxCtor("stco","ChunkOffsetBox",function(t){var r;if(r=t.readUint32(),this.chunk_offsets=[],this.version===0)for(var s=0;s<r;s++)this.chunk_offsets.push(t.readUint32())}),o.createFullBoxCtor("stdp","DegradationPriorityBox",function(t){var r=(this.size-this.hdr_size)/2;this.priority=[];for(var s=0;s<r;s++)this.priority[s]=t.readUint16()}),o.createFullBoxCtor("sthd","SubtitleMediaHeaderBox"),o.createFullBoxCtor("stri","SubTrackInformationBox",function(t){this.switch_group=t.readUint16(),this.alternate_group=t.readUint16(),this.sub_track_id=t.readUint32();var r=(this.size-this.hdr_size-8)/4;this.attribute_list=[];for(var s=0;s<r;s++)this.attribute_list[s]=t.readUint32()}),o.createFullBoxCtor("stsc","SampleToChunkBox",function(t){var r,s;if(r=t.readUint32(),this.first_chunk=[],this.samples_per_chunk=[],this.sample_description_index=[],this.version===0)for(s=0;s<r;s++)this.first_chunk.push(t.readUint32()),this.samples_per_chunk.push(t.readUint32()),this.sample_description_index.push(t.readUint32())}),o.createFullBoxCtor("stsd","SampleDescriptionBox",function(t){var r,s,c,h;for(this.entries=[],c=t.readUint32(),r=1;r<=c;r++)if(s=o.parseOneBox(t,!0,this.size-(t.getPosition()-this.start)),s.code===o.OK)o[s.type+"SampleEntry"]?(h=new o[s.type+"SampleEntry"](s.size),h.hdr_size=s.hdr_size,h.start=s.start):(n.warn("BoxParser","Unknown sample entry type: "+s.type),h=new o.SampleEntry(s.type,s.size,s.hdr_size,s.start)),h.write===o.SampleEntry.prototype.write&&(n.info("BoxParser","SampleEntry "+h.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),h.parseDataAndRewind(t)),h.parse(t),this.entries.push(h);else return}),o.createFullBoxCtor("stsg","SubTrackSampleGroupBox",function(t){this.grouping_type=t.readUint32();var r=t.readUint16();this.group_description_index=[];for(var s=0;s<r;s++)this.group_description_index[s]=t.readUint32()}),o.createFullBoxCtor("stsh","ShadowSyncSampleBox",function(t){var r,s;if(r=t.readUint32(),this.shadowed_sample_numbers=[],this.sync_sample_numbers=[],this.version===0)for(s=0;s<r;s++)this.shadowed_sample_numbers.push(t.readUint32()),this.sync_sample_numbers.push(t.readUint32())}),o.createFullBoxCtor("stss","SyncSampleBox",function(t){var r,s;if(s=t.readUint32(),this.version===0)for(this.sample_numbers=[],r=0;r<s;r++)this.sample_numbers.push(t.readUint32())}),o.createFullBoxCtor("stsz","SampleSizeBox",function(t){var r;if(this.sample_sizes=[],this.version===0)for(this.sample_size=t.readUint32(),this.sample_count=t.readUint32(),r=0;r<this.sample_count;r++)this.sample_size===0?this.sample_sizes.push(t.readUint32()):this.sample_sizes[r]=this.sample_size}),o.createFullBoxCtor("stts","TimeToSampleBox",function(t){var r,s,c;if(r=t.readUint32(),this.sample_counts=[],this.sample_deltas=[],this.version===0)for(s=0;s<r;s++)this.sample_counts.push(t.readUint32()),c=t.readInt32(),c<0&&(n.warn("BoxParser","File uses negative stts sample delta, using value 1 instead, sync may be lost!"),c=1),this.sample_deltas.push(c)}),o.createFullBoxCtor("stvi","StereoVideoBox",function(t){var r=t.readUint32();this.single_view_allowed=r&3,this.stereo_scheme=t.readUint32();var s=t.readUint32();this.stereo_indication_type=t.readString(s);var c,h;for(this.boxes=[];t.getPosition()<this.start+this.size;)if(c=o.parseOneBox(t,!1,this.size-(t.getPosition()-this.start)),c.code===o.OK)h=c.box,this.boxes.push(h),this[h.type]=h;else return}),o.createBoxCtor("styp","SegmentTypeBox",function(t){o.ftypBox.prototype.parse.call(this,t)}),o.createFullBoxCtor("stz2","CompactSampleSizeBox",function(t){var r,s;if(this.sample_sizes=[],this.version===0)if(this.reserved=t.readUint24(),this.field_size=t.readUint8(),s=t.readUint32(),this.field_size===4)for(r=0;r<s;r+=2){var c=t.readUint8();this.sample_sizes[r]=c>>4&15,this.sample_sizes[r+1]=c&15}else if(this.field_size===8)for(r=0;r<s;r++)this.sample_sizes[r]=t.readUint8();else if(this.field_size===16)for(r=0;r<s;r++)this.sample_sizes[r]=t.readUint16();else n.error("BoxParser","Error in length field in stz2 box")}),o.createFullBoxCtor("subs","SubSampleInformationBox",function(t){var r,s,c,h;for(c=t.readUint32(),this.entries=[],r=0;r<c;r++){var _={};if(this.entries[r]=_,_.sample_delta=t.readUint32(),_.subsamples=[],h=t.readUint16(),h>0)for(s=0;s<h;s++){var g={};_.subsamples.push(g),this.version==1?g.size=t.readUint32():g.size=t.readUint16(),g.priority=t.readUint8(),g.discardable=t.readUint8(),g.codec_specific_parameters=t.readUint32()}}}),o.createFullBoxCtor("tenc","TrackEncryptionBox",function(t){if(t.readUint8(),this.version===0)t.readUint8();else{var r=t.readUint8();this.default_crypt_byte_block=r>>4&15,this.default_skip_byte_block=r&15}this.default_isProtected=t.readUint8(),this.default_Per_Sample_IV_Size=t.readUint8(),this.default_KID=o.parseHex16(t),this.default_isProtected===1&&this.default_Per_Sample_IV_Size===0&&(this.default_constant_IV_size=t.readUint8(),this.default_constant_IV=t.readUint8Array(this.default_constant_IV_size))}),o.createFullBoxCtor("tfdt","TrackFragmentBaseMediaDecodeTimeBox",function(t){this.version==1?this.baseMediaDecodeTime=t.readUint64():this.baseMediaDecodeTime=t.readUint32()}),o.createFullBoxCtor("tfhd","TrackFragmentHeaderBox",function(t){var r=0;this.track_id=t.readUint32(),this.size-this.hdr_size>r&&this.flags&o.TFHD_FLAG_BASE_DATA_OFFSET?(this.base_data_offset=t.readUint64(),r+=8):this.base_data_offset=0,this.size-this.hdr_size>r&&this.flags&o.TFHD_FLAG_SAMPLE_DESC?(this.default_sample_description_index=t.readUint32(),r+=4):this.default_sample_description_index=0,this.size-this.hdr_size>r&&this.flags&o.TFHD_FLAG_SAMPLE_DUR?(this.default_sample_duration=t.readUint32(),r+=4):this.default_sample_duration=0,this.size-this.hdr_size>r&&this.flags&o.TFHD_FLAG_SAMPLE_SIZE?(this.default_sample_size=t.readUint32(),r+=4):this.default_sample_size=0,this.size-this.hdr_size>r&&this.flags&o.TFHD_FLAG_SAMPLE_FLAGS?(this.default_sample_flags=t.readUint32(),r+=4):this.default_sample_flags=0}),o.createFullBoxCtor("tfra","TrackFragmentRandomAccessBox",function(t){this.track_ID=t.readUint32(),t.readUint24();var r=t.readUint8();this.length_size_of_traf_num=r>>4&3,this.length_size_of_trun_num=r>>2&3,this.length_size_of_sample_num=r&3,this.entries=[];for(var s=t.readUint32(),c=0;c<s;c++)this.version===1?(this.time=t.readUint64(),this.moof_offset=t.readUint64()):(this.time=t.readUint32(),this.moof_offset=t.readUint32()),this.traf_number=t["readUint"+8*(this.length_size_of_traf_num+1)](),this.trun_number=t["readUint"+8*(this.length_size_of_trun_num+1)](),this.sample_number=t["readUint"+8*(this.length_size_of_sample_num+1)]()}),o.createFullBoxCtor("tkhd","TrackHeaderBox",function(t){this.version==1?(this.creation_time=t.readUint64(),this.modification_time=t.readUint64(),this.track_id=t.readUint32(),t.readUint32(),this.duration=t.readUint64()):(this.creation_time=t.readUint32(),this.modification_time=t.readUint32(),this.track_id=t.readUint32(),t.readUint32(),this.duration=t.readUint32()),t.readUint32Array(2),this.layer=t.readInt16(),this.alternate_group=t.readInt16(),this.volume=t.readInt16()>>8,t.readUint16(),this.matrix=t.readInt32Array(9),this.width=t.readUint32(),this.height=t.readUint32()}),o.createBoxCtor("tmax","hintmaxrelativetime",function(t){this.time=t.readUint32()}),o.createBoxCtor("tmin","hintminrelativetime",function(t){this.time=t.readUint32()}),o.createBoxCtor("totl","hintBytesSent",function(t){this.bytessent=t.readUint32()}),o.createBoxCtor("tpay","hintBytesSent",function(t){this.bytessent=t.readUint32()}),o.createBoxCtor("tpyl","hintBytesSent",function(t){this.bytessent=t.readUint64()}),o.TrackGroupTypeBox.prototype.parse=function(t){this.parseFullHeader(t),this.track_group_id=t.readUint32()},o.createTrackGroupCtor("msrc"),o.TrackReferenceTypeBox=function(t,r,s,c){o.Box.call(this,t,r),this.hdr_size=s,this.start=c},o.TrackReferenceTypeBox.prototype=new o.Box,o.TrackReferenceTypeBox.prototype.parse=function(t){this.track_ids=t.readUint32Array((this.size-this.hdr_size)/4)},o.trefBox.prototype.parse=function(t){for(var r,s;t.getPosition()<this.start+this.size;)if(r=o.parseOneBox(t,!0,this.size-(t.getPosition()-this.start)),r.code===o.OK)s=new o.TrackReferenceTypeBox(r.type,r.size,r.hdr_size,r.start),s.write===o.Box.prototype.write&&s.type!=="mdat"&&(n.info("BoxParser","TrackReference "+s.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),s.parseDataAndRewind(t)),s.parse(t),this.boxes.push(s);else return},o.createFullBoxCtor("trep","TrackExtensionPropertiesBox",function(t){for(this.track_ID=t.readUint32(),this.boxes=[];t.getPosition()<this.start+this.size;)if(ret=o.parseOneBox(t,!1,this.size-(t.getPosition()-this.start)),ret.code===o.OK)box=ret.box,this.boxes.push(box);else return}),o.createFullBoxCtor("trex","TrackExtendsBox",function(t){this.track_id=t.readUint32(),this.default_sample_description_index=t.readUint32(),this.default_sample_duration=t.readUint32(),this.default_sample_size=t.readUint32(),this.default_sample_flags=t.readUint32()}),o.createBoxCtor("trpy","hintBytesSent",function(t){this.bytessent=t.readUint64()}),o.createFullBoxCtor("trun","TrackRunBox",function(t){var r=0;if(this.sample_count=t.readUint32(),r+=4,this.size-this.hdr_size>r&&this.flags&o.TRUN_FLAGS_DATA_OFFSET?(this.data_offset=t.readInt32(),r+=4):this.data_offset=0,this.size-this.hdr_size>r&&this.flags&o.TRUN_FLAGS_FIRST_FLAG?(this.first_sample_flags=t.readUint32(),r+=4):this.first_sample_flags=0,this.sample_duration=[],this.sample_size=[],this.sample_flags=[],this.sample_composition_time_offset=[],this.size-this.hdr_size>r)for(var s=0;s<this.sample_count;s++)this.flags&o.TRUN_FLAGS_DURATION&&(this.sample_duration[s]=t.readUint32()),this.flags&o.TRUN_FLAGS_SIZE&&(this.sample_size[s]=t.readUint32()),this.flags&o.TRUN_FLAGS_FLAGS&&(this.sample_flags[s]=t.readUint32()),this.flags&o.TRUN_FLAGS_CTS_OFFSET&&(this.version===0?this.sample_composition_time_offset[s]=t.readUint32():this.sample_composition_time_offset[s]=t.readInt32())}),o.createFullBoxCtor("tsel","TrackSelectionBox",function(t){this.switch_group=t.readUint32();var r=(this.size-this.hdr_size-4)/4;this.attribute_list=[];for(var s=0;s<r;s++)this.attribute_list[s]=t.readUint32()}),o.createFullBoxCtor("txtC","TextConfigBox",function(t){this.config=t.readCString()}),o.createBoxCtor("tyco","TypeCombinationBox",function(t){var r=(this.size-this.hdr_size)/4;this.compatible_brands=[];for(var s=0;s<r;s++)this.compatible_brands[s]=t.readString(4)}),o.createFullBoxCtor("udes","UserDescriptionProperty",function(t){this.lang=t.readCString(),this.name=t.readCString(),this.description=t.readCString(),this.tags=t.readCString()}),o.createFullBoxCtor("uncC","UncompressedFrameConfigBox",function(t){var r;if(this.profile=t.readString(4),this.version!=1){if(this.version==0){for(this.component_count=t.readUint32(),this.component_index=[],this.component_bit_depth_minus_one=[],this.component_format=[],this.component_align_size=[],r=0;r<this.component_count;r++)this.component_index.push(t.readUint16()),this.component_bit_depth_minus_one.push(t.readUint8()),this.component_format.push(t.readUint8()),this.component_align_size.push(t.readUint8());this.sampling_type=t.readUint8(),this.interleave_type=t.readUint8(),this.block_size=t.readUint8();var s=t.readUint8();this.component_little_endian=s>>7&1,this.block_pad_lsb=s>>6&1,this.block_little_endian=s>>5&1,this.block_reversed=s>>4&1,this.pad_unknown=s>>3&1,this.pixel_size=t.readUint32(),this.row_align_size=t.readUint32(),this.tile_align_size=t.readUint32(),this.num_tile_cols_minus_one=t.readUint32(),this.num_tile_rows_minus_one=t.readUint32()}}}),o.createFullBoxCtor("url ","DataEntryUrlBox",function(t){this.flags!==1&&(this.location=t.readCString())}),o.createFullBoxCtor("urn ","DataEntryUrnBox",function(t){this.name=t.readCString(),this.size-this.hdr_size-this.name.length-1>0&&(this.location=t.readCString())}),o.createUUIDBox("a5d40b30e81411ddba2f0800200c9a66","LiveServerManifestBox",!0,!1,function(t){this.LiveServerManifest=t.readString(this.size-this.hdr_size).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}),o.createUUIDBox("d08a4f1810f34a82b6c832d8aba183d3","PiffProtectionSystemSpecificHeaderBox",!0,!1,function(t){this.system_id=o.parseHex16(t);var r=t.readUint32();r>0&&(this.data=t.readUint8Array(r))}),o.createUUIDBox("a2394f525a9b4f14a2446c427c648df4","PiffSampleEncryptionBox",!0,!1),o.createUUIDBox("8974dbce7be74c5184f97148f9882554","PiffTrackEncryptionBox",!0,!1,function(t){this.default_AlgorithmID=t.readUint24(),this.default_IV_size=t.readUint8(),this.default_KID=o.parseHex16(t)}),o.createUUIDBox("d4807ef2ca3946958e5426cb9e46a79f","TfrfBox",!0,!1,function(t){this.fragment_count=t.readUint8(),this.entries=[];for(var r=0;r<this.fragment_count;r++){var s={},c=0,h=0;this.version===1?(c=t.readUint64(),h=t.readUint64()):(c=t.readUint32(),h=t.readUint32()),s.absolute_time=c,s.absolute_duration=h,this.entries.push(s)}}),o.createUUIDBox("6d1d9b0542d544e680e2141daff757b2","TfxdBox",!0,!1,function(t){this.version===1?(this.absolute_time=t.readUint64(),this.duration=t.readUint64()):(this.absolute_time=t.readUint32(),this.duration=t.readUint32())}),o.createFullBoxCtor("vmhd","VideoMediaHeaderBox",function(t){this.graphicsmode=t.readUint16(),this.opcolor=t.readUint16Array(3)}),o.createFullBoxCtor("vpcC","VPCodecConfigurationRecord",function(t){var r;this.version===1?(this.profile=t.readUint8(),this.level=t.readUint8(),r=t.readUint8(),this.bitDepth=r>>4,this.chromaSubsampling=r>>1&7,this.videoFullRangeFlag=r&1,this.colourPrimaries=t.readUint8(),this.transferCharacteristics=t.readUint8(),this.matrixCoefficients=t.readUint8(),this.codecIntializationDataSize=t.readUint16(),this.codecIntializationData=t.readUint8Array(this.codecIntializationDataSize)):(this.profile=t.readUint8(),this.level=t.readUint8(),r=t.readUint8(),this.bitDepth=r>>4&15,this.colorSpace=r&15,r=t.readUint8(),this.chromaSubsampling=r>>4&15,this.transferFunction=r>>1&7,this.videoFullRangeFlag=r&1,this.codecIntializationDataSize=t.readUint16(),this.codecIntializationData=t.readUint8Array(this.codecIntializationDataSize))}),o.createBoxCtor("vttC","WebVTTConfigurationBox",function(t){this.text=t.readString(this.size-this.hdr_size)}),o.createFullBoxCtor("vvcC","VvcConfigurationBox",function(t){var r,s,c={held_bits:void 0,num_held_bits:0,stream_read_1_bytes:function(R){this.held_bits=R.readUint8(),this.num_held_bits=8},stream_read_2_bytes:function(R){this.held_bits=R.readUint16(),this.num_held_bits=16},extract_bits:function(R){var W=this.held_bits>>this.num_held_bits-R&(1<<R)-1;return this.num_held_bits-=R,W}};if(c.stream_read_1_bytes(t),c.extract_bits(5),this.lengthSizeMinusOne=c.extract_bits(2),this.ptl_present_flag=c.extract_bits(1),this.ptl_present_flag){c.stream_read_2_bytes(t),this.ols_idx=c.extract_bits(9),this.num_sublayers=c.extract_bits(3),this.constant_frame_rate=c.extract_bits(2),this.chroma_format_idc=c.extract_bits(2),c.stream_read_1_bytes(t),this.bit_depth_minus8=c.extract_bits(3),c.extract_bits(5);{if(c.stream_read_2_bytes(t),c.extract_bits(2),this.num_bytes_constraint_info=c.extract_bits(6),this.general_profile_idc=c.extract_bits(7),this.general_tier_flag=c.extract_bits(1),this.general_level_idc=t.readUint8(),c.stream_read_1_bytes(t),this.ptl_frame_only_constraint_flag=c.extract_bits(1),this.ptl_multilayer_enabled_flag=c.extract_bits(1),this.general_constraint_info=new Uint8Array(this.num_bytes_constraint_info),this.num_bytes_constraint_info){for(r=0;r<this.num_bytes_constraint_info-1;r++){var h=c.extract_bits(6);c.stream_read_1_bytes(t);var _=c.extract_bits(2);this.general_constraint_info[r]=h<<2|_}this.general_constraint_info[this.num_bytes_constraint_info-1]=c.extract_bits(6)}else c.extract_bits(6);if(this.num_sublayers>1){for(c.stream_read_1_bytes(t),this.ptl_sublayer_present_mask=0,s=this.num_sublayers-2;s>=0;--s){var g=c.extract_bits(1);this.ptl_sublayer_present_mask|=g<<s}for(s=this.num_sublayers;s<=8&&this.num_sublayers>1;++s)c.extract_bits(1);for(this.sublayer_level_idc=[],s=this.num_sublayers-2;s>=0;--s)this.ptl_sublayer_present_mask&1<<s&&(this.sublayer_level_idc[s]=t.readUint8())}if(this.ptl_num_sub_profiles=t.readUint8(),this.general_sub_profile_idc=[],this.ptl_num_sub_profiles)for(r=0;r<this.ptl_num_sub_profiles;r++)this.general_sub_profile_idc.push(t.readUint32())}this.max_picture_width=t.readUint16(),this.max_picture_height=t.readUint16(),this.avg_frame_rate=t.readUint16()}var A=12,B=13;this.nalu_arrays=[];var T=t.readUint8();for(r=0;r<T;r++){var E=[];this.nalu_arrays.push(E),c.stream_read_1_bytes(t),E.completeness=c.extract_bits(1),c.extract_bits(2),E.nalu_type=c.extract_bits(5);var I=1;for(E.nalu_type!=B&&E.nalu_type!=A&&(I=t.readUint16()),s=0;s<I;s++){var L=t.readUint16();E.push({data:t.readUint8Array(L),length:L})}}}),o.createFullBoxCtor("vvnC","VvcNALUConfigBox",function(t){var r=strm.readUint8();this.lengthSizeMinusOne=r&3}),o.SampleEntry.prototype.isVideo=function(){return!1},o.SampleEntry.prototype.isAudio=function(){return!1},o.SampleEntry.prototype.isSubtitle=function(){return!1},o.SampleEntry.prototype.isMetadata=function(){return!1},o.SampleEntry.prototype.isHint=function(){return!1},o.SampleEntry.prototype.getCodec=function(){return this.type.replace(".","")},o.SampleEntry.prototype.getWidth=function(){return""},o.SampleEntry.prototype.getHeight=function(){return""},o.SampleEntry.prototype.getChannelCount=function(){return""},o.SampleEntry.prototype.getSampleRate=function(){return""},o.SampleEntry.prototype.getSampleSize=function(){return""},o.VisualSampleEntry.prototype.isVideo=function(){return!0},o.VisualSampleEntry.prototype.getWidth=function(){return this.width},o.VisualSampleEntry.prototype.getHeight=function(){return this.height},o.AudioSampleEntry.prototype.isAudio=function(){return!0},o.AudioSampleEntry.prototype.getChannelCount=function(){return this.channel_count},o.AudioSampleEntry.prototype.getSampleRate=function(){return this.samplerate},o.AudioSampleEntry.prototype.getSampleSize=function(){return this.samplesize},o.SubtitleSampleEntry.prototype.isSubtitle=function(){return!0},o.MetadataSampleEntry.prototype.isMetadata=function(){return!0},o.decimalToHex=function(t,r){var s=Number(t).toString(16);for(r=typeof r>"u"||r===null?r=2:r;s.length<r;)s="0"+s;return s},o.avc1SampleEntry.prototype.getCodec=o.avc2SampleEntry.prototype.getCodec=o.avc3SampleEntry.prototype.getCodec=o.avc4SampleEntry.prototype.getCodec=function(){var t=o.SampleEntry.prototype.getCodec.call(this);return this.avcC?t+"."+o.decimalToHex(this.avcC.AVCProfileIndication)+o.decimalToHex(this.avcC.profile_compatibility)+o.decimalToHex(this.avcC.AVCLevelIndication):t},o.hev1SampleEntry.prototype.getCodec=o.hvc1SampleEntry.prototype.getCodec=function(){var t,r=o.SampleEntry.prototype.getCodec.call(this);if(this.hvcC){switch(r+=".",this.hvcC.general_profile_space){case 0:r+="";break;case 1:r+="A";break;case 2:r+="B";break;case 3:r+="C";break}r+=this.hvcC.general_profile_idc,r+=".";var s=this.hvcC.general_profile_compatibility,c=0;for(t=0;t<32&&(c|=s&1,t!=31);t++)c<<=1,s>>=1;r+=o.decimalToHex(c,0),r+=".",this.hvcC.general_tier_flag===0?r+="L":r+="H",r+=this.hvcC.general_level_idc;var h=!1,_="";for(t=5;t>=0;t--)(this.hvcC.general_constraint_indicator[t]||h)&&(_="."+o.decimalToHex(this.hvcC.general_constraint_indicator[t],0)+_,h=!0);r+=_}return r},o.vvc1SampleEntry.prototype.getCodec=o.vvi1SampleEntry.prototype.getCodec=function(){var t,r=o.SampleEntry.prototype.getCodec.call(this);if(this.vvcC){r+="."+this.vvcC.general_profile_idc,this.vvcC.general_tier_flag?r+=".H":r+=".L",r+=this.vvcC.general_level_idc;var s="";if(this.vvcC.general_constraint_info){var c=[],h=0;h|=this.vvcC.ptl_frame_only_constraint<<7,h|=this.vvcC.ptl_multilayer_enabled<<6;var _;for(t=0;t<this.vvcC.general_constraint_info.length;++t)h|=this.vvcC.general_constraint_info[t]>>2&63,c.push(h),h&&(_=t),h=this.vvcC.general_constraint_info[t]>>2&3;if(_===void 0)s=".CA";else{s=".C";var g="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",A=0,B=0;for(t=0;t<=_;++t)for(A=A<<8|c[t],B+=8;B>=5;){var T=A>>B-5&31;s+=g[T],B-=5,A&=(1<<B)-1}B&&(A<<=5-B,s+=g[A&31])}}r+=s}return r},o.mp4aSampleEntry.prototype.getCodec=function(){var t=o.SampleEntry.prototype.getCodec.call(this);if(this.esds&&this.esds.esd){var r=this.esds.esd.getOTI(),s=this.esds.esd.getAudioConfig();return t+"."+o.decimalToHex(r)+(s?"."+s:"")}else return t},o.stxtSampleEntry.prototype.getCodec=function(){var t=o.SampleEntry.prototype.getCodec.call(this);return this.mime_format?t+"."+this.mime_format:t},o.vp08SampleEntry.prototype.getCodec=o.vp09SampleEntry.prototype.getCodec=function(){var t=o.SampleEntry.prototype.getCodec.call(this),r=this.vpcC.level;r==0&&(r="00");var s=this.vpcC.bitDepth;return s==8&&(s="08"),t+".0"+this.vpcC.profile+"."+r+"."+s},o.av01SampleEntry.prototype.getCodec=function(){var t=o.SampleEntry.prototype.getCodec.call(this),r=this.av1C.seq_level_idx_0;r<10&&(r="0"+r);var s;return this.av1C.seq_profile===2&&this.av1C.high_bitdepth===1?s=this.av1C.twelve_bit===1?"12":"10":this.av1C.seq_profile<=2&&(s=this.av1C.high_bitdepth===1?"10":"08"),t+"."+this.av1C.seq_profile+"."+r+(this.av1C.seq_tier_0?"H":"M")+"."+s},o.Box.prototype.writeHeader=function(t,r){this.size+=8,this.size>f&&(this.size+=8),this.type==="uuid"&&(this.size+=16),n.debug("BoxWriter","Writing box "+this.type+" of size: "+this.size+" at position "+t.getPosition()+(r||"")),this.size>f?t.writeUint32(1):(this.sizePosition=t.getPosition(),t.writeUint32(this.size)),t.writeString(this.type,null,4),this.type==="uuid"&&t.writeUint8Array(this.uuid),this.size>f&&t.writeUint64(this.size)},o.FullBox.prototype.writeHeader=function(t){this.size+=4,o.Box.prototype.writeHeader.call(this,t," v="+this.version+" f="+this.flags),t.writeUint8(this.version),t.writeUint24(this.flags)},o.Box.prototype.write=function(t){this.type==="mdat"?this.data&&(this.size=this.data.length,this.writeHeader(t),t.writeUint8Array(this.data)):(this.size=this.data?this.data.length:0,this.writeHeader(t),this.data&&t.writeUint8Array(this.data))},o.ContainerBox.prototype.write=function(t){this.size=0,this.writeHeader(t);for(var r=0;r<this.boxes.length;r++)this.boxes[r]&&(this.boxes[r].write(t),this.size+=this.boxes[r].size);n.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),t.adjustUint32(this.sizePosition,this.size)},o.TrackReferenceTypeBox.prototype.write=function(t){this.size=this.track_ids.length*4,this.writeHeader(t),t.writeUint32Array(this.track_ids)},o.avcCBox.prototype.write=function(t){var r;for(this.size=7,r=0;r<this.SPS.length;r++)this.size+=2+this.SPS[r].length;for(r=0;r<this.PPS.length;r++)this.size+=2+this.PPS[r].length;for(this.ext&&(this.size+=this.ext.length),this.writeHeader(t),t.writeUint8(this.configurationVersion),t.writeUint8(this.AVCProfileIndication),t.writeUint8(this.profile_compatibility),t.writeUint8(this.AVCLevelIndication),t.writeUint8(this.lengthSizeMinusOne+252),t.writeUint8(this.SPS.length+224),r=0;r<this.SPS.length;r++)t.writeUint16(this.SPS[r].length),t.writeUint8Array(this.SPS[r].nalu);for(t.writeUint8(this.PPS.length),r=0;r<this.PPS.length;r++)t.writeUint16(this.PPS[r].length),t.writeUint8Array(this.PPS[r].nalu);this.ext&&t.writeUint8Array(this.ext)},o.co64Box.prototype.write=function(t){var r;for(this.version=0,this.flags=0,this.size=4+8*this.chunk_offsets.length,this.writeHeader(t),t.writeUint32(this.chunk_offsets.length),r=0;r<this.chunk_offsets.length;r++)t.writeUint64(this.chunk_offsets[r])},o.cslgBox.prototype.write=function(t){this.version=0,this.flags=0,this.size=4*5,this.writeHeader(t),t.writeInt32(this.compositionToDTSShift),t.writeInt32(this.leastDecodeToDisplayDelta),t.writeInt32(this.greatestDecodeToDisplayDelta),t.writeInt32(this.compositionStartTime),t.writeInt32(this.compositionEndTime)},o.cttsBox.prototype.write=function(t){var r;for(this.version=0,this.flags=0,this.size=4+8*this.sample_counts.length,this.writeHeader(t),t.writeUint32(this.sample_counts.length),r=0;r<this.sample_counts.length;r++)t.writeUint32(this.sample_counts[r]),this.version===1?t.writeInt32(this.sample_offsets[r]):t.writeUint32(this.sample_offsets[r])},o.drefBox.prototype.write=function(t){this.version=0,this.flags=0,this.size=4,this.writeHeader(t),t.writeUint32(this.entries.length);for(var r=0;r<this.entries.length;r++)this.entries[r].write(t),this.size+=this.entries[r].size;n.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),t.adjustUint32(this.sizePosition,this.size)},o.elngBox.prototype.write=function(t){this.version=0,this.flags=0,this.size=this.extended_language.length,this.writeHeader(t),t.writeString(this.extended_language)},o.elstBox.prototype.write=function(t){this.version=0,this.flags=0,this.size=4+12*this.entries.length,this.writeHeader(t),t.writeUint32(this.entries.length);for(var r=0;r<this.entries.length;r++){var s=this.entries[r];t.writeUint32(s.segment_duration),t.writeInt32(s.media_time),t.writeInt16(s.media_rate_integer),t.writeInt16(s.media_rate_fraction)}},o.emsgBox.prototype.write=function(t){this.version=0,this.flags=0,this.size=4*4+this.message_data.length+(this.scheme_id_uri.length+1)+(this.value.length+1),this.writeHeader(t),t.writeCString(this.scheme_id_uri),t.writeCString(this.value),t.writeUint32(this.timescale),t.writeUint32(this.presentation_time_delta),t.writeUint32(this.event_duration),t.writeUint32(this.id),t.writeUint8Array(this.message_data)},o.ftypBox.prototype.write=function(t){this.size=8+4*this.compatible_brands.length,this.writeHeader(t),t.writeString(this.major_brand,null,4),t.writeUint32(this.minor_version);for(var r=0;r<this.compatible_brands.length;r++)t.writeString(this.compatible_brands[r],null,4)},o.hdlrBox.prototype.write=function(t){this.size=5*4+this.name.length+1,this.version=0,this.flags=0,this.writeHeader(t),t.writeUint32(0),t.writeString(this.handler,null,4),t.writeUint32(0),t.writeUint32(0),t.writeUint32(0),t.writeCString(this.name)},o.hvcCBox.prototype.write=function(t){var r,s;for(this.size=23,r=0;r<this.nalu_arrays.length;r++)for(this.size+=3,s=0;s<this.nalu_arrays[r].length;s++)this.size+=2+this.nalu_arrays[r][s].data.length;for(this.writeHeader(t),t.writeUint8(this.configurationVersion),t.writeUint8((this.general_profile_space<<6)+(this.general_tier_flag<<5)+this.general_profile_idc),t.writeUint32(this.general_profile_compatibility),t.writeUint8Array(this.general_constraint_indicator),t.writeUint8(this.general_level_idc),t.writeUint16(this.min_spatial_segmentation_idc+(15<<24)),t.writeUint8(this.parallelismType+252),t.writeUint8(this.chroma_format_idc+252),t.writeUint8(this.bit_depth_luma_minus8+248),t.writeUint8(this.bit_depth_chroma_minus8+248),t.writeUint16(this.avgFrameRate),t.writeUint8((this.constantFrameRate<<6)+(this.numTemporalLayers<<3)+(this.temporalIdNested<<2)+this.lengthSizeMinusOne),t.writeUint8(this.nalu_arrays.length),r=0;r<this.nalu_arrays.length;r++)for(t.writeUint8((this.nalu_arrays[r].completeness<<7)+this.nalu_arrays[r].nalu_type),t.writeUint16(this.nalu_arrays[r].length),s=0;s<this.nalu_arrays[r].length;s++)t.writeUint16(this.nalu_arrays[r][s].data.length),t.writeUint8Array(this.nalu_arrays[r][s].data)},o.kindBox.prototype.write=function(t){this.version=0,this.flags=0,this.size=this.schemeURI.length+1+(this.value.length+1),this.writeHeader(t),t.writeCString(this.schemeURI),t.writeCString(this.value)},o.mdhdBox.prototype.write=function(t){this.size=4*4+2*2,this.flags=0,this.version=0,this.writeHeader(t),t.writeUint32(this.creation_time),t.writeUint32(this.modification_time),t.writeUint32(this.timescale),t.writeUint32(this.duration),t.writeUint16(this.language),t.writeUint16(0)},o.mehdBox.prototype.write=function(t){this.version=0,this.flags=0,this.size=4,this.writeHeader(t),t.writeUint32(this.fragment_duration)},o.mfhdBox.prototype.write=function(t){this.version=0,this.flags=0,this.size=4,this.writeHeader(t),t.writeUint32(this.sequence_number)},o.mvhdBox.prototype.write=function(t){this.version=0,this.flags=0,this.size=23*4+2*2,this.writeHeader(t),t.writeUint32(this.creation_time),t.writeUint32(this.modification_time),t.writeUint32(this.timescale),t.writeUint32(this.duration),t.writeUint32(this.rate),t.writeUint16(this.volume<<8),t.writeUint16(0),t.writeUint32(0),t.writeUint32(0),t.writeUint32Array(this.matrix),t.writeUint32(0),t.writeUint32(0),t.writeUint32(0),t.writeUint32(0),t.writeUint32(0),t.writeUint32(0),t.writeUint32(this.next_track_id)},o.SampleEntry.prototype.writeHeader=function(t){this.size=8,o.Box.prototype.writeHeader.call(this,t),t.writeUint8(0),t.writeUint8(0),t.writeUint8(0),t.writeUint8(0),t.writeUint8(0),t.writeUint8(0),t.writeUint16(this.data_reference_index)},o.SampleEntry.prototype.writeFooter=function(t){for(var r=0;r<this.boxes.length;r++)this.boxes[r].write(t),this.size+=this.boxes[r].size;n.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),t.adjustUint32(this.sizePosition,this.size)},o.SampleEntry.prototype.write=function(t){this.writeHeader(t),t.writeUint8Array(this.data),this.size+=this.data.length,n.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),t.adjustUint32(this.sizePosition,this.size)},o.VisualSampleEntry.prototype.write=function(t){this.writeHeader(t),this.size+=2*7+6*4+32,t.writeUint16(0),t.writeUint16(0),t.writeUint32(0),t.writeUint32(0),t.writeUint32(0),t.writeUint16(this.width),t.writeUint16(this.height),t.writeUint32(this.horizresolution),t.writeUint32(this.vertresolution),t.writeUint32(0),t.writeUint16(this.frame_count),t.writeUint8(Math.min(31,this.compressorname.length)),t.writeString(this.compressorname,null,31),t.writeUint16(this.depth),t.writeInt16(-1),this.writeFooter(t)},o.AudioSampleEntry.prototype.write=function(t){this.writeHeader(t),this.size+=2*4+3*4,t.writeUint32(0),t.writeUint32(0),t.writeUint16(this.channel_count),t.writeUint16(this.samplesize),t.writeUint16(0),t.writeUint16(0),t.writeUint32(this.samplerate<<16),this.writeFooter(t)},o.stppSampleEntry.prototype.write=function(t){this.writeHeader(t),this.size+=this.namespace.length+1+this.schema_location.length+1+this.auxiliary_mime_types.length+1,t.writeCString(this.namespace),t.writeCString(this.schema_location),t.writeCString(this.auxiliary_mime_types),this.writeFooter(t)},o.SampleGroupEntry.prototype.write=function(t){t.writeUint8Array(this.data)},o.sbgpBox.prototype.write=function(t){this.version=1,this.flags=0,this.size=12+8*this.entries.length,this.writeHeader(t),t.writeString(this.grouping_type,null,4),t.writeUint32(this.grouping_type_parameter),t.writeUint32(this.entries.length);for(var r=0;r<this.entries.length;r++){var s=this.entries[r];t.writeInt32(s.sample_count),t.writeInt32(s.group_description_index)}},o.sgpdBox.prototype.write=function(t){var r,s;for(this.flags=0,this.size=12,r=0;r<this.entries.length;r++)s=this.entries[r],this.version===1&&(this.default_length===0&&(this.size+=4),this.size+=s.data.length);for(this.writeHeader(t),t.writeString(this.grouping_type,null,4),this.version===1&&t.writeUint32(this.default_length),this.version>=2&&t.writeUint32(this.default_sample_description_index),t.writeUint32(this.entries.length),r=0;r<this.entries.length;r++)s=this.entries[r],this.version===1&&this.default_length===0&&t.writeUint32(s.description_length),s.write(t)},o.sidxBox.prototype.write=function(t){this.version=0,this.flags=0,this.size=4*4+2+2+12*this.references.length,this.writeHeader(t),t.writeUint32(this.reference_ID),t.writeUint32(this.timescale),t.writeUint32(this.earliest_presentation_time),t.writeUint32(this.first_offset),t.writeUint16(0),t.writeUint16(this.references.length);for(var r=0;r<this.references.length;r++){var s=this.references[r];t.writeUint32(s.reference_type<<31|s.referenced_size),t.writeUint32(s.subsegment_duration),t.writeUint32(s.starts_with_SAP<<31|s.SAP_type<<28|s.SAP_delta_time)}},o.smhdBox.prototype.write=function(t){this.version=0,this.flags=1,this.size=4,this.writeHeader(t),t.writeUint16(this.balance),t.writeUint16(0)},o.stcoBox.prototype.write=function(t){this.version=0,this.flags=0,this.size=4+4*this.chunk_offsets.length,this.writeHeader(t),t.writeUint32(this.chunk_offsets.length),t.writeUint32Array(this.chunk_offsets)},o.stscBox.prototype.write=function(t){var r;for(this.version=0,this.flags=0,this.size=4+12*this.first_chunk.length,this.writeHeader(t),t.writeUint32(this.first_chunk.length),r=0;r<this.first_chunk.length;r++)t.writeUint32(this.first_chunk[r]),t.writeUint32(this.samples_per_chunk[r]),t.writeUint32(this.sample_description_index[r])},o.stsdBox.prototype.write=function(t){var r;for(this.version=0,this.flags=0,this.size=0,this.writeHeader(t),t.writeUint32(this.entries.length),this.size+=4,r=0;r<this.entries.length;r++)this.entries[r].write(t),this.size+=this.entries[r].size;n.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),t.adjustUint32(this.sizePosition,this.size)},o.stshBox.prototype.write=function(t){var r;for(this.version=0,this.flags=0,this.size=4+8*this.shadowed_sample_numbers.length,this.writeHeader(t),t.writeUint32(this.shadowed_sample_numbers.length),r=0;r<this.shadowed_sample_numbers.length;r++)t.writeUint32(this.shadowed_sample_numbers[r]),t.writeUint32(this.sync_sample_numbers[r])},o.stssBox.prototype.write=function(t){this.version=0,this.flags=0,this.size=4+4*this.sample_numbers.length,this.writeHeader(t),t.writeUint32(this.sample_numbers.length),t.writeUint32Array(this.sample_numbers)},o.stszBox.prototype.write=function(t){var r,s=!0;if(this.version=0,this.flags=0,this.sample_sizes.length>0)for(r=0;r+1<this.sample_sizes.length;)if(this.sample_sizes[r+1]!==this.sample_sizes[0]){s=!1;break}else r++;else s=!1;this.size=8,s||(this.size+=4*this.sample_sizes.length),this.writeHeader(t),s?t.writeUint32(this.sample_sizes[0]):t.writeUint32(0),t.writeUint32(this.sample_sizes.length),s||t.writeUint32Array(this.sample_sizes)},o.sttsBox.prototype.write=function(t){var r;for(this.version=0,this.flags=0,this.size=4+8*this.sample_counts.length,this.writeHeader(t),t.writeUint32(this.sample_counts.length),r=0;r<this.sample_counts.length;r++)t.writeUint32(this.sample_counts[r]),t.writeUint32(this.sample_deltas[r])},o.tfdtBox.prototype.write=function(t){var r=Math.pow(2,32)-1;this.version=this.baseMediaDecodeTime>r?1:0,this.flags=0,this.size=4,this.version===1&&(this.size+=4),this.writeHeader(t),this.version===1?t.writeUint64(this.baseMediaDecodeTime):t.writeUint32(this.baseMediaDecodeTime)},o.tfhdBox.prototype.write=function(t){this.version=0,this.size=4,this.flags&o.TFHD_FLAG_BASE_DATA_OFFSET&&(this.size+=8),this.flags&o.TFHD_FLAG_SAMPLE_DESC&&(this.size+=4),this.flags&o.TFHD_FLAG_SAMPLE_DUR&&(this.size+=4),this.flags&o.TFHD_FLAG_SAMPLE_SIZE&&(this.size+=4),this.flags&o.TFHD_FLAG_SAMPLE_FLAGS&&(this.size+=4),this.writeHeader(t),t.writeUint32(this.track_id),this.flags&o.TFHD_FLAG_BASE_DATA_OFFSET&&t.writeUint64(this.base_data_offset),this.flags&o.TFHD_FLAG_SAMPLE_DESC&&t.writeUint32(this.default_sample_description_index),this.flags&o.TFHD_FLAG_SAMPLE_DUR&&t.writeUint32(this.default_sample_duration),this.flags&o.TFHD_FLAG_SAMPLE_SIZE&&t.writeUint32(this.default_sample_size),this.flags&o.TFHD_FLAG_SAMPLE_FLAGS&&t.writeUint32(this.default_sample_flags)},o.tkhdBox.prototype.write=function(t){this.version=0,this.size=4*18+2*4,this.writeHeader(t),t.writeUint32(this.creation_time),t.writeUint32(this.modification_time),t.writeUint32(this.track_id),t.writeUint32(0),t.writeUint32(this.duration),t.writeUint32(0),t.writeUint32(0),t.writeInt16(this.layer),t.writeInt16(this.alternate_group),t.writeInt16(this.volume<<8),t.writeUint16(0),t.writeInt32Array(this.matrix),t.writeUint32(this.width),t.writeUint32(this.height)},o.trexBox.prototype.write=function(t){this.version=0,this.flags=0,this.size=4*5,this.writeHeader(t),t.writeUint32(this.track_id),t.writeUint32(this.default_sample_description_index),t.writeUint32(this.default_sample_duration),t.writeUint32(this.default_sample_size),t.writeUint32(this.default_sample_flags)},o.trunBox.prototype.write=function(t){this.version=0,this.size=4,this.flags&o.TRUN_FLAGS_DATA_OFFSET&&(this.size+=4),this.flags&o.TRUN_FLAGS_FIRST_FLAG&&(this.size+=4),this.flags&o.TRUN_FLAGS_DURATION&&(this.size+=4*this.sample_duration.length),this.flags&o.TRUN_FLAGS_SIZE&&(this.size+=4*this.sample_size.length),this.flags&o.TRUN_FLAGS_FLAGS&&(this.size+=4*this.sample_flags.length),this.flags&o.TRUN_FLAGS_CTS_OFFSET&&(this.size+=4*this.sample_composition_time_offset.length),this.writeHeader(t),t.writeUint32(this.sample_count),this.flags&o.TRUN_FLAGS_DATA_OFFSET&&(this.data_offset_position=t.getPosition(),t.writeInt32(this.data_offset)),this.flags&o.TRUN_FLAGS_FIRST_FLAG&&t.writeUint32(this.first_sample_flags);for(var r=0;r<this.sample_count;r++)this.flags&o.TRUN_FLAGS_DURATION&&t.writeUint32(this.sample_duration[r]),this.flags&o.TRUN_FLAGS_SIZE&&t.writeUint32(this.sample_size[r]),this.flags&o.TRUN_FLAGS_FLAGS&&t.writeUint32(this.sample_flags[r]),this.flags&o.TRUN_FLAGS_CTS_OFFSET&&(this.version===0?t.writeUint32(this.sample_composition_time_offset[r]):t.writeInt32(this.sample_composition_time_offset[r]))},o["url Box"].prototype.write=function(t){this.version=0,this.location?(this.flags=0,this.size=this.location.length+1):(this.flags=1,this.size=0),this.writeHeader(t),this.location&&t.writeCString(this.location)},o["urn Box"].prototype.write=function(t){this.version=0,this.flags=0,this.size=this.name.length+1+(this.location?this.location.length+1:0),this.writeHeader(t),t.writeCString(this.name),this.location&&t.writeCString(this.location)},o.vmhdBox.prototype.write=function(t){this.version=0,this.flags=1,this.size=8,this.writeHeader(t),t.writeUint16(this.graphicsmode),t.writeUint16Array(this.opcolor)},o.cttsBox.prototype.unpack=function(t){var r,s,c;for(c=0,r=0;r<this.sample_counts.length;r++)for(s=0;s<this.sample_counts[r];s++)t[c].pts=t[c].dts+this.sample_offsets[r],c++},o.sttsBox.prototype.unpack=function(t){var r,s,c;for(c=0,r=0;r<this.sample_counts.length;r++)for(s=0;s<this.sample_counts[r];s++)c===0?t[c].dts=0:t[c].dts=t[c-1].dts+this.sample_deltas[r],c++},o.stcoBox.prototype.unpack=function(t){var r;for(r=0;r<this.chunk_offsets.length;r++)t[r].offset=this.chunk_offsets[r]},o.stscBox.prototype.unpack=function(t){var r,s,c,h,_;for(h=0,_=0,r=0;r<this.first_chunk.length;r++)for(s=0;s<(r+1<this.first_chunk.length?this.first_chunk[r+1]:1/0);s++)for(_++,c=0;c<this.samples_per_chunk[r];c++){if(t[h])t[h].description_index=this.sample_description_index[r],t[h].chunk_index=_;else return;h++}},o.stszBox.prototype.unpack=function(t){var r;for(r=0;r<this.sample_sizes.length;r++)t[r].size=this.sample_sizes[r]},o.DIFF_BOXES_PROP_NAMES=["boxes","entries","references","subsamples","items","item_infos","extents","associations","subsegments","ranges","seekLists","seekPoints","esd","levels"],o.DIFF_PRIMITIVE_ARRAY_PROP_NAMES=["compatible_brands","matrix","opcolor","sample_counts","sample_deltas","first_chunk","samples_per_chunk","sample_sizes","chunk_offsets","sample_offsets","sample_description_index","sample_duration"],o.boxEqualFields=function(t,r){if(t&&!r)return!1;var s;for(s in t)if(!(o.DIFF_BOXES_PROP_NAMES.indexOf(s)>-1)){if(t[s]instanceof o.Box||r[s]instanceof o.Box)continue;if(typeof t[s]>"u"||typeof r[s]>"u")continue;if(typeof t[s]=="function"||typeof r[s]=="function")continue;if(t.subBoxNames&&t.subBoxNames.indexOf(s.slice(0,4))>-1||r.subBoxNames&&r.subBoxNames.indexOf(s.slice(0,4))>-1)continue;if(s==="data"||s==="start"||s==="size"||s==="creation_time"||s==="modification_time")continue;if(o.DIFF_PRIMITIVE_ARRAY_PROP_NAMES.indexOf(s)>-1)continue;if(t[s]!==r[s])return!1}return!0},o.boxEqual=function(t,r){if(!o.boxEqualFields(t,r))return!1;for(var s=0;s<o.DIFF_BOXES_PROP_NAMES.length;s++){var c=o.DIFF_BOXES_PROP_NAMES[s];if(t[c]&&r[c]&&!o.boxEqual(t[c],r[c]))return!1}return!0};var v=function(){};v.prototype.parseSample=function(t){var r,s,c=new a(t.buffer);for(r=[];!c.isEos();)s=o.parseOneBox(c,!1),s.code===o.OK&&s.box.type==="vttc"&&r.push(s.box);return r},v.prototype.getText=function(t,r,s){function c(T,E,I){return I=I||"0",T=T+"",T.length>=E?T:new Array(E-T.length+1).join(I)+T}function h(T){var E=Math.floor(T/3600),I=Math.floor((T-E*3600)/60),L=Math.floor(T-E*3600-I*60),R=Math.floor((T-E*3600-I*60-L)*1e3);return""+c(E,2)+":"+c(I,2)+":"+c(L,2)+"."+c(R,3)}for(var _=this.parseSample(s),g="",A=0;A<_.length;A++){var B=_[A];g+=h(t)+" --> "+h(r)+`\r
`,g+=B.payl.text}return g};var S=function(){};S.prototype.parseSample=function(t){var r={},s;r.resources=[];var c=new a(t.data.buffer);if(!t.subsamples||t.subsamples.length===0)r.documentString=c.readString(t.data.length);else if(r.documentString=c.readString(t.subsamples[0].size),t.subsamples.length>1)for(s=1;s<t.subsamples.length;s++)r.resources[s]=c.readUint8Array(t.subsamples[s].size);return typeof DOMParser<"u"&&(r.document=new DOMParser().parseFromString(r.documentString,"application/xml")),r};var U=function(){};U.prototype.parseSample=function(t){var r,s=new a(t.data.buffer);return r=s.readString(t.data.length),r},U.prototype.parseConfig=function(t){var r,s=new a(t.buffer);return s.readUint32(),r=s.readCString(),r},e.VTTin4Parser=v,e.XMLSubtitlein4Parser=S,e.Textin4Parser=U;var b=function(t){this.stream=t||new u,this.boxes=[],this.mdats=[],this.moofs=[],this.isProgressive=!1,this.moovStartFound=!1,this.onMoovStart=null,this.moovStartSent=!1,this.onReady=null,this.readySent=!1,this.onSegment=null,this.onSamples=null,this.onError=null,this.sampleListBuilt=!1,this.fragmentedTracks=[],this.extractedTracks=[],this.isFragmentationInitialized=!1,this.sampleProcessingStarted=!1,this.nextMoofNumber=0,this.itemListBuilt=!1,this.items=[],this.entity_groups=[],this.onSidx=null,this.sidxSent=!1};b.prototype.setSegmentOptions=function(t,r,s){var c=this.getTrackById(t);if(c){var h={};this.fragmentedTracks.push(h),h.id=t,h.user=r,h.trak=c,c.nextSample=0,h.segmentStream=null,h.nb_samples=1e3,h.rapAlignement=!0,s&&(s.nbSamples&&(h.nb_samples=s.nbSamples),s.rapAlignement&&(h.rapAlignement=s.rapAlignement))}},b.prototype.unsetSegmentOptions=function(t){for(var r=-1,s=0;s<this.fragmentedTracks.length;s++){var c=this.fragmentedTracks[s];c.id==t&&(r=s)}r>-1&&this.fragmentedTracks.splice(r,1)},b.prototype.setExtractionOptions=function(t,r,s){var c=this.getTrackById(t);if(c){var h={};this.extractedTracks.push(h),h.id=t,h.user=r,h.trak=c,c.nextSample=0,h.nb_samples=1e3,h.samples=[],s&&s.nbSamples&&(h.nb_samples=s.nbSamples)}},b.prototype.unsetExtractionOptions=function(t){for(var r=-1,s=0;s<this.extractedTracks.length;s++){var c=this.extractedTracks[s];c.id==t&&(r=s)}r>-1&&this.extractedTracks.splice(r,1)},b.prototype.parse=function(){var t,r,s=!1;if(!(this.restoreParsePosition&&!this.restoreParsePosition()))for(;;)if(this.hasIncompleteMdat&&this.hasIncompleteMdat()){if(this.processIncompleteMdat())continue;return}else if(this.saveParsePosition&&this.saveParsePosition(),t=o.parseOneBox(this.stream,s),t.code===o.ERR_NOT_ENOUGH_DATA)if(this.processIncompleteBox){if(this.processIncompleteBox(t))continue;return}else return;else{var c;switch(r=t.box,c=r.type!=="uuid"?r.type:r.uuid,this.boxes.push(r),c){case"mdat":this.mdats.push(r);break;case"moof":this.moofs.push(r);break;case"moov":this.moovStartFound=!0,this.mdats.length===0&&(this.isProgressive=!0);default:this[c]!==void 0&&n.warn("ISOFile","Duplicate Box of type: "+c+", overriding previous occurrence"),this[c]=r;break}this.updateUsedBytes&&this.updateUsedBytes(r,t)}},b.prototype.checkBuffer=function(t){if(t==null)throw"Buffer must be defined and non empty";if(t.fileStart===void 0)throw"Buffer must have a fileStart property";return t.byteLength===0?(n.warn("ISOFile","Ignoring empty buffer (fileStart: "+t.fileStart+")"),this.stream.logBufferLevel(),!1):(n.info("ISOFile","Processing buffer (fileStart: "+t.fileStart+")"),t.usedBytes=0,this.stream.insertBuffer(t),this.stream.logBufferLevel(),this.stream.initialized()?!0:(n.warn("ISOFile","Not ready to start parsing"),!1))},b.prototype.appendBuffer=function(t,r){var s;if(this.checkBuffer(t))return this.parse(),this.moovStartFound&&!this.moovStartSent&&(this.moovStartSent=!0,this.onMoovStart&&this.onMoovStart()),this.moov?(this.sampleListBuilt||(this.buildSampleLists(),this.sampleListBuilt=!0),this.updateSampleLists(),this.onReady&&!this.readySent&&(this.readySent=!0,this.onReady(this.getInfo())),this.processSamples(r),this.nextSeekPosition?(s=this.nextSeekPosition,this.nextSeekPosition=void 0):s=this.nextParsePosition,this.stream.getEndFilePositionAfter&&(s=this.stream.getEndFilePositionAfter(s))):this.nextParsePosition?s=this.nextParsePosition:s=0,this.sidx&&this.onSidx&&!this.sidxSent&&(this.onSidx(this.sidx),this.sidxSent=!0),this.meta&&(this.flattenItemInfo&&!this.itemListBuilt&&(this.flattenItemInfo(),this.itemListBuilt=!0),this.processItems&&this.processItems(this.onItem)),this.stream.cleanBuffers&&(n.info("ISOFile","Done processing buffer (fileStart: "+t.fileStart+") - next buffer to fetch should have a fileStart position of "+s),this.stream.logBufferLevel(),this.stream.cleanBuffers(),this.stream.logBufferLevel(!0),n.info("ISOFile","Sample data size in memory: "+this.getAllocatedSampleDataSize())),s},b.prototype.getInfo=function(){var t,r,s={},c,h,_,g,A=new Date("1904-01-01T00:00:00Z").getTime();if(this.moov)for(s.hasMoov=!0,s.duration=this.moov.mvhd.duration,s.timescale=this.moov.mvhd.timescale,s.isFragmented=this.moov.mvex!=null,s.isFragmented&&this.moov.mvex.mehd&&(s.fragment_duration=this.moov.mvex.mehd.fragment_duration),s.isProgressive=this.isProgressive,s.hasIOD=this.moov.iods!=null,s.brands=[],s.brands.push(this.ftyp.major_brand),s.brands=s.brands.concat(this.ftyp.compatible_brands),s.created=new Date(A+this.moov.mvhd.creation_time*1e3),s.modified=new Date(A+this.moov.mvhd.modification_time*1e3),s.tracks=[],s.audioTracks=[],s.videoTracks=[],s.subtitleTracks=[],s.metadataTracks=[],s.hintTracks=[],s.otherTracks=[],t=0;t<this.moov.traks.length;t++){if(c=this.moov.traks[t],g=c.mdia.minf.stbl.stsd.entries[0],h={},s.tracks.push(h),h.id=c.tkhd.track_id,h.name=c.mdia.hdlr.name,h.references=[],c.tref)for(r=0;r<c.tref.boxes.length;r++)_={},h.references.push(_),_.type=c.tref.boxes[r].type,_.track_ids=c.tref.boxes[r].track_ids;c.edts&&(h.edits=c.edts.elst.entries),h.created=new Date(A+c.tkhd.creation_time*1e3),h.modified=new Date(A+c.tkhd.modification_time*1e3),h.movie_duration=c.tkhd.duration,h.movie_timescale=s.timescale,h.layer=c.tkhd.layer,h.alternate_group=c.tkhd.alternate_group,h.volume=c.tkhd.volume,h.matrix=c.tkhd.matrix,h.track_width=c.tkhd.width/65536,h.track_height=c.tkhd.height/65536,h.timescale=c.mdia.mdhd.timescale,h.cts_shift=c.mdia.minf.stbl.cslg,h.duration=c.mdia.mdhd.duration,h.samples_duration=c.samples_duration,h.codec=g.getCodec(),h.kind=c.udta&&c.udta.kinds.length?c.udta.kinds[0]:{schemeURI:"",value:""},h.language=c.mdia.elng?c.mdia.elng.extended_language:c.mdia.mdhd.languageString,h.nb_samples=c.samples.length,h.size=c.samples_size,h.bitrate=h.size*8*h.timescale/h.samples_duration,g.isAudio()?(h.type="audio",s.audioTracks.push(h),h.audio={},h.audio.sample_rate=g.getSampleRate(),h.audio.channel_count=g.getChannelCount(),h.audio.sample_size=g.getSampleSize()):g.isVideo()?(h.type="video",s.videoTracks.push(h),h.video={},h.video.width=g.getWidth(),h.video.height=g.getHeight()):g.isSubtitle()?(h.type="subtitles",s.subtitleTracks.push(h)):g.isHint()?(h.type="metadata",s.hintTracks.push(h)):g.isMetadata()?(h.type="metadata",s.metadataTracks.push(h)):(h.type="metadata",s.otherTracks.push(h))}else s.hasMoov=!1;if(s.mime="",s.hasMoov&&s.tracks){for(s.videoTracks&&s.videoTracks.length>0?s.mime+='video/mp4; codecs="':s.audioTracks&&s.audioTracks.length>0?s.mime+='audio/mp4; codecs="':s.mime+='application/mp4; codecs="',t=0;t<s.tracks.length;t++)t!==0&&(s.mime+=","),s.mime+=s.tracks[t].codec;s.mime+='"; profiles="',s.mime+=this.ftyp.compatible_brands.join(),s.mime+='"'}return s},b.prototype.setNextSeekPositionFromSample=function(t){t&&(this.nextSeekPosition?this.nextSeekPosition=Math.min(t.offset+t.alreadyRead,this.nextSeekPosition):this.nextSeekPosition=t.offset+t.alreadyRead)},b.prototype.processSamples=function(t){var r,s;if(this.sampleProcessingStarted){if(this.isFragmentationInitialized&&this.onSegment!==null)for(r=0;r<this.fragmentedTracks.length;r++){var c=this.fragmentedTracks[r];for(s=c.trak;s.nextSample<s.samples.length&&this.sampleProcessingStarted;){n.debug("ISOFile","Creating media fragment on track #"+c.id+" for sample "+s.nextSample);var h=this.createFragment(c.id,s.nextSample,c.segmentStream);if(h)c.segmentStream=h,s.nextSample++;else break;if((s.nextSample%c.nb_samples===0||t||s.nextSample>=s.samples.length)&&(n.info("ISOFile","Sending fragmented data on track #"+c.id+" for samples ["+Math.max(0,s.nextSample-c.nb_samples)+","+(s.nextSample-1)+"]"),n.info("ISOFile","Sample data size in memory: "+this.getAllocatedSampleDataSize()),this.onSegment&&this.onSegment(c.id,c.user,c.segmentStream.buffer,s.nextSample,t||s.nextSample>=s.samples.length),c.segmentStream=null,c!==this.fragmentedTracks[r]))break}}if(this.onSamples!==null)for(r=0;r<this.extractedTracks.length;r++){var _=this.extractedTracks[r];for(s=_.trak;s.nextSample<s.samples.length&&this.sampleProcessingStarted;){n.debug("ISOFile","Exporting on track #"+_.id+" sample #"+s.nextSample);var g=this.getSample(s,s.nextSample);if(g)s.nextSample++,_.samples.push(g);else{this.setNextSeekPositionFromSample(s.samples[s.nextSample]);break}if((s.nextSample%_.nb_samples===0||s.nextSample>=s.samples.length)&&(n.debug("ISOFile","Sending samples on track #"+_.id+" for sample "+s.nextSample),this.onSamples&&this.onSamples(_.id,_.user,_.samples),_.samples=[],_!==this.extractedTracks[r]))break}}}},b.prototype.getBox=function(t){var r=this.getBoxes(t,!0);return r.length?r[0]:null},b.prototype.getBoxes=function(t,r){var s=[];return b._sweep.call(this,t,s,r),s},b._sweep=function(t,r,s){this.type&&this.type==t&&r.push(this);for(var c in this.boxes){if(r.length&&s)return;b._sweep.call(this.boxes[c],t,r,s)}},b.prototype.getTrackSamplesInfo=function(t){var r=this.getTrackById(t);if(r)return r.samples},b.prototype.getTrackSample=function(t,r){var s=this.getTrackById(t),c=this.getSample(s,r);return c},b.prototype.releaseUsedSamples=function(t,r){var s=0,c=this.getTrackById(t);c.lastValidSample||(c.lastValidSample=0);for(var h=c.lastValidSample;h<r;h++)s+=this.releaseSample(c,h);n.info("ISOFile","Track #"+t+" released samples up to "+r+" (released size: "+s+", remaining: "+this.samplesDataSize+")"),c.lastValidSample=r},b.prototype.start=function(){this.sampleProcessingStarted=!0,this.processSamples(!1)},b.prototype.stop=function(){this.sampleProcessingStarted=!1},b.prototype.flush=function(){n.info("ISOFile","Flushing remaining samples"),this.updateSampleLists(),this.processSamples(!0),this.stream.cleanBuffers(),this.stream.logBufferLevel(!0)},b.prototype.seekTrack=function(t,r,s){var c,h,_=1/0,g=0,A=0,B;if(s.samples.length===0)return n.info("ISOFile","No sample in track, cannot seek! Using time "+n.getDurationString(0,1)+" and offset: 0"),{offset:0,time:0};for(c=0;c<s.samples.length;c++){if(h=s.samples[c],c===0)A=0,B=h.timescale;else if(h.cts>t*h.timescale){A=c-1;break}r&&h.is_sync&&(g=c)}for(r&&(A=g),t=s.samples[A].cts,s.nextSample=A;s.samples[A].alreadyRead===s.samples[A].size&&s.samples[A+1];)A++;return _=s.samples[A].offset+s.samples[A].alreadyRead,n.info("ISOFile","Seeking to "+(r?"RAP":"")+" sample #"+s.nextSample+" on track "+s.tkhd.track_id+", time "+n.getDurationString(t,B)+" and offset: "+_),{offset:_,time:t/B}},b.prototype.getTrackDuration=function(t){var r;return t.samples?(r=t.samples[t.samples.length-1],(r.cts+r.duration)/r.timescale):1/0},b.prototype.seek=function(t,r){var s=this.moov,c,h,_,g={offset:1/0,time:1/0};if(this.moov){for(_=0;_<s.traks.length;_++)c=s.traks[_],!(t>this.getTrackDuration(c))&&(h=this.seekTrack(t,r,c),h.offset<g.offset&&(g.offset=h.offset),h.time<g.time&&(g.time=h.time));return n.info("ISOFile","Seeking at time "+n.getDurationString(g.time,1)+" needs a buffer with a fileStart position of "+g.offset),g.offset===1/0?g={offset:this.nextParsePosition,time:0}:g.offset=this.stream.getEndFilePositionAfter(g.offset),n.info("ISOFile","Adjusted seek position (after checking data already in buffer): "+g.offset),g}else throw"Cannot seek: moov not received!"},b.prototype.equal=function(t){for(var r=0;r<this.boxes.length&&r<t.boxes.length;){var s=this.boxes[r],c=t.boxes[r];if(!o.boxEqual(s,c))return!1;r++}return!0},e.ISOFile=b,b.prototype.lastBoxStartPosition=0,b.prototype.parsingMdat=null,b.prototype.nextParsePosition=0,b.prototype.discardMdatData=!1,b.prototype.processIncompleteBox=function(t){var r,s,c;return t.type==="mdat"?(r=new o[t.type+"Box"](t.size),this.parsingMdat=r,this.boxes.push(r),this.mdats.push(r),r.start=t.start,r.hdr_size=t.hdr_size,this.stream.addUsedBytes(r.hdr_size),this.lastBoxStartPosition=r.start+r.size,c=this.stream.seek(r.start+r.size,!1,this.discardMdatData),c?(this.parsingMdat=null,!0):(this.moovStartFound?this.nextParsePosition=this.stream.findEndContiguousBuf():this.nextParsePosition=r.start+r.size,!1)):(t.type==="moov"&&(this.moovStartFound=!0,this.mdats.length===0&&(this.isProgressive=!0)),s=this.stream.mergeNextBuffer?this.stream.mergeNextBuffer():!1,s?(this.nextParsePosition=this.stream.getEndPosition(),!0):(t.type?this.moovStartFound?this.nextParsePosition=this.stream.getEndPosition():this.nextParsePosition=this.stream.getPosition()+t.size:this.nextParsePosition=this.stream.getEndPosition(),!1))},b.prototype.hasIncompleteMdat=function(){return this.parsingMdat!==null},b.prototype.processIncompleteMdat=function(){var t,r;return t=this.parsingMdat,r=this.stream.seek(t.start+t.size,!1,this.discardMdatData),r?(n.debug("ISOFile","Found 'mdat' end in buffered data"),this.parsingMdat=null,!0):(this.nextParsePosition=this.stream.findEndContiguousBuf(),!1)},b.prototype.restoreParsePosition=function(){return this.stream.seek(this.lastBoxStartPosition,!0,this.discardMdatData)},b.prototype.saveParsePosition=function(){this.lastBoxStartPosition=this.stream.getPosition()},b.prototype.updateUsedBytes=function(t,r){this.stream.addUsedBytes&&(t.type==="mdat"?(this.stream.addUsedBytes(t.hdr_size),this.discardMdatData&&this.stream.addUsedBytes(t.size-t.hdr_size)):this.stream.addUsedBytes(t.size))},b.prototype.add=o.Box.prototype.add,b.prototype.addBox=o.Box.prototype.addBox,b.prototype.init=function(t){var r=t||{};this.add("ftyp").set("major_brand",r.brands&&r.brands[0]||"iso4").set("minor_version",0).set("compatible_brands",r.brands||["iso4"]);var s=this.add("moov");return s.add("mvhd").set("timescale",r.timescale||600).set("rate",r.rate||65536).set("creation_time",0).set("modification_time",0).set("duration",r.duration||0).set("volume",r.width?0:256).set("matrix",[65536,0,0,0,65536,0,0,0,1073741824]).set("next_track_id",1),s.add("mvex"),this},b.prototype.addTrack=function(t){this.moov||this.init(t);var r=t||{};r.width=r.width||320,r.height=r.height||320,r.id=r.id||this.moov.mvhd.next_track_id,r.type=r.type||"avc1";var s=this.moov.add("trak");this.moov.mvhd.next_track_id=r.id+1,s.add("tkhd").set("flags",o.TKHD_FLAG_ENABLED|o.TKHD_FLAG_IN_MOVIE|o.TKHD_FLAG_IN_PREVIEW).set("creation_time",0).set("modification_time",0).set("track_id",r.id).set("duration",r.duration||0).set("layer",r.layer||0).set("alternate_group",0).set("volume",1).set("matrix",[65536,0,0,0,65536,0,0,0,1073741824]).set("width",r.width<<16).set("height",r.height<<16);var c=s.add("mdia");c.add("mdhd").set("creation_time",0).set("modification_time",0).set("timescale",r.timescale||1).set("duration",r.media_duration||0).set("language",r.language||"und"),c.add("hdlr").set("handler",r.hdlr||"vide").set("name",r.name||"Track created with MP4Box.js"),c.add("elng").set("extended_language",r.language||"fr-FR");var h=c.add("minf");if(o[r.type+"SampleEntry"]!==void 0){var _=new o[r.type+"SampleEntry"];_.data_reference_index=1;var g="";for(var A in o.sampleEntryCodes)for(var B=o.sampleEntryCodes[A],T=0;T<B.length;T++)if(B.indexOf(r.type)>-1){g=A;break}switch(g){case"Visual":if(h.add("vmhd").set("graphicsmode",0).set("opcolor",[0,0,0]),_.set("width",r.width).set("height",r.height).set("horizresolution",72<<16).set("vertresolution",72<<16).set("frame_count",1).set("compressorname",r.type+" Compressor").set("depth",24),r.avcDecoderConfigRecord){var E=new o.avcCBox;E.parse(new a(r.avcDecoderConfigRecord)),_.addBox(E)}else if(r.hevcDecoderConfigRecord){var I=new o.hvcCBox;I.parse(new a(r.hevcDecoderConfigRecord)),_.addBox(I)}break;case"Audio":h.add("smhd").set("balance",r.balance||0),_.set("channel_count",r.channel_count||2).set("samplesize",r.samplesize||16).set("samplerate",r.samplerate||65536);break;case"Hint":h.add("hmhd");break;case"Subtitle":switch(h.add("sthd"),r.type){case"stpp":_.set("namespace",r.namespace||"nonamespace").set("schema_location",r.schema_location||"").set("auxiliary_mime_types",r.auxiliary_mime_types||"");break}break;case"Metadata":h.add("nmhd");break;case"System":h.add("nmhd");break;default:h.add("nmhd");break}r.description&&_.addBox(r.description),r.description_boxes&&r.description_boxes.forEach(function(R){_.addBox(R)}),h.add("dinf").add("dref").addEntry(new o["url Box"]().set("flags",1));var L=h.add("stbl");return L.add("stsd").addEntry(_),L.add("stts").set("sample_counts",[]).set("sample_deltas",[]),L.add("stsc").set("first_chunk",[]).set("samples_per_chunk",[]).set("sample_description_index",[]),L.add("stco").set("chunk_offsets",[]),L.add("stsz").set("sample_sizes",[]),this.moov.mvex.add("trex").set("track_id",r.id).set("default_sample_description_index",r.default_sample_description_index||1).set("default_sample_duration",r.default_sample_duration||0).set("default_sample_size",r.default_sample_size||0).set("default_sample_flags",r.default_sample_flags||0),this.buildTrakSampleLists(s),r.id}},o.Box.prototype.computeSize=function(t){var r=t||new l;r.endianness=l.BIG_ENDIAN,this.write(r)},b.prototype.addSample=function(t,r,s){var c=s||{},h={},_=this.getTrackById(t);if(_!==null){h.number=_.samples.length,h.track_id=_.tkhd.track_id,h.timescale=_.mdia.mdhd.timescale,h.description_index=c.sample_description_index?c.sample_description_index-1:0,h.description=_.mdia.minf.stbl.stsd.entries[h.description_index],h.data=r,h.size=r.byteLength,h.alreadyRead=h.size,h.duration=c.duration||1,h.cts=c.cts||0,h.dts=c.dts||0,h.is_sync=c.is_sync||!1,h.is_leading=c.is_leading||0,h.depends_on=c.depends_on||0,h.is_depended_on=c.is_depended_on||0,h.has_redundancy=c.has_redundancy||0,h.degradation_priority=c.degradation_priority||0,h.offset=0,h.subsamples=c.subsamples,_.samples.push(h),_.samples_size+=h.size,_.samples_duration+=h.duration,_.first_dts===void 0&&(_.first_dts=c.dts),this.processSamples();var g=this.createSingleSampleMoof(h);return this.addBox(g),g.computeSize(),g.trafs[0].truns[0].data_offset=g.size+8,this.add("mdat").data=new Uint8Array(r),h}},b.prototype.createSingleSampleMoof=function(t){var r=0;t.is_sync?r=1<<25:r=65536;var s=new o.moofBox;s.add("mfhd").set("sequence_number",this.nextMoofNumber),this.nextMoofNumber++;var c=s.add("traf"),h=this.getTrackById(t.track_id);return c.add("tfhd").set("track_id",t.track_id).set("flags",o.TFHD_FLAG_DEFAULT_BASE_IS_MOOF),c.add("tfdt").set("baseMediaDecodeTime",t.dts-(h.first_dts||0)),c.add("trun").set("flags",o.TRUN_FLAGS_DATA_OFFSET|o.TRUN_FLAGS_DURATION|o.TRUN_FLAGS_SIZE|o.TRUN_FLAGS_FLAGS|o.TRUN_FLAGS_CTS_OFFSET).set("data_offset",0).set("first_sample_flags",0).set("sample_count",1).set("sample_duration",[t.duration]).set("sample_size",[t.size]).set("sample_flags",[r]).set("sample_composition_time_offset",[t.cts-t.dts]),s},b.prototype.lastMoofIndex=0,b.prototype.samplesDataSize=0,b.prototype.resetTables=function(){var t,r,s,c,h,_,g,A;for(this.initial_duration=this.moov.mvhd.duration,this.moov.mvhd.duration=0,t=0;t<this.moov.traks.length;t++){r=this.moov.traks[t],r.tkhd.duration=0,r.mdia.mdhd.duration=0,s=r.mdia.minf.stbl.stco||r.mdia.minf.stbl.co64,s.chunk_offsets=[],c=r.mdia.minf.stbl.stsc,c.first_chunk=[],c.samples_per_chunk=[],c.sample_description_index=[],h=r.mdia.minf.stbl.stsz||r.mdia.minf.stbl.stz2,h.sample_sizes=[],_=r.mdia.minf.stbl.stts,_.sample_counts=[],_.sample_deltas=[],g=r.mdia.minf.stbl.ctts,g&&(g.sample_counts=[],g.sample_offsets=[]),A=r.mdia.minf.stbl.stss;var B=r.mdia.minf.stbl.boxes.indexOf(A);B!=-1&&(r.mdia.minf.stbl.boxes[B]=null)}},b.initSampleGroups=function(t,r,s,c,h){var _,g,A,B;function T(E,I,L){this.grouping_type=E,this.grouping_type_parameter=I,this.sbgp=L,this.last_sample_in_run=-1,this.entry_index=-1}for(r&&(r.sample_groups_info=[]),t.sample_groups_info||(t.sample_groups_info=[]),g=0;g<s.length;g++){for(B=s[g].grouping_type+"/"+s[g].grouping_type_parameter,A=new T(s[g].grouping_type,s[g].grouping_type_parameter,s[g]),r&&(r.sample_groups_info[B]=A),t.sample_groups_info[B]||(t.sample_groups_info[B]=A),_=0;_<c.length;_++)c[_].grouping_type===s[g].grouping_type&&(A.description=c[_],A.description.used=!0);if(h)for(_=0;_<h.length;_++)h[_].grouping_type===s[g].grouping_type&&(A.fragment_description=h[_],A.fragment_description.used=!0,A.is_fragment=!0)}if(r){if(h)for(g=0;g<h.length;g++)!h[g].used&&h[g].version>=2&&(B=h[g].grouping_type+"/0",A=new T(h[g].grouping_type,0),A.is_fragment=!0,r.sample_groups_info[B]||(r.sample_groups_info[B]=A))}else for(g=0;g<c.length;g++)!c[g].used&&c[g].version>=2&&(B=c[g].grouping_type+"/0",A=new T(c[g].grouping_type,0),t.sample_groups_info[B]||(t.sample_groups_info[B]=A))},b.setSampleGroupProperties=function(t,r,s,c){var h,_;r.sample_groups=[];for(h in c)if(r.sample_groups[h]={},r.sample_groups[h].grouping_type=c[h].grouping_type,r.sample_groups[h].grouping_type_parameter=c[h].grouping_type_parameter,s>=c[h].last_sample_in_run&&(c[h].last_sample_in_run<0&&(c[h].last_sample_in_run=0),c[h].entry_index++,c[h].entry_index<=c[h].sbgp.entries.length-1&&(c[h].last_sample_in_run+=c[h].sbgp.entries[c[h].entry_index].sample_count)),c[h].entry_index<=c[h].sbgp.entries.length-1?r.sample_groups[h].group_description_index=c[h].sbgp.entries[c[h].entry_index].group_description_index:r.sample_groups[h].group_description_index=-1,r.sample_groups[h].group_description_index!==0){var g;c[h].fragment_description?g=c[h].fragment_description:g=c[h].description,r.sample_groups[h].group_description_index>0?(r.sample_groups[h].group_description_index>65535?_=(r.sample_groups[h].group_description_index>>16)-1:_=r.sample_groups[h].group_description_index-1,g&&_>=0&&(r.sample_groups[h].description=g.entries[_])):g&&g.version>=2&&g.default_group_description_index>0&&(r.sample_groups[h].description=g.entries[g.default_group_description_index-1])}},b.process_sdtp=function(t,r,s){r&&(t?(r.is_leading=t.is_leading[s],r.depends_on=t.sample_depends_on[s],r.is_depended_on=t.sample_is_depended_on[s],r.has_redundancy=t.sample_has_redundancy[s]):(r.is_leading=0,r.depends_on=0,r.is_depended_on=0,r.has_redundancy=0))},b.prototype.buildSampleLists=function(){var t,r;for(t=0;t<this.moov.traks.length;t++)r=this.moov.traks[t],this.buildTrakSampleLists(r)},b.prototype.buildTrakSampleLists=function(t){var r,s,c,h,_,g,A,B,T,E,I,L,R,W,$,it,O,H,rt,ct,yt,gt,wt,xt;if(t.samples=[],t.samples_duration=0,t.samples_size=0,s=t.mdia.minf.stbl.stco||t.mdia.minf.stbl.co64,c=t.mdia.minf.stbl.stsc,h=t.mdia.minf.stbl.stsz||t.mdia.minf.stbl.stz2,_=t.mdia.minf.stbl.stts,g=t.mdia.minf.stbl.ctts,A=t.mdia.minf.stbl.stss,B=t.mdia.minf.stbl.stsd,T=t.mdia.minf.stbl.subs,L=t.mdia.minf.stbl.stdp,E=t.mdia.minf.stbl.sbgps,I=t.mdia.minf.stbl.sgpds,H=-1,rt=-1,ct=-1,yt=-1,gt=0,wt=0,xt=0,b.initSampleGroups(t,null,E,I),!(typeof h>"u")){for(r=0;r<h.sample_sizes.length;r++){var Q={};Q.number=r,Q.track_id=t.tkhd.track_id,Q.timescale=t.mdia.mdhd.timescale,Q.alreadyRead=0,t.samples[r]=Q,Q.size=h.sample_sizes[r],t.samples_size+=Q.size,r===0?(W=1,R=0,Q.chunk_index=W,Q.chunk_run_index=R,O=c.samples_per_chunk[R],it=0,R+1<c.first_chunk.length?$=c.first_chunk[R+1]-1:$=1/0):r<O?(Q.chunk_index=W,Q.chunk_run_index=R):(W++,Q.chunk_index=W,it=0,W<=$||(R++,R+1<c.first_chunk.length?$=c.first_chunk[R+1]-1:$=1/0),Q.chunk_run_index=R,O+=c.samples_per_chunk[R]),Q.description_index=c.sample_description_index[Q.chunk_run_index]-1,Q.description=B.entries[Q.description_index],Q.offset=s.chunk_offsets[Q.chunk_index-1]+it,it+=Q.size,r>H&&(rt++,H<0&&(H=0),H+=_.sample_counts[rt]),r>0?(t.samples[r-1].duration=_.sample_deltas[rt],t.samples_duration+=t.samples[r-1].duration,Q.dts=t.samples[r-1].dts+t.samples[r-1].duration):Q.dts=0,g?(r>=ct&&(yt++,ct<0&&(ct=0),ct+=g.sample_counts[yt]),Q.cts=t.samples[r].dts+g.sample_offsets[yt]):Q.cts=Q.dts,A?(r==A.sample_numbers[gt]-1?(Q.is_sync=!0,gt++):(Q.is_sync=!1,Q.degradation_priority=0),T&&T.entries[wt].sample_delta+xt==r+1&&(Q.subsamples=T.entries[wt].subsamples,xt+=T.entries[wt].sample_delta,wt++)):Q.is_sync=!0,b.process_sdtp(t.mdia.minf.stbl.sdtp,Q,Q.number),L?Q.degradation_priority=L.priority[r]:Q.degradation_priority=0,T&&T.entries[wt].sample_delta+xt==r&&(Q.subsamples=T.entries[wt].subsamples,xt+=T.entries[wt].sample_delta),(E.length>0||I.length>0)&&b.setSampleGroupProperties(t,Q,r,t.sample_groups_info)}r>0&&(t.samples[r-1].duration=Math.max(t.mdia.mdhd.duration-t.samples[r-1].dts,0),t.samples_duration+=t.samples[r-1].duration)}},b.prototype.updateSampleLists=function(){var t,r,s,c,h,_,g,A,B,T,E,I,L,R,W;if(this.moov!==void 0){for(;this.lastMoofIndex<this.moofs.length;)if(B=this.moofs[this.lastMoofIndex],this.lastMoofIndex++,B.type=="moof")for(T=B,t=0;t<T.trafs.length;t++){for(E=T.trafs[t],I=this.getTrackById(E.tfhd.track_id),L=this.getTrexById(E.tfhd.track_id),E.tfhd.flags&o.TFHD_FLAG_SAMPLE_DESC?c=E.tfhd.default_sample_description_index:c=L?L.default_sample_description_index:1,E.tfhd.flags&o.TFHD_FLAG_SAMPLE_DUR?h=E.tfhd.default_sample_duration:h=L?L.default_sample_duration:0,E.tfhd.flags&o.TFHD_FLAG_SAMPLE_SIZE?_=E.tfhd.default_sample_size:_=L?L.default_sample_size:0,E.tfhd.flags&o.TFHD_FLAG_SAMPLE_FLAGS?g=E.tfhd.default_sample_flags:g=L?L.default_sample_flags:0,E.sample_number=0,E.sbgps.length>0&&b.initSampleGroups(I,E,E.sbgps,I.mdia.minf.stbl.sgpds,E.sgpds),r=0;r<E.truns.length;r++){var $=E.truns[r];for(s=0;s<$.sample_count;s++){R={},R.moof_number=this.lastMoofIndex,R.number_in_traf=E.sample_number,E.sample_number++,R.number=I.samples.length,E.first_sample_index=I.samples.length,I.samples.push(R),R.track_id=I.tkhd.track_id,R.timescale=I.mdia.mdhd.timescale,R.description_index=c-1,R.description=I.mdia.minf.stbl.stsd.entries[R.description_index],R.size=_,$.flags&o.TRUN_FLAGS_SIZE&&(R.size=$.sample_size[s]),I.samples_size+=R.size,R.duration=h,$.flags&o.TRUN_FLAGS_DURATION&&(R.duration=$.sample_duration[s]),I.samples_duration+=R.duration,I.first_traf_merged||s>0?R.dts=I.samples[I.samples.length-2].dts+I.samples[I.samples.length-2].duration:(E.tfdt?R.dts=E.tfdt.baseMediaDecodeTime:R.dts=0,I.first_traf_merged=!0),R.cts=R.dts,$.flags&o.TRUN_FLAGS_CTS_OFFSET&&(R.cts=R.dts+$.sample_composition_time_offset[s]),W=g,$.flags&o.TRUN_FLAGS_FLAGS?W=$.sample_flags[s]:s===0&&$.flags&o.TRUN_FLAGS_FIRST_FLAG&&(W=$.first_sample_flags),R.is_sync=!(W>>16&1),R.is_leading=W>>26&3,R.depends_on=W>>24&3,R.is_depended_on=W>>22&3,R.has_redundancy=W>>20&3,R.degradation_priority=W&65535;var it=!!(E.tfhd.flags&o.TFHD_FLAG_BASE_DATA_OFFSET),O=!!(E.tfhd.flags&o.TFHD_FLAG_DEFAULT_BASE_IS_MOOF),H=!!($.flags&o.TRUN_FLAGS_DATA_OFFSET),rt=0;it?rt=E.tfhd.base_data_offset:O||r===0?rt=T.start:rt=A,r===0&&s===0?H?R.offset=rt+$.data_offset:R.offset=rt:R.offset=A,A=R.offset+R.size,(E.sbgps.length>0||E.sgpds.length>0||I.mdia.minf.stbl.sbgps.length>0||I.mdia.minf.stbl.sgpds.length>0)&&b.setSampleGroupProperties(I,R,R.number_in_traf,E.sample_groups_info)}}if(E.subs){I.has_fragment_subsamples=!0;var ct=E.first_sample_index;for(r=0;r<E.subs.entries.length;r++)ct+=E.subs.entries[r].sample_delta,R=I.samples[ct-1],R.subsamples=E.subs.entries[r].subsamples}}}},b.prototype.getSample=function(t,r){var s,c=t.samples[r];if(!this.moov)return null;if(!c.data)c.data=new Uint8Array(c.size),c.alreadyRead=0,this.samplesDataSize+=c.size,n.debug("ISOFile","Allocating sample #"+r+" on track #"+t.tkhd.track_id+" of size "+c.size+" (total: "+this.samplesDataSize+")");else if(c.alreadyRead==c.size)return c;for(;;){var h=this.stream.findPosition(!0,c.offset+c.alreadyRead,!1);if(h>-1){s=this.stream.buffers[h];var _=s.byteLength-(c.offset+c.alreadyRead-s.fileStart);if(c.size-c.alreadyRead<=_)return n.debug("ISOFile","Getting sample #"+r+" data (alreadyRead: "+c.alreadyRead+" offset: "+(c.offset+c.alreadyRead-s.fileStart)+" read size: "+(c.size-c.alreadyRead)+" full size: "+c.size+")"),l.memcpy(c.data.buffer,c.alreadyRead,s,c.offset+c.alreadyRead-s.fileStart,c.size-c.alreadyRead),s.usedBytes+=c.size-c.alreadyRead,this.stream.logBufferLevel(),c.alreadyRead=c.size,c;if(_===0)return null;n.debug("ISOFile","Getting sample #"+r+" partial data (alreadyRead: "+c.alreadyRead+" offset: "+(c.offset+c.alreadyRead-s.fileStart)+" read size: "+_+" full size: "+c.size+")"),l.memcpy(c.data.buffer,c.alreadyRead,s,c.offset+c.alreadyRead-s.fileStart,_),c.alreadyRead+=_,s.usedBytes+=_,this.stream.logBufferLevel()}else return null}},b.prototype.releaseSample=function(t,r){var s=t.samples[r];return s.data?(this.samplesDataSize-=s.size,s.data=null,s.alreadyRead=0,s.size):0},b.prototype.getAllocatedSampleDataSize=function(){return this.samplesDataSize},b.prototype.getCodecs=function(){var t,r="";for(t=0;t<this.moov.traks.length;t++){var s=this.moov.traks[t];t>0&&(r+=","),r+=s.mdia.minf.stbl.stsd.entries[0].getCodec()}return r},b.prototype.getTrexById=function(t){var r;if(!this.moov||!this.moov.mvex)return null;for(r=0;r<this.moov.mvex.trexs.length;r++){var s=this.moov.mvex.trexs[r];if(s.track_id==t)return s}return null},b.prototype.getTrackById=function(t){if(this.moov===void 0)return null;for(var r=0;r<this.moov.traks.length;r++){var s=this.moov.traks[r];if(s.tkhd.track_id==t)return s}return null},b.prototype.itemsDataSize=0,b.prototype.flattenItemInfo=function(){var t=this.items,r=this.entity_groups,s,c,h,_=this.meta;if(_!=null&&_.hdlr!==void 0&&_.iinf!==void 0){for(s=0;s<_.iinf.item_infos.length;s++)h={},h.id=_.iinf.item_infos[s].item_ID,t[h.id]=h,h.ref_to=[],h.name=_.iinf.item_infos[s].item_name,_.iinf.item_infos[s].protection_index>0&&(h.protection=_.ipro.protections[_.iinf.item_infos[s].protection_index-1]),_.iinf.item_infos[s].item_type?h.type=_.iinf.item_infos[s].item_type:h.type="mime",h.content_type=_.iinf.item_infos[s].content_type,h.content_encoding=_.iinf.item_infos[s].content_encoding,h.item_uri_type=_.iinf.item_infos[s].item_uri_type;if(_.grpl)for(s=0;s<_.grpl.boxes.length;s++)entity_group={},entity_group.id=_.grpl.boxes[s].group_id,entity_group.entity_ids=_.grpl.boxes[s].entity_ids,entity_group.type=_.grpl.boxes[s].type,r[entity_group.id]=entity_group;if(_.iloc)for(s=0;s<_.iloc.items.length;s++){var g=_.iloc.items[s];switch(h=t[g.item_ID],g.data_reference_index!==0&&(n.warn("Item storage with reference to other files: not supported"),h.source=_.dinf.boxes[g.data_reference_index-1]),g.construction_method){case 0:break;case 1:break;case 2:n.warn("Item storage with construction_method : not supported");break}for(h.extents=[],h.size=0,c=0;c<g.extents.length;c++)h.extents[c]={},h.extents[c].offset=g.extents[c].extent_offset+g.base_offset,g.construction_method==1&&(h.extents[c].offset+=_.idat.start+_.idat.hdr_size),h.extents[c].length=g.extents[c].extent_length,h.extents[c].alreadyRead=0,h.size+=h.extents[c].length}if(_.pitm&&(t[_.pitm.item_id].primary=!0),_.iref)for(s=0;s<_.iref.references.length;s++){var A=_.iref.references[s];for(c=0;c<A.references.length;c++)t[A.from_item_ID].ref_to.push({type:A.type,id:A.references[c]})}if(_.iprp)for(var B=0;B<_.iprp.ipmas.length;B++){var T=_.iprp.ipmas[B];for(s=0;s<T.associations.length;s++){var E=T.associations[s];if(h=t[E.id],h||(h=r[E.id]),h)for(h.properties===void 0&&(h.properties={},h.properties.boxes=[]),c=0;c<E.props.length;c++){var I=E.props[c];if(I.property_index>0&&I.property_index-1<_.iprp.ipco.boxes.length){var L=_.iprp.ipco.boxes[I.property_index-1];h.properties[L.type]=L,h.properties.boxes.push(L)}}}}}},b.prototype.getItem=function(t){var r,s;if(!this.meta)return null;if(s=this.items[t],!s.data&&s.size)s.data=new Uint8Array(s.size),s.alreadyRead=0,this.itemsDataSize+=s.size,n.debug("ISOFile","Allocating item #"+t+" of size "+s.size+" (total: "+this.itemsDataSize+")");else if(s.alreadyRead===s.size)return s;for(var c=0;c<s.extents.length;c++){var h=s.extents[c];if(h.alreadyRead!==h.length){var _=this.stream.findPosition(!0,h.offset+h.alreadyRead,!1);if(_>-1){r=this.stream.buffers[_];var g=r.byteLength-(h.offset+h.alreadyRead-r.fileStart);if(h.length-h.alreadyRead<=g)n.debug("ISOFile","Getting item #"+t+" extent #"+c+" data (alreadyRead: "+h.alreadyRead+" offset: "+(h.offset+h.alreadyRead-r.fileStart)+" read size: "+(h.length-h.alreadyRead)+" full extent size: "+h.length+" full item size: "+s.size+")"),l.memcpy(s.data.buffer,s.alreadyRead,r,h.offset+h.alreadyRead-r.fileStart,h.length-h.alreadyRead),r.usedBytes+=h.length-h.alreadyRead,this.stream.logBufferLevel(),s.alreadyRead+=h.length-h.alreadyRead,h.alreadyRead=h.length;else return n.debug("ISOFile","Getting item #"+t+" extent #"+c+" partial data (alreadyRead: "+h.alreadyRead+" offset: "+(h.offset+h.alreadyRead-r.fileStart)+" read size: "+g+" full extent size: "+h.length+" full item size: "+s.size+")"),l.memcpy(s.data.buffer,s.alreadyRead,r,h.offset+h.alreadyRead-r.fileStart,g),h.alreadyRead+=g,s.alreadyRead+=g,r.usedBytes+=g,this.stream.logBufferLevel(),null}else return null}}return s.alreadyRead===s.size?s:null},b.prototype.releaseItem=function(t){var r=this.items[t];if(r.data){this.itemsDataSize-=r.size,r.data=null,r.alreadyRead=0;for(var s=0;s<r.extents.length;s++){var c=r.extents[s];c.alreadyRead=0}return r.size}else return 0},b.prototype.processItems=function(t){for(var r in this.items){var s=this.items[r];this.getItem(s.id),t&&!s.sent&&(t(s),s.sent=!0,s.data=null)}},b.prototype.hasItem=function(t){for(var r in this.items){var s=this.items[r];if(s.name===t)return s.id}return-1},b.prototype.getMetaHandler=function(){return this.meta?this.meta.hdlr.handler:null},b.prototype.getPrimaryItem=function(){return!this.meta||!this.meta.pitm?null:this.getItem(this.meta.pitm.item_id)},b.prototype.itemToFragmentedTrackFile=function(t){var r=t||{},s=null;if(r.itemId?s=this.getItem(r.itemId):s=this.getPrimaryItem(),s==null)return null;var c=new b;c.discardMdatData=!1;var h={type:s.type,description_boxes:s.properties.boxes};s.properties.ispe&&(h.width=s.properties.ispe.image_width,h.height=s.properties.ispe.image_height);var _=c.addTrack(h);return _?(c.addSample(_,s.data),c):null},b.prototype.write=function(t){for(var r=0;r<this.boxes.length;r++)this.boxes[r].write(t)},b.prototype.createFragment=function(t,r,s){var c=this.getTrackById(t),h=this.getSample(c,r);if(h==null)return this.setNextSeekPositionFromSample(c.samples[r]),null;var _=s||new l;_.endianness=l.BIG_ENDIAN;var g=this.createSingleSampleMoof(h);g.write(_),g.trafs[0].truns[0].data_offset=g.size+8,n.debug("MP4Box","Adjusting data_offset with new value "+g.trafs[0].truns[0].data_offset),_.adjustUint32(g.trafs[0].truns[0].data_offset_position,g.trafs[0].truns[0].data_offset);var A=new o.mdatBox;return A.data=h.data,A.write(_),_},b.writeInitializationSegment=function(t,r,s,c){var h;n.debug("ISOFile","Generating initialization segment");var _=new l;_.endianness=l.BIG_ENDIAN,t.write(_);var g=r.add("mvex");for(s&&g.add("mehd").set("fragment_duration",s),h=0;h<r.traks.length;h++)g.add("trex").set("track_id",r.traks[h].tkhd.track_id).set("default_sample_description_index",1).set("default_sample_duration",c).set("default_sample_size",0).set("default_sample_flags",65536);return r.write(_),_.buffer},b.prototype.save=function(t){var r=new l;r.endianness=l.BIG_ENDIAN,this.write(r),r.save(t)},b.prototype.getBuffer=function(){var t=new l;return t.endianness=l.BIG_ENDIAN,this.write(t),t.buffer},b.prototype.initializeSegmentation=function(){var t,r,s,c;for(this.onSegment===null&&n.warn("MP4Box","No segmentation callback set!"),this.isFragmentationInitialized||(this.isFragmentationInitialized=!0,this.nextMoofNumber=0,this.resetTables()),r=[],t=0;t<this.fragmentedTracks.length;t++){var h=new o.moovBox;h.mvhd=this.moov.mvhd,h.boxes.push(h.mvhd),s=this.getTrackById(this.fragmentedTracks[t].id),h.boxes.push(s),h.traks.push(s),c={},c.id=s.tkhd.track_id,c.user=this.fragmentedTracks[t].user,c.buffer=b.writeInitializationSegment(this.ftyp,h,this.moov.mvex&&this.moov.mvex.mehd?this.moov.mvex.mehd.fragment_duration:void 0,this.moov.traks[t].samples.length>0?this.moov.traks[t].samples[0].duration:0),r.push(c)}return r},o.Box.prototype.printHeader=function(t){this.size+=8,this.size>f&&(this.size+=8),this.type==="uuid"&&(this.size+=16),t.log(t.indent+"size:"+this.size),t.log(t.indent+"type:"+this.type)},o.FullBox.prototype.printHeader=function(t){this.size+=4,o.Box.prototype.printHeader.call(this,t),t.log(t.indent+"version:"+this.version),t.log(t.indent+"flags:"+this.flags)},o.Box.prototype.print=function(t){this.printHeader(t)},o.ContainerBox.prototype.print=function(t){this.printHeader(t);for(var r=0;r<this.boxes.length;r++)if(this.boxes[r]){var s=t.indent;t.indent+=" ",this.boxes[r].print(t),t.indent=s}},b.prototype.print=function(t){t.indent="";for(var r=0;r<this.boxes.length;r++)this.boxes[r]&&this.boxes[r].print(t)},o.mvhdBox.prototype.print=function(t){o.FullBox.prototype.printHeader.call(this,t),t.log(t.indent+"creation_time: "+this.creation_time),t.log(t.indent+"modification_time: "+this.modification_time),t.log(t.indent+"timescale: "+this.timescale),t.log(t.indent+"duration: "+this.duration),t.log(t.indent+"rate: "+this.rate),t.log(t.indent+"volume: "+(this.volume>>8)),t.log(t.indent+"matrix: "+this.matrix.join(", ")),t.log(t.indent+"next_track_id: "+this.next_track_id)},o.tkhdBox.prototype.print=function(t){o.FullBox.prototype.printHeader.call(this,t),t.log(t.indent+"creation_time: "+this.creation_time),t.log(t.indent+"modification_time: "+this.modification_time),t.log(t.indent+"track_id: "+this.track_id),t.log(t.indent+"duration: "+this.duration),t.log(t.indent+"volume: "+(this.volume>>8)),t.log(t.indent+"matrix: "+this.matrix.join(", ")),t.log(t.indent+"layer: "+this.layer),t.log(t.indent+"alternate_group: "+this.alternate_group),t.log(t.indent+"width: "+this.width),t.log(t.indent+"height: "+this.height)};var z={};z.createFile=function(t,r){var s=t!==void 0?t:!0,c=new b(r);return c.discardMdatData=!s,c},e.createFile=z.createFile}(Sn)),Sn}var ah=oh();const lh=sh(ah);let Fi=!1;class ws extends Error{constructor(n){super(n),this.name="NotSupportError"}}async function fh(e,n,a=1e6,l=null){let f,u;if(Reflect.has(globalThis,"MediaSource")==!1)throw new ws("MediaSource is not supported in this browser or context.");const d=lh.createFile();let o=null;const p=new Map;let m,y=!1,v,S;const U=new Promise((E,I)=>{v=E,S=I});await async function E(){if(!E.request)return E.request=!0,await new Promise((I,L)=>{o=new MediaSource,e.src=URL.createObjectURL(o),o.addEventListener("sourceopen",()=>{I(),setTimeout(()=>{E.request=!1},1e3)},{once:!0}),o.addEventListener("error",L),setTimeout(L,1e4,new Error("Timeout waiting for sourceopen"))})}();let z=1;const t=function(I){var L=I.id,R=I.codec,W='video/mp4; codecs="'+R+'"',$,it=typeof TrackDefault<"u";MediaSource.isTypeSupported(W)?(f=o.addSourceBuffer(W),p.set(L,f),it&&(f.trackDefaults=new TrackDefaultList([$])),f.addEventListener("error",function(O){}),f.ms=o,f.id=L,d.setSegmentOptions(L,f,{nbSamples:10}),f.pendingAppends=[],v()):S(new ws("Video codec is not supported by the browser"))},r=function E(I){const L=I.target;L.ms.readyState==="open"&&(L.sampleNum=0,L.removeEventListener("updateend",E),L.addEventListener("updateend",s.bind(L,!0,!0)),s.call(L,!1,!0),L.ms.pendingInits--)},s=function E(I,L){if(L===!0){if(I===!0&&this.ms.readyState==="open"&&this.buffered.length>0)try{const W=e.currentTime;for(let $=0;$<this.buffered.length;$++){const it=this.buffered.start($),O=this.buffered.end($);if(O<W-5){this.remove(it,O);break}}}catch{}if(this.sampleNum&&(d.releaseUsedSamples(this.id,this.sampleNum),delete this.sampleNum),this.is_last)try{o.readyState==="open"&&(l?.(()=>{o.endOfStream()}),l&&(l=null))}catch{}}if(this.updating===!1&&this.pendingAppends.length>0){if(this.ms.readyState!=="open")return;var R=this.pendingAppends.shift();this.sampleNum=R.sampleNum,this.is_last=R.is_last;try{if(this.appendBuffer(R.buffer),y){let W=0;requestIdleCallback(function $(){e.isConnected!=!1&&(W++>=10||e.play().then(()=>{}).catch(it=>{it&&it.name&&it.name!=="NotAllowedError"&&requestIdleCallback($)}))}),y=!1}}catch(W){W.name==="QuotaExceededError"&&(this.pendingAppends.splice(0,0,R),setTimeout(()=>{E.apply(this,arguments)},1e3))}}};d.onMoovStart=function(){},d.onReady=function(E){if(o.movieInfo=E,E.isFragmented?o.duration=o.original_duration=E.fragment_duration/E.timescale:o.duration=o.original_duration=E.duration/E.timescale,E){for(const I of E.tracks)t(I);m=d.initializeSegmentation();for(let I=0;I<m.length;I++){const L=m[I].user;I===0&&(L.ms.pendingInits=0),L.addEventListener("updateend",r),L.appendBuffer(m[I].buffer),L.segmentIndex=0,L.ms.pendingInits++}}},d.onSegment=function(E,I,L,R,W){const $=I;$.segmentIndex++,$.pendingAppends.push({id:E,buffer:L,sampleNum:R,is_last:W}),s.call($,!0,!1)},d.onError=function(){S(new Error("Error in mp4boxfile",{data:arguments}))},d.start();function c(){const E=new Date().getTime();if(E-c.antiTik<100)return;c.antiTik=E;let I,L,R;for(I=0;I<e.buffered.length;I++)if(L=e.buffered.start(I),R=e.buffered.end(I),e.currentTime>=L&&e.currentTime<=R-Math.ceil(11*e.playbackRate))return;const W=d.seek(e.currentTime,!0);T(W.offset,W.offset+a),e.lastSeekTime=e.currentTime}c.antiTik=0;function h(){e.lastSeekTime!==e.currentTime&&c()}let _=!1;function g(){(isNaN(g.last_time)||e.currentTime<g.last_time||e.currentTime-g.last_time>Math.ceil(10*e.playbackRate))&&(c(),g.last_time=e.currentTime,_=!1)}e.addEventListener("seeked",h),e.addEventListener("timeupdate",g);function A(){if(o.original_duration-e.currentTime<1)if(e.loop||_){const E=d.seek(0,!0);T(E.offset,E.offset+a).then(()=>e.play()),e.currentTime=0,y=!0,_=!1}else e.pause(),_=!0}e.addEventListener("waiting",A);const B=()=>{u=!0,e.removeEventListener("seeked",h),e.removeEventListener("timeupdate",g),e.removeEventListener("waiting",A),p.forEach((E,I)=>{try{E.updating&&E.abort(),o.readyState==="open"&&o.removeSourceBuffer(E),E.removeEventListener("updateend",s),d.releaseUsedSamples(I,E.sampleNum)}catch(L){console.warn("Error cleaning up SourceBuffer:",L)}}),p.clear(),d&&(d.flush(),d.onSegment=null,d.onReady=null,d.onMoovStart=null,d.stop()),URL.revokeObjectURL(e.src),e.src="data:null/null,null";try{T.ab?.abort?.()}catch{}};async function T(E,I,L=null,R=0){if(L==null)L=++z,T.ab?.abort?.(),T.ab=null;else if(L!==z)return!0;if(u)return-1;if(R>64)return 3;const W=new AbortController;T.ab=W;try{const $=new Blob([await n(E,I,W)]);if(L!==z)return 2;if(!$.size){const H=new ArrayBuffer(0);return H.fileStart=E,d.appendBuffer(H,!0),d.flush(),1}const it=await $.arrayBuffer();it.fileStart=E;const O=d.appendBuffer(it,!!$.eof);if(d.flush(),O)return await T(O,O+a,L,++R);if($.eof)return!1}catch{}return null}queueMicrotask(async()=>{await T(0,a)}),B.getMediaSource=()=>o,setTimeout(()=>{S(new Error("Timeout waiting for ready"))},3e4);try{await U}catch(E){throw B(),E}return B}const ch={name:"VideoDecryption",data(){return{ctx:null,file:null,fileUrl:"",password:"",playing:!1,cleanup:null,mode:"local"}},methods:{handleFileSelect(e){this.file=e.target.files[0]},async getFileSize(e){const n=new AbortController,a=await fetch(e,{signal:n.signal});if(!a.ok)throw new Error(`Failed to fetch file size: ${a.statusText}`);const l=+a.headers.get("Content-Length");if(isNaN(l))throw new Error("Content-Length header is missing or invalid");return n.abort(),l},async playVideo(){try{this.playing=!0,await this.$nextTick();const e=await tu();this.ctx=e;let n=this.mode==="local"?this.file:{size:await this.getFileSize(this.fileUrl)};const a=this.mode==="local"?async(u,d)=>{const o=n.slice(u,d);return new Uint8Array(await o.arrayBuffer())}:async(u,d,o)=>{const p=await fetch(this.fileUrl,{headers:{Range:`bytes=${u}-${d-1}`},method:"GET",signal:o});return new Uint8Array(await p.arrayBuffer())},l=this.password;await nu(e,new iu((u,d,o)=>a(u,d,o),n.size),l);const f=this.$refs.videoPlayer;f.controls=!0,this.cleanup=await fh(f,async(u,d,o)=>await ru(e,u,d,o)),this.$refs.videoDialog.showModal()}catch(e){console.error(e),alert(e),this.playing=!1}},closeDialog(){this.$refs.videoDialog.close()},handleDialogClose(){this.playing=!1,this.cleanup&&(this.cleanup(),this.cleanup=null),eu(this.ctx),this.ctx=null}}},uh={class:"video-decrypt-container"},hh={class:"mode-selector"},dh=["disabled"],ph={key:0,ref:"videoPlayer",controls:"",style:{flex:"1"}};function _h(e,n,a,l,f,u){return Ft(),Nt("div",uh,[q("div",hh,[q("label",null,[Pt(q("input",{type:"radio","onUpdate:modelValue":n[0]||(n[0]=d=>f.mode=d),value:"local"},null,512),[[Jr,f.mode]]),n[8]||(n[8]=Be(" 本地文件 "))]),q("label",null,[Pt(q("input",{type:"radio","onUpdate:modelValue":n[1]||(n[1]=d=>f.mode=d),value:"remote"},null,512),[[Jr,f.mode]]),n[9]||(n[9]=Be(" 在线文件 "))])]),f.mode==="local"?(Ft(),Nt("input",{key:0,type:"file",onChange:n[2]||(n[2]=(...d)=>u.handleFileSelect&&u.handleFileSelect(...d))},null,32)):ye("",!0),f.mode==="remote"?Pt((Ft(),Nt("input",{key:1,type:"text","onUpdate:modelValue":n[3]||(n[3]=d=>f.fileUrl=d),placeholder:"输入视频URL"},null,512)),[[ee,f.fileUrl]]):ye("",!0),Pt(q("input",{type:"password","onUpdate:modelValue":n[4]||(n[4]=d=>f.password=d),placeholder:"输入解密密码"},null,512),[[ee,f.password]]),q("button",{onClick:n[5]||(n[5]=(...d)=>u.playVideo&&u.playVideo(...d)),disabled:!f.file&&f.mode==="local"||!f.fileUrl&&f.mode==="remote"||f.playing},"播放视频",8,dh),q("dialog",{style:{width:"100%",height:"100%",display:"flex","flex-direction":"column"},ref:"videoDialog",onClose:n[7]||(n[7]=(...d)=>u.handleDialogClose&&u.handleDialogClose(...d))},[f.playing?(Ft(),Nt("video",ph,null,512)):ye("",!0),q("button",{onClick:n[6]||(n[6]=(...d)=>u.closeDialog&&u.closeDialog(...d)),style:{"margin-top":"0.5em"}},"关闭")],544)])}const gh=Ci(ch,[["render",_h],["__scopeId","data-v-448c9ebe"]]),yh=[{path:"/message",name:"message",component:wu},{path:"/file",name:"file",component:Nu},{path:"/file-classic",name:"file-classic",component:rh},{path:"/video-decrypt",name:"video-decrypt",component:gh},{path:"/",redirect:"/message"}],mh=Hc({history:gc(),routes:yh});Ff(Df).use(mh).mount("#app");
//# sourceMappingURL=index-BZjEUHJG.js.map
