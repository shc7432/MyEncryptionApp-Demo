import{decrypt_data as io,encrypt_data as so,change_file_password as In,decrypt_file as Ln,encrypt_file as Rn,crypt_context_destroy as no,crypt_context_create as ro,decrypt_stream_init as oo,Stream as ao,decrypt_stream as lo}from"../lib/encryption/main.bundle.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))l(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&l(d)}).observe(document,{childList:!0,subtree:!0});function a(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function l(c){if(c.ep)return;c.ep=!0;const u=a(c);fetch(c.href,u)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function ps(e){const s=Object.create(null);for(const a of e.split(","))s[a]=1;return a=>a in s}const ft={},Ce=[],Xt=()=>{},fo=()=>!1,Bi=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),_s=e=>e.startsWith("onUpdate:"),St=Object.assign,gs=(e,s)=>{const a=e.indexOf(s);a>-1&&e.splice(a,1)},co=Object.prototype.hasOwnProperty,rt=(e,s)=>co.call(e,s),X=Array.isArray,Ae=e=>Ci(e)==="[object Map]",zn=e=>Ci(e)==="[object Set]",Z=e=>typeof e=="function",_t=e=>typeof e=="string",ue=e=>typeof e=="symbol",dt=e=>e!==null&&typeof e=="object",kn=e=>(dt(e)||Z(e))&&Z(e.then)&&Z(e.catch),Mn=Object.prototype.toString,Ci=e=>Mn.call(e),ho=e=>Ci(e).slice(8,-1),Dn=e=>Ci(e)==="[object Object]",ys=e=>_t(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,je=ps(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ai=e=>{const s=Object.create(null);return a=>s[a]||(s[a]=e(a))},uo=/-(\w)/g,Dt=Ai(e=>e.replace(uo,(s,a)=>a?a.toUpperCase():"")),po=/\B([A-Z])/g,Se=Ai(e=>e.replace(po,"-$1").toLowerCase()),Ti=Ai(e=>e.charAt(0).toUpperCase()+e.slice(1)),Di=Ai(e=>e?`on${Ti(e)}`:""),he=(e,s)=>!Object.is(e,s),di=(e,...s)=>{for(let a=0;a<e.length;a++)e[a](...s)},On=(e,s,a,l=!1)=>{Object.defineProperty(e,s,{configurable:!0,enumerable:!1,writable:l,value:a})},Ji=e=>{const s=parseFloat(e);return isNaN(s)?e:s};let ks;const Pi=()=>ks||(ks=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ms(e){if(X(e)){const s={};for(let a=0;a<e.length;a++){const l=e[a],c=_t(l)?mo(l):ms(l);if(c)for(const u in c)s[u]=c[u]}return s}else if(_t(e)||dt(e))return e}const _o=/;(?![^(]*\))/g,go=/:([^]+)/,yo=/\/\*[^]*?\*\//g;function mo(e){const s={};return e.replace(yo,"").split(_o).forEach(a=>{if(a){const l=a.split(go);l.length>1&&(s[l[0].trim()]=l[1].trim())}}),s}function vs(e){let s="";if(_t(e))s=e;else if(X(e))for(let a=0;a<e.length;a++){const l=vs(e[a]);l&&(s+=l+" ")}else if(dt(e))for(const a in e)e[a]&&(s+=a+" ");return s.trim()}const vo="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",xo=ps(vo);function Nn(e){return!!e||e===""}const Hn=e=>!!(e&&e.__v_isRef===!0),Ie=e=>_t(e)?e:e==null?"":X(e)||dt(e)&&(e.toString===Mn||!Z(e.toString))?Hn(e)?Ie(e.value):JSON.stringify(e,Gn,2):String(e),Gn=(e,s)=>Hn(s)?Gn(e,s.value):Ae(s)?{[`Map(${s.size})`]:[...s.entries()].reduce((a,[l,c],u)=>(a[Oi(l,u)+" =>"]=c,a),{})}:zn(s)?{[`Set(${s.size})`]:[...s.values()].map(a=>Oi(a))}:ue(s)?Oi(s):dt(s)&&!X(s)&&!Dn(s)?String(s):s,Oi=(e,s="")=>{var a;return ue(e)?`Symbol(${(a=e.description)!=null?a:s})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let It;class bo{constructor(s=!1){this.detached=s,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=It,!s&&It&&(this.index=(It.scopes||(It.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let s,a;if(this.scopes)for(s=0,a=this.scopes.length;s<a;s++)this.scopes[s].pause();for(s=0,a=this.effects.length;s<a;s++)this.effects[s].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let s,a;if(this.scopes)for(s=0,a=this.scopes.length;s<a;s++)this.scopes[s].resume();for(s=0,a=this.effects.length;s<a;s++)this.effects[s].resume()}}run(s){if(this._active){const a=It;try{return It=this,s()}finally{It=a}}}on(){It=this}off(){It=this.parent}stop(s){if(this._active){this._active=!1;let a,l;for(a=0,l=this.effects.length;a<l;a++)this.effects[a].stop();for(this.effects.length=0,a=0,l=this.cleanups.length;a<l;a++)this.cleanups[a]();if(this.cleanups.length=0,this.scopes){for(a=0,l=this.scopes.length;a<l;a++)this.scopes[a].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!s){const c=this.parent.scopes.pop();c&&c!==this&&(this.parent.scopes[this.index]=c,c.index=this.index)}this.parent=void 0}}}function So(){return It}let ht;const Ni=new WeakSet;class Vn{constructor(s){this.fn=s,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,It&&It.active&&It.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ni.has(this)&&(Ni.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||jn(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ms(this),Kn(this);const s=ht,a=Nt;ht=this,Nt=!0;try{return this.fn()}finally{$n(this),ht=s,Nt=a,this.flags&=-3}}stop(){if(this.flags&1){for(let s=this.deps;s;s=s.nextDep)Ss(s);this.deps=this.depsTail=void 0,Ms(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ni.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){ts(this)&&this.run()}get dirty(){return ts(this)}}let Yn=0,Ke,$e;function jn(e,s=!1){if(e.flags|=8,s){e.next=$e,$e=e;return}e.next=Ke,Ke=e}function xs(){Yn++}function bs(){if(--Yn>0)return;if($e){let s=$e;for($e=void 0;s;){const a=s.next;s.next=void 0,s.flags&=-9,s=a}}let e;for(;Ke;){let s=Ke;for(Ke=void 0;s;){const a=s.next;if(s.next=void 0,s.flags&=-9,s.flags&1)try{s.trigger()}catch(l){e||(e=l)}s=a}}if(e)throw e}function Kn(e){for(let s=e.deps;s;s=s.nextDep)s.version=-1,s.prevActiveLink=s.dep.activeLink,s.dep.activeLink=s}function $n(e){let s,a=e.depsTail,l=a;for(;l;){const c=l.prevDep;l.version===-1?(l===a&&(a=c),Ss(l),wo(l)):s=l,l.dep.activeLink=l.prevActiveLink,l.prevActiveLink=void 0,l=c}e.deps=s,e.depsTail=a}function ts(e){for(let s=e.deps;s;s=s.nextDep)if(s.dep.version!==s.version||s.dep.computed&&(Wn(s.dep.computed)||s.dep.version!==s.version))return!0;return!!e._dirty}function Wn(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===ti))return;e.globalVersion=ti;const s=e.dep;if(e.flags|=2,s.version>0&&!e.isSSR&&e.deps&&!ts(e)){e.flags&=-3;return}const a=ht,l=Nt;ht=e,Nt=!0;try{Kn(e);const c=e.fn(e._value);(s.version===0||he(c,e._value))&&(e._value=c,s.version++)}catch(c){throw s.version++,c}finally{ht=a,Nt=l,$n(e),e.flags&=-3}}function Ss(e,s=!1){const{dep:a,prevSub:l,nextSub:c}=e;if(l&&(l.nextSub=c,e.prevSub=void 0),c&&(c.prevSub=l,e.nextSub=void 0),a.subs===e&&(a.subs=l,!l&&a.computed)){a.computed.flags&=-5;for(let u=a.computed.deps;u;u=u.nextDep)Ss(u,!0)}!s&&!--a.sc&&a.map&&a.map.delete(a.key)}function wo(e){const{prevDep:s,nextDep:a}=e;s&&(s.nextDep=a,e.prevDep=void 0),a&&(a.prevDep=s,e.nextDep=void 0)}let Nt=!0;const qn=[];function de(){qn.push(Nt),Nt=!1}function pe(){const e=qn.pop();Nt=e===void 0?!0:e}function Ms(e){const{cleanup:s}=e;if(e.cleanup=void 0,s){const a=ht;ht=void 0;try{s()}finally{ht=a}}}let ti=0;class Uo{constructor(s,a){this.sub=s,this.dep=a,this.version=a.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ws{constructor(s){this.computed=s,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(s){if(!ht||!Nt||ht===this.computed)return;let a=this.activeLink;if(a===void 0||a.sub!==ht)a=this.activeLink=new Uo(ht,this),ht.deps?(a.prevDep=ht.depsTail,ht.depsTail.nextDep=a,ht.depsTail=a):ht.deps=ht.depsTail=a,Xn(a);else if(a.version===-1&&(a.version=this.version,a.nextDep)){const l=a.nextDep;l.prevDep=a.prevDep,a.prevDep&&(a.prevDep.nextDep=l),a.prevDep=ht.depsTail,a.nextDep=void 0,ht.depsTail.nextDep=a,ht.depsTail=a,ht.deps===a&&(ht.deps=l)}return a}trigger(s){this.version++,ti++,this.notify(s)}notify(s){xs();try{for(let a=this.subs;a;a=a.prevSub)a.sub.notify()&&a.sub.dep.notify()}finally{bs()}}}function Xn(e){if(e.dep.sc++,e.sub.flags&4){const s=e.dep.computed;if(s&&!e.dep.subs){s.flags|=20;for(let l=s.deps;l;l=l.nextDep)Xn(l)}const a=e.dep.subs;a!==e&&(e.prevSub=a,a&&(a.nextSub=e)),e.dep.subs=e}}const es=new WeakMap,me=Symbol(""),is=Symbol(""),ei=Symbol("");function vt(e,s,a){if(Nt&&ht){let l=es.get(e);l||es.set(e,l=new Map);let c=l.get(a);c||(l.set(a,c=new ws),c.map=l,c.key=a),c.track()}}function ie(e,s,a,l,c,u){const d=es.get(e);if(!d){ti++;return}const o=_=>{_&&_.trigger()};if(xs(),s==="clear")d.forEach(o);else{const _=X(e),b=_&&ys(a);if(_&&a==="length"){const v=Number(l);d.forEach((x,E)=>{(E==="length"||E===ei||!ue(E)&&E>=v)&&o(x)})}else switch((a!==void 0||d.has(void 0))&&o(d.get(a)),b&&o(d.get(ei)),s){case"add":_?b&&o(d.get("length")):(o(d.get(me)),Ae(e)&&o(d.get(is)));break;case"delete":_||(o(d.get(me)),Ae(e)&&o(d.get(is)));break;case"set":Ae(e)&&o(d.get(me));break}}bs()}function we(e){const s=nt(e);return s===e?s:(vt(s,"iterate",ei),Ht(e)?s:s.map(Bt))}function Us(e){return vt(e=nt(e),"iterate",ei),e}const Eo={__proto__:null,[Symbol.iterator](){return Hi(this,Symbol.iterator,Bt)},concat(...e){return we(this).concat(...e.map(s=>X(s)?we(s):s))},entries(){return Hi(this,"entries",e=>(e[1]=Bt(e[1]),e))},every(e,s){return Qt(this,"every",e,s,void 0,arguments)},filter(e,s){return Qt(this,"filter",e,s,a=>a.map(Bt),arguments)},find(e,s){return Qt(this,"find",e,s,Bt,arguments)},findIndex(e,s){return Qt(this,"findIndex",e,s,void 0,arguments)},findLast(e,s){return Qt(this,"findLast",e,s,Bt,arguments)},findLastIndex(e,s){return Qt(this,"findLastIndex",e,s,void 0,arguments)},forEach(e,s){return Qt(this,"forEach",e,s,void 0,arguments)},includes(...e){return Gi(this,"includes",e)},indexOf(...e){return Gi(this,"indexOf",e)},join(e){return we(this).join(e)},lastIndexOf(...e){return Gi(this,"lastIndexOf",e)},map(e,s){return Qt(this,"map",e,s,void 0,arguments)},pop(){return De(this,"pop")},push(...e){return De(this,"push",e)},reduce(e,...s){return Ds(this,"reduce",e,s)},reduceRight(e,...s){return Ds(this,"reduceRight",e,s)},shift(){return De(this,"shift")},some(e,s){return Qt(this,"some",e,s,void 0,arguments)},splice(...e){return De(this,"splice",e)},toReversed(){return we(this).toReversed()},toSorted(e){return we(this).toSorted(e)},toSpliced(...e){return we(this).toSpliced(...e)},unshift(...e){return De(this,"unshift",e)},values(){return Hi(this,"values",Bt)}};function Hi(e,s,a){const l=Us(e),c=l[s]();return l!==e&&!Ht(e)&&(c._next=c.next,c.next=()=>{const u=c._next();return u.value&&(u.value=a(u.value)),u}),c}const Bo=Array.prototype;function Qt(e,s,a,l,c,u){const d=Us(e),o=d!==e&&!Ht(e),_=d[s];if(_!==Bo[s]){const x=_.apply(e,u);return o?Bt(x):x}let b=a;d!==e&&(o?b=function(x,E){return a.call(this,Bt(x),E,e)}:a.length>2&&(b=function(x,E){return a.call(this,x,E,e)}));const v=_.call(d,b,l);return o&&c?c(v):v}function Ds(e,s,a,l){const c=Us(e);let u=a;return c!==e&&(Ht(e)?a.length>3&&(u=function(d,o,_){return a.call(this,d,o,_,e)}):u=function(d,o,_){return a.call(this,d,Bt(o),_,e)}),c[s](u,...l)}function Gi(e,s,a){const l=nt(e);vt(l,"iterate",ei);const c=l[s](...a);return(c===-1||c===!1)&&Cs(a[0])?(a[0]=nt(a[0]),l[s](...a)):c}function De(e,s,a=[]){de(),xs();const l=nt(e)[s].apply(e,a);return bs(),pe(),l}const Co=ps("__proto__,__v_isRef,__isVue"),Zn=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(ue));function Ao(e){ue(e)||(e=String(e));const s=nt(this);return vt(s,"has",e),s.hasOwnProperty(e)}class Qn{constructor(s=!1,a=!1){this._isReadonly=s,this._isShallow=a}get(s,a,l){if(a==="__v_skip")return s.__v_skip;const c=this._isReadonly,u=this._isShallow;if(a==="__v_isReactive")return!c;if(a==="__v_isReadonly")return c;if(a==="__v_isShallow")return u;if(a==="__v_raw")return l===(c?u?Do:ir:u?er:tr).get(s)||Object.getPrototypeOf(s)===Object.getPrototypeOf(l)?s:void 0;const d=X(s);if(!c){let _;if(d&&(_=Eo[a]))return _;if(a==="hasOwnProperty")return Ao}const o=Reflect.get(s,a,bt(s)?s:l);return(ue(a)?Zn.has(a):Co(a))||(c||vt(s,"get",a),u)?o:bt(o)?d&&ys(a)?o:o.value:dt(o)?c?nr(o):Fi(o):o}}class Jn extends Qn{constructor(s=!1){super(!1,s)}set(s,a,l,c){let u=s[a];if(!this._isShallow){const _=ve(u);if(!Ht(l)&&!ve(l)&&(u=nt(u),l=nt(l)),!X(s)&&bt(u)&&!bt(l))return _?!1:(u.value=l,!0)}const d=X(s)&&ys(a)?Number(a)<s.length:rt(s,a),o=Reflect.set(s,a,l,bt(s)?s:c);return s===nt(c)&&(d?he(l,u)&&ie(s,"set",a,l):ie(s,"add",a,l)),o}deleteProperty(s,a){const l=rt(s,a);s[a];const c=Reflect.deleteProperty(s,a);return c&&l&&ie(s,"delete",a,void 0),c}has(s,a){const l=Reflect.has(s,a);return(!ue(a)||!Zn.has(a))&&vt(s,"has",a),l}ownKeys(s){return vt(s,"iterate",X(s)?"length":me),Reflect.ownKeys(s)}}class To extends Qn{constructor(s=!1){super(!0,s)}set(s,a){return!0}deleteProperty(s,a){return!0}}const Po=new Jn,Fo=new To,Io=new Jn(!0);const ss=e=>e,ci=e=>Reflect.getPrototypeOf(e);function Lo(e,s,a){return function(...l){const c=this.__v_raw,u=nt(c),d=Ae(u),o=e==="entries"||e===Symbol.iterator&&d,_=e==="keys"&&d,b=c[e](...l),v=a?ss:s?ns:Bt;return!s&&vt(u,"iterate",_?is:me),{next(){const{value:x,done:E}=b.next();return E?{value:x,done:E}:{value:o?[v(x[0]),v(x[1])]:v(x),done:E}},[Symbol.iterator](){return this}}}}function hi(e){return function(...s){return e==="delete"?!1:e==="clear"?void 0:this}}function Ro(e,s){const a={get(c){const u=this.__v_raw,d=nt(u),o=nt(c);e||(he(c,o)&&vt(d,"get",c),vt(d,"get",o));const{has:_}=ci(d),b=s?ss:e?ns:Bt;if(_.call(d,c))return b(u.get(c));if(_.call(d,o))return b(u.get(o));u!==d&&u.get(c)},get size(){const c=this.__v_raw;return!e&&vt(nt(c),"iterate",me),Reflect.get(c,"size",c)},has(c){const u=this.__v_raw,d=nt(u),o=nt(c);return e||(he(c,o)&&vt(d,"has",c),vt(d,"has",o)),c===o?u.has(c):u.has(c)||u.has(o)},forEach(c,u){const d=this,o=d.__v_raw,_=nt(o),b=s?ss:e?ns:Bt;return!e&&vt(_,"iterate",me),o.forEach((v,x)=>c.call(u,b(v),b(x),d))}};return St(a,e?{add:hi("add"),set:hi("set"),delete:hi("delete"),clear:hi("clear")}:{add(c){!s&&!Ht(c)&&!ve(c)&&(c=nt(c));const u=nt(this);return ci(u).has.call(u,c)||(u.add(c),ie(u,"add",c,c)),this},set(c,u){!s&&!Ht(u)&&!ve(u)&&(u=nt(u));const d=nt(this),{has:o,get:_}=ci(d);let b=o.call(d,c);b||(c=nt(c),b=o.call(d,c));const v=_.call(d,c);return d.set(c,u),b?he(u,v)&&ie(d,"set",c,u):ie(d,"add",c,u),this},delete(c){const u=nt(this),{has:d,get:o}=ci(u);let _=d.call(u,c);_||(c=nt(c),_=d.call(u,c)),o&&o.call(u,c);const b=u.delete(c);return _&&ie(u,"delete",c,void 0),b},clear(){const c=nt(this),u=c.size!==0,d=c.clear();return u&&ie(c,"clear",void 0,void 0),d}}),["keys","values","entries",Symbol.iterator].forEach(c=>{a[c]=Lo(c,e,s)}),a}function Es(e,s){const a=Ro(e,s);return(l,c,u)=>c==="__v_isReactive"?!e:c==="__v_isReadonly"?e:c==="__v_raw"?l:Reflect.get(rt(a,c)&&c in l?a:l,c,u)}const zo={get:Es(!1,!1)},ko={get:Es(!1,!0)},Mo={get:Es(!0,!1)};const tr=new WeakMap,er=new WeakMap,ir=new WeakMap,Do=new WeakMap;function Oo(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function No(e){return e.__v_skip||!Object.isExtensible(e)?0:Oo(ho(e))}function Fi(e){return ve(e)?e:Bs(e,!1,Po,zo,tr)}function sr(e){return Bs(e,!1,Io,ko,er)}function nr(e){return Bs(e,!0,Fo,Mo,ir)}function Bs(e,s,a,l,c){if(!dt(e)||e.__v_raw&&!(s&&e.__v_isReactive))return e;const u=c.get(e);if(u)return u;const d=No(e);if(d===0)return e;const o=new Proxy(e,d===2?l:a);return c.set(e,o),o}function We(e){return ve(e)?We(e.__v_raw):!!(e&&e.__v_isReactive)}function ve(e){return!!(e&&e.__v_isReadonly)}function Ht(e){return!!(e&&e.__v_isShallow)}function Cs(e){return e?!!e.__v_raw:!1}function nt(e){const s=e&&e.__v_raw;return s?nt(s):e}function Ho(e){return!rt(e,"__v_skip")&&Object.isExtensible(e)&&On(e,"__v_skip",!0),e}const Bt=e=>dt(e)?Fi(e):e,ns=e=>dt(e)?nr(e):e;function bt(e){return e?e.__v_isRef===!0:!1}function Go(e){return rr(e,!1)}function Vo(e){return rr(e,!0)}function rr(e,s){return bt(e)?e:new Yo(e,s)}class Yo{constructor(s,a){this.dep=new ws,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=a?s:nt(s),this._value=a?s:Bt(s),this.__v_isShallow=a}get value(){return this.dep.track(),this._value}set value(s){const a=this._rawValue,l=this.__v_isShallow||Ht(s)||ve(s);s=l?s:nt(s),he(s,a)&&(this._rawValue=s,this._value=l?s:Bt(s),this.dep.trigger())}}function Te(e){return bt(e)?e.value:e}const jo={get:(e,s,a)=>s==="__v_raw"?e:Te(Reflect.get(e,s,a)),set:(e,s,a,l)=>{const c=e[s];return bt(c)&&!bt(a)?(c.value=a,!0):Reflect.set(e,s,a,l)}};function or(e){return We(e)?e:new Proxy(e,jo)}class Ko{constructor(s,a,l){this.fn=s,this.setter=a,this._value=void 0,this.dep=new ws(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ti-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!a,this.isSSR=l}notify(){if(this.flags|=16,!(this.flags&8)&&ht!==this)return jn(this,!0),!0}get value(){const s=this.dep.track();return Wn(this),s&&(s.version=this.dep.version),this._value}set value(s){this.setter&&this.setter(s)}}function $o(e,s,a=!1){let l,c;return Z(e)?l=e:(l=e.get,c=e.set),new Ko(l,c,a)}const ui={},mi=new WeakMap;let ye;function Wo(e,s=!1,a=ye){if(a){let l=mi.get(a);l||mi.set(a,l=[]),l.push(e)}}function qo(e,s,a=ft){const{immediate:l,deep:c,once:u,scheduler:d,augmentJob:o,call:_}=a,b=h=>c?h:Ht(h)||c===!1||c===0?se(h,1):se(h);let v,x,E,B,U=!1,G=!1;if(bt(e)?(x=()=>e.value,U=Ht(e)):We(e)?(x=()=>b(e),U=!0):X(e)?(G=!0,U=e.some(h=>We(h)||Ht(h)),x=()=>e.map(h=>{if(bt(h))return h.value;if(We(h))return b(h);if(Z(h))return _?_(h,2):h()})):Z(e)?s?x=_?()=>_(e,2):e:x=()=>{if(E){de();try{E()}finally{pe()}}const h=ye;ye=v;try{return _?_(e,3,[B]):e(B)}finally{ye=h}}:x=Xt,s&&c){const h=x,p=c===!0?1/0:c;x=()=>se(h(),p)}const t=So(),n=()=>{v.stop(),t&&t.active&&gs(t.effects,v)};if(u&&s){const h=s;s=(...p)=>{h(...p),n()}}let r=G?new Array(e.length).fill(ui):ui;const f=h=>{if(!(!(v.flags&1)||!v.dirty&&!h))if(s){const p=v.run();if(c||U||(G?p.some((g,S)=>he(g,r[S])):he(p,r))){E&&E();const g=ye;ye=v;try{const S=[p,r===ui?void 0:G&&r[0]===ui?[]:r,B];_?_(s,3,S):s(...S),r=p}finally{ye=g}}}else v.run()};return o&&o(f),v=new Vn(x),v.scheduler=d?()=>d(f,!1):f,B=h=>Wo(h,!1,v),E=v.onStop=()=>{const h=mi.get(v);if(h){if(_)_(h,4);else for(const p of h)p();mi.delete(v)}},s?l?f(!0):r=v.run():d?d(f.bind(null,!0),!0):v.run(),n.pause=v.pause.bind(v),n.resume=v.resume.bind(v),n.stop=n,n}function se(e,s=1/0,a){if(s<=0||!dt(e)||e.__v_skip||(a=a||new Set,a.has(e)))return e;if(a.add(e),s--,bt(e))se(e.value,s,a);else if(X(e))for(let l=0;l<e.length;l++)se(e[l],s,a);else if(zn(e)||Ae(e))e.forEach(l=>{se(l,s,a)});else if(Dn(e)){for(const l in e)se(e[l],s,a);for(const l of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,l)&&se(e[l],s,a)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ai(e,s,a,l){try{return l?e(...l):e()}catch(c){Ii(c,s,a)}}function Zt(e,s,a,l){if(Z(e)){const c=ai(e,s,a,l);return c&&kn(c)&&c.catch(u=>{Ii(u,s,a)}),c}if(X(e)){const c=[];for(let u=0;u<e.length;u++)c.push(Zt(e[u],s,a,l));return c}}function Ii(e,s,a,l=!0){const c=s?s.vnode:null,{errorHandler:u,throwUnhandledErrorInProduction:d}=s&&s.appContext.config||ft;if(s){let o=s.parent;const _=s.proxy,b=`https://vuejs.org/error-reference/#runtime-${a}`;for(;o;){const v=o.ec;if(v){for(let x=0;x<v.length;x++)if(v[x](e,_,b)===!1)return}o=o.parent}if(u){de(),ai(u,null,10,[e,_,b]),pe();return}}Xo(e,a,c,l,d)}function Xo(e,s,a,l=!0,c=!1){if(c)throw e;console.error(e)}const Ct=[];let Wt=-1;const Pe=[];let le=null,Ue=0;const ar=Promise.resolve();let vi=null;function lr(e){const s=vi||ar;return e?s.then(this?e.bind(this):e):s}function Zo(e){let s=Wt+1,a=Ct.length;for(;s<a;){const l=s+a>>>1,c=Ct[l],u=ii(c);u<e||u===e&&c.flags&2?s=l+1:a=l}return s}function As(e){if(!(e.flags&1)){const s=ii(e),a=Ct[Ct.length-1];!a||!(e.flags&2)&&s>=ii(a)?Ct.push(e):Ct.splice(Zo(s),0,e),e.flags|=1,fr()}}function fr(){vi||(vi=ar.then(hr))}function Qo(e){X(e)?Pe.push(...e):le&&e.id===-1?le.splice(Ue+1,0,e):e.flags&1||(Pe.push(e),e.flags|=1),fr()}function Os(e,s,a=Wt+1){for(;a<Ct.length;a++){const l=Ct[a];if(l&&l.flags&2){if(e&&l.id!==e.uid)continue;Ct.splice(a,1),a--,l.flags&4&&(l.flags&=-2),l(),l.flags&4||(l.flags&=-2)}}}function cr(e){if(Pe.length){const s=[...new Set(Pe)].sort((a,l)=>ii(a)-ii(l));if(Pe.length=0,le){le.push(...s);return}for(le=s,Ue=0;Ue<le.length;Ue++){const a=le[Ue];a.flags&4&&(a.flags&=-2),a.flags&8||a(),a.flags&=-2}le=null,Ue=0}}const ii=e=>e.id==null?e.flags&2?-1:1/0:e.id;function hr(e){try{for(Wt=0;Wt<Ct.length;Wt++){const s=Ct[Wt];s&&!(s.flags&8)&&(s.flags&4&&(s.flags&=-2),ai(s,s.i,s.i?15:14),s.flags&4||(s.flags&=-2))}}finally{for(;Wt<Ct.length;Wt++){const s=Ct[Wt];s&&(s.flags&=-2)}Wt=-1,Ct.length=0,cr(),vi=null,(Ct.length||Pe.length)&&hr()}}let Lt=null,ur=null;function xi(e){const s=Lt;return Lt=e,ur=e&&e.type.__scopeId||null,s}function Ge(e,s=Lt,a){if(!s||e._n)return e;const l=(...c)=>{l._d&&Xs(-1);const u=xi(s);let d;try{d=e(...c)}finally{xi(u),l._d&&Xs(1)}return d};return l._n=!0,l._c=!0,l._d=!0,l}function re(e,s){if(Lt===null)return e;const a=ki(Lt),l=e.dirs||(e.dirs=[]);for(let c=0;c<s.length;c++){let[u,d,o,_=ft]=s[c];u&&(Z(u)&&(u={mounted:u,updated:u}),u.deep&&se(d),l.push({dir:u,instance:a,value:d,oldValue:void 0,arg:o,modifiers:_}))}return e}function _e(e,s,a,l){const c=e.dirs,u=s&&s.dirs;for(let d=0;d<c.length;d++){const o=c[d];u&&(o.oldValue=u[d].value);let _=o.dir[l];_&&(de(),Zt(_,a,8,[e.el,o,e,s]),pe())}}const Jo=Symbol("_vte"),ta=e=>e.__isTeleport;function Ts(e,s){e.shapeFlag&6&&e.component?(e.transition=s,Ts(e.component.subTree,s)):e.shapeFlag&128?(e.ssContent.transition=s.clone(e.ssContent),e.ssFallback.transition=s.clone(e.ssFallback)):e.transition=s}/*! #__NO_SIDE_EFFECTS__ */function dr(e,s){return Z(e)?St({name:e.name},s,{setup:e}):e}function pr(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function bi(e,s,a,l,c=!1){if(X(e)){e.forEach((U,G)=>bi(U,s&&(X(s)?s[G]:s),a,l,c));return}if(qe(l)&&!c){l.shapeFlag&512&&l.type.__asyncResolved&&l.component.subTree.component&&bi(e,s,a,l.component.subTree);return}const u=l.shapeFlag&4?ki(l.component):l.el,d=c?null:u,{i:o,r:_}=e,b=s&&s.r,v=o.refs===ft?o.refs={}:o.refs,x=o.setupState,E=nt(x),B=x===ft?()=>!1:U=>rt(E,U);if(b!=null&&b!==_&&(_t(b)?(v[b]=null,B(b)&&(x[b]=null)):bt(b)&&(b.value=null)),Z(_))ai(_,o,12,[d,v]);else{const U=_t(_),G=bt(_);if(U||G){const t=()=>{if(e.f){const n=U?B(_)?x[_]:v[_]:_.value;c?X(n)&&gs(n,u):X(n)?n.includes(u)||n.push(u):U?(v[_]=[u],B(_)&&(x[_]=v[_])):(_.value=[u],e.k&&(v[e.k]=_.value))}else U?(v[_]=d,B(_)&&(x[_]=d)):G&&(_.value=d,e.k&&(v[e.k]=d))};d?(t.id=-1,Ft(t,a)):t()}}}Pi().requestIdleCallback;Pi().cancelIdleCallback;const qe=e=>!!e.type.__asyncLoader,_r=e=>e.type.__isKeepAlive;function ea(e,s){gr(e,"a",s)}function ia(e,s){gr(e,"da",s)}function gr(e,s,a=xt){const l=e.__wdc||(e.__wdc=()=>{let c=a;for(;c;){if(c.isDeactivated)return;c=c.parent}return e()});if(Li(s,l,a),a){let c=a.parent;for(;c&&c.parent;)_r(c.parent.vnode)&&sa(l,s,a,c),c=c.parent}}function sa(e,s,a,l){const c=Li(s,e,l,!0);yr(()=>{gs(l[s],c)},a)}function Li(e,s,a=xt,l=!1){if(a){const c=a[e]||(a[e]=[]),u=s.__weh||(s.__weh=(...d)=>{de();const o=li(a),_=Zt(s,a,e,d);return o(),pe(),_});return l?c.unshift(u):c.push(u),u}}const oe=e=>(s,a=xt)=>{(!ni||e==="sp")&&Li(e,(...l)=>s(...l),a)},na=oe("bm"),ra=oe("m"),oa=oe("bu"),aa=oe("u"),la=oe("bum"),yr=oe("um"),fa=oe("sp"),ca=oe("rtg"),ha=oe("rtc");function ua(e,s=xt){Li("ec",e,s)}const da="components";function Ns(e,s){return _a(da,e,!0,s)||e}const pa=Symbol.for("v-ndc");function _a(e,s,a=!0,l=!1){const c=Lt||xt;if(c){const u=c.type;{const o=il(u,!1);if(o&&(o===s||o===Dt(s)||o===Ti(Dt(s))))return u}const d=Hs(c[e]||u[e],s)||Hs(c.appContext[e],s);return!d&&l?u:d}}function Hs(e,s){return e&&(e[s]||e[Dt(s)]||e[Ti(Dt(s))])}const rs=e=>e?Dr(e)?ki(e):rs(e.parent):null,Xe=St(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>rs(e.parent),$root:e=>rs(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>vr(e),$forceUpdate:e=>e.f||(e.f=()=>{As(e.update)}),$nextTick:e=>e.n||(e.n=lr.bind(e.proxy)),$watch:e=>ka.bind(e)}),Vi=(e,s)=>e!==ft&&!e.__isScriptSetup&&rt(e,s),ga={get({_:e},s){if(s==="__v_skip")return!0;const{ctx:a,setupState:l,data:c,props:u,accessCache:d,type:o,appContext:_}=e;let b;if(s[0]!=="$"){const B=d[s];if(B!==void 0)switch(B){case 1:return l[s];case 2:return c[s];case 4:return a[s];case 3:return u[s]}else{if(Vi(l,s))return d[s]=1,l[s];if(c!==ft&&rt(c,s))return d[s]=2,c[s];if((b=e.propsOptions[0])&&rt(b,s))return d[s]=3,u[s];if(a!==ft&&rt(a,s))return d[s]=4,a[s];os&&(d[s]=0)}}const v=Xe[s];let x,E;if(v)return s==="$attrs"&&vt(e.attrs,"get",""),v(e);if((x=o.__cssModules)&&(x=x[s]))return x;if(a!==ft&&rt(a,s))return d[s]=4,a[s];if(E=_.config.globalProperties,rt(E,s))return E[s]},set({_:e},s,a){const{data:l,setupState:c,ctx:u}=e;return Vi(c,s)?(c[s]=a,!0):l!==ft&&rt(l,s)?(l[s]=a,!0):rt(e.props,s)||s[0]==="$"&&s.slice(1)in e?!1:(u[s]=a,!0)},has({_:{data:e,setupState:s,accessCache:a,ctx:l,appContext:c,propsOptions:u}},d){let o;return!!a[d]||e!==ft&&rt(e,d)||Vi(s,d)||(o=u[0])&&rt(o,d)||rt(l,d)||rt(Xe,d)||rt(c.config.globalProperties,d)},defineProperty(e,s,a){return a.get!=null?e._.accessCache[s]=0:rt(a,"value")&&this.set(e,s,a.value,null),Reflect.defineProperty(e,s,a)}};function Gs(e){return X(e)?e.reduce((s,a)=>(s[a]=null,s),{}):e}let os=!0;function ya(e){const s=vr(e),a=e.proxy,l=e.ctx;os=!1,s.beforeCreate&&Vs(s.beforeCreate,e,"bc");const{data:c,computed:u,methods:d,watch:o,provide:_,inject:b,created:v,beforeMount:x,mounted:E,beforeUpdate:B,updated:U,activated:G,deactivated:t,beforeDestroy:n,beforeUnmount:r,destroyed:f,unmounted:h,render:p,renderTracked:g,renderTriggered:S,errorCaptured:C,serverPrefetch:A,expose:L,inheritAttrs:M,components:j,directives:D,filters:at}=s;if(b&&ma(b,l,null),d)for(const tt in d){const J=d[tt];Z(J)&&(l[tt]=J.bind(a))}if(c){const tt=c.call(a,a);dt(tt)&&(e.data=Fi(tt))}if(os=!0,u)for(const tt in u){const J=u[tt],pt=Z(J)?J.bind(a,a):Z(J.get)?J.get.bind(a,a):Xt,mt=!Z(J)&&Z(J.set)?J.set.bind(a):Xt,wt=Ot({get:pt,set:mt});Object.defineProperty(l,tt,{enumerable:!0,configurable:!0,get:()=>wt.value,set:gt=>wt.value=gt})}if(o)for(const tt in o)mr(o[tt],l,a,tt);if(_){const tt=Z(_)?_.call(a):_;Reflect.ownKeys(tt).forEach(J=>{pi(J,tt[J])})}v&&Vs(v,e,"c");function ut(tt,J){X(J)?J.forEach(pt=>tt(pt.bind(a))):J&&tt(J.bind(a))}if(ut(na,x),ut(ra,E),ut(oa,B),ut(aa,U),ut(ea,G),ut(ia,t),ut(ua,C),ut(ha,g),ut(ca,S),ut(la,r),ut(yr,h),ut(fa,A),X(L))if(L.length){const tt=e.exposed||(e.exposed={});L.forEach(J=>{Object.defineProperty(tt,J,{get:()=>a[J],set:pt=>a[J]=pt})})}else e.exposed||(e.exposed={});p&&e.render===Xt&&(e.render=p),M!=null&&(e.inheritAttrs=M),j&&(e.components=j),D&&(e.directives=D),A&&pr(e)}function ma(e,s,a=Xt){X(e)&&(e=as(e));for(const l in e){const c=e[l];let u;dt(c)?"default"in c?u=ne(c.from||l,c.default,!0):u=ne(c.from||l):u=ne(c),bt(u)?Object.defineProperty(s,l,{enumerable:!0,configurable:!0,get:()=>u.value,set:d=>u.value=d}):s[l]=u}}function Vs(e,s,a){Zt(X(e)?e.map(l=>l.bind(s.proxy)):e.bind(s.proxy),s,a)}function mr(e,s,a,l){let c=l.includes(".")?Lr(a,l):()=>a[l];if(_t(e)){const u=s[e];Z(u)&&_i(c,u)}else if(Z(e))_i(c,e.bind(a));else if(dt(e))if(X(e))e.forEach(u=>mr(u,s,a,l));else{const u=Z(e.handler)?e.handler.bind(a):s[e.handler];Z(u)&&_i(c,u,e)}}function vr(e){const s=e.type,{mixins:a,extends:l}=s,{mixins:c,optionsCache:u,config:{optionMergeStrategies:d}}=e.appContext,o=u.get(s);let _;return o?_=o:!c.length&&!a&&!l?_=s:(_={},c.length&&c.forEach(b=>Si(_,b,d,!0)),Si(_,s,d)),dt(s)&&u.set(s,_),_}function Si(e,s,a,l=!1){const{mixins:c,extends:u}=s;u&&Si(e,u,a,!0),c&&c.forEach(d=>Si(e,d,a,!0));for(const d in s)if(!(l&&d==="expose")){const o=va[d]||a&&a[d];e[d]=o?o(e[d],s[d]):s[d]}return e}const va={data:Ys,props:js,emits:js,methods:Ve,computed:Ve,beforeCreate:Et,created:Et,beforeMount:Et,mounted:Et,beforeUpdate:Et,updated:Et,beforeDestroy:Et,beforeUnmount:Et,destroyed:Et,unmounted:Et,activated:Et,deactivated:Et,errorCaptured:Et,serverPrefetch:Et,components:Ve,directives:Ve,watch:ba,provide:Ys,inject:xa};function Ys(e,s){return s?e?function(){return St(Z(e)?e.call(this,this):e,Z(s)?s.call(this,this):s)}:s:e}function xa(e,s){return Ve(as(e),as(s))}function as(e){if(X(e)){const s={};for(let a=0;a<e.length;a++)s[e[a]]=e[a];return s}return e}function Et(e,s){return e?[...new Set([].concat(e,s))]:s}function Ve(e,s){return e?St(Object.create(null),e,s):s}function js(e,s){return e?X(e)&&X(s)?[...new Set([...e,...s])]:St(Object.create(null),Gs(e),Gs(s??{})):s}function ba(e,s){if(!e)return s;if(!s)return e;const a=St(Object.create(null),e);for(const l in s)a[l]=Et(e[l],s[l]);return a}function xr(){return{app:null,config:{isNativeTag:fo,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Sa=0;function wa(e,s){return function(l,c=null){Z(l)||(l=St({},l)),c!=null&&!dt(c)&&(c=null);const u=xr(),d=new WeakSet,o=[];let _=!1;const b=u.app={_uid:Sa++,_component:l,_props:c,_container:null,_context:u,_instance:null,version:nl,get config(){return u.config},set config(v){},use(v,...x){return d.has(v)||(v&&Z(v.install)?(d.add(v),v.install(b,...x)):Z(v)&&(d.add(v),v(b,...x))),b},mixin(v){return u.mixins.includes(v)||u.mixins.push(v),b},component(v,x){return x?(u.components[v]=x,b):u.components[v]},directive(v,x){return x?(u.directives[v]=x,b):u.directives[v]},mount(v,x,E){if(!_){const B=b._ceVNode||yt(l,c);return B.appContext=u,E===!0?E="svg":E===!1&&(E=void 0),e(B,v,E),_=!0,b._container=v,v.__vue_app__=b,ki(B.component)}},onUnmount(v){o.push(v)},unmount(){_&&(Zt(o,b._instance,16),e(null,b._container),delete b._container.__vue_app__)},provide(v,x){return u.provides[v]=x,b},runWithContext(v){const x=Fe;Fe=b;try{return v()}finally{Fe=x}}};return b}}let Fe=null;function pi(e,s){if(xt){let a=xt.provides;const l=xt.parent&&xt.parent.provides;l===a&&(a=xt.provides=Object.create(l)),a[e]=s}}function ne(e,s,a=!1){const l=xt||Lt;if(l||Fe){const c=Fe?Fe._context.provides:l?l.parent==null?l.vnode.appContext&&l.vnode.appContext.provides:l.parent.provides:void 0;if(c&&e in c)return c[e];if(arguments.length>1)return a&&Z(s)?s.call(l&&l.proxy):s}}const br={},Sr=()=>Object.create(br),wr=e=>Object.getPrototypeOf(e)===br;function Ua(e,s,a,l=!1){const c={},u=Sr();e.propsDefaults=Object.create(null),Ur(e,s,c,u);for(const d in e.propsOptions[0])d in c||(c[d]=void 0);a?e.props=l?c:sr(c):e.type.props?e.props=c:e.props=u,e.attrs=u}function Ea(e,s,a,l){const{props:c,attrs:u,vnode:{patchFlag:d}}=e,o=nt(c),[_]=e.propsOptions;let b=!1;if((l||d>0)&&!(d&16)){if(d&8){const v=e.vnode.dynamicProps;for(let x=0;x<v.length;x++){let E=v[x];if(Ri(e.emitsOptions,E))continue;const B=s[E];if(_)if(rt(u,E))B!==u[E]&&(u[E]=B,b=!0);else{const U=Dt(E);c[U]=ls(_,o,U,B,e,!1)}else B!==u[E]&&(u[E]=B,b=!0)}}}else{Ur(e,s,c,u)&&(b=!0);let v;for(const x in o)(!s||!rt(s,x)&&((v=Se(x))===x||!rt(s,v)))&&(_?a&&(a[x]!==void 0||a[v]!==void 0)&&(c[x]=ls(_,o,x,void 0,e,!0)):delete c[x]);if(u!==o)for(const x in u)(!s||!rt(s,x))&&(delete u[x],b=!0)}b&&ie(e.attrs,"set","")}function Ur(e,s,a,l){const[c,u]=e.propsOptions;let d=!1,o;if(s)for(let _ in s){if(je(_))continue;const b=s[_];let v;c&&rt(c,v=Dt(_))?!u||!u.includes(v)?a[v]=b:(o||(o={}))[v]=b:Ri(e.emitsOptions,_)||(!(_ in l)||b!==l[_])&&(l[_]=b,d=!0)}if(u){const _=nt(a),b=o||ft;for(let v=0;v<u.length;v++){const x=u[v];a[x]=ls(c,_,x,b[x],e,!rt(b,x))}}return d}function ls(e,s,a,l,c,u){const d=e[a];if(d!=null){const o=rt(d,"default");if(o&&l===void 0){const _=d.default;if(d.type!==Function&&!d.skipFactory&&Z(_)){const{propsDefaults:b}=c;if(a in b)l=b[a];else{const v=li(c);l=b[a]=_.call(null,s),v()}}else l=_;c.ce&&c.ce._setProp(a,l)}d[0]&&(u&&!o?l=!1:d[1]&&(l===""||l===Se(a))&&(l=!0))}return l}const Ba=new WeakMap;function Er(e,s,a=!1){const l=a?Ba:s.propsCache,c=l.get(e);if(c)return c;const u=e.props,d={},o=[];let _=!1;if(!Z(e)){const v=x=>{_=!0;const[E,B]=Er(x,s,!0);St(d,E),B&&o.push(...B)};!a&&s.mixins.length&&s.mixins.forEach(v),e.extends&&v(e.extends),e.mixins&&e.mixins.forEach(v)}if(!u&&!_)return dt(e)&&l.set(e,Ce),Ce;if(X(u))for(let v=0;v<u.length;v++){const x=Dt(u[v]);Ks(x)&&(d[x]=ft)}else if(u)for(const v in u){const x=Dt(v);if(Ks(x)){const E=u[v],B=d[x]=X(E)||Z(E)?{type:E}:St({},E),U=B.type;let G=!1,t=!0;if(X(U))for(let n=0;n<U.length;++n){const r=U[n],f=Z(r)&&r.name;if(f==="Boolean"){G=!0;break}else f==="String"&&(t=!1)}else G=Z(U)&&U.name==="Boolean";B[0]=G,B[1]=t,(G||rt(B,"default"))&&o.push(x)}}const b=[d,o];return dt(e)&&l.set(e,b),b}function Ks(e){return e[0]!=="$"&&!je(e)}const Br=e=>e[0]==="_"||e==="$stable",Ps=e=>X(e)?e.map(qt):[qt(e)],Ca=(e,s,a)=>{if(s._n)return s;const l=Ge((...c)=>Ps(s(...c)),a);return l._c=!1,l},Cr=(e,s,a)=>{const l=e._ctx;for(const c in e){if(Br(c))continue;const u=e[c];if(Z(u))s[c]=Ca(c,u,l);else if(u!=null){const d=Ps(u);s[c]=()=>d}}},Ar=(e,s)=>{const a=Ps(s);e.slots.default=()=>a},Tr=(e,s,a)=>{for(const l in s)(a||l!=="_")&&(e[l]=s[l])},Aa=(e,s,a)=>{const l=e.slots=Sr();if(e.vnode.shapeFlag&32){const c=s._;c?(Tr(l,s,a),a&&On(l,"_",c,!0)):Cr(s,l)}else s&&Ar(e,s)},Ta=(e,s,a)=>{const{vnode:l,slots:c}=e;let u=!0,d=ft;if(l.shapeFlag&32){const o=s._;o?a&&o===1?u=!1:Tr(c,s,a):(u=!s.$stable,Cr(s,c)),d=s}else s&&(Ar(e,s),d={default:1});if(u)for(const o in c)!Br(o)&&d[o]==null&&delete c[o]},Ft=Va;function Pa(e){return Fa(e)}function Fa(e,s){const a=Pi();a.__VUE__=!0;const{insert:l,remove:c,patchProp:u,createElement:d,createText:o,createComment:_,setText:b,setElementText:v,parentNode:x,nextSibling:E,setScopeId:B=Xt,insertStaticContent:U}=e,G=(y,m,w,T=null,I=null,F=null,O=void 0,k=null,z=!!m.dynamicChildren)=>{if(y===m)return;y&&!Oe(y,m)&&(T=P(y),gt(y,I,F,!0),y=null),m.patchFlag===-2&&(z=!1,m.dynamicChildren=null);const{type:R,ref:W,shapeFlag:H}=m;switch(R){case zi:t(y,m,w,T);break;case xe:n(y,m,w,T);break;case ji:y==null&&r(m,w,T,O);break;case ee:j(y,m,w,T,I,F,O,k,z);break;default:H&1?p(y,m,w,T,I,F,O,k,z):H&6?D(y,m,w,T,I,F,O,k,z):(H&64||H&128)&&R.process(y,m,w,T,I,F,O,k,z,Y)}W!=null&&I&&bi(W,y&&y.ref,F,m||y,!m)},t=(y,m,w,T)=>{if(y==null)l(m.el=o(m.children),w,T);else{const I=m.el=y.el;m.children!==y.children&&b(I,m.children)}},n=(y,m,w,T)=>{y==null?l(m.el=_(m.children||""),w,T):m.el=y.el},r=(y,m,w,T)=>{[y.el,y.anchor]=U(y.children,m,w,T,y.el,y.anchor)},f=({el:y,anchor:m},w,T)=>{let I;for(;y&&y!==m;)I=E(y),l(y,w,T),y=I;l(m,w,T)},h=({el:y,anchor:m})=>{let w;for(;y&&y!==m;)w=E(y),c(y),y=w;c(m)},p=(y,m,w,T,I,F,O,k,z)=>{m.type==="svg"?O="svg":m.type==="math"&&(O="mathml"),y==null?g(m,w,T,I,F,O,k,z):A(y,m,I,F,O,k,z)},g=(y,m,w,T,I,F,O,k)=>{let z,R;const{props:W,shapeFlag:H,transition:$,dirs:q}=y;if(z=y.el=d(y.type,F,W&&W.is,W),H&8?v(z,y.children):H&16&&C(y.children,z,null,T,I,Yi(y,F),O,k),q&&_e(y,null,T,"created"),S(z,y,y.scopeId,O,T),W){for(const ct in W)ct!=="value"&&!je(ct)&&u(z,ct,null,W[ct],F,T);"value"in W&&u(z,"value",null,W.value,F),(R=W.onVnodeBeforeMount)&&$t(R,T,y)}q&&_e(y,null,T,"beforeMount");const et=Ia(I,$);et&&$.beforeEnter(z),l(z,m,w),((R=W&&W.onVnodeMounted)||et||q)&&Ft(()=>{R&&$t(R,T,y),et&&$.enter(z),q&&_e(y,null,T,"mounted")},I)},S=(y,m,w,T,I)=>{if(w&&B(y,w),T)for(let F=0;F<T.length;F++)B(y,T[F]);if(I){let F=I.subTree;if(m===F||zr(F.type)&&(F.ssContent===m||F.ssFallback===m)){const O=I.vnode;S(y,O,O.scopeId,O.slotScopeIds,I.parent)}}},C=(y,m,w,T,I,F,O,k,z=0)=>{for(let R=z;R<y.length;R++){const W=y[R]=k?fe(y[R]):qt(y[R]);G(null,W,m,w,T,I,F,O,k)}},A=(y,m,w,T,I,F,O)=>{const k=m.el=y.el;let{patchFlag:z,dynamicChildren:R,dirs:W}=m;z|=y.patchFlag&16;const H=y.props||ft,$=m.props||ft;let q;if(w&&ge(w,!1),(q=$.onVnodeBeforeUpdate)&&$t(q,w,m,y),W&&_e(m,y,w,"beforeUpdate"),w&&ge(w,!0),(H.innerHTML&&$.innerHTML==null||H.textContent&&$.textContent==null)&&v(k,""),R?L(y.dynamicChildren,R,k,w,T,Yi(m,I),F):O||J(y,m,k,null,w,T,Yi(m,I),F,!1),z>0){if(z&16)M(k,H,$,w,I);else if(z&2&&H.class!==$.class&&u(k,"class",null,$.class,I),z&4&&u(k,"style",H.style,$.style,I),z&8){const et=m.dynamicProps;for(let ct=0;ct<et.length;ct++){const ot=et[ct],Tt=H[ot],At=$[ot];(At!==Tt||ot==="value")&&u(k,ot,Tt,At,I,w)}}z&1&&y.children!==m.children&&v(k,m.children)}else!O&&R==null&&M(k,H,$,w,I);((q=$.onVnodeUpdated)||W)&&Ft(()=>{q&&$t(q,w,m,y),W&&_e(m,y,w,"updated")},T)},L=(y,m,w,T,I,F,O)=>{for(let k=0;k<m.length;k++){const z=y[k],R=m[k],W=z.el&&(z.type===ee||!Oe(z,R)||z.shapeFlag&70)?x(z.el):w;G(z,R,W,null,T,I,F,O,!0)}},M=(y,m,w,T,I)=>{if(m!==w){if(m!==ft)for(const F in m)!je(F)&&!(F in w)&&u(y,F,m[F],null,I,T);for(const F in w){if(je(F))continue;const O=w[F],k=m[F];O!==k&&F!=="value"&&u(y,F,k,O,I,T)}"value"in w&&u(y,"value",m.value,w.value,I)}},j=(y,m,w,T,I,F,O,k,z)=>{const R=m.el=y?y.el:o(""),W=m.anchor=y?y.anchor:o("");let{patchFlag:H,dynamicChildren:$,slotScopeIds:q}=m;q&&(k=k?k.concat(q):q),y==null?(l(R,w,T),l(W,w,T),C(m.children||[],w,W,I,F,O,k,z)):H>0&&H&64&&$&&y.dynamicChildren?(L(y.dynamicChildren,$,w,I,F,O,k),(m.key!=null||I&&m===I.subTree)&&Pr(y,m,!0)):J(y,m,w,W,I,F,O,k,z)},D=(y,m,w,T,I,F,O,k,z)=>{m.slotScopeIds=k,y==null?m.shapeFlag&512?I.ctx.activate(m,w,T,O,z):at(m,w,T,I,F,O,z):it(y,m,z)},at=(y,m,w,T,I,F,O)=>{const k=y.component=Za(y,T,I);if(_r(y)&&(k.ctx.renderer=Y),Qa(k,!1,O),k.asyncDep){if(I&&I.registerDep(k,ut,O),!y.el){const z=k.subTree=yt(xe);n(null,z,m,w)}}else ut(k,y,m,w,I,F,O)},it=(y,m,w)=>{const T=m.component=y.component;if(Ha(y,m,w))if(T.asyncDep&&!T.asyncResolved){tt(T,m,w);return}else T.next=m,T.update();else m.el=y.el,T.vnode=m},ut=(y,m,w,T,I,F,O)=>{const k=()=>{if(y.isMounted){let{next:H,bu:$,u:q,parent:et,vnode:ct}=y;{const jt=Fr(y);if(jt){H&&(H.el=ct.el,tt(y,H,O)),jt.asyncDep.then(()=>{y.isUnmounted||k()});return}}let ot=H,Tt;ge(y,!1),H?(H.el=ct.el,tt(y,H,O)):H=ct,$&&di($),(Tt=H.props&&H.props.onVnodeBeforeUpdate)&&$t(Tt,et,H,ct),ge(y,!0);const At=Ws(y),Yt=y.subTree;y.subTree=At,G(Yt,At,x(Yt.el),P(Yt),y,I,F),H.el=At.el,ot===null&&Ga(y,At.el),q&&Ft(q,I),(Tt=H.props&&H.props.onVnodeUpdated)&&Ft(()=>$t(Tt,et,H,ct),I)}else{let H;const{el:$,props:q}=m,{bm:et,m:ct,parent:ot,root:Tt,type:At}=y,Yt=qe(m);ge(y,!1),et&&di(et),!Yt&&(H=q&&q.onVnodeBeforeMount)&&$t(H,ot,m),ge(y,!0);{Tt.ce&&Tt.ce._injectChildStyle(At);const jt=y.subTree=Ws(y);G(null,jt,w,T,y,I,F),m.el=jt.el}if(ct&&Ft(ct,I),!Yt&&(H=q&&q.onVnodeMounted)){const jt=m;Ft(()=>$t(H,ot,jt),I)}(m.shapeFlag&256||ot&&qe(ot.vnode)&&ot.vnode.shapeFlag&256)&&y.a&&Ft(y.a,I),y.isMounted=!0,m=w=T=null}};y.scope.on();const z=y.effect=new Vn(k);y.scope.off();const R=y.update=z.run.bind(z),W=y.job=z.runIfDirty.bind(z);W.i=y,W.id=y.uid,z.scheduler=()=>As(W),ge(y,!0),R()},tt=(y,m,w)=>{m.component=y;const T=y.vnode.props;y.vnode=m,y.next=null,Ea(y,m.props,T,w),Ta(y,m.children,w),de(),Os(y),pe()},J=(y,m,w,T,I,F,O,k,z=!1)=>{const R=y&&y.children,W=y?y.shapeFlag:0,H=m.children,{patchFlag:$,shapeFlag:q}=m;if($>0){if($&128){mt(R,H,w,T,I,F,O,k,z);return}else if($&256){pt(R,H,w,T,I,F,O,k,z);return}}q&8?(W&16&&kt(R,I,F),H!==R&&v(w,H)):W&16?q&16?mt(R,H,w,T,I,F,O,k,z):kt(R,I,F,!0):(W&8&&v(w,""),q&16&&C(H,w,T,I,F,O,k,z))},pt=(y,m,w,T,I,F,O,k,z)=>{y=y||Ce,m=m||Ce;const R=y.length,W=m.length,H=Math.min(R,W);let $;for($=0;$<H;$++){const q=m[$]=z?fe(m[$]):qt(m[$]);G(y[$],q,w,null,I,F,O,k,z)}R>W?kt(y,I,F,!0,!1,H):C(m,w,T,I,F,O,k,z,H)},mt=(y,m,w,T,I,F,O,k,z)=>{let R=0;const W=m.length;let H=y.length-1,$=W-1;for(;R<=H&&R<=$;){const q=y[R],et=m[R]=z?fe(m[R]):qt(m[R]);if(Oe(q,et))G(q,et,w,null,I,F,O,k,z);else break;R++}for(;R<=H&&R<=$;){const q=y[H],et=m[$]=z?fe(m[$]):qt(m[$]);if(Oe(q,et))G(q,et,w,null,I,F,O,k,z);else break;H--,$--}if(R>H){if(R<=$){const q=$+1,et=q<W?m[q].el:T;for(;R<=$;)G(null,m[R]=z?fe(m[R]):qt(m[R]),w,et,I,F,O,k,z),R++}}else if(R>$)for(;R<=H;)gt(y[R],I,F,!0),R++;else{const q=R,et=R,ct=new Map;for(R=et;R<=$;R++){const Pt=m[R]=z?fe(m[R]):qt(m[R]);Pt.key!=null&&ct.set(Pt.key,R)}let ot,Tt=0;const At=$-et+1;let Yt=!1,jt=0;const Me=new Array(At);for(R=0;R<At;R++)Me[R]=0;for(R=q;R<=H;R++){const Pt=y[R];if(Tt>=At){gt(Pt,I,F,!0);continue}let Kt;if(Pt.key!=null)Kt=ct.get(Pt.key);else for(ot=et;ot<=$;ot++)if(Me[ot-et]===0&&Oe(Pt,m[ot])){Kt=ot;break}Kt===void 0?gt(Pt,I,F,!0):(Me[Kt-et]=R+1,Kt>=jt?jt=Kt:Yt=!0,G(Pt,m[Kt],w,null,I,F,O,k,z),Tt++)}const Rs=Yt?La(Me):Ce;for(ot=Rs.length-1,R=At-1;R>=0;R--){const Pt=et+R,Kt=m[Pt],zs=Pt+1<W?m[Pt+1].el:T;Me[R]===0?G(null,Kt,w,zs,I,F,O,k,z):Yt&&(ot<0||R!==Rs[ot]?wt(Kt,w,zs,2):ot--)}}},wt=(y,m,w,T,I=null)=>{const{el:F,type:O,transition:k,children:z,shapeFlag:R}=y;if(R&6){wt(y.component.subTree,m,w,T);return}if(R&128){y.suspense.move(m,w,T);return}if(R&64){O.move(y,m,w,Y);return}if(O===ee){l(F,m,w);for(let H=0;H<z.length;H++)wt(z[H],m,w,T);l(y.anchor,m,w);return}if(O===ji){f(y,m,w);return}if(T!==2&&R&1&&k)if(T===0)k.beforeEnter(F),l(F,m,w),Ft(()=>k.enter(F),I);else{const{leave:H,delayLeave:$,afterLeave:q}=k,et=()=>l(F,m,w),ct=()=>{H(F,()=>{et(),q&&q()})};$?$(F,et,ct):ct()}else l(F,m,w)},gt=(y,m,w,T=!1,I=!1)=>{const{type:F,props:O,ref:k,children:z,dynamicChildren:R,shapeFlag:W,patchFlag:H,dirs:$,cacheIndex:q}=y;if(H===-2&&(I=!1),k!=null&&bi(k,null,w,y,!0),q!=null&&(m.renderCache[q]=void 0),W&256){m.ctx.deactivate(y);return}const et=W&1&&$,ct=!qe(y);let ot;if(ct&&(ot=O&&O.onVnodeBeforeUnmount)&&$t(ot,m,y),W&6)Q(y.component,w,T);else{if(W&128){y.suspense.unmount(w,T);return}et&&_e(y,null,m,"beforeUnmount"),W&64?y.type.remove(y,m,w,Y,T):R&&!R.hasOnce&&(F!==ee||H>0&&H&64)?kt(R,m,w,!1,!0):(F===ee&&H&384||!I&&W&16)&&kt(z,m,w),T&&Ut(y)}(ct&&(ot=O&&O.onVnodeUnmounted)||et)&&Ft(()=>{ot&&$t(ot,m,y),et&&_e(y,null,m,"unmounted")},w)},Ut=y=>{const{type:m,el:w,anchor:T,transition:I}=y;if(m===ee){zt(w,T);return}if(m===ji){h(y);return}const F=()=>{c(w),I&&!I.persisted&&I.afterLeave&&I.afterLeave()};if(y.shapeFlag&1&&I&&!I.persisted){const{leave:O,delayLeave:k}=I,z=()=>O(w,F);k?k(y.el,F,z):z()}else F()},zt=(y,m)=>{let w;for(;y!==m;)w=E(y),c(y),y=w;c(m)},Q=(y,m,w)=>{const{bum:T,scope:I,job:F,subTree:O,um:k,m:z,a:R}=y;$s(z),$s(R),T&&di(T),I.stop(),F&&(F.flags|=8,gt(O,y,m,w)),k&&Ft(k,m),Ft(()=>{y.isUnmounted=!0},m),m&&m.pendingBranch&&!m.isUnmounted&&y.asyncDep&&!y.asyncResolved&&y.suspenseId===m.pendingId&&(m.deps--,m.deps===0&&m.resolve())},kt=(y,m,w,T=!1,I=!1,F=0)=>{for(let O=F;O<y.length;O++)gt(y[O],m,w,T,I)},P=y=>{if(y.shapeFlag&6)return P(y.component.subTree);if(y.shapeFlag&128)return y.suspense.next();const m=E(y.anchor||y.el),w=m&&m[Jo];return w?E(w):m};let V=!1;const N=(y,m,w)=>{y==null?m._vnode&&gt(m._vnode,null,null,!0):G(m._vnode||null,y,m,null,null,null,w),m._vnode=y,V||(V=!0,Os(),cr(),V=!1)},Y={p:G,um:gt,m:wt,r:Ut,mt:at,mc:C,pc:J,pbc:L,n:P,o:e};return{render:N,hydrate:void 0,createApp:wa(N)}}function Yi({type:e,props:s},a){return a==="svg"&&e==="foreignObject"||a==="mathml"&&e==="annotation-xml"&&s&&s.encoding&&s.encoding.includes("html")?void 0:a}function ge({effect:e,job:s},a){a?(e.flags|=32,s.flags|=4):(e.flags&=-33,s.flags&=-5)}function Ia(e,s){return(!e||e&&!e.pendingBranch)&&s&&!s.persisted}function Pr(e,s,a=!1){const l=e.children,c=s.children;if(X(l)&&X(c))for(let u=0;u<l.length;u++){const d=l[u];let o=c[u];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=c[u]=fe(c[u]),o.el=d.el),!a&&o.patchFlag!==-2&&Pr(d,o)),o.type===zi&&(o.el=d.el)}}function La(e){const s=e.slice(),a=[0];let l,c,u,d,o;const _=e.length;for(l=0;l<_;l++){const b=e[l];if(b!==0){if(c=a[a.length-1],e[c]<b){s[l]=c,a.push(l);continue}for(u=0,d=a.length-1;u<d;)o=u+d>>1,e[a[o]]<b?u=o+1:d=o;b<e[a[u]]&&(u>0&&(s[l]=a[u-1]),a[u]=l)}}for(u=a.length,d=a[u-1];u-- >0;)a[u]=d,d=s[d];return a}function Fr(e){const s=e.subTree.component;if(s)return s.asyncDep&&!s.asyncResolved?s:Fr(s)}function $s(e){if(e)for(let s=0;s<e.length;s++)e[s].flags|=8}const Ra=Symbol.for("v-scx"),za=()=>ne(Ra);function _i(e,s,a){return Ir(e,s,a)}function Ir(e,s,a=ft){const{immediate:l,deep:c,flush:u,once:d}=a,o=St({},a),_=s&&l||!s&&u!=="post";let b;if(ni){if(u==="sync"){const B=za();b=B.__watcherHandles||(B.__watcherHandles=[])}else if(!_){const B=()=>{};return B.stop=Xt,B.resume=Xt,B.pause=Xt,B}}const v=xt;o.call=(B,U,G)=>Zt(B,v,U,G);let x=!1;u==="post"?o.scheduler=B=>{Ft(B,v&&v.suspense)}:u!=="sync"&&(x=!0,o.scheduler=(B,U)=>{U?B():As(B)}),o.augmentJob=B=>{s&&(B.flags|=4),x&&(B.flags|=2,v&&(B.id=v.uid,B.i=v))};const E=qo(e,s,o);return ni&&(b?b.push(E):_&&E()),E}function ka(e,s,a){const l=this.proxy,c=_t(e)?e.includes(".")?Lr(l,e):()=>l[e]:e.bind(l,l);let u;Z(s)?u=s:(u=s.handler,a=s);const d=li(this),o=Ir(c,u.bind(l),a);return d(),o}function Lr(e,s){const a=s.split(".");return()=>{let l=e;for(let c=0;c<a.length&&l;c++)l=l[a[c]];return l}}const Ma=(e,s)=>s==="modelValue"||s==="model-value"?e.modelModifiers:e[`${s}Modifiers`]||e[`${Dt(s)}Modifiers`]||e[`${Se(s)}Modifiers`];function Da(e,s,...a){if(e.isUnmounted)return;const l=e.vnode.props||ft;let c=a;const u=s.startsWith("update:"),d=u&&Ma(l,s.slice(7));d&&(d.trim&&(c=a.map(v=>_t(v)?v.trim():v)),d.number&&(c=a.map(Ji)));let o,_=l[o=Di(s)]||l[o=Di(Dt(s))];!_&&u&&(_=l[o=Di(Se(s))]),_&&Zt(_,e,6,c);const b=l[o+"Once"];if(b){if(!e.emitted)e.emitted={};else if(e.emitted[o])return;e.emitted[o]=!0,Zt(b,e,6,c)}}function Rr(e,s,a=!1){const l=s.emitsCache,c=l.get(e);if(c!==void 0)return c;const u=e.emits;let d={},o=!1;if(!Z(e)){const _=b=>{const v=Rr(b,s,!0);v&&(o=!0,St(d,v))};!a&&s.mixins.length&&s.mixins.forEach(_),e.extends&&_(e.extends),e.mixins&&e.mixins.forEach(_)}return!u&&!o?(dt(e)&&l.set(e,null),null):(X(u)?u.forEach(_=>d[_]=null):St(d,u),dt(e)&&l.set(e,d),d)}function Ri(e,s){return!e||!Bi(s)?!1:(s=s.slice(2).replace(/Once$/,""),rt(e,s[0].toLowerCase()+s.slice(1))||rt(e,Se(s))||rt(e,s))}function Ws(e){const{type:s,vnode:a,proxy:l,withProxy:c,propsOptions:[u],slots:d,attrs:o,emit:_,render:b,renderCache:v,props:x,data:E,setupState:B,ctx:U,inheritAttrs:G}=e,t=xi(e);let n,r;try{if(a.shapeFlag&4){const h=c||l,p=h;n=qt(b.call(p,h,v,x,B,E,U)),r=o}else{const h=s;n=qt(h.length>1?h(x,{attrs:o,slots:d,emit:_}):h(x,null)),r=s.props?o:Oa(o)}}catch(h){Ze.length=0,Ii(h,e,1),n=yt(xe)}let f=n;if(r&&G!==!1){const h=Object.keys(r),{shapeFlag:p}=f;h.length&&p&7&&(u&&h.some(_s)&&(r=Na(r,u)),f=Le(f,r,!1,!0))}return a.dirs&&(f=Le(f,null,!1,!0),f.dirs=f.dirs?f.dirs.concat(a.dirs):a.dirs),a.transition&&Ts(f,a.transition),n=f,xi(t),n}const Oa=e=>{let s;for(const a in e)(a==="class"||a==="style"||Bi(a))&&((s||(s={}))[a]=e[a]);return s},Na=(e,s)=>{const a={};for(const l in e)(!_s(l)||!(l.slice(9)in s))&&(a[l]=e[l]);return a};function Ha(e,s,a){const{props:l,children:c,component:u}=e,{props:d,children:o,patchFlag:_}=s,b=u.emitsOptions;if(s.dirs||s.transition)return!0;if(a&&_>=0){if(_&1024)return!0;if(_&16)return l?qs(l,d,b):!!d;if(_&8){const v=s.dynamicProps;for(let x=0;x<v.length;x++){const E=v[x];if(d[E]!==l[E]&&!Ri(b,E))return!0}}}else return(c||o)&&(!o||!o.$stable)?!0:l===d?!1:l?d?qs(l,d,b):!0:!!d;return!1}function qs(e,s,a){const l=Object.keys(s);if(l.length!==Object.keys(e).length)return!0;for(let c=0;c<l.length;c++){const u=l[c];if(s[u]!==e[u]&&!Ri(a,u))return!0}return!1}function Ga({vnode:e,parent:s},a){for(;s;){const l=s.subTree;if(l.suspense&&l.suspense.activeBranch===e&&(l.el=e.el),l===e)(e=s.vnode).el=a,s=s.parent;else break}}const zr=e=>e.__isSuspense;function Va(e,s){s&&s.pendingBranch?X(e)?s.effects.push(...e):s.effects.push(e):Qo(e)}const ee=Symbol.for("v-fgt"),zi=Symbol.for("v-txt"),xe=Symbol.for("v-cmt"),ji=Symbol.for("v-stc"),Ze=[];let Rt=null;function Mt(e=!1){Ze.push(Rt=e?null:[])}function Ya(){Ze.pop(),Rt=Ze[Ze.length-1]||null}let si=1;function Xs(e,s=!1){si+=e,e<0&&Rt&&s&&(Rt.hasOnce=!0)}function kr(e){return e.dynamicChildren=si>0?Rt||Ce:null,Ya(),si>0&&Rt&&Rt.push(e),e}function Gt(e,s,a,l,c,u){return kr(K(e,s,a,l,c,u,!0))}function ja(e,s,a,l,c){return kr(yt(e,s,a,l,c,!0))}function wi(e){return e?e.__v_isVNode===!0:!1}function Oe(e,s){return e.type===s.type&&e.key===s.key}const Mr=({key:e})=>e??null,gi=({ref:e,ref_key:s,ref_for:a})=>(typeof e=="number"&&(e=""+e),e!=null?_t(e)||bt(e)||Z(e)?{i:Lt,r:e,k:s,f:!!a}:e:null);function K(e,s=null,a=null,l=0,c=null,u=e===ee?0:1,d=!1,o=!1){const _={__v_isVNode:!0,__v_skip:!0,type:e,props:s,key:s&&Mr(s),ref:s&&gi(s),scopeId:ur,slotScopeIds:null,children:a,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:u,patchFlag:l,dynamicProps:c,dynamicChildren:null,appContext:null,ctx:Lt};return o?(Fs(_,a),u&128&&e.normalize(_)):a&&(_.shapeFlag|=_t(a)?8:16),si>0&&!d&&Rt&&(_.patchFlag>0||u&6)&&_.patchFlag!==32&&Rt.push(_),_}const yt=Ka;function Ka(e,s=null,a=null,l=0,c=null,u=!1){if((!e||e===pa)&&(e=xe),wi(e)){const o=Le(e,s,!0);return a&&Fs(o,a),si>0&&!u&&Rt&&(o.shapeFlag&6?Rt[Rt.indexOf(e)]=o:Rt.push(o)),o.patchFlag=-2,o}if(sl(e)&&(e=e.__vccOpts),s){s=$a(s);let{class:o,style:_}=s;o&&!_t(o)&&(s.class=vs(o)),dt(_)&&(Cs(_)&&!X(_)&&(_=St({},_)),s.style=ms(_))}const d=_t(e)?1:zr(e)?128:ta(e)?64:dt(e)?4:Z(e)?2:0;return K(e,s,a,l,c,d,u,!0)}function $a(e){return e?Cs(e)||wr(e)?St({},e):e:null}function Le(e,s,a=!1,l=!1){const{props:c,ref:u,patchFlag:d,children:o,transition:_}=e,b=s?Wa(c||{},s):c,v={__v_isVNode:!0,__v_skip:!0,type:e.type,props:b,key:b&&Mr(b),ref:s&&s.ref?a&&u?X(u)?u.concat(gi(s)):[u,gi(s)]:gi(s):u,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:s&&e.type!==ee?d===-1?16:d|16:d,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:_,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Le(e.ssContent),ssFallback:e.ssFallback&&Le(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return _&&l&&Ts(v,_.clone(v)),v}function Ye(e=" ",s=0){return yt(zi,null,e,s)}function Re(e="",s=!1){return s?(Mt(),ja(xe,null,e)):yt(xe,null,e)}function qt(e){return e==null||typeof e=="boolean"?yt(xe):X(e)?yt(ee,null,e.slice()):wi(e)?fe(e):yt(zi,null,String(e))}function fe(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Le(e)}function Fs(e,s){let a=0;const{shapeFlag:l}=e;if(s==null)s=null;else if(X(s))a=16;else if(typeof s=="object")if(l&65){const c=s.default;c&&(c._c&&(c._d=!1),Fs(e,c()),c._c&&(c._d=!0));return}else{a=32;const c=s._;!c&&!wr(s)?s._ctx=Lt:c===3&&Lt&&(Lt.slots._===1?s._=1:(s._=2,e.patchFlag|=1024))}else Z(s)?(s={default:s,_ctx:Lt},a=32):(s=String(s),l&64?(a=16,s=[Ye(s)]):a=8);e.children=s,e.shapeFlag|=a}function Wa(...e){const s={};for(let a=0;a<e.length;a++){const l=e[a];for(const c in l)if(c==="class")s.class!==l.class&&(s.class=vs([s.class,l.class]));else if(c==="style")s.style=ms([s.style,l.style]);else if(Bi(c)){const u=s[c],d=l[c];d&&u!==d&&!(X(u)&&u.includes(d))&&(s[c]=u?[].concat(u,d):d)}else c!==""&&(s[c]=l[c])}return s}function $t(e,s,a,l=null){Zt(e,s,7,[a,l])}const qa=xr();let Xa=0;function Za(e,s,a){const l=e.type,c=(s?s.appContext:e.appContext)||qa,u={uid:Xa++,vnode:e,type:l,parent:s,appContext:c,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new bo(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:s?s.provides:Object.create(c.provides),ids:s?s.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Er(l,c),emitsOptions:Rr(l,c),emit:null,emitted:null,propsDefaults:ft,inheritAttrs:l.inheritAttrs,ctx:ft,data:ft,props:ft,attrs:ft,slots:ft,refs:ft,setupState:ft,setupContext:null,suspense:a,suspenseId:a?a.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return u.ctx={_:u},u.root=s?s.root:u,u.emit=Da.bind(null,u),e.ce&&e.ce(u),u}let xt=null,Ui,fs;{const e=Pi(),s=(a,l)=>{let c;return(c=e[a])||(c=e[a]=[]),c.push(l),u=>{c.length>1?c.forEach(d=>d(u)):c[0](u)}};Ui=s("__VUE_INSTANCE_SETTERS__",a=>xt=a),fs=s("__VUE_SSR_SETTERS__",a=>ni=a)}const li=e=>{const s=xt;return Ui(e),e.scope.on(),()=>{e.scope.off(),Ui(s)}},Zs=()=>{xt&&xt.scope.off(),Ui(null)};function Dr(e){return e.vnode.shapeFlag&4}let ni=!1;function Qa(e,s=!1,a=!1){s&&fs(s);const{props:l,children:c}=e.vnode,u=Dr(e);Ua(e,l,u,s),Aa(e,c,a);const d=u?Ja(e,s):void 0;return s&&fs(!1),d}function Ja(e,s){const a=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,ga);const{setup:l}=a;if(l){de();const c=e.setupContext=l.length>1?el(e):null,u=li(e),d=ai(l,e,0,[e.props,c]),o=kn(d);if(pe(),u(),(o||e.sp)&&!qe(e)&&pr(e),o){if(d.then(Zs,Zs),s)return d.then(_=>{Qs(e,_)}).catch(_=>{Ii(_,e,0)});e.asyncDep=d}else Qs(e,d)}else Or(e)}function Qs(e,s,a){Z(s)?e.type.__ssrInlineRender?e.ssrRender=s:e.render=s:dt(s)&&(e.setupState=or(s)),Or(e)}function Or(e,s,a){const l=e.type;e.render||(e.render=l.render||Xt);{const c=li(e);de();try{ya(e)}finally{pe(),c()}}}const tl={get(e,s){return vt(e,"get",""),e[s]}};function el(e){const s=a=>{e.exposed=a||{}};return{attrs:new Proxy(e.attrs,tl),slots:e.slots,emit:e.emit,expose:s}}function ki(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(or(Ho(e.exposed)),{get(s,a){if(a in s)return s[a];if(a in Xe)return Xe[a](e)},has(s,a){return a in s||a in Xe}})):e.proxy}function il(e,s=!0){return Z(e)?e.displayName||e.name:e.name||s&&e.__name}function sl(e){return Z(e)&&"__vccOpts"in e}const Ot=(e,s)=>$o(e,s,ni);function Nr(e,s,a){const l=arguments.length;return l===2?dt(s)&&!X(s)?wi(s)?yt(e,null,[s]):yt(e,s):yt(e,null,s):(l>3?a=Array.prototype.slice.call(arguments,2):l===3&&wi(a)&&(a=[a]),yt(e,s,a))}const nl="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let cs;const Js=typeof window<"u"&&window.trustedTypes;if(Js)try{cs=Js.createPolicy("vue",{createHTML:e=>e})}catch{}const Hr=cs?e=>cs.createHTML(e):e=>e,rl="http://www.w3.org/2000/svg",ol="http://www.w3.org/1998/Math/MathML",te=typeof document<"u"?document:null,tn=te&&te.createElement("template"),al={insert:(e,s,a)=>{s.insertBefore(e,a||null)},remove:e=>{const s=e.parentNode;s&&s.removeChild(e)},createElement:(e,s,a,l)=>{const c=s==="svg"?te.createElementNS(rl,e):s==="mathml"?te.createElementNS(ol,e):a?te.createElement(e,{is:a}):te.createElement(e);return e==="select"&&l&&l.multiple!=null&&c.setAttribute("multiple",l.multiple),c},createText:e=>te.createTextNode(e),createComment:e=>te.createComment(e),setText:(e,s)=>{e.nodeValue=s},setElementText:(e,s)=>{e.textContent=s},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>te.querySelector(e),setScopeId(e,s){e.setAttribute(s,"")},insertStaticContent(e,s,a,l,c,u){const d=a?a.previousSibling:s.lastChild;if(c&&(c===u||c.nextSibling))for(;s.insertBefore(c.cloneNode(!0),a),!(c===u||!(c=c.nextSibling)););else{tn.innerHTML=Hr(l==="svg"?`<svg>${e}</svg>`:l==="mathml"?`<math>${e}</math>`:e);const o=tn.content;if(l==="svg"||l==="mathml"){const _=o.firstChild;for(;_.firstChild;)o.appendChild(_.firstChild);o.removeChild(_)}s.insertBefore(o,a)}return[d?d.nextSibling:s.firstChild,a?a.previousSibling:s.lastChild]}},ll=Symbol("_vtc");function fl(e,s,a){const l=e[ll];l&&(s=(s?[s,...l]:[...l]).join(" ")),s==null?e.removeAttribute("class"):a?e.setAttribute("class",s):e.className=s}const Ei=Symbol("_vod"),Gr=Symbol("_vsh"),en={beforeMount(e,{value:s},{transition:a}){e[Ei]=e.style.display==="none"?"":e.style.display,a&&s?a.beforeEnter(e):Ne(e,s)},mounted(e,{value:s},{transition:a}){a&&s&&a.enter(e)},updated(e,{value:s,oldValue:a},{transition:l}){!s!=!a&&(l?s?(l.beforeEnter(e),Ne(e,!0),l.enter(e)):l.leave(e,()=>{Ne(e,!1)}):Ne(e,s))},beforeUnmount(e,{value:s}){Ne(e,s)}};function Ne(e,s){e.style.display=s?e[Ei]:"none",e[Gr]=!s}const cl=Symbol(""),hl=/(^|;)\s*display\s*:/;function ul(e,s,a){const l=e.style,c=_t(a);let u=!1;if(a&&!c){if(s)if(_t(s))for(const d of s.split(";")){const o=d.slice(0,d.indexOf(":")).trim();a[o]==null&&yi(l,o,"")}else for(const d in s)a[d]==null&&yi(l,d,"");for(const d in a)d==="display"&&(u=!0),yi(l,d,a[d])}else if(c){if(s!==a){const d=l[cl];d&&(a+=";"+d),l.cssText=a,u=hl.test(a)}}else s&&e.removeAttribute("style");Ei in e&&(e[Ei]=u?l.display:"",e[Gr]&&(l.display="none"))}const sn=/\s*!important$/;function yi(e,s,a){if(X(a))a.forEach(l=>yi(e,s,l));else if(a==null&&(a=""),s.startsWith("--"))e.setProperty(s,a);else{const l=dl(e,s);sn.test(a)?e.setProperty(Se(l),a.replace(sn,""),"important"):e[l]=a}}const nn=["Webkit","Moz","ms"],Ki={};function dl(e,s){const a=Ki[s];if(a)return a;let l=Dt(s);if(l!=="filter"&&l in e)return Ki[s]=l;l=Ti(l);for(let c=0;c<nn.length;c++){const u=nn[c]+l;if(u in e)return Ki[s]=u}return s}const rn="http://www.w3.org/1999/xlink";function on(e,s,a,l,c,u=xo(s)){l&&s.startsWith("xlink:")?a==null?e.removeAttributeNS(rn,s.slice(6,s.length)):e.setAttributeNS(rn,s,a):a==null||u&&!Nn(a)?e.removeAttribute(s):e.setAttribute(s,u?"":ue(a)?String(a):a)}function an(e,s,a,l,c){if(s==="innerHTML"||s==="textContent"){a!=null&&(e[s]=s==="innerHTML"?Hr(a):a);return}const u=e.tagName;if(s==="value"&&u!=="PROGRESS"&&!u.includes("-")){const o=u==="OPTION"?e.getAttribute("value")||"":e.value,_=a==null?e.type==="checkbox"?"on":"":String(a);(o!==_||!("_value"in e))&&(e.value=_),a==null&&e.removeAttribute(s),e._value=a;return}let d=!1;if(a===""||a==null){const o=typeof e[s];o==="boolean"?a=Nn(a):a==null&&o==="string"?(a="",d=!0):o==="number"&&(a=0,d=!0)}try{e[s]=a}catch{}d&&e.removeAttribute(c||s)}function Ee(e,s,a,l){e.addEventListener(s,a,l)}function pl(e,s,a,l){e.removeEventListener(s,a,l)}const ln=Symbol("_vei");function _l(e,s,a,l,c=null){const u=e[ln]||(e[ln]={}),d=u[s];if(l&&d)d.value=l;else{const[o,_]=gl(s);if(l){const b=u[s]=vl(l,c);Ee(e,o,b,_)}else d&&(pl(e,o,d,_),u[s]=void 0)}}const fn=/(?:Once|Passive|Capture)$/;function gl(e){let s;if(fn.test(e)){s={};let l;for(;l=e.match(fn);)e=e.slice(0,e.length-l[0].length),s[l[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Se(e.slice(2)),s]}let $i=0;const yl=Promise.resolve(),ml=()=>$i||(yl.then(()=>$i=0),$i=Date.now());function vl(e,s){const a=l=>{if(!l._vts)l._vts=Date.now();else if(l._vts<=a.attached)return;Zt(xl(l,a.value),s,5,[l])};return a.value=e,a.attached=ml(),a}function xl(e,s){if(X(s)){const a=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{a.call(e),e._stopped=!0},s.map(l=>c=>!c._stopped&&l&&l(c))}else return s}const cn=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,bl=(e,s,a,l,c,u)=>{const d=c==="svg";s==="class"?fl(e,l,d):s==="style"?ul(e,a,l):Bi(s)?_s(s)||_l(e,s,a,l,u):(s[0]==="."?(s=s.slice(1),!0):s[0]==="^"?(s=s.slice(1),!1):Sl(e,s,l,d))?(an(e,s,l),!e.tagName.includes("-")&&(s==="value"||s==="checked"||s==="selected")&&on(e,s,l,d,u,s!=="value")):e._isVueCE&&(/[A-Z]/.test(s)||!_t(l))?an(e,Dt(s),l,u,s):(s==="true-value"?e._trueValue=l:s==="false-value"&&(e._falseValue=l),on(e,s,l,d))};function Sl(e,s,a,l){if(l)return!!(s==="innerHTML"||s==="textContent"||s in e&&cn(s)&&Z(a));if(s==="spellcheck"||s==="draggable"||s==="translate"||s==="form"||s==="list"&&e.tagName==="INPUT"||s==="type"&&e.tagName==="TEXTAREA")return!1;if(s==="width"||s==="height"){const c=e.tagName;if(c==="IMG"||c==="VIDEO"||c==="CANVAS"||c==="SOURCE")return!1}return cn(s)&&_t(a)?!1:s in e}const hn=e=>{const s=e.props["onUpdate:modelValue"]||!1;return X(s)?a=>di(s,a):s};function wl(e){e.target.composing=!0}function un(e){const s=e.target;s.composing&&(s.composing=!1,s.dispatchEvent(new Event("input")))}const Wi=Symbol("_assign"),be={created(e,{modifiers:{lazy:s,trim:a,number:l}},c){e[Wi]=hn(c);const u=l||c.props&&c.props.type==="number";Ee(e,s?"change":"input",d=>{if(d.target.composing)return;let o=e.value;a&&(o=o.trim()),u&&(o=Ji(o)),e[Wi](o)}),a&&Ee(e,"change",()=>{e.value=e.value.trim()}),s||(Ee(e,"compositionstart",wl),Ee(e,"compositionend",un),Ee(e,"change",un))},mounted(e,{value:s}){e.value=s??""},beforeUpdate(e,{value:s,oldValue:a,modifiers:{lazy:l,trim:c,number:u}},d){if(e[Wi]=hn(d),e.composing)return;const o=(u||e.type==="number")&&!/^0\d/.test(e.value)?Ji(e.value):e.value,_=s??"";o!==_&&(document.activeElement===e&&e.type!=="range"&&(l&&s===a||c&&e.value.trim()===_)||(e.value=_))}},Ul=St({patchProp:bl},al);let dn;function El(){return dn||(dn=Pa(Ul))}const Bl=(...e)=>{const s=El().createApp(...e),{mount:a}=s;return s.mount=l=>{const c=Al(l);if(!c)return;const u=s._component;!Z(u)&&!u.render&&!u.template&&(u.template=c.innerHTML),c.nodeType===1&&(c.textContent="");const d=a(c,!1,Cl(c));return c instanceof Element&&(c.removeAttribute("v-cloak"),c.setAttribute("data-v-app","")),d},s};function Cl(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Al(e){return _t(e)?document.querySelector(e):e}const fi=(e,s)=>{const a=e.__vccOpts||e;for(const[l,c]of s)a[l]=c;return a},Tl={name:"App",computed:{supportsFileAPI(){return"showSaveFilePicker"in window}}},Pl={id:"app"};function Fl(e,s,a,l,c,u){const d=Ns("router-link"),o=Ns("router-view");return Mt(),Gt("div",Pl,[K("nav",null,[yt(d,{to:"/message"},{default:Ge(()=>s[0]||(s[0]=[Ye("消息")])),_:1}),re(yt(d,{to:"/file"},{default:Ge(()=>s[1]||(s[1]=[Ye("文件")])),_:1},512),[[en,u.supportsFileAPI]]),re(yt(d,{to:"/file-classic"},{default:Ge(()=>s[2]||(s[2]=[Ye("文件2")])),_:1},512),[[en,!u.supportsFileAPI]]),yt(d,{to:"/video-decrypt"},{default:Ge(()=>s[3]||(s[3]=[Ye("视频解密")])),_:1})]),yt(o)])}const Il=fi(Tl,[["render",Fl]]);/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Be=typeof document<"u";function Vr(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Ll(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&Vr(e.default)}const st=Object.assign;function qi(e,s){const a={};for(const l in s){const c=s[l];a[l]=Vt(c)?c.map(e):e(c)}return a}const Qe=()=>{},Vt=Array.isArray,Yr=/#/g,Rl=/&/g,zl=/\//g,kl=/=/g,Ml=/\?/g,jr=/\+/g,Dl=/%5B/g,Ol=/%5D/g,Kr=/%5E/g,Nl=/%60/g,$r=/%7B/g,Hl=/%7C/g,Wr=/%7D/g,Gl=/%20/g;function Is(e){return encodeURI(""+e).replace(Hl,"|").replace(Dl,"[").replace(Ol,"]")}function Vl(e){return Is(e).replace($r,"{").replace(Wr,"}").replace(Kr,"^")}function hs(e){return Is(e).replace(jr,"%2B").replace(Gl,"+").replace(Yr,"%23").replace(Rl,"%26").replace(Nl,"`").replace($r,"{").replace(Wr,"}").replace(Kr,"^")}function Yl(e){return hs(e).replace(kl,"%3D")}function jl(e){return Is(e).replace(Yr,"%23").replace(Ml,"%3F")}function Kl(e){return e==null?"":jl(e).replace(zl,"%2F")}function ri(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const $l=/\/$/,Wl=e=>e.replace($l,"");function Xi(e,s,a="/"){let l,c={},u="",d="";const o=s.indexOf("#");let _=s.indexOf("?");return o<_&&o>=0&&(_=-1),_>-1&&(l=s.slice(0,_),u=s.slice(_+1,o>-1?o:s.length),c=e(u)),o>-1&&(l=l||s.slice(0,o),d=s.slice(o,s.length)),l=Ql(l??s,a),{fullPath:l+(u&&"?")+u+d,path:l,query:c,hash:ri(d)}}function ql(e,s){const a=s.query?e(s.query):"";return s.path+(a&&"?")+a+(s.hash||"")}function pn(e,s){return!s||!e.toLowerCase().startsWith(s.toLowerCase())?e:e.slice(s.length)||"/"}function Xl(e,s,a){const l=s.matched.length-1,c=a.matched.length-1;return l>-1&&l===c&&ze(s.matched[l],a.matched[c])&&qr(s.params,a.params)&&e(s.query)===e(a.query)&&s.hash===a.hash}function ze(e,s){return(e.aliasOf||e)===(s.aliasOf||s)}function qr(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const a in e)if(!Zl(e[a],s[a]))return!1;return!0}function Zl(e,s){return Vt(e)?_n(e,s):Vt(s)?_n(s,e):e===s}function _n(e,s){return Vt(s)?e.length===s.length&&e.every((a,l)=>a===s[l]):e.length===1&&e[0]===s}function Ql(e,s){if(e.startsWith("/"))return e;if(!e)return s;const a=s.split("/"),l=e.split("/"),c=l[l.length-1];(c===".."||c===".")&&l.push("");let u=a.length-1,d,o;for(d=0;d<l.length;d++)if(o=l[d],o!==".")if(o==="..")u>1&&u--;else break;return a.slice(0,u).join("/")+"/"+l.slice(d).join("/")}const ae={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var oi;(function(e){e.pop="pop",e.push="push"})(oi||(oi={}));var Je;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Je||(Je={}));function Jl(e){if(!e)if(Be){const s=document.querySelector("base");e=s&&s.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Wl(e)}const tf=/^[^#]+#/;function ef(e,s){return e.replace(tf,"#")+s}function sf(e,s){const a=document.documentElement.getBoundingClientRect(),l=e.getBoundingClientRect();return{behavior:s.behavior,left:l.left-a.left-(s.left||0),top:l.top-a.top-(s.top||0)}}const Mi=()=>({left:window.scrollX,top:window.scrollY});function nf(e){let s;if("el"in e){const a=e.el,l=typeof a=="string"&&a.startsWith("#"),c=typeof a=="string"?l?document.getElementById(a.slice(1)):document.querySelector(a):a;if(!c)return;s=sf(c,e)}else s=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(s):window.scrollTo(s.left!=null?s.left:window.scrollX,s.top!=null?s.top:window.scrollY)}function gn(e,s){return(history.state?history.state.position-s:-1)+e}const us=new Map;function rf(e,s){us.set(e,s)}function of(e){const s=us.get(e);return us.delete(e),s}let af=()=>location.protocol+"//"+location.host;function Xr(e,s){const{pathname:a,search:l,hash:c}=s,u=e.indexOf("#");if(u>-1){let o=c.includes(e.slice(u))?e.slice(u).length:1,_=c.slice(o);return _[0]!=="/"&&(_="/"+_),pn(_,"")}return pn(a,e)+l+c}function lf(e,s,a,l){let c=[],u=[],d=null;const o=({state:E})=>{const B=Xr(e,location),U=a.value,G=s.value;let t=0;if(E){if(a.value=B,s.value=E,d&&d===U){d=null;return}t=G?E.position-G.position:0}else l(B);c.forEach(n=>{n(a.value,U,{delta:t,type:oi.pop,direction:t?t>0?Je.forward:Je.back:Je.unknown})})};function _(){d=a.value}function b(E){c.push(E);const B=()=>{const U=c.indexOf(E);U>-1&&c.splice(U,1)};return u.push(B),B}function v(){const{history:E}=window;E.state&&E.replaceState(st({},E.state,{scroll:Mi()}),"")}function x(){for(const E of u)E();u=[],window.removeEventListener("popstate",o),window.removeEventListener("beforeunload",v)}return window.addEventListener("popstate",o),window.addEventListener("beforeunload",v,{passive:!0}),{pauseListeners:_,listen:b,destroy:x}}function yn(e,s,a,l=!1,c=!1){return{back:e,current:s,forward:a,replaced:l,position:window.history.length,scroll:c?Mi():null}}function ff(e){const{history:s,location:a}=window,l={value:Xr(e,a)},c={value:s.state};c.value||u(l.value,{back:null,current:l.value,forward:null,position:s.length-1,replaced:!0,scroll:null},!0);function u(_,b,v){const x=e.indexOf("#"),E=x>-1?(a.host&&document.querySelector("base")?e:e.slice(x))+_:af()+e+_;try{s[v?"replaceState":"pushState"](b,"",E),c.value=b}catch(B){console.error(B),a[v?"replace":"assign"](E)}}function d(_,b){const v=st({},s.state,yn(c.value.back,_,c.value.forward,!0),b,{position:c.value.position});u(_,v,!0),l.value=_}function o(_,b){const v=st({},c.value,s.state,{forward:_,scroll:Mi()});u(v.current,v,!0);const x=st({},yn(l.value,_,null),{position:v.position+1},b);u(_,x,!1),l.value=_}return{location:l,state:c,push:o,replace:d}}function cf(e){e=Jl(e);const s=ff(e),a=lf(e,s.state,s.location,s.replace);function l(u,d=!0){d||a.pauseListeners(),history.go(u)}const c=st({location:"",base:e,go:l,createHref:ef.bind(null,e)},s,a);return Object.defineProperty(c,"location",{enumerable:!0,get:()=>s.location.value}),Object.defineProperty(c,"state",{enumerable:!0,get:()=>s.state.value}),c}function hf(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),cf(e)}function uf(e){return typeof e=="string"||e&&typeof e=="object"}function Zr(e){return typeof e=="string"||typeof e=="symbol"}const Qr=Symbol("");var mn;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(mn||(mn={}));function ke(e,s){return st(new Error,{type:e,[Qr]:!0},s)}function Jt(e,s){return e instanceof Error&&Qr in e&&(s==null||!!(e.type&s))}const vn="[^/]+?",df={sensitive:!1,strict:!1,start:!0,end:!0},pf=/[.+*?^${}()[\]/\\]/g;function _f(e,s){const a=st({},df,s),l=[];let c=a.start?"^":"";const u=[];for(const b of e){const v=b.length?[]:[90];a.strict&&!b.length&&(c+="/");for(let x=0;x<b.length;x++){const E=b[x];let B=40+(a.sensitive?.25:0);if(E.type===0)x||(c+="/"),c+=E.value.replace(pf,"\\$&"),B+=40;else if(E.type===1){const{value:U,repeatable:G,optional:t,regexp:n}=E;u.push({name:U,repeatable:G,optional:t});const r=n||vn;if(r!==vn){B+=10;try{new RegExp(`(${r})`)}catch(h){throw new Error(`Invalid custom RegExp for param "${U}" (${r}): `+h.message)}}let f=G?`((?:${r})(?:/(?:${r}))*)`:`(${r})`;x||(f=t&&b.length<2?`(?:/${f})`:"/"+f),t&&(f+="?"),c+=f,B+=20,t&&(B+=-8),G&&(B+=-20),r===".*"&&(B+=-50)}v.push(B)}l.push(v)}if(a.strict&&a.end){const b=l.length-1;l[b][l[b].length-1]+=.7000000000000001}a.strict||(c+="/?"),a.end?c+="$":a.strict&&!c.endsWith("/")&&(c+="(?:/|$)");const d=new RegExp(c,a.sensitive?"":"i");function o(b){const v=b.match(d),x={};if(!v)return null;for(let E=1;E<v.length;E++){const B=v[E]||"",U=u[E-1];x[U.name]=B&&U.repeatable?B.split("/"):B}return x}function _(b){let v="",x=!1;for(const E of e){(!x||!v.endsWith("/"))&&(v+="/"),x=!1;for(const B of E)if(B.type===0)v+=B.value;else if(B.type===1){const{value:U,repeatable:G,optional:t}=B,n=U in b?b[U]:"";if(Vt(n)&&!G)throw new Error(`Provided param "${U}" is an array but it is not repeatable (* or + modifiers)`);const r=Vt(n)?n.join("/"):n;if(!r)if(t)E.length<2&&(v.endsWith("/")?v=v.slice(0,-1):x=!0);else throw new Error(`Missing required param "${U}"`);v+=r}}return v||"/"}return{re:d,score:l,keys:u,parse:o,stringify:_}}function gf(e,s){let a=0;for(;a<e.length&&a<s.length;){const l=s[a]-e[a];if(l)return l;a++}return e.length<s.length?e.length===1&&e[0]===80?-1:1:e.length>s.length?s.length===1&&s[0]===80?1:-1:0}function Jr(e,s){let a=0;const l=e.score,c=s.score;for(;a<l.length&&a<c.length;){const u=gf(l[a],c[a]);if(u)return u;a++}if(Math.abs(c.length-l.length)===1){if(xn(l))return 1;if(xn(c))return-1}return c.length-l.length}function xn(e){const s=e[e.length-1];return e.length>0&&s[s.length-1]<0}const yf={type:0,value:""},mf=/[a-zA-Z0-9_]/;function vf(e){if(!e)return[[]];if(e==="/")return[[yf]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function s(B){throw new Error(`ERR (${a})/"${b}": ${B}`)}let a=0,l=a;const c=[];let u;function d(){u&&c.push(u),u=[]}let o=0,_,b="",v="";function x(){b&&(a===0?u.push({type:0,value:b}):a===1||a===2||a===3?(u.length>1&&(_==="*"||_==="+")&&s(`A repeatable param (${b}) must be alone in its segment. eg: '/:ids+.`),u.push({type:1,value:b,regexp:v,repeatable:_==="*"||_==="+",optional:_==="*"||_==="?"})):s("Invalid state to consume buffer"),b="")}function E(){b+=_}for(;o<e.length;){if(_=e[o++],_==="\\"&&a!==2){l=a,a=4;continue}switch(a){case 0:_==="/"?(b&&x(),d()):_===":"?(x(),a=1):E();break;case 4:E(),a=l;break;case 1:_==="("?a=2:mf.test(_)?E():(x(),a=0,_!=="*"&&_!=="?"&&_!=="+"&&o--);break;case 2:_===")"?v[v.length-1]=="\\"?v=v.slice(0,-1)+_:a=3:v+=_;break;case 3:x(),a=0,_!=="*"&&_!=="?"&&_!=="+"&&o--,v="";break;default:s("Unknown state");break}}return a===2&&s(`Unfinished custom RegExp for param "${b}"`),x(),d(),c}function xf(e,s,a){const l=_f(vf(e.path),a),c=st(l,{record:e,parent:s,children:[],alias:[]});return s&&!c.record.aliasOf==!s.record.aliasOf&&s.children.push(c),c}function bf(e,s){const a=[],l=new Map;s=Un({strict:!1,end:!0,sensitive:!1},s);function c(x){return l.get(x)}function u(x,E,B){const U=!B,G=Sn(x);G.aliasOf=B&&B.record;const t=Un(s,x),n=[G];if("alias"in x){const h=typeof x.alias=="string"?[x.alias]:x.alias;for(const p of h)n.push(Sn(st({},G,{components:B?B.record.components:G.components,path:p,aliasOf:B?B.record:G})))}let r,f;for(const h of n){const{path:p}=h;if(E&&p[0]!=="/"){const g=E.record.path,S=g[g.length-1]==="/"?"":"/";h.path=E.record.path+(p&&S+p)}if(r=xf(h,E,t),B?B.alias.push(r):(f=f||r,f!==r&&f.alias.push(r),U&&x.name&&!wn(r)&&d(x.name)),to(r)&&_(r),G.children){const g=G.children;for(let S=0;S<g.length;S++)u(g[S],r,B&&B.children[S])}B=B||r}return f?()=>{d(f)}:Qe}function d(x){if(Zr(x)){const E=l.get(x);E&&(l.delete(x),a.splice(a.indexOf(E),1),E.children.forEach(d),E.alias.forEach(d))}else{const E=a.indexOf(x);E>-1&&(a.splice(E,1),x.record.name&&l.delete(x.record.name),x.children.forEach(d),x.alias.forEach(d))}}function o(){return a}function _(x){const E=Uf(x,a);a.splice(E,0,x),x.record.name&&!wn(x)&&l.set(x.record.name,x)}function b(x,E){let B,U={},G,t;if("name"in x&&x.name){if(B=l.get(x.name),!B)throw ke(1,{location:x});t=B.record.name,U=st(bn(E.params,B.keys.filter(f=>!f.optional).concat(B.parent?B.parent.keys.filter(f=>f.optional):[]).map(f=>f.name)),x.params&&bn(x.params,B.keys.map(f=>f.name))),G=B.stringify(U)}else if(x.path!=null)G=x.path,B=a.find(f=>f.re.test(G)),B&&(U=B.parse(G),t=B.record.name);else{if(B=E.name?l.get(E.name):a.find(f=>f.re.test(E.path)),!B)throw ke(1,{location:x,currentLocation:E});t=B.record.name,U=st({},E.params,x.params),G=B.stringify(U)}const n=[];let r=B;for(;r;)n.unshift(r.record),r=r.parent;return{name:t,path:G,params:U,matched:n,meta:wf(n)}}e.forEach(x=>u(x));function v(){a.length=0,l.clear()}return{addRoute:u,resolve:b,removeRoute:d,clearRoutes:v,getRoutes:o,getRecordMatcher:c}}function bn(e,s){const a={};for(const l of s)l in e&&(a[l]=e[l]);return a}function Sn(e){const s={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:Sf(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(s,"mods",{value:{}}),s}function Sf(e){const s={},a=e.props||!1;if("component"in e)s.default=a;else for(const l in e.components)s[l]=typeof a=="object"?a[l]:a;return s}function wn(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function wf(e){return e.reduce((s,a)=>st(s,a.meta),{})}function Un(e,s){const a={};for(const l in e)a[l]=l in s?s[l]:e[l];return a}function Uf(e,s){let a=0,l=s.length;for(;a!==l;){const u=a+l>>1;Jr(e,s[u])<0?l=u:a=u+1}const c=Ef(e);return c&&(l=s.lastIndexOf(c,l-1)),l}function Ef(e){let s=e;for(;s=s.parent;)if(to(s)&&Jr(e,s)===0)return s}function to({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function Bf(e){const s={};if(e===""||e==="?")return s;const l=(e[0]==="?"?e.slice(1):e).split("&");for(let c=0;c<l.length;++c){const u=l[c].replace(jr," "),d=u.indexOf("="),o=ri(d<0?u:u.slice(0,d)),_=d<0?null:ri(u.slice(d+1));if(o in s){let b=s[o];Vt(b)||(b=s[o]=[b]),b.push(_)}else s[o]=_}return s}function En(e){let s="";for(let a in e){const l=e[a];if(a=Yl(a),l==null){l!==void 0&&(s+=(s.length?"&":"")+a);continue}(Vt(l)?l.map(u=>u&&hs(u)):[l&&hs(l)]).forEach(u=>{u!==void 0&&(s+=(s.length?"&":"")+a,u!=null&&(s+="="+u))})}return s}function Cf(e){const s={};for(const a in e){const l=e[a];l!==void 0&&(s[a]=Vt(l)?l.map(c=>c==null?null:""+c):l==null?l:""+l)}return s}const Af=Symbol(""),Bn=Symbol(""),Ls=Symbol(""),eo=Symbol(""),ds=Symbol("");function He(){let e=[];function s(l){return e.push(l),()=>{const c=e.indexOf(l);c>-1&&e.splice(c,1)}}function a(){e=[]}return{add:s,list:()=>e.slice(),reset:a}}function ce(e,s,a,l,c,u=d=>d()){const d=l&&(l.enterCallbacks[c]=l.enterCallbacks[c]||[]);return()=>new Promise((o,_)=>{const b=E=>{E===!1?_(ke(4,{from:a,to:s})):E instanceof Error?_(E):uf(E)?_(ke(2,{from:s,to:E})):(d&&l.enterCallbacks[c]===d&&typeof E=="function"&&d.push(E),o())},v=u(()=>e.call(l&&l.instances[c],s,a,b));let x=Promise.resolve(v);e.length<3&&(x=x.then(b)),x.catch(E=>_(E))})}function Zi(e,s,a,l,c=u=>u()){const u=[];for(const d of e)for(const o in d.components){let _=d.components[o];if(!(s!=="beforeRouteEnter"&&!d.instances[o]))if(Vr(_)){const v=(_.__vccOpts||_)[s];v&&u.push(ce(v,a,l,d,o,c))}else{let b=_();u.push(()=>b.then(v=>{if(!v)throw new Error(`Couldn't resolve component "${o}" at "${d.path}"`);const x=Ll(v)?v.default:v;d.mods[o]=v,d.components[o]=x;const B=(x.__vccOpts||x)[s];return B&&ce(B,a,l,d,o,c)()}))}}return u}function Cn(e){const s=ne(Ls),a=ne(eo),l=Ot(()=>{const _=Te(e.to);return s.resolve(_)}),c=Ot(()=>{const{matched:_}=l.value,{length:b}=_,v=_[b-1],x=a.matched;if(!v||!x.length)return-1;const E=x.findIndex(ze.bind(null,v));if(E>-1)return E;const B=An(_[b-2]);return b>1&&An(v)===B&&x[x.length-1].path!==B?x.findIndex(ze.bind(null,_[b-2])):E}),u=Ot(()=>c.value>-1&&Lf(a.params,l.value.params)),d=Ot(()=>c.value>-1&&c.value===a.matched.length-1&&qr(a.params,l.value.params));function o(_={}){if(If(_)){const b=s[Te(e.replace)?"replace":"push"](Te(e.to)).catch(Qe);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>b),b}return Promise.resolve()}return{route:l,href:Ot(()=>l.value.href),isActive:u,isExactActive:d,navigate:o}}function Tf(e){return e.length===1?e[0]:e}const Pf=dr({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Cn,setup(e,{slots:s}){const a=Fi(Cn(e)),{options:l}=ne(Ls),c=Ot(()=>({[Tn(e.activeClass,l.linkActiveClass,"router-link-active")]:a.isActive,[Tn(e.exactActiveClass,l.linkExactActiveClass,"router-link-exact-active")]:a.isExactActive}));return()=>{const u=s.default&&Tf(s.default(a));return e.custom?u:Nr("a",{"aria-current":a.isExactActive?e.ariaCurrentValue:null,href:a.href,onClick:a.navigate,class:c.value},u)}}}),Ff=Pf;function If(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const s=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(s))return}return e.preventDefault&&e.preventDefault(),!0}}function Lf(e,s){for(const a in s){const l=s[a],c=e[a];if(typeof l=="string"){if(l!==c)return!1}else if(!Vt(c)||c.length!==l.length||l.some((u,d)=>u!==c[d]))return!1}return!0}function An(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Tn=(e,s,a)=>e??s??a,Rf=dr({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:s,slots:a}){const l=ne(ds),c=Ot(()=>e.route||l.value),u=ne(Bn,0),d=Ot(()=>{let b=Te(u);const{matched:v}=c.value;let x;for(;(x=v[b])&&!x.components;)b++;return b}),o=Ot(()=>c.value.matched[d.value]);pi(Bn,Ot(()=>d.value+1)),pi(Af,o),pi(ds,c);const _=Go();return _i(()=>[_.value,o.value,e.name],([b,v,x],[E,B,U])=>{v&&(v.instances[x]=b,B&&B!==v&&b&&b===E&&(v.leaveGuards.size||(v.leaveGuards=B.leaveGuards),v.updateGuards.size||(v.updateGuards=B.updateGuards))),b&&v&&(!B||!ze(v,B)||!E)&&(v.enterCallbacks[x]||[]).forEach(G=>G(b))},{flush:"post"}),()=>{const b=c.value,v=e.name,x=o.value,E=x&&x.components[v];if(!E)return Pn(a.default,{Component:E,route:b});const B=x.props[v],U=B?B===!0?b.params:typeof B=="function"?B(b):B:null,t=Nr(E,st({},U,s,{onVnodeUnmounted:n=>{n.component.isUnmounted&&(x.instances[v]=null)},ref:_}));return Pn(a.default,{Component:t,route:b})||t}}});function Pn(e,s){if(!e)return null;const a=e(s);return a.length===1?a[0]:a}const zf=Rf;function kf(e){const s=bf(e.routes,e),a=e.parseQuery||Bf,l=e.stringifyQuery||En,c=e.history,u=He(),d=He(),o=He(),_=Vo(ae);let b=ae;Be&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const v=qi.bind(null,P=>""+P),x=qi.bind(null,Kl),E=qi.bind(null,ri);function B(P,V){let N,Y;return Zr(P)?(N=s.getRecordMatcher(P),Y=V):Y=P,s.addRoute(Y,N)}function U(P){const V=s.getRecordMatcher(P);V&&s.removeRoute(V)}function G(){return s.getRoutes().map(P=>P.record)}function t(P){return!!s.getRecordMatcher(P)}function n(P,V){if(V=st({},V||_.value),typeof P=="string"){const w=Xi(a,P,V.path),T=s.resolve({path:w.path},V),I=c.createHref(w.fullPath);return st(w,T,{params:E(T.params),hash:ri(w.hash),redirectedFrom:void 0,href:I})}let N;if(P.path!=null)N=st({},P,{path:Xi(a,P.path,V.path).path});else{const w=st({},P.params);for(const T in w)w[T]==null&&delete w[T];N=st({},P,{params:x(w)}),V.params=x(V.params)}const Y=s.resolve(N,V),lt=P.hash||"";Y.params=v(E(Y.params));const y=ql(l,st({},P,{hash:Vl(lt),path:Y.path})),m=c.createHref(y);return st({fullPath:y,hash:lt,query:l===En?Cf(P.query):P.query||{}},Y,{redirectedFrom:void 0,href:m})}function r(P){return typeof P=="string"?Xi(a,P,_.value.path):st({},P)}function f(P,V){if(b!==P)return ke(8,{from:V,to:P})}function h(P){return S(P)}function p(P){return h(st(r(P),{replace:!0}))}function g(P){const V=P.matched[P.matched.length-1];if(V&&V.redirect){const{redirect:N}=V;let Y=typeof N=="function"?N(P):N;return typeof Y=="string"&&(Y=Y.includes("?")||Y.includes("#")?Y=r(Y):{path:Y},Y.params={}),st({query:P.query,hash:P.hash,params:Y.path!=null?{}:P.params},Y)}}function S(P,V){const N=b=n(P),Y=_.value,lt=P.state,y=P.force,m=P.replace===!0,w=g(N);if(w)return S(st(r(w),{state:typeof w=="object"?st({},lt,w.state):lt,force:y,replace:m}),V||N);const T=N;T.redirectedFrom=V;let I;return!y&&Xl(l,Y,N)&&(I=ke(16,{to:T,from:Y}),wt(Y,Y,!0,!1)),(I?Promise.resolve(I):L(T,Y)).catch(F=>Jt(F)?Jt(F,2)?F:mt(F):J(F,T,Y)).then(F=>{if(F){if(Jt(F,2))return S(st({replace:m},r(F.to),{state:typeof F.to=="object"?st({},lt,F.to.state):lt,force:y}),V||T)}else F=j(T,Y,!0,m,lt);return M(T,Y,F),F})}function C(P,V){const N=f(P,V);return N?Promise.reject(N):Promise.resolve()}function A(P){const V=zt.values().next().value;return V&&typeof V.runWithContext=="function"?V.runWithContext(P):P()}function L(P,V){let N;const[Y,lt,y]=Mf(P,V);N=Zi(Y.reverse(),"beforeRouteLeave",P,V);for(const w of Y)w.leaveGuards.forEach(T=>{N.push(ce(T,P,V))});const m=C.bind(null,P,V);return N.push(m),kt(N).then(()=>{N=[];for(const w of u.list())N.push(ce(w,P,V));return N.push(m),kt(N)}).then(()=>{N=Zi(lt,"beforeRouteUpdate",P,V);for(const w of lt)w.updateGuards.forEach(T=>{N.push(ce(T,P,V))});return N.push(m),kt(N)}).then(()=>{N=[];for(const w of y)if(w.beforeEnter)if(Vt(w.beforeEnter))for(const T of w.beforeEnter)N.push(ce(T,P,V));else N.push(ce(w.beforeEnter,P,V));return N.push(m),kt(N)}).then(()=>(P.matched.forEach(w=>w.enterCallbacks={}),N=Zi(y,"beforeRouteEnter",P,V,A),N.push(m),kt(N))).then(()=>{N=[];for(const w of d.list())N.push(ce(w,P,V));return N.push(m),kt(N)}).catch(w=>Jt(w,8)?w:Promise.reject(w))}function M(P,V,N){o.list().forEach(Y=>A(()=>Y(P,V,N)))}function j(P,V,N,Y,lt){const y=f(P,V);if(y)return y;const m=V===ae,w=Be?history.state:{};N&&(Y||m?c.replace(P.fullPath,st({scroll:m&&w&&w.scroll},lt)):c.push(P.fullPath,lt)),_.value=P,wt(P,V,N,m),mt()}let D;function at(){D||(D=c.listen((P,V,N)=>{if(!Q.listening)return;const Y=n(P),lt=g(Y);if(lt){S(st(lt,{replace:!0,force:!0}),Y).catch(Qe);return}b=Y;const y=_.value;Be&&rf(gn(y.fullPath,N.delta),Mi()),L(Y,y).catch(m=>Jt(m,12)?m:Jt(m,2)?(S(st(r(m.to),{force:!0}),Y).then(w=>{Jt(w,20)&&!N.delta&&N.type===oi.pop&&c.go(-1,!1)}).catch(Qe),Promise.reject()):(N.delta&&c.go(-N.delta,!1),J(m,Y,y))).then(m=>{m=m||j(Y,y,!1),m&&(N.delta&&!Jt(m,8)?c.go(-N.delta,!1):N.type===oi.pop&&Jt(m,20)&&c.go(-1,!1)),M(Y,y,m)}).catch(Qe)}))}let it=He(),ut=He(),tt;function J(P,V,N){mt(P);const Y=ut.list();return Y.length?Y.forEach(lt=>lt(P,V,N)):console.error(P),Promise.reject(P)}function pt(){return tt&&_.value!==ae?Promise.resolve():new Promise((P,V)=>{it.add([P,V])})}function mt(P){return tt||(tt=!P,at(),it.list().forEach(([V,N])=>P?N(P):V()),it.reset()),P}function wt(P,V,N,Y){const{scrollBehavior:lt}=e;if(!Be||!lt)return Promise.resolve();const y=!N&&of(gn(P.fullPath,0))||(Y||!N)&&history.state&&history.state.scroll||null;return lr().then(()=>lt(P,V,y)).then(m=>m&&nf(m)).catch(m=>J(m,P,V))}const gt=P=>c.go(P);let Ut;const zt=new Set,Q={currentRoute:_,listening:!0,addRoute:B,removeRoute:U,clearRoutes:s.clearRoutes,hasRoute:t,getRoutes:G,resolve:n,options:e,push:h,replace:p,go:gt,back:()=>gt(-1),forward:()=>gt(1),beforeEach:u.add,beforeResolve:d.add,afterEach:o.add,onError:ut.add,isReady:pt,install(P){const V=this;P.component("RouterLink",Ff),P.component("RouterView",zf),P.config.globalProperties.$router=V,Object.defineProperty(P.config.globalProperties,"$route",{enumerable:!0,get:()=>Te(_)}),Be&&!Ut&&_.value===ae&&(Ut=!0,h(c.location).catch(lt=>{}));const N={};for(const lt in ae)Object.defineProperty(N,lt,{get:()=>_.value[lt],enumerable:!0});P.provide(Ls,V),P.provide(eo,sr(N)),P.provide(ds,_);const Y=P.unmount;zt.add(P),P.unmount=function(){zt.delete(P),zt.size<1&&(b=ae,D&&D(),D=null,_.value=ae,Ut=!1,tt=!1),Y()}}};function kt(P){return P.reduce((V,N)=>V.then(()=>A(N)),Promise.resolve())}return Q}function Mf(e,s){const a=[],l=[],c=[],u=Math.max(s.matched.length,e.matched.length);for(let d=0;d<u;d++){const o=s.matched[d];o&&(e.matched.find(b=>ze(b,o))?l.push(o):a.push(o));const _=e.matched[d];_&&(s.matched.find(b=>ze(b,_))||c.push(_))}return[a,l,c]}const Df={name:"MessagePage",data(){return{inputText:"",password:"",outputText:"",copyButtonText:"复制结果",isLoading:!1}},methods:{async encryptText(){if(!this.inputText||!this.password){this.outputText="请输入消息和密码";return}try{this.isLoading=!0,this.outputText="加密中...",this.outputText=await so(this.inputText,this.password)}catch(e){this.outputText="加密失败: "+e.message}finally{this.isLoading=!1}},async decryptText(){if(!this.inputText||!this.password){this.outputText="请输入密文和密码";return}try{this.isLoading=!0,this.outputText="解密中...",this.outputText=await io(this.inputText,this.password)}catch(e){this.outputText="解密失败: "+e.message}finally{this.isLoading=!1}},clearAll(){this.inputText="",this.password="",this.outputText=""},async copyToClipboard(){if(!this.outputText)return;const e=this.copyButtonText;try{await navigator.clipboard.writeText(this.outputText),this.copyButtonText="复制成功!"}catch{this.copyButtonText="复制失败!"}setTimeout(()=>{this.copyButtonText=e},1500)}}},Of={class:"message-page"},Nf={class:"input-section"},Hf={class:"button-group"},Gf=["disabled"],Vf=["disabled"],Yf=["disabled"],jf={class:"output-section"},Kf={class:"output-box"};function $f(e,s,a,l,c,u){return Mt(),Gt("div",Of,[s[7]||(s[7]=K("h2",null,"消息加密/解密",-1)),K("div",Nf,[re(K("textarea",{"onUpdate:modelValue":s[0]||(s[0]=d=>c.inputText=d),placeholder:"输入要加密的消息或要解密的密文"},null,512),[[be,c.inputText]]),re(K("input",{type:"password","onUpdate:modelValue":s[1]||(s[1]=d=>c.password=d),placeholder:"输入密码"},null,512),[[be,c.password]]),K("div",Hf,[K("button",{onClick:s[2]||(s[2]=(...d)=>u.encryptText&&u.encryptText(...d)),disabled:c.isLoading},"加密",8,Gf),K("button",{onClick:s[3]||(s[3]=(...d)=>u.decryptText&&u.decryptText(...d)),disabled:c.isLoading},"解密",8,Vf),K("button",{onClick:s[4]||(s[4]=(...d)=>u.clearAll&&u.clearAll(...d)),disabled:c.isLoading},"清空",8,Yf)])]),K("div",jf,[s[6]||(s[6]=K("h3",null,"结果:",-1)),K("div",Kf,Ie(c.outputText),1),c.outputText?(Mt(),Gt("button",{key:0,onClick:s[5]||(s[5]=(...d)=>u.copyToClipboard&&u.copyToClipboard(...d)),class:"copy-button"},Ie(c.copyButtonText),1)):Re("",!0)])])}const Wf=fi(Df,[["render",$f],["__scopeId","data-v-36420802"]]),qf={name:"FilePage",data(){return{selectedFileHandle:null,selectedFile:null,password:"",statusMessage:"",isLoading:!1,showPasswordChange:!1,newPassword:""}},methods:{async selectFile(){try{const[e]=await window.showOpenFilePicker({writable:!0,multiple:!1});this.selectedFileHandle=e,this.selectedFile=await e.getFile(),this.statusMessage=`已选择文件: ${this.selectedFile.name}`}catch(e){this.statusMessage="文件选择取消或出错: "+e.message}},async encryptFile(){if(!this.selectedFile||!this.password){this.statusMessage="请选择文件并输入密码";return}this.isLoading=!0;try{const e=`${this.selectedFile.name}.enc`,a=await(await window.showSaveFilePicker({suggestedName:e})).createWritable(),l=32*1024*1024;await Rn(async(c,u)=>{const d=await this.selectedFile.slice(c,u).arrayBuffer();return new Uint8Array(d)},c=>a.write(c),this.password,c=>{const u=Number(c/this.selectedFile.size*100);c>=this.selectedFile.size||u===100||u.toFixed(2)==="100.00"?this.statusMessage="正在保存文件，请稍候...这可能需要一些时间。":this.statusMessage=`加密中... ${u.toFixed(2)}%`},null,null,l),await a.close(),this.statusMessage=`文件加密成功: ${e}`}catch(e){this.statusMessage="加密失败: "+e.message}finally{this.isLoading=!1}},async decryptFile(){if(!this.selectedFile||!this.password){this.statusMessage="请选择文件并输入密码";return}this.isLoading=!0;try{const e=this.selectedFile.name.endsWith(".enc")?this.selectedFile.name.slice(0,-4):`decrypted_${this.selectedFile.name}`,a=await(await window.showSaveFilePicker({suggestedName:e})).createWritable(),l=32*1024*1024;await Ln(async(c,u)=>{const d=await this.selectedFile.slice(c,u).arrayBuffer();return new Uint8Array(d)},c=>a.write(c),this.password,c=>{const u=Number(c/this.selectedFile.size*100);c>=this.selectedFile.size||u===100||u.toFixed(2)==="100.00"?this.statusMessage="正在保存文件，请稍候...这可能需要一些时间。":this.statusMessage=`解密中... ${u.toFixed(2)}%`},null,null,l),await a.close(),this.statusMessage=`文件解密成功: ${e}`}catch(e){this.statusMessage="解密失败: "+e.message}finally{this.isLoading=!1}},clearAll(){this.selectedFile=null,this.password="",this.statusMessage=""},changePassword(){if(!this.selectedFile||!this.password){this.statusMessage="请选择文件并输入当前密码";return}this.showPasswordChange=!0,this.newPassword="",this.confirmPassword=""},cancelPasswordChange(){this.showPasswordChange=!1,this.newPassword="",this.confirmPassword=""},async confirmPasswordChange(){if(!this.newPassword){this.statusMessage="请输入新密码";return}this.isLoading=!0;try{this.statusMessage="正在处理...";const e=this.selectedFileHandle,a=this.selectedFile.slice(0,2048);this.statusMessage="正在更改密码，请稍候...";const l=await In(a,this.password,this.newPassword);this.statusMessage="正在保存文件，请稍候...这可能需要一些时间。";const c=await e.createWritable({keepExistingData:!0});await c.write(l),await c.close(),this.statusMessage="密码更改成功",this.showPasswordChange=!1,this.newPassword="",this.confirmPassword=""}catch(e){this.statusMessage="密码更改失败: "+e.message}finally{this.isLoading=!1}}}},Xf={class:"file-page"},Zf={class:"input-section"},Qf={class:"file-select-group"},Jf={class:"file-name"},tc={class:"button-group"},ec=["disabled"],ic=["disabled"],sc=["disabled"],nc=["disabled"],rc={key:0,class:"password-change-section"},oc={class:"button-group"},ac=["disabled"],lc=["disabled"],fc={key:1,class:"status-section"},cc={class:"status-box"};function hc(e,s,a,l,c,u){return Mt(),Gt("div",Xf,[s[11]||(s[11]=K("h2",null,"文件加密/解密",-1)),K("div",Zf,[K("div",Qf,[K("button",{onClick:s[0]||(s[0]=(...d)=>u.selectFile&&u.selectFile(...d)),style:{flex:"unset",padding:"10px 20px"}},"选择文件"),K("div",Jf,Ie(c.selectedFile?.name||"没有选择文件"),1)]),re(K("input",{type:"password","onUpdate:modelValue":s[1]||(s[1]=d=>c.password=d),placeholder:"输入密码"},null,512),[[be,c.password]]),K("div",tc,[K("button",{onClick:s[2]||(s[2]=(...d)=>u.encryptFile&&u.encryptFile(...d)),disabled:c.isLoading},"加密",8,ec),K("button",{onClick:s[3]||(s[3]=(...d)=>u.decryptFile&&u.decryptFile(...d)),disabled:c.isLoading},"解密",8,ic),K("button",{onClick:s[4]||(s[4]=(...d)=>u.changePassword&&u.changePassword(...d)),disabled:c.isLoading},"改密",8,sc),K("button",{onClick:s[5]||(s[5]=(...d)=>u.clearAll&&u.clearAll(...d)),disabled:c.isLoading},"清除",8,nc)])]),c.showPasswordChange?(Mt(),Gt("div",rc,[s[9]||(s[9]=K("h3",null,"更改密码",-1)),re(K("input",{type:"password","onUpdate:modelValue":s[6]||(s[6]=d=>c.newPassword=d),placeholder:"输入新密码"},null,512),[[be,c.newPassword]]),K("div",oc,[K("button",{onClick:s[7]||(s[7]=(...d)=>u.confirmPasswordChange&&u.confirmPasswordChange(...d)),disabled:c.isLoading},"确认更改",8,ac),K("button",{onClick:s[8]||(s[8]=(...d)=>u.cancelPasswordChange&&u.cancelPasswordChange(...d)),disabled:c.isLoading},"取消",8,lc)])])):Re("",!0),c.statusMessage?(Mt(),Gt("div",fc,[s[10]||(s[10]=K("h3",null,"状态:",-1)),K("div",cc,Ie(c.statusMessage),1)])):Re("",!0)])}const uc=fi(qf,[["render",hc],["__scopeId","data-v-a55ce0be"]]),dc={name:"FileClassicPage",data(){return{selectedFile:null,password:"",statusMessage:"",isLoading:!1,showPasswordChange:!1,newPassword:"",confirmPassword:""}},methods:{handleFileChange(e){this.selectedFile=e.target.files[0],this.selectedFile&&(this.statusMessage=`已选择文件: ${this.selectedFile.name}`)},async encryptFile(){if(!this.selectedFile||!this.password){this.statusMessage="请选择文件并输入密码";return}this.isLoading=!0;try{const e=`${this.selectedFile.name}.enc`,s=document.createElement("a");s.style.display="none",document.body.appendChild(s);const a=32*1024*1024,l=[];await Rn(async(d,o)=>{const _=await this.selectedFile.slice(d,o).arrayBuffer();return new Uint8Array(_)},d=>{l.push(d)},this.password,d=>{const o=(d/this.selectedFile.size*100).toFixed(2);this.statusMessage=`加密中... ${o}%`},null,null,a);const c=new Blob(l,{type:"application/octet-stream"}),u=URL.createObjectURL(c);s.href=u,s.download=e,s.click(),URL.revokeObjectURL(u),document.body.removeChild(s),this.statusMessage=`文件加密成功: ${e}`}catch(e){this.statusMessage="加密失败: "+e.message}finally{this.isLoading=!1}},async decryptFile(){if(!this.selectedFile||!this.password){this.statusMessage="请选择文件并输入密码";return}this.isLoading=!0;try{const e=this.selectedFile.name.endsWith(".enc")?this.selectedFile.name.slice(0,-4):`decrypted_${this.selectedFile.name}`,s=document.createElement("a");s.style.display="none",document.body.appendChild(s);const a=32*1024*1024,l=[];await Ln(async(d,o)=>{const _=await this.selectedFile.slice(d,o).arrayBuffer();return new Uint8Array(_)},d=>{l.push(d)},this.password,d=>{const o=(d/this.selectedFile.size*100).toFixed(2);this.statusMessage=`解密中... ${o}%`},null,null,a);const c=new Blob(l,{type:"application/octet-stream"}),u=URL.createObjectURL(c);s.href=u,s.download=e,s.click(),URL.revokeObjectURL(u),document.body.removeChild(s),this.statusMessage=`文件解密成功: ${e}`}catch(e){this.statusMessage="解密失败: "+e.message}finally{this.isLoading=!1}},clearAll(){this.$refs.fileInput.value="",this.selectedFile=null,this.password="",this.statusMessage="",this.showPasswordChange=!1,this.newPassword="",this.confirmPassword=""},changePassword(){if(!this.selectedFile||!this.password){this.statusMessage="请选择文件并输入当前密码";return}this.showPasswordChange=!0,this.newPassword="",this.confirmPassword=""},cancelPasswordChange(){this.showPasswordChange=!1,this.newPassword="",this.confirmPassword=""},async confirmPasswordChange(){if(!this.newPassword){this.statusMessage="请输入新密码并确认";return}this.isLoading=!0;try{const e=this.selectedFile.slice(0,2048),s=await In(e,this.password,this.newPassword),a=document.createElement("a");a.style.display="none",document.body.appendChild(a);const l=URL.createObjectURL(new Blob([s,this.selectedFile.slice(2048)],{type:"application/octet-stream"}));a.href=l,a.download=this.selectedFile.name,a.click(),URL.revokeObjectURL(l),document.body.removeChild(a),this.statusMessage="密码更改成功",this.showPasswordChange=!1,this.newPassword="",this.confirmPassword=""}catch(e){this.statusMessage="密码更改失败: "+e.message}finally{this.isLoading=!1}}}},pc={class:"file-page"},_c={class:"input-section"},gc={class:"button-group"},yc=["disabled"],mc=["disabled"],vc=["disabled"],xc=["disabled"],bc={key:0,class:"password-change-section"},Sc={class:"button-group"},wc=["disabled"],Uc=["disabled"],Ec={key:0,class:"status-section"},Bc={class:"status-box"};function Cc(e,s,a,l,c,u){return Mt(),Gt("div",pc,[s[11]||(s[11]=K("h2",null,"文件加密/解密(兼容版)",-1)),K("div",_c,[K("input",{type:"file",ref:"fileInput",onChange:s[0]||(s[0]=(...d)=>u.handleFileChange&&u.handleFileChange(...d))},null,544),re(K("input",{type:"password","onUpdate:modelValue":s[1]||(s[1]=d=>c.password=d),placeholder:"输入密码"},null,512),[[be,c.password]]),K("div",gc,[K("button",{onClick:s[2]||(s[2]=(...d)=>u.encryptFile&&u.encryptFile(...d)),disabled:c.isLoading},"加密",8,yc),K("button",{onClick:s[3]||(s[3]=(...d)=>u.decryptFile&&u.decryptFile(...d)),disabled:c.isLoading},"解密",8,mc),K("button",{onClick:s[4]||(s[4]=(...d)=>u.changePassword&&u.changePassword(...d)),disabled:c.isLoading},"改密",8,vc),K("button",{onClick:s[5]||(s[5]=(...d)=>u.clearAll&&u.clearAll(...d)),disabled:c.isLoading},"清除",8,xc)]),c.showPasswordChange?(Mt(),Gt("div",bc,[s[9]||(s[9]=K("h3",null,"更改密码",-1)),re(K("input",{type:"password","onUpdate:modelValue":s[6]||(s[6]=d=>c.newPassword=d),placeholder:"输入新密码"},null,512),[[be,c.newPassword]]),K("div",Sc,[K("button",{onClick:s[7]||(s[7]=(...d)=>u.confirmPasswordChange&&u.confirmPasswordChange(...d)),disabled:c.isLoading},"确认更改",8,wc),K("button",{onClick:s[8]||(s[8]=(...d)=>u.cancelPasswordChange&&u.cancelPasswordChange(...d)),disabled:c.isLoading},"取消",8,Uc)])])):Re("",!0)]),c.statusMessage?(Mt(),Gt("div",Ec,[s[10]||(s[10]=K("h3",null,"状态:",-1)),K("div",Bc,Ie(c.statusMessage),1)])):Re("",!0)])}const Ac=fi(dc,[["render",Cc],["__scopeId","data-v-8a1d5dc7"]]);function Tc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Qi={},Fn;function Pc(){return Fn||(Fn=1,function(e){var s=function(){var t=new Date,n=4,r=3,f=2,h=1,p=n,g={setLogLevel:function(S){S==this.debug?p=h:S==this.info?p=f:S==this.warn?p=r:(S==this.error,p=n)},debug:function(S,C){console.debug===void 0&&(console.debug=console.log),h>=p&&console.debug("["+s.getDurationString(new Date-t,1e3)+"]","["+S+"]",C)},log:function(S,C){this.debug(S.msg)},info:function(S,C){f>=p&&console.info("["+s.getDurationString(new Date-t,1e3)+"]","["+S+"]",C)},warn:function(S,C){r>=p&&console.warn("["+s.getDurationString(new Date-t,1e3)+"]","["+S+"]",C)},error:function(S,C){n>=p&&console.error("["+s.getDurationString(new Date-t,1e3)+"]","["+S+"]",C)}};return g}();s.getDurationString=function(t,n){var r;function f(A,L){for(var M=""+A,j=M.split(".");j[0].length<L;)j[0]="0"+j[0];return j.join(".")}t<0?(r=!0,t=-t):r=!1;var h=n||1,p=t/h,g=Math.floor(p/3600);p-=g*3600;var S=Math.floor(p/60);p-=S*60;var C=p*1e3;return p=Math.floor(p),C-=p*1e3,C=Math.floor(C),(r?"-":"")+g+":"+f(S,2)+":"+f(p,2)+"."+f(C,3)},s.printRanges=function(t){var n=t.length;if(n>0){for(var r="",f=0;f<n;f++)f>0&&(r+=","),r+="["+s.getDurationString(t.start(f))+","+s.getDurationString(t.end(f))+"]";return r}else return"(empty)"},e.Log=s;var a=function(t){if(t instanceof ArrayBuffer)this.buffer=t,this.dataview=new DataView(t);else throw"Needs an array buffer";this.position=0};a.prototype.getPosition=function(){return this.position},a.prototype.getEndPosition=function(){return this.buffer.byteLength},a.prototype.getLength=function(){return this.buffer.byteLength},a.prototype.seek=function(t){var n=Math.max(0,Math.min(this.buffer.byteLength,t));return this.position=isNaN(n)||!isFinite(n)?0:n,!0},a.prototype.isEos=function(){return this.getPosition()>=this.getEndPosition()},a.prototype.readAnyInt=function(t,n){var r=0;if(this.position+t<=this.buffer.byteLength){switch(t){case 1:n?r=this.dataview.getInt8(this.position):r=this.dataview.getUint8(this.position);break;case 2:n?r=this.dataview.getInt16(this.position):r=this.dataview.getUint16(this.position);break;case 3:if(n)throw"No method for reading signed 24 bits values";r=this.dataview.getUint8(this.position)<<16,r|=this.dataview.getUint8(this.position+1)<<8,r|=this.dataview.getUint8(this.position+2);break;case 4:n?r=this.dataview.getInt32(this.position):r=this.dataview.getUint32(this.position);break;case 8:if(n)throw"No method for reading signed 64 bits values";r=this.dataview.getUint32(this.position)<<32,r|=this.dataview.getUint32(this.position+4);break;default:throw"readInt method not implemented for size: "+t}return this.position+=t,r}else throw"Not enough bytes in buffer"},a.prototype.readUint8=function(){return this.readAnyInt(1,!1)},a.prototype.readUint16=function(){return this.readAnyInt(2,!1)},a.prototype.readUint24=function(){return this.readAnyInt(3,!1)},a.prototype.readUint32=function(){return this.readAnyInt(4,!1)},a.prototype.readUint64=function(){return this.readAnyInt(8,!1)},a.prototype.readString=function(t){if(this.position+t<=this.buffer.byteLength){for(var n="",r=0;r<t;r++)n+=String.fromCharCode(this.readUint8());return n}else throw"Not enough bytes in buffer"},a.prototype.readCString=function(){for(var t=[];;){var n=this.readUint8();if(n!==0)t.push(n);else break}return String.fromCharCode.apply(null,t)},a.prototype.readInt8=function(){return this.readAnyInt(1,!0)},a.prototype.readInt16=function(){return this.readAnyInt(2,!0)},a.prototype.readInt32=function(){return this.readAnyInt(4,!0)},a.prototype.readInt64=function(){return this.readAnyInt(8,!1)},a.prototype.readUint8Array=function(t){for(var n=new Uint8Array(t),r=0;r<t;r++)n[r]=this.readUint8();return n},a.prototype.readInt16Array=function(t){for(var n=new Int16Array(t),r=0;r<t;r++)n[r]=this.readInt16();return n},a.prototype.readUint16Array=function(t){for(var n=new Int16Array(t),r=0;r<t;r++)n[r]=this.readUint16();return n},a.prototype.readUint32Array=function(t){for(var n=new Uint32Array(t),r=0;r<t;r++)n[r]=this.readUint32();return n},a.prototype.readInt32Array=function(t){for(var n=new Int32Array(t),r=0;r<t;r++)n[r]=this.readInt32();return n},e.MP4BoxStream=a;var l=function(t,n,r){this._byteOffset=n||0,t instanceof ArrayBuffer?this.buffer=t:typeof t=="object"?(this.dataView=t,n&&(this._byteOffset+=n)):this.buffer=new ArrayBuffer(t||0),this.position=0,this.endianness=r??l.LITTLE_ENDIAN};l.prototype={},l.prototype.getPosition=function(){return this.position},l.prototype._realloc=function(t){if(this._dynamicSize){var n=this._byteOffset+this.position+t,r=this._buffer.byteLength;if(n<=r){n>this._byteLength&&(this._byteLength=n);return}for(r<1&&(r=1);n>r;)r*=2;var f=new ArrayBuffer(r),h=new Uint8Array(this._buffer),p=new Uint8Array(f,0,h.length);p.set(h),this.buffer=f,this._byteLength=n}},l.prototype._trimAlloc=function(){if(this._byteLength!=this._buffer.byteLength){var t=new ArrayBuffer(this._byteLength),n=new Uint8Array(t),r=new Uint8Array(this._buffer,0,n.length);n.set(r),this.buffer=t}},l.BIG_ENDIAN=!1,l.LITTLE_ENDIAN=!0,l.prototype._byteLength=0,Object.defineProperty(l.prototype,"byteLength",{get:function(){return this._byteLength-this._byteOffset}}),Object.defineProperty(l.prototype,"buffer",{get:function(){return this._trimAlloc(),this._buffer},set:function(t){this._buffer=t,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._buffer.byteLength}}),Object.defineProperty(l.prototype,"byteOffset",{get:function(){return this._byteOffset},set:function(t){this._byteOffset=t,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._buffer.byteLength}}),Object.defineProperty(l.prototype,"dataView",{get:function(){return this._dataView},set:function(t){this._byteOffset=t.byteOffset,this._buffer=t.buffer,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._byteOffset+t.byteLength}}),l.prototype.seek=function(t){var n=Math.max(0,Math.min(this.byteLength,t));this.position=isNaN(n)||!isFinite(n)?0:n},l.prototype.isEof=function(){return this.position>=this._byteLength},l.prototype.mapUint8Array=function(t){this._realloc(t*1);var n=new Uint8Array(this._buffer,this.byteOffset+this.position,t);return this.position+=t*1,n},l.prototype.readInt32Array=function(t,n){t=t??this.byteLength-this.position/4;var r=new Int32Array(t);return l.memcpy(r.buffer,0,this.buffer,this.byteOffset+this.position,t*r.BYTES_PER_ELEMENT),l.arrayToNative(r,n??this.endianness),this.position+=r.byteLength,r},l.prototype.readInt16Array=function(t,n){t=t??this.byteLength-this.position/2;var r=new Int16Array(t);return l.memcpy(r.buffer,0,this.buffer,this.byteOffset+this.position,t*r.BYTES_PER_ELEMENT),l.arrayToNative(r,n??this.endianness),this.position+=r.byteLength,r},l.prototype.readInt8Array=function(t){t=t??this.byteLength-this.position;var n=new Int8Array(t);return l.memcpy(n.buffer,0,this.buffer,this.byteOffset+this.position,t*n.BYTES_PER_ELEMENT),this.position+=n.byteLength,n},l.prototype.readUint32Array=function(t,n){t=t??this.byteLength-this.position/4;var r=new Uint32Array(t);return l.memcpy(r.buffer,0,this.buffer,this.byteOffset+this.position,t*r.BYTES_PER_ELEMENT),l.arrayToNative(r,n??this.endianness),this.position+=r.byteLength,r},l.prototype.readUint16Array=function(t,n){t=t??this.byteLength-this.position/2;var r=new Uint16Array(t);return l.memcpy(r.buffer,0,this.buffer,this.byteOffset+this.position,t*r.BYTES_PER_ELEMENT),l.arrayToNative(r,n??this.endianness),this.position+=r.byteLength,r},l.prototype.readUint8Array=function(t){t=t??this.byteLength-this.position;var n=new Uint8Array(t);return l.memcpy(n.buffer,0,this.buffer,this.byteOffset+this.position,t*n.BYTES_PER_ELEMENT),this.position+=n.byteLength,n},l.prototype.readFloat64Array=function(t,n){t=t??this.byteLength-this.position/8;var r=new Float64Array(t);return l.memcpy(r.buffer,0,this.buffer,this.byteOffset+this.position,t*r.BYTES_PER_ELEMENT),l.arrayToNative(r,n??this.endianness),this.position+=r.byteLength,r},l.prototype.readFloat32Array=function(t,n){t=t??this.byteLength-this.position/4;var r=new Float32Array(t);return l.memcpy(r.buffer,0,this.buffer,this.byteOffset+this.position,t*r.BYTES_PER_ELEMENT),l.arrayToNative(r,n??this.endianness),this.position+=r.byteLength,r},l.prototype.readInt32=function(t){var n=this._dataView.getInt32(this.position,t??this.endianness);return this.position+=4,n},l.prototype.readInt16=function(t){var n=this._dataView.getInt16(this.position,t??this.endianness);return this.position+=2,n},l.prototype.readInt8=function(){var t=this._dataView.getInt8(this.position);return this.position+=1,t},l.prototype.readUint32=function(t){var n=this._dataView.getUint32(this.position,t??this.endianness);return this.position+=4,n},l.prototype.readUint16=function(t){var n=this._dataView.getUint16(this.position,t??this.endianness);return this.position+=2,n},l.prototype.readUint8=function(){var t=this._dataView.getUint8(this.position);return this.position+=1,t},l.prototype.readFloat32=function(t){var n=this._dataView.getFloat32(this.position,t??this.endianness);return this.position+=4,n},l.prototype.readFloat64=function(t){var n=this._dataView.getFloat64(this.position,t??this.endianness);return this.position+=8,n},l.endianness=new Int8Array(new Int16Array([1]).buffer)[0]>0,l.memcpy=function(t,n,r,f,h){var p=new Uint8Array(t,n,h),g=new Uint8Array(r,f,h);p.set(g)},l.arrayToNative=function(t,n){return n==this.endianness?t:this.flipArrayEndianness(t)},l.nativeToEndian=function(t,n){return this.endianness==n?t:this.flipArrayEndianness(t)},l.flipArrayEndianness=function(t){for(var n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),r=0;r<t.byteLength;r+=t.BYTES_PER_ELEMENT)for(var f=r+t.BYTES_PER_ELEMENT-1,h=r;f>h;f--,h++){var p=n[h];n[h]=n[f],n[f]=p}return t},l.prototype.failurePosition=0,String.fromCharCodeUint8=function(t){for(var n=[],r=0;r<t.length;r++)n[r]=t[r];return String.fromCharCode.apply(null,n)},l.prototype.readString=function(t,n){return n==null||n=="ASCII"?String.fromCharCodeUint8.apply(null,[this.mapUint8Array(t??this.byteLength-this.position)]):new TextDecoder(n).decode(this.mapUint8Array(t))},l.prototype.readCString=function(t){var n=this.byteLength-this.position,r=new Uint8Array(this._buffer,this._byteOffset+this.position),f=n;t!=null&&(f=Math.min(t,n));for(var h=0;h<f&&r[h]!==0;h++);var p=String.fromCharCodeUint8.apply(null,[this.mapUint8Array(h)]);return t!=null?this.position+=f-h:h!=n&&(this.position+=1),p};var c=Math.pow(2,32);l.prototype.readInt64=function(){return this.readInt32()*c+this.readUint32()},l.prototype.readUint64=function(){return this.readUint32()*c+this.readUint32()},l.prototype.readInt64=function(){return this.readUint32()*c+this.readUint32()},l.prototype.readUint24=function(){return(this.readUint8()<<16)+(this.readUint8()<<8)+this.readUint8()},e.DataStream=l,l.prototype.save=function(t){var n=new Blob([this.buffer]);if(window.URL&&URL.createObjectURL){var r=window.URL.createObjectURL(n),f=document.createElement("a");document.body.appendChild(f),f.setAttribute("href",r),f.setAttribute("download",t),f.setAttribute("target","_self"),f.click(),window.URL.revokeObjectURL(r)}else throw"DataStream.save: Can't create object URL."},l.prototype._dynamicSize=!0,Object.defineProperty(l.prototype,"dynamicSize",{get:function(){return this._dynamicSize},set:function(t){t||this._trimAlloc(),this._dynamicSize=t}}),l.prototype.shift=function(t){var n=new ArrayBuffer(this._byteLength-t),r=new Uint8Array(n),f=new Uint8Array(this._buffer,t,r.length);r.set(f),this.buffer=n,this.position-=t},l.prototype.writeInt32Array=function(t,n){if(this._realloc(t.length*4),t instanceof Int32Array&&this.byteOffset+this.position%t.BYTES_PER_ELEMENT===0)l.memcpy(this._buffer,this.byteOffset+this.position,t.buffer,0,t.byteLength),this.mapInt32Array(t.length,n);else for(var r=0;r<t.length;r++)this.writeInt32(t[r],n)},l.prototype.writeInt16Array=function(t,n){if(this._realloc(t.length*2),t instanceof Int16Array&&this.byteOffset+this.position%t.BYTES_PER_ELEMENT===0)l.memcpy(this._buffer,this.byteOffset+this.position,t.buffer,0,t.byteLength),this.mapInt16Array(t.length,n);else for(var r=0;r<t.length;r++)this.writeInt16(t[r],n)},l.prototype.writeInt8Array=function(t){if(this._realloc(t.length*1),t instanceof Int8Array&&this.byteOffset+this.position%t.BYTES_PER_ELEMENT===0)l.memcpy(this._buffer,this.byteOffset+this.position,t.buffer,0,t.byteLength),this.mapInt8Array(t.length);else for(var n=0;n<t.length;n++)this.writeInt8(t[n])},l.prototype.writeUint32Array=function(t,n){if(this._realloc(t.length*4),t instanceof Uint32Array&&this.byteOffset+this.position%t.BYTES_PER_ELEMENT===0)l.memcpy(this._buffer,this.byteOffset+this.position,t.buffer,0,t.byteLength),this.mapUint32Array(t.length,n);else for(var r=0;r<t.length;r++)this.writeUint32(t[r],n)},l.prototype.writeUint16Array=function(t,n){if(this._realloc(t.length*2),t instanceof Uint16Array&&this.byteOffset+this.position%t.BYTES_PER_ELEMENT===0)l.memcpy(this._buffer,this.byteOffset+this.position,t.buffer,0,t.byteLength),this.mapUint16Array(t.length,n);else for(var r=0;r<t.length;r++)this.writeUint16(t[r],n)},l.prototype.writeUint8Array=function(t){if(this._realloc(t.length*1),t instanceof Uint8Array&&this.byteOffset+this.position%t.BYTES_PER_ELEMENT===0)l.memcpy(this._buffer,this.byteOffset+this.position,t.buffer,0,t.byteLength),this.mapUint8Array(t.length);else for(var n=0;n<t.length;n++)this.writeUint8(t[n])},l.prototype.writeFloat64Array=function(t,n){if(this._realloc(t.length*8),t instanceof Float64Array&&this.byteOffset+this.position%t.BYTES_PER_ELEMENT===0)l.memcpy(this._buffer,this.byteOffset+this.position,t.buffer,0,t.byteLength),this.mapFloat64Array(t.length,n);else for(var r=0;r<t.length;r++)this.writeFloat64(t[r],n)},l.prototype.writeFloat32Array=function(t,n){if(this._realloc(t.length*4),t instanceof Float32Array&&this.byteOffset+this.position%t.BYTES_PER_ELEMENT===0)l.memcpy(this._buffer,this.byteOffset+this.position,t.buffer,0,t.byteLength),this.mapFloat32Array(t.length,n);else for(var r=0;r<t.length;r++)this.writeFloat32(t[r],n)},l.prototype.writeInt32=function(t,n){this._realloc(4),this._dataView.setInt32(this.position,t,n??this.endianness),this.position+=4},l.prototype.writeInt16=function(t,n){this._realloc(2),this._dataView.setInt16(this.position,t,n??this.endianness),this.position+=2},l.prototype.writeInt8=function(t){this._realloc(1),this._dataView.setInt8(this.position,t),this.position+=1},l.prototype.writeUint32=function(t,n){this._realloc(4),this._dataView.setUint32(this.position,t,n??this.endianness),this.position+=4},l.prototype.writeUint16=function(t,n){this._realloc(2),this._dataView.setUint16(this.position,t,n??this.endianness),this.position+=2},l.prototype.writeUint8=function(t){this._realloc(1),this._dataView.setUint8(this.position,t),this.position+=1},l.prototype.writeFloat32=function(t,n){this._realloc(4),this._dataView.setFloat32(this.position,t,n??this.endianness),this.position+=4},l.prototype.writeFloat64=function(t,n){this._realloc(8),this._dataView.setFloat64(this.position,t,n??this.endianness),this.position+=8},l.prototype.writeUCS2String=function(t,n,r){r==null&&(r=t.length);for(var f=0;f<t.length&&f<r;f++)this.writeUint16(t.charCodeAt(f),n);for(;f<r;f++)this.writeUint16(0)},l.prototype.writeString=function(t,n,r){var f=0;if(n==null||n=="ASCII")if(r!=null){var h=Math.min(t.length,r);for(f=0;f<h;f++)this.writeUint8(t.charCodeAt(f));for(;f<r;f++)this.writeUint8(0)}else for(f=0;f<t.length;f++)this.writeUint8(t.charCodeAt(f));else this.writeUint8Array(new TextEncoder(n).encode(t.substring(0,r)))},l.prototype.writeCString=function(t,n){var r=0;if(n!=null){var f=Math.min(t.length,n);for(r=0;r<f;r++)this.writeUint8(t.charCodeAt(r));for(;r<n;r++)this.writeUint8(0)}else{for(r=0;r<t.length;r++)this.writeUint8(t.charCodeAt(r));this.writeUint8(0)}},l.prototype.writeStruct=function(t,n){for(var r=0;r<t.length;r+=2){var f=t[r+1];this.writeType(f,n[t[r]],n)}},l.prototype.writeType=function(t,n,r){var f;if(typeof t=="function")return t(this,n);if(typeof t=="object"&&!(t instanceof Array))return t.set(this,n,r);var h=null,p="ASCII",g=this.position;switch(typeof t=="string"&&/:/.test(t)&&(f=t.split(":"),t=f[0],h=parseInt(f[1])),typeof t=="string"&&/,/.test(t)&&(f=t.split(","),t=f[0],p=parseInt(f[1])),t){case"uint8":this.writeUint8(n);break;case"int8":this.writeInt8(n);break;case"uint16":this.writeUint16(n,this.endianness);break;case"int16":this.writeInt16(n,this.endianness);break;case"uint32":this.writeUint32(n,this.endianness);break;case"int32":this.writeInt32(n,this.endianness);break;case"float32":this.writeFloat32(n,this.endianness);break;case"float64":this.writeFloat64(n,this.endianness);break;case"uint16be":this.writeUint16(n,l.BIG_ENDIAN);break;case"int16be":this.writeInt16(n,l.BIG_ENDIAN);break;case"uint32be":this.writeUint32(n,l.BIG_ENDIAN);break;case"int32be":this.writeInt32(n,l.BIG_ENDIAN);break;case"float32be":this.writeFloat32(n,l.BIG_ENDIAN);break;case"float64be":this.writeFloat64(n,l.BIG_ENDIAN);break;case"uint16le":this.writeUint16(n,l.LITTLE_ENDIAN);break;case"int16le":this.writeInt16(n,l.LITTLE_ENDIAN);break;case"uint32le":this.writeUint32(n,l.LITTLE_ENDIAN);break;case"int32le":this.writeInt32(n,l.LITTLE_ENDIAN);break;case"float32le":this.writeFloat32(n,l.LITTLE_ENDIAN);break;case"float64le":this.writeFloat64(n,l.LITTLE_ENDIAN);break;case"cstring":this.writeCString(n,h);break;case"string":this.writeString(n,p,h);break;case"u16string":this.writeUCS2String(n,this.endianness,h);break;case"u16stringle":this.writeUCS2String(n,l.LITTLE_ENDIAN,h);break;case"u16stringbe":this.writeUCS2String(n,l.BIG_ENDIAN,h);break;default:if(t.length==3){for(var S=t[1],C=0;C<n.length;C++)this.writeType(S,n[C]);break}else{this.writeStruct(t,n);break}}h!=null&&(this.position=g,this._realloc(h),this.position=g+h)},l.prototype.writeUint64=function(t){var n=Math.floor(t/c);this.writeUint32(n),this.writeUint32(t&4294967295)},l.prototype.writeUint24=function(t){this.writeUint8((t&16711680)>>16),this.writeUint8((t&65280)>>8),this.writeUint8(t&255)},l.prototype.adjustUint32=function(t,n){var r=this.position;this.seek(t),this.writeUint32(n),this.seek(r)},l.prototype.mapInt32Array=function(t,n){this._realloc(t*4);var r=new Int32Array(this._buffer,this.byteOffset+this.position,t);return l.arrayToNative(r,n??this.endianness),this.position+=t*4,r},l.prototype.mapInt16Array=function(t,n){this._realloc(t*2);var r=new Int16Array(this._buffer,this.byteOffset+this.position,t);return l.arrayToNative(r,n??this.endianness),this.position+=t*2,r},l.prototype.mapInt8Array=function(t){this._realloc(t*1);var n=new Int8Array(this._buffer,this.byteOffset+this.position,t);return this.position+=t*1,n},l.prototype.mapUint32Array=function(t,n){this._realloc(t*4);var r=new Uint32Array(this._buffer,this.byteOffset+this.position,t);return l.arrayToNative(r,n??this.endianness),this.position+=t*4,r},l.prototype.mapUint16Array=function(t,n){this._realloc(t*2);var r=new Uint16Array(this._buffer,this.byteOffset+this.position,t);return l.arrayToNative(r,n??this.endianness),this.position+=t*2,r},l.prototype.mapFloat64Array=function(t,n){this._realloc(t*8);var r=new Float64Array(this._buffer,this.byteOffset+this.position,t);return l.arrayToNative(r,n??this.endianness),this.position+=t*8,r},l.prototype.mapFloat32Array=function(t,n){this._realloc(t*4);var r=new Float32Array(this._buffer,this.byteOffset+this.position,t);return l.arrayToNative(r,n??this.endianness),this.position+=t*4,r};var u=function(t){this.buffers=[],this.bufferIndex=-1,t&&(this.insertBuffer(t),this.bufferIndex=0)};u.prototype=new l(new ArrayBuffer,0,l.BIG_ENDIAN),u.prototype.initialized=function(){var t;return this.bufferIndex>-1?!0:this.buffers.length>0?(t=this.buffers[0],t.fileStart===0?(this.buffer=t,this.bufferIndex=0,s.debug("MultiBufferStream","Stream ready for parsing"),!0):(s.warn("MultiBufferStream","The first buffer should have a fileStart of 0"),this.logBufferLevel(),!1)):(s.warn("MultiBufferStream","No buffer to start parsing from"),this.logBufferLevel(),!1)},ArrayBuffer.concat=function(t,n){s.debug("ArrayBuffer","Trying to create a new buffer of size: "+(t.byteLength+n.byteLength));var r=new Uint8Array(t.byteLength+n.byteLength);return r.set(new Uint8Array(t),0),r.set(new Uint8Array(n),t.byteLength),r.buffer},u.prototype.reduceBuffer=function(t,n,r){var f;return f=new Uint8Array(r),f.set(new Uint8Array(t,n,r)),f.buffer.fileStart=t.fileStart+n,f.buffer.usedBytes=0,f.buffer},u.prototype.insertBuffer=function(t){for(var n=!0,r=0;r<this.buffers.length;r++){var f=this.buffers[r];if(t.fileStart<=f.fileStart){if(t.fileStart===f.fileStart)if(t.byteLength>f.byteLength){this.buffers.splice(r,1),r--;continue}else s.warn("MultiBufferStream","Buffer (fileStart: "+t.fileStart+" - Length: "+t.byteLength+") already appended, ignoring");else t.fileStart+t.byteLength<=f.fileStart||(t=this.reduceBuffer(t,0,f.fileStart-t.fileStart)),s.debug("MultiBufferStream","Appending new buffer (fileStart: "+t.fileStart+" - Length: "+t.byteLength+")"),this.buffers.splice(r,0,t),r===0&&(this.buffer=t);n=!1;break}else if(t.fileStart<f.fileStart+f.byteLength){var h=f.fileStart+f.byteLength-t.fileStart,p=t.byteLength-h;if(p>0)t=this.reduceBuffer(t,h,p);else{n=!1;break}}}n&&(s.debug("MultiBufferStream","Appending new buffer (fileStart: "+t.fileStart+" - Length: "+t.byteLength+")"),this.buffers.push(t),r===0&&(this.buffer=t))},u.prototype.logBufferLevel=function(t){var n,r,f,h,p=[],g,S="";for(f=0,h=0,n=0;n<this.buffers.length;n++)r=this.buffers[n],n===0?(g={},p.push(g),g.start=r.fileStart,g.end=r.fileStart+r.byteLength,S+="["+g.start+"-"):g.end===r.fileStart?g.end=r.fileStart+r.byteLength:(g={},g.start=r.fileStart,S+=p[p.length-1].end-1+"], ["+g.start+"-",g.end=r.fileStart+r.byteLength,p.push(g)),f+=r.usedBytes,h+=r.byteLength;p.length>0&&(S+=g.end-1+"]");var C=t?s.info:s.debug;this.buffers.length===0?C("MultiBufferStream","No more buffer in memory"):C("MultiBufferStream",""+this.buffers.length+" stored buffer(s) ("+f+"/"+h+" bytes), continuous ranges: "+S)},u.prototype.cleanBuffers=function(){var t,n;for(t=0;t<this.buffers.length;t++)n=this.buffers[t],n.usedBytes===n.byteLength&&(s.debug("MultiBufferStream","Removing buffer #"+t),this.buffers.splice(t,1),t--)},u.prototype.mergeNextBuffer=function(){var t;if(this.bufferIndex+1<this.buffers.length)if(t=this.buffers[this.bufferIndex+1],t.fileStart===this.buffer.fileStart+this.buffer.byteLength){var n=this.buffer.byteLength,r=this.buffer.usedBytes,f=this.buffer.fileStart;return this.buffers[this.bufferIndex]=ArrayBuffer.concat(this.buffer,t),this.buffer=this.buffers[this.bufferIndex],this.buffers.splice(this.bufferIndex+1,1),this.buffer.usedBytes=r,this.buffer.fileStart=f,s.debug("ISOFile","Concatenating buffer for box parsing (length: "+n+"->"+this.buffer.byteLength+")"),!0}else return!1;else return!1},u.prototype.findPosition=function(t,n,r){var f,h=null,p=-1;for(t===!0?f=0:f=this.bufferIndex;f<this.buffers.length&&(h=this.buffers[f],h.fileStart<=n);){p=f,r&&(h.fileStart+h.byteLength<=n?h.usedBytes=h.byteLength:h.usedBytes=n-h.fileStart,this.logBufferLevel());f++}return p!==-1?(h=this.buffers[p],h.fileStart+h.byteLength>=n?(s.debug("MultiBufferStream","Found position in existing buffer #"+p),p):-1):-1},u.prototype.findEndContiguousBuf=function(t){var n,r,f,h=t!==void 0?t:this.bufferIndex;if(r=this.buffers[h],this.buffers.length>h+1)for(n=h+1;n<this.buffers.length&&(f=this.buffers[n],f.fileStart===r.fileStart+r.byteLength);n++)r=f;return r.fileStart+r.byteLength},u.prototype.getEndFilePositionAfter=function(t){var n=this.findPosition(!0,t,!1);return n!==-1?this.findEndContiguousBuf(n):t},u.prototype.addUsedBytes=function(t){this.buffer.usedBytes+=t,this.logBufferLevel()},u.prototype.setAllUsedBytes=function(){this.buffer.usedBytes=this.buffer.byteLength,this.logBufferLevel()},u.prototype.seek=function(t,n,r){var f;return f=this.findPosition(n,t,r),f!==-1?(this.buffer=this.buffers[f],this.bufferIndex=f,this.position=t-this.buffer.fileStart,s.debug("MultiBufferStream","Repositioning parser at buffer position: "+this.position),!0):(s.debug("MultiBufferStream","Position "+t+" not found in buffered data"),!1)},u.prototype.getPosition=function(){if(this.bufferIndex===-1||this.buffers[this.bufferIndex]===null)throw"Error accessing position in the MultiBufferStream";return this.buffers[this.bufferIndex].fileStart+this.position},u.prototype.getLength=function(){return this.byteLength},u.prototype.getEndPosition=function(){if(this.bufferIndex===-1||this.buffers[this.bufferIndex]===null)throw"Error accessing position in the MultiBufferStream";return this.buffers[this.bufferIndex].fileStart+this.byteLength},e.MultiBufferStream=u;var d=function(){var t=3,n=4,r=5,f=6,h=[];h[t]="ES_Descriptor",h[n]="DecoderConfigDescriptor",h[r]="DecoderSpecificInfo",h[f]="SLConfigDescriptor",this.getDescriptorName=function(S){return h[S]};var p=this,g={};return this.parseOneDescriptor=function(S){var C=0,A,L,M;for(A=S.readUint8(),M=S.readUint8();M&128;)C=(C<<7)+(M&127),M=S.readUint8();return C=(C<<7)+(M&127),s.debug("MPEG4DescriptorParser","Found "+(h[A]||"Descriptor "+A)+", size "+C+" at position "+S.getPosition()),h[A]?L=new g[h[A]](C):L=new g.Descriptor(C),L.parse(S),L},g.Descriptor=function(S,C){this.tag=S,this.size=C,this.descs=[]},g.Descriptor.prototype.parse=function(S){this.data=S.readUint8Array(this.size)},g.Descriptor.prototype.findDescriptor=function(S){for(var C=0;C<this.descs.length;C++)if(this.descs[C].tag==S)return this.descs[C];return null},g.Descriptor.prototype.parseRemainingDescriptors=function(S){for(var C=S.position;S.position<C+this.size;){var A=p.parseOneDescriptor(S);this.descs.push(A)}},g.ES_Descriptor=function(S){g.Descriptor.call(this,t,S)},g.ES_Descriptor.prototype=new g.Descriptor,g.ES_Descriptor.prototype.parse=function(S){if(this.ES_ID=S.readUint16(),this.flags=S.readUint8(),this.size-=3,this.flags&128?(this.dependsOn_ES_ID=S.readUint16(),this.size-=2):this.dependsOn_ES_ID=0,this.flags&64){var C=S.readUint8();this.URL=S.readString(C),this.size-=C+1}else this.URL="";this.flags&32?(this.OCR_ES_ID=S.readUint16(),this.size-=2):this.OCR_ES_ID=0,this.parseRemainingDescriptors(S)},g.ES_Descriptor.prototype.getOTI=function(S){var C=this.findDescriptor(n);return C?C.oti:0},g.ES_Descriptor.prototype.getAudioConfig=function(S){var C=this.findDescriptor(n);if(!C)return null;var A=C.findDescriptor(r);if(A&&A.data){var L=(A.data[0]&248)>>3;return L===31&&A.data.length>=2&&(L=32+((A.data[0]&7)<<3)+((A.data[1]&224)>>5)),L}else return null},g.DecoderConfigDescriptor=function(S){g.Descriptor.call(this,n,S)},g.DecoderConfigDescriptor.prototype=new g.Descriptor,g.DecoderConfigDescriptor.prototype.parse=function(S){this.oti=S.readUint8(),this.streamType=S.readUint8(),this.upStream=(this.streamType>>1&1)!==0,this.streamType=this.streamType>>>2,this.bufferSize=S.readUint24(),this.maxBitrate=S.readUint32(),this.avgBitrate=S.readUint32(),this.size-=13,this.parseRemainingDescriptors(S)},g.DecoderSpecificInfo=function(S){g.Descriptor.call(this,r,S)},g.DecoderSpecificInfo.prototype=new g.Descriptor,g.SLConfigDescriptor=function(S){g.Descriptor.call(this,f,S)},g.SLConfigDescriptor.prototype=new g.Descriptor,this};e.MPEG4DescriptorParser=d;var o={ERR_INVALID_DATA:-1,ERR_NOT_ENOUGH_DATA:0,OK:1,BASIC_BOXES:[{type:"mdat",name:"MediaDataBox"},{type:"idat",name:"ItemDataBox"},{type:"free",name:"FreeSpaceBox"},{type:"skip",name:"FreeSpaceBox"},{type:"meco",name:"AdditionalMetadataContainerBox"},{type:"strk",name:"SubTrackBox"}],FULL_BOXES:[{type:"hmhd",name:"HintMediaHeaderBox"},{type:"nmhd",name:"NullMediaHeaderBox"},{type:"iods",name:"ObjectDescriptorBox"},{type:"xml ",name:"XMLBox"},{type:"bxml",name:"BinaryXMLBox"},{type:"ipro",name:"ItemProtectionBox"},{type:"mere",name:"MetaboxRelationBox"}],CONTAINER_BOXES:[[{type:"moov",name:"CompressedMovieBox"},["trak","pssh"]],[{type:"trak",name:"TrackBox"}],[{type:"edts",name:"EditBox"}],[{type:"mdia",name:"MediaBox"}],[{type:"minf",name:"MediaInformationBox"}],[{type:"dinf",name:"DataInformationBox"}],[{type:"stbl",name:"SampleTableBox"},["sgpd","sbgp"]],[{type:"mvex",name:"MovieExtendsBox"},["trex"]],[{type:"moof",name:"CompressedMovieFragmentBox"},["traf"]],[{type:"traf",name:"TrackFragmentBox"},["trun","sgpd","sbgp"]],[{type:"vttc",name:"VTTCueBox"}],[{type:"tref",name:"TrackReferenceBox"}],[{type:"iref",name:"ItemReferenceBox"}],[{type:"mfra",name:"MovieFragmentRandomAccessBox"},["tfra"]],[{type:"meco",name:"AdditionalMetadataContainerBox"}],[{type:"hnti",name:"trackhintinformation"}],[{type:"hinf",name:"hintstatisticsbox"}],[{type:"strk",name:"SubTrackBox"}],[{type:"strd",name:"SubTrackDefinitionBox"}],[{type:"sinf",name:"ProtectionSchemeInfoBox"}],[{type:"rinf",name:"RestrictedSchemeInfoBox"}],[{type:"schi",name:"SchemeInformationBox"}],[{type:"trgr",name:"TrackGroupBox"}],[{type:"udta",name:"UserDataBox"},["kind"]],[{type:"iprp",name:"ItemPropertiesBox"},["ipma"]],[{type:"ipco",name:"ItemPropertyContainerBox"}],[{type:"grpl",name:"GroupsListBox"}],[{type:"j2kH",name:"J2KHeaderInfoBox"}],[{type:"etyp",name:"ExtendedTypeBox"},["tyco"]]],boxCodes:[],fullBoxCodes:[],containerBoxCodes:[],sampleEntryCodes:{},sampleGroupEntryCodes:[],trackGroupTypes:[],UUIDBoxes:{},UUIDs:[],initialize:function(){o.FullBox.prototype=new o.Box,o.ContainerBox.prototype=new o.Box,o.SampleEntry.prototype=new o.Box,o.TrackGroupTypeBox.prototype=new o.FullBox,o.BASIC_BOXES.forEach(function(t){o.createBoxCtor(t.type,t.name)}),o.FULL_BOXES.forEach(function(t){o.createFullBoxCtor(t.type,t.name)}),o.CONTAINER_BOXES.forEach(function(t){o.createContainerBoxCtor(t[0].type,t[0].name,null,t[1])})},Box:function(t,n,r,f){this.type=t,this.box_name=r,this.size=n,this.uuid=f},FullBox:function(t,n,r,f){o.Box.call(this,t,n,r,f),this.flags=0,this.version=0},ContainerBox:function(t,n,r,f){o.Box.call(this,t,n,r,f),this.boxes=[]},SampleEntry:function(t,n,r,f){o.ContainerBox.call(this,t,n),this.hdr_size=r,this.start=f},SampleGroupEntry:function(t){this.grouping_type=t},TrackGroupTypeBox:function(t,n){o.FullBox.call(this,t,n)},createBoxCtor:function(t,n,r){o.boxCodes.push(t),o[t+"Box"]=function(f){o.Box.call(this,t,f,n)},o[t+"Box"].prototype=new o.Box,r&&(o[t+"Box"].prototype.parse=r)},createFullBoxCtor:function(t,n,r){o[t+"Box"]=function(f){o.FullBox.call(this,t,f,n)},o[t+"Box"].prototype=new o.FullBox,o[t+"Box"].prototype.parse=function(f){this.parseFullHeader(f),r&&r.call(this,f)}},addSubBoxArrays:function(t){if(t){this.subBoxNames=t;for(var n=t.length,r=0;r<n;r++)this[t[r]+"s"]=[]}},createContainerBoxCtor:function(t,n,r,f){o[t+"Box"]=function(h){o.ContainerBox.call(this,t,h,n),o.addSubBoxArrays.call(this,f)},o[t+"Box"].prototype=new o.ContainerBox,r&&(o[t+"Box"].prototype.parse=r)},createMediaSampleEntryCtor:function(t,n,r){o.sampleEntryCodes[t]=[],o[t+"SampleEntry"]=function(f,h){o.SampleEntry.call(this,f,h),o.addSubBoxArrays.call(this,r)},o[t+"SampleEntry"].prototype=new o.SampleEntry,n&&(o[t+"SampleEntry"].prototype.parse=n)},createSampleEntryCtor:function(t,n,r,f){o.sampleEntryCodes[t].push(n),o[n+"SampleEntry"]=function(h){o[t+"SampleEntry"].call(this,n,h),o.addSubBoxArrays.call(this,f)},o[n+"SampleEntry"].prototype=new o[t+"SampleEntry"],r&&(o[n+"SampleEntry"].prototype.parse=r)},createEncryptedSampleEntryCtor:function(t,n,r){o.createSampleEntryCtor.call(this,t,n,r,["sinf"])},createSampleGroupCtor:function(t,n){o[t+"SampleGroupEntry"]=function(r){o.SampleGroupEntry.call(this,t,r)},o[t+"SampleGroupEntry"].prototype=new o.SampleGroupEntry,n&&(o[t+"SampleGroupEntry"].prototype.parse=n)},createTrackGroupCtor:function(t,n){o[t+"TrackGroupTypeBox"]=function(r){o.TrackGroupTypeBox.call(this,t,r)},o[t+"TrackGroupTypeBox"].prototype=new o.TrackGroupTypeBox,n&&(o[t+"TrackGroupTypeBox"].prototype.parse=n)},createUUIDBox:function(t,n,r,f,h){o.UUIDs.push(t),o.UUIDBoxes[t]=function(p){r?o.FullBox.call(this,"uuid",p,n,t):f?o.ContainerBox.call(this,"uuid",p,n,t):o.Box.call(this,"uuid",p,n,t)},o.UUIDBoxes[t].prototype=r?new o.FullBox:f?new o.ContainerBox:new o.Box,h&&(r?o.UUIDBoxes[t].prototype.parse=function(p){this.parseFullHeader(p),h&&h.call(this,p)}:o.UUIDBoxes[t].prototype.parse=h)}};o.initialize(),o.TKHD_FLAG_ENABLED=1,o.TKHD_FLAG_IN_MOVIE=2,o.TKHD_FLAG_IN_PREVIEW=4,o.TFHD_FLAG_BASE_DATA_OFFSET=1,o.TFHD_FLAG_SAMPLE_DESC=2,o.TFHD_FLAG_SAMPLE_DUR=8,o.TFHD_FLAG_SAMPLE_SIZE=16,o.TFHD_FLAG_SAMPLE_FLAGS=32,o.TFHD_FLAG_DUR_EMPTY=65536,o.TFHD_FLAG_DEFAULT_BASE_IS_MOOF=131072,o.TRUN_FLAGS_DATA_OFFSET=1,o.TRUN_FLAGS_FIRST_FLAG=4,o.TRUN_FLAGS_DURATION=256,o.TRUN_FLAGS_SIZE=512,o.TRUN_FLAGS_FLAGS=1024,o.TRUN_FLAGS_CTS_OFFSET=2048,o.Box.prototype.add=function(t){return this.addBox(new o[t+"Box"])},o.Box.prototype.addBox=function(t){return this.boxes.push(t),this[t.type+"s"]?this[t.type+"s"].push(t):this[t.type]=t,t},o.Box.prototype.set=function(t,n){return this[t]=n,this},o.Box.prototype.addEntry=function(t,n){var r=n||"entries";return this[r]||(this[r]=[]),this[r].push(t),this},e.BoxParser=o,o.parseUUID=function(t){return o.parseHex16(t)},o.parseHex16=function(t){for(var n="",r=0;r<16;r++){var f=t.readUint8().toString(16);n+=f.length===1?"0"+f:f}return n},o.parseOneBox=function(t,n,r){var f,h=t.getPosition(),p=0,g,S;if(t.getEndPosition()-h<8)return s.debug("BoxParser","Not enough data in stream to parse the type and size of the box"),{code:o.ERR_NOT_ENOUGH_DATA};if(r&&r<8)return s.debug("BoxParser","Not enough bytes left in the parent box to parse a new box"),{code:o.ERR_NOT_ENOUGH_DATA};var C=t.readUint32(),A=t.readString(4),L=A;if(s.debug("BoxParser","Found box of type '"+A+"' and size "+C+" at position "+h),p=8,A=="uuid"){if(t.getEndPosition()-t.getPosition()<16||r-p<16)return t.seek(h),s.debug("BoxParser","Not enough bytes left in the parent box to parse a UUID box"),{code:o.ERR_NOT_ENOUGH_DATA};S=o.parseUUID(t),p+=16,L=S}if(C==1){if(t.getEndPosition()-t.getPosition()<8||r&&r-p<8)return t.seek(h),s.warn("BoxParser",'Not enough data in stream to parse the extended size of the "'+A+'" box'),{code:o.ERR_NOT_ENOUGH_DATA};C=t.readUint64(),p+=8}else if(C===0){if(r)C=r;else if(A!=="mdat")return s.error("BoxParser","Unlimited box size not supported for type: '"+A+"'"),f=new o.Box(A,C),{code:o.OK,box:f,size:f.size}}return C!==0&&C<p?(s.error("BoxParser","Box of type "+A+" has an invalid size "+C+" (too small to be a box)"),{code:o.ERR_NOT_ENOUGH_DATA,type:A,size:C,hdr_size:p,start:h}):C!==0&&r&&C>r?(s.error("BoxParser","Box of type '"+A+"' has a size "+C+" greater than its container size "+r),{code:o.ERR_NOT_ENOUGH_DATA,type:A,size:C,hdr_size:p,start:h}):C!==0&&h+C>t.getEndPosition()?(t.seek(h),s.info("BoxParser","Not enough data in stream to parse the entire '"+A+"' box"),{code:o.ERR_NOT_ENOUGH_DATA,type:A,size:C,hdr_size:p,start:h}):n?{code:o.OK,type:A,size:C,hdr_size:p,start:h}:(o[A+"Box"]?f=new o[A+"Box"](C):A!=="uuid"?(s.warn("BoxParser","Unknown box type: '"+A+"'"),f=new o.Box(A,C),f.has_unparsed_data=!0):o.UUIDBoxes[S]?f=new o.UUIDBoxes[S](C):(s.warn("BoxParser","Unknown uuid type: '"+S+"'"),f=new o.Box(A,C),f.uuid=S,f.has_unparsed_data=!0),f.hdr_size=p,f.start=h,f.write===o.Box.prototype.write&&f.type!=="mdat"&&(s.info("BoxParser","'"+L+"' box writing not yet implemented, keeping unparsed data in memory for later write"),f.parseDataAndRewind(t)),f.parse(t),g=t.getPosition()-(f.start+f.size),g<0?(s.warn("BoxParser","Parsing of box '"+L+"' did not read the entire indicated box data size (missing "+-g+" bytes), seeking forward"),t.seek(f.start+f.size)):g>0&&(s.error("BoxParser","Parsing of box '"+L+"' read "+g+" more bytes than the indicated box data size, seeking backwards"),f.size!==0&&t.seek(f.start+f.size)),{code:o.OK,box:f,size:f.size})},o.Box.prototype.parse=function(t){this.type!="mdat"?this.data=t.readUint8Array(this.size-this.hdr_size):this.size===0?t.seek(t.getEndPosition()):t.seek(this.start+this.size)},o.Box.prototype.parseDataAndRewind=function(t){this.data=t.readUint8Array(this.size-this.hdr_size),t.position-=this.size-this.hdr_size},o.FullBox.prototype.parseDataAndRewind=function(t){this.parseFullHeader(t),this.data=t.readUint8Array(this.size-this.hdr_size),this.hdr_size-=4,t.position-=this.size-this.hdr_size},o.FullBox.prototype.parseFullHeader=function(t){this.version=t.readUint8(),this.flags=t.readUint24(),this.hdr_size+=4},o.FullBox.prototype.parse=function(t){this.parseFullHeader(t),this.data=t.readUint8Array(this.size-this.hdr_size)},o.ContainerBox.prototype.parse=function(t){for(var n,r;t.getPosition()<this.start+this.size;)if(n=o.parseOneBox(t,!1,this.size-(t.getPosition()-this.start)),n.code===o.OK)if(r=n.box,this.boxes.push(r),this.subBoxNames&&this.subBoxNames.indexOf(r.type)!=-1)this[this.subBoxNames[this.subBoxNames.indexOf(r.type)]+"s"].push(r);else{var f=r.type!=="uuid"?r.type:r.uuid;this[f]?s.warn("Box of type "+f+" already stored in field of this type"):this[f]=r}else return},o.Box.prototype.parseLanguage=function(t){this.language=t.readUint16();var n=[];n[0]=this.language>>10&31,n[1]=this.language>>5&31,n[2]=this.language&31,this.languageString=String.fromCharCode(n[0]+96,n[1]+96,n[2]+96)},o.SAMPLE_ENTRY_TYPE_VISUAL="Visual",o.SAMPLE_ENTRY_TYPE_AUDIO="Audio",o.SAMPLE_ENTRY_TYPE_HINT="Hint",o.SAMPLE_ENTRY_TYPE_METADATA="Metadata",o.SAMPLE_ENTRY_TYPE_SUBTITLE="Subtitle",o.SAMPLE_ENTRY_TYPE_SYSTEM="System",o.SAMPLE_ENTRY_TYPE_TEXT="Text",o.SampleEntry.prototype.parseHeader=function(t){t.readUint8Array(6),this.data_reference_index=t.readUint16(),this.hdr_size+=8},o.SampleEntry.prototype.parse=function(t){this.parseHeader(t),this.data=t.readUint8Array(this.size-this.hdr_size)},o.SampleEntry.prototype.parseDataAndRewind=function(t){this.parseHeader(t),this.data=t.readUint8Array(this.size-this.hdr_size),this.hdr_size-=8,t.position-=this.size-this.hdr_size},o.SampleEntry.prototype.parseFooter=function(t){o.ContainerBox.prototype.parse.call(this,t)},o.createMediaSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_HINT),o.createMediaSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_METADATA),o.createMediaSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_SUBTITLE),o.createMediaSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_SYSTEM),o.createMediaSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_TEXT),o.createMediaSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,function(t){var n;this.parseHeader(t),t.readUint16(),t.readUint16(),t.readUint32Array(3),this.width=t.readUint16(),this.height=t.readUint16(),this.horizresolution=t.readUint32(),this.vertresolution=t.readUint32(),t.readUint32(),this.frame_count=t.readUint16(),n=Math.min(31,t.readUint8()),this.compressorname=t.readString(n),n<31&&t.readString(31-n),this.depth=t.readUint16(),t.readUint16(),this.parseFooter(t)}),o.createMediaSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_AUDIO,function(t){this.parseHeader(t),t.readUint32Array(2),this.channel_count=t.readUint16(),this.samplesize=t.readUint16(),t.readUint16(),t.readUint16(),this.samplerate=t.readUint32()/65536,this.parseFooter(t)}),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"avc1"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"avc2"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"avc3"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"avc4"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"av01"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"dav1"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"hvc1"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"hev1"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"hvt1"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"lhe1"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"dvh1"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"dvhe"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"vvc1"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"vvi1"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"vvs1"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"vvcN"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"vp08"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"vp09"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"avs3"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"j2ki"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"mjp2"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"mjpg"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"uncv"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_AUDIO,"mp4a"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_AUDIO,"ac-3"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_AUDIO,"ac-4"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_AUDIO,"ec-3"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_AUDIO,"Opus"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_AUDIO,"mha1"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_AUDIO,"mha2"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_AUDIO,"mhm1"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_AUDIO,"mhm2"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_AUDIO,"fLaC"),o.createEncryptedSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"encv"),o.createEncryptedSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_AUDIO,"enca"),o.createEncryptedSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_SUBTITLE,"encu"),o.createEncryptedSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_SYSTEM,"encs"),o.createEncryptedSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_TEXT,"enct"),o.createEncryptedSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_METADATA,"encm"),o.createBoxCtor("a1lx","AV1LayeredImageIndexingProperty",function(t){var n=t.readUint8()&1,r=((n&1)+1)*16;this.layer_size=[];for(var f=0;f<3;f++)r==16?this.layer_size[f]=t.readUint16():this.layer_size[f]=t.readUint32()}),o.createBoxCtor("a1op","OperatingPointSelectorProperty",function(t){this.op_index=t.readUint8()}),o.createFullBoxCtor("auxC","AuxiliaryTypeProperty",function(t){this.aux_type=t.readCString();var n=this.size-this.hdr_size-(this.aux_type.length+1);this.aux_subtype=t.readUint8Array(n)}),o.createBoxCtor("av1C","AV1CodecConfigurationBox",function(t){var n=t.readUint8();if((n>>7&1)!==1){s.error("av1C marker problem");return}if(this.version=n&127,this.version!==1){s.error("av1C version "+this.version+" not supported");return}if(n=t.readUint8(),this.seq_profile=n>>5&7,this.seq_level_idx_0=n&31,n=t.readUint8(),this.seq_tier_0=n>>7&1,this.high_bitdepth=n>>6&1,this.twelve_bit=n>>5&1,this.monochrome=n>>4&1,this.chroma_subsampling_x=n>>3&1,this.chroma_subsampling_y=n>>2&1,this.chroma_sample_position=n&3,n=t.readUint8(),this.reserved_1=n>>5&7,this.reserved_1!==0){s.error("av1C reserved_1 parsing problem");return}if(this.initial_presentation_delay_present=n>>4&1,this.initial_presentation_delay_present===1)this.initial_presentation_delay_minus_one=n&15;else if(this.reserved_2=n&15,this.reserved_2!==0){s.error("av1C reserved_2 parsing problem");return}var r=this.size-this.hdr_size-4;this.configOBUs=t.readUint8Array(r)});function _(t){var n="<table class='inner-table'>";n+="<thead><tr><th>length</th><th>nalu_data</th></tr></thead>",n+="<tbody>";for(var r=0;r<t.length;r++){var f=t[r];n+="<tr>",n+="<td>"+f.length+"</td>",n+="<td>",n+=f.nalu.reduce(function(h,p){return h+p.toString(16).padStart(2,"0")},"0x"),n+="</td></tr>"}return n+="</tbody></table>",n}o.createBoxCtor("avcC","AVCConfigurationBox",function(t){var n,r;for(this.configurationVersion=t.readUint8(),this.AVCProfileIndication=t.readUint8(),this.profile_compatibility=t.readUint8(),this.AVCLevelIndication=t.readUint8(),this.lengthSizeMinusOne=t.readUint8()&3,this.nb_SPS_nalus=t.readUint8()&31,r=this.size-this.hdr_size-6,this.SPS=[],this.SPS.toString=function(){return _(this)},n=0;n<this.nb_SPS_nalus;n++)this.SPS[n]={},this.SPS[n].length=t.readUint16(),this.SPS[n].nalu=t.readUint8Array(this.SPS[n].length),r-=2+this.SPS[n].length;for(this.nb_PPS_nalus=t.readUint8(),r--,this.PPS=[],this.PPS.toString=function(){return _(this)},n=0;n<this.nb_PPS_nalus;n++)this.PPS[n]={},this.PPS[n].length=t.readUint16(),this.PPS[n].nalu=t.readUint8Array(this.PPS[n].length),r-=2+this.PPS[n].length;r>0&&(this.ext=t.readUint8Array(r))}),o.createBoxCtor("btrt","BitRateBox",function(t){this.bufferSizeDB=t.readUint32(),this.maxBitrate=t.readUint32(),this.avgBitrate=t.readUint32()}),o.createFullBoxCtor("ccst","CodingConstraintsBox",function(t){var n=t.readUint8();this.all_ref_pics_intra=(n&128)==128,this.intra_pred_used=(n&64)==64,this.max_ref_per_pic=(n&63)>>2,t.readUint24()}),o.createBoxCtor("cdef","ComponentDefinitionBox",function(t){var n;for(this.channel_count=t.readUint16(),this.channel_indexes=[],this.channel_types=[],this.channel_associations=[],n=0;n<this.channel_count;n++)this.channel_indexes.push(t.readUint16()),this.channel_types.push(t.readUint16()),this.channel_associations.push(t.readUint16())}),o.createBoxCtor("clap","CleanApertureBox",function(t){this.cleanApertureWidthN=t.readUint32(),this.cleanApertureWidthD=t.readUint32(),this.cleanApertureHeightN=t.readUint32(),this.cleanApertureHeightD=t.readUint32(),this.horizOffN=t.readUint32(),this.horizOffD=t.readUint32(),this.vertOffN=t.readUint32(),this.vertOffD=t.readUint32()}),o.createBoxCtor("clli","ContentLightLevelBox",function(t){this.max_content_light_level=t.readUint16(),this.max_pic_average_light_level=t.readUint16()}),o.createFullBoxCtor("cmex","CameraExtrinsicMatrixProperty",function(t){this.flags&1&&(this.pos_x=t.readInt32()),this.flags&2&&(this.pos_y=t.readInt32()),this.flags&4&&(this.pos_z=t.readInt32()),this.flags&8&&(this.version==0?this.flags&16?(this.quat_x=t.readInt32(),this.quat_y=t.readInt32(),this.quat_z=t.readInt32()):(this.quat_x=t.readInt16(),this.quat_y=t.readInt16(),this.quat_z=t.readInt16()):this.version==1),this.flags&32&&(this.id=t.readUint32())}),o.createFullBoxCtor("cmin","CameraIntrinsicMatrixProperty",function(t){this.focal_length_x=t.readInt32(),this.principal_point_x=t.readInt32(),this.principal_point_y=t.readInt32(),this.flags&1&&(this.focal_length_y=t.readInt32(),this.skew_factor=t.readInt32())}),o.createBoxCtor("cmpd","ComponentDefinitionBox",function(t){for(this.component_count=t.readUint32(),this.component_types=[],this.component_type_urls=[],i=0;i<this.component_count;i++){var n=t.readUint16();this.component_types.push(n),n>=32768&&this.component_type_urls.push(t.readCString())}}),o.createFullBoxCtor("co64","ChunkLargeOffsetBox",function(t){var n,r;if(n=t.readUint32(),this.chunk_offsets=[],this.version===0)for(r=0;r<n;r++)this.chunk_offsets.push(t.readUint64())}),o.createFullBoxCtor("CoLL","ContentLightLevelBox",function(t){this.maxCLL=t.readUint16(),this.maxFALL=t.readUint16()}),o.createBoxCtor("colr","ColourInformationBox",function(t){if(this.colour_type=t.readString(4),this.colour_type==="nclx"){this.colour_primaries=t.readUint16(),this.transfer_characteristics=t.readUint16(),this.matrix_coefficients=t.readUint16();var n=t.readUint8();this.full_range_flag=n>>7}else this.colour_type==="rICC"?this.ICC_profile=t.readUint8Array(this.size-4):this.colour_type==="prof"&&(this.ICC_profile=t.readUint8Array(this.size-4))}),o.createFullBoxCtor("cprt","CopyrightBox",function(t){this.parseLanguage(t),this.notice=t.readCString()}),o.createFullBoxCtor("cslg","CompositionToDecodeBox",function(t){this.version===0&&(this.compositionToDTSShift=t.readInt32(),this.leastDecodeToDisplayDelta=t.readInt32(),this.greatestDecodeToDisplayDelta=t.readInt32(),this.compositionStartTime=t.readInt32(),this.compositionEndTime=t.readInt32())}),o.createFullBoxCtor("ctts","CompositionOffsetBox",function(t){var n,r;if(n=t.readUint32(),this.sample_counts=[],this.sample_offsets=[],this.version===0)for(r=0;r<n;r++){this.sample_counts.push(t.readUint32());var f=t.readInt32();f<0&&s.warn("BoxParser","ctts box uses negative values without using version 1"),this.sample_offsets.push(f)}else if(this.version==1)for(r=0;r<n;r++)this.sample_counts.push(t.readUint32()),this.sample_offsets.push(t.readInt32())}),o.createBoxCtor("dac3","AC3SpecificBox",function(t){var n=t.readUint8(),r=t.readUint8(),f=t.readUint8();this.fscod=n>>6,this.bsid=n>>1&31,this.bsmod=(n&1)<<2|r>>6&3,this.acmod=r>>3&7,this.lfeon=r>>2&1,this.bit_rate_code=r&3|f>>5&7}),o.createBoxCtor("dec3","EC3SpecificBox",function(t){var n=t.readUint16();this.data_rate=n>>3,this.num_ind_sub=n&7,this.ind_subs=[];for(var r=0;r<this.num_ind_sub+1;r++){var f={};this.ind_subs.push(f);var h=t.readUint8(),p=t.readUint8(),g=t.readUint8();f.fscod=h>>6,f.bsid=h>>1&31,f.bsmod=(h&1)<<4|p>>4&15,f.acmod=p>>1&7,f.lfeon=p&1,f.num_dep_sub=g>>1&15,f.num_dep_sub>0&&(f.chan_loc=(g&1)<<8|t.readUint8())}}),o.createFullBoxCtor("dfLa","FLACSpecificBox",function(t){var n=127,r=128,f=[],h=["STREAMINFO","PADDING","APPLICATION","SEEKTABLE","VORBIS_COMMENT","CUESHEET","PICTURE","RESERVED"];do{var p=t.readUint8(),g=Math.min(p&n,h.length-1);if(g?t.readUint8Array(t.readUint24()):(t.readUint8Array(13),this.samplerate=t.readUint32()>>12,t.readUint8Array(20)),f.push(h[g]),p&r)break}while(!0);this.numMetadataBlocks=f.length+" ("+f.join(", ")+")"}),o.createBoxCtor("dimm","hintimmediateBytesSent",function(t){this.bytessent=t.readUint64()}),o.createBoxCtor("dmax","hintlongestpacket",function(t){this.time=t.readUint32()}),o.createBoxCtor("dmed","hintmediaBytesSent",function(t){this.bytessent=t.readUint64()}),o.createBoxCtor("dOps","OpusSpecificBox",function(t){if(this.Version=t.readUint8(),this.OutputChannelCount=t.readUint8(),this.PreSkip=t.readUint16(),this.InputSampleRate=t.readUint32(),this.OutputGain=t.readInt16(),this.ChannelMappingFamily=t.readUint8(),this.ChannelMappingFamily!==0){this.StreamCount=t.readUint8(),this.CoupledCount=t.readUint8(),this.ChannelMapping=[];for(var n=0;n<this.OutputChannelCount;n++)this.ChannelMapping[n]=t.readUint8()}}),o.createFullBoxCtor("dref","DataReferenceBox",function(t){var n,r;this.entries=[];for(var f=t.readUint32(),h=0;h<f;h++)if(n=o.parseOneBox(t,!1,this.size-(t.getPosition()-this.start)),n.code===o.OK)r=n.box,this.entries.push(r);else return}),o.createBoxCtor("drep","hintrepeatedBytesSent",function(t){this.bytessent=t.readUint64()}),o.createFullBoxCtor("elng","ExtendedLanguageBox",function(t){this.extended_language=t.readString(this.size-this.hdr_size)}),o.createFullBoxCtor("elst","EditListBox",function(t){this.entries=[];for(var n=t.readUint32(),r=0;r<n;r++){var f={};this.entries.push(f),this.version===1?(f.segment_duration=t.readUint64(),f.media_time=t.readInt64()):(f.segment_duration=t.readUint32(),f.media_time=t.readInt32()),f.media_rate_integer=t.readInt16(),f.media_rate_fraction=t.readInt16()}}),o.createFullBoxCtor("emsg","EventMessageBox",function(t){this.version==1?(this.timescale=t.readUint32(),this.presentation_time=t.readUint64(),this.event_duration=t.readUint32(),this.id=t.readUint32(),this.scheme_id_uri=t.readCString(),this.value=t.readCString()):(this.scheme_id_uri=t.readCString(),this.value=t.readCString(),this.timescale=t.readUint32(),this.presentation_time_delta=t.readUint32(),this.event_duration=t.readUint32(),this.id=t.readUint32());var n=this.size-this.hdr_size-(4*4+(this.scheme_id_uri.length+1)+(this.value.length+1));this.version==1&&(n-=4),this.message_data=t.readUint8Array(n)}),o.createEntityToGroupCtor=function(t,n){o[t+"Box"]=function(r){o.FullBox.call(this,t,r)},o[t+"Box"].prototype=new o.FullBox,o[t+"Box"].prototype.parse=function(r){if(this.parseFullHeader(r),n)n.call(this,r);else for(this.group_id=r.readUint32(),this.num_entities_in_group=r.readUint32(),this.entity_ids=[],i=0;i<this.num_entities_in_group;i++){var f=r.readUint32();this.entity_ids.push(f)}}},o.createEntityToGroupCtor("aebr"),o.createEntityToGroupCtor("afbr"),o.createEntityToGroupCtor("albc"),o.createEntityToGroupCtor("altr"),o.createEntityToGroupCtor("brst"),o.createEntityToGroupCtor("dobr"),o.createEntityToGroupCtor("eqiv"),o.createEntityToGroupCtor("favc"),o.createEntityToGroupCtor("fobr"),o.createEntityToGroupCtor("iaug"),o.createEntityToGroupCtor("pano"),o.createEntityToGroupCtor("slid"),o.createEntityToGroupCtor("ster"),o.createEntityToGroupCtor("tsyn"),o.createEntityToGroupCtor("wbbr"),o.createEntityToGroupCtor("prgr"),o.createEntityToGroupCtor("pymd",function(t){this.group_id=t.readUint32(),this.num_entities_in_group=t.readUint32(),this.entity_ids=[];for(var n=0;n<this.num_entities_in_group;n++){var r=t.readUint32();this.entity_ids.push(r)}for(this.tile_size_x=t.readUint16(),this.tile_size_y=t.readUint16(),this.layer_binning=[],this.tiles_in_layer_column_minus1=[],this.tiles_in_layer_row_minus1=[],n=0;n<this.num_entities_in_group;n++)this.layer_binning[n]=t.readUint16(),this.tiles_in_layer_row_minus1[n]=t.readUint16(),this.tiles_in_layer_column_minus1[n]=t.readUint16()}),o.createFullBoxCtor("esds","ElementaryStreamDescriptorBox",function(t){var n=t.readUint8Array(this.size-this.hdr_size);if(typeof d<"u"){var r=new d;this.esd=r.parseOneDescriptor(new l(n.buffer,0,l.BIG_ENDIAN))}}),o.createBoxCtor("fiel","FieldHandlingBox",function(t){this.fieldCount=t.readUint8(),this.fieldOrdering=t.readUint8()}),o.createBoxCtor("frma","OriginalFormatBox",function(t){this.data_format=t.readString(4)}),o.createBoxCtor("ftyp","FileTypeBox",function(t){var n=this.size-this.hdr_size;this.major_brand=t.readString(4),this.minor_version=t.readUint32(),n-=8,this.compatible_brands=[];for(var r=0;n>=4;)this.compatible_brands[r]=t.readString(4),n-=4,r++}),o.createFullBoxCtor("hdlr","HandlerBox",function(t){this.version===0&&(t.readUint32(),this.handler=t.readString(4),t.readUint32Array(3),this.name=t.readString(this.size-this.hdr_size-20),this.name[this.name.length-1]==="\0"&&(this.name=this.name.slice(0,-1)))}),o.createBoxCtor("hvcC","HEVCConfigurationBox",function(t){var n,r,f,h;this.configurationVersion=t.readUint8(),h=t.readUint8(),this.general_profile_space=h>>6,this.general_tier_flag=(h&32)>>5,this.general_profile_idc=h&31,this.general_profile_compatibility=t.readUint32(),this.general_constraint_indicator=t.readUint8Array(6),this.general_level_idc=t.readUint8(),this.min_spatial_segmentation_idc=t.readUint16()&4095,this.parallelismType=t.readUint8()&3,this.chroma_format_idc=t.readUint8()&3,this.bit_depth_luma_minus8=t.readUint8()&7,this.bit_depth_chroma_minus8=t.readUint8()&7,this.avgFrameRate=t.readUint16(),h=t.readUint8(),this.constantFrameRate=h>>6,this.numTemporalLayers=(h&13)>>3,this.temporalIdNested=(h&4)>>2,this.lengthSizeMinusOne=h&3,this.nalu_arrays=[],this.nalu_arrays.toString=function(){var A="<table class='inner-table'>";A+="<thead><tr><th>completeness</th><th>nalu_type</th><th>nalu_data</th></tr></thead>",A+="<tbody>";for(var L=0;L<this.length;L++){var M=this[L];A+="<tr>",A+="<td rowspan='"+M.length+"'>"+M.completeness+"</td>",A+="<td rowspan='"+M.length+"'>"+M.nalu_type+"</td>";for(var j=0;j<M.length;j++){var D=M[j];j!==0&&(A+="<tr>"),A+="<td>",A+=D.data.reduce(function(at,it){return at+it.toString(16).padStart(2,"0")},"0x"),A+="</td></tr>"}}return A+="</tbody></table>",A};var p=t.readUint8();for(n=0;n<p;n++){var g=[];this.nalu_arrays.push(g),h=t.readUint8(),g.completeness=(h&128)>>7,g.nalu_type=h&63;var S=t.readUint16();for(r=0;r<S;r++){var C={};g.push(C),f=t.readUint16(),C.data=t.readUint8Array(f)}}}),o.createFullBoxCtor("iinf","ItemInfoBox",function(t){var n;this.version===0?this.entry_count=t.readUint16():this.entry_count=t.readUint32(),this.item_infos=[];for(var r=0;r<this.entry_count;r++)if(n=o.parseOneBox(t,!1,this.size-(t.getPosition()-this.start)),n.code===o.OK)n.box.type!=="infe"&&s.error("BoxParser","Expected 'infe' box, got "+n.box.type),this.item_infos[r]=n.box;else return}),o.createFullBoxCtor("iloc","ItemLocationBox",function(t){var n;n=t.readUint8(),this.offset_size=n>>4&15,this.length_size=n&15,n=t.readUint8(),this.base_offset_size=n>>4&15,this.version===1||this.version===2?this.index_size=n&15:this.index_size=0,this.items=[];var r=0;if(this.version<2)r=t.readUint16();else if(this.version===2)r=t.readUint32();else throw"version of iloc box not supported";for(var f=0;f<r;f++){var h={};if(this.items.push(h),this.version<2)h.item_ID=t.readUint16();else if(this.version===2)h.item_ID=t.readUint32();else throw"version of iloc box not supported";switch(this.version===1||this.version===2?h.construction_method=t.readUint16()&15:h.construction_method=0,h.data_reference_index=t.readUint16(),this.base_offset_size){case 0:h.base_offset=0;break;case 4:h.base_offset=t.readUint32();break;case 8:h.base_offset=t.readUint64();break;default:throw"Error reading base offset size"}var p=t.readUint16();h.extents=[];for(var g=0;g<p;g++){var S={};if(h.extents.push(S),this.version===1||this.version===2)switch(this.index_size){case 0:S.extent_index=0;break;case 4:S.extent_index=t.readUint32();break;case 8:S.extent_index=t.readUint64();break;default:throw"Error reading extent index"}switch(this.offset_size){case 0:S.extent_offset=0;break;case 4:S.extent_offset=t.readUint32();break;case 8:S.extent_offset=t.readUint64();break;default:throw"Error reading extent index"}switch(this.length_size){case 0:S.extent_length=0;break;case 4:S.extent_length=t.readUint32();break;case 8:S.extent_length=t.readUint64();break;default:throw"Error reading extent index"}}}}),o.createBoxCtor("imir","ImageMirror",function(t){var n=t.readUint8();this.reserved=n>>7,this.axis=n&1}),o.createFullBoxCtor("infe","ItemInfoEntry",function(t){if((this.version===0||this.version===1)&&(this.item_ID=t.readUint16(),this.item_protection_index=t.readUint16(),this.item_name=t.readCString(),this.content_type=t.readCString(),this.content_encoding=t.readCString()),this.version===1){this.extension_type=t.readString(4),s.warn("BoxParser","Cannot parse extension type"),t.seek(this.start+this.size);return}this.version>=2&&(this.version===2?this.item_ID=t.readUint16():this.version===3&&(this.item_ID=t.readUint32()),this.item_protection_index=t.readUint16(),this.item_type=t.readString(4),this.item_name=t.readCString(),this.item_type==="mime"?(this.content_type=t.readCString(),this.content_encoding=t.readCString()):this.item_type==="uri "&&(this.item_uri_type=t.readCString()))}),o.createFullBoxCtor("ipma","ItemPropertyAssociationBox",function(t){var n,r;for(entry_count=t.readUint32(),this.associations=[],n=0;n<entry_count;n++){var f={};this.associations.push(f),this.version<1?f.id=t.readUint16():f.id=t.readUint32();var h=t.readUint8();for(f.props=[],r=0;r<h;r++){var p=t.readUint8(),g={};f.props.push(g),g.essential=(p&128)>>7===1,this.flags&1?g.property_index=(p&127)<<8|t.readUint8():g.property_index=p&127}}}),o.createFullBoxCtor("iref","ItemReferenceBox",function(t){var n,r;for(this.references=[];t.getPosition()<this.start+this.size;)if(n=o.parseOneBox(t,!0,this.size-(t.getPosition()-this.start)),n.code===o.OK)this.version===0?r=new o.SingleItemTypeReferenceBox(n.type,n.size,n.hdr_size,n.start):r=new o.SingleItemTypeReferenceBoxLarge(n.type,n.size,n.hdr_size,n.start),r.write===o.Box.prototype.write&&r.type!=="mdat"&&(s.warn("BoxParser",r.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),r.parseDataAndRewind(t)),r.parse(t),this.references.push(r);else return}),o.createBoxCtor("irot","ImageRotation",function(t){this.angle=t.readUint8()&3}),o.createFullBoxCtor("ispe","ImageSpatialExtentsProperty",function(t){this.image_width=t.readUint32(),this.image_height=t.readUint32()}),o.createFullBoxCtor("kind","KindBox",function(t){this.schemeURI=t.readCString(),this.value=t.readCString()}),o.createFullBoxCtor("leva","LevelAssignmentBox",function(t){var n=t.readUint8();this.levels=[];for(var r=0;r<n;r++){var f={};this.levels[r]=f,f.track_ID=t.readUint32();var h=t.readUint8();switch(f.padding_flag=h>>7,f.assignment_type=h&127,f.assignment_type){case 0:f.grouping_type=t.readString(4);break;case 1:f.grouping_type=t.readString(4),f.grouping_type_parameter=t.readUint32();break;case 2:break;case 3:break;case 4:f.sub_track_id=t.readUint32();break;default:s.warn("BoxParser","Unknown leva assignement type")}}}),o.createBoxCtor("lhvC","LHEVCConfigurationBox",function(t){var n,r,f;this.configurationVersion=t.readUint8(),this.min_spatial_segmentation_idc=t.readUint16()&4095,this.parallelismType=t.readUint8()&3,f=t.readUint8(),this.numTemporalLayers=(f&13)>>3,this.temporalIdNested=(f&4)>>2,this.lengthSizeMinusOne=f&3,this.nalu_arrays=[],this.nalu_arrays.toString=function(){var A="<table class='inner-table'>";A+="<thead><tr><th>completeness</th><th>nalu_type</th><th>nalu_data</th></tr></thead>",A+="<tbody>";for(var L=0;L<this.length;L++){var M=this[L];A+="<tr>",A+="<td rowspan='"+M.length+"'>"+M.completeness+"</td>",A+="<td rowspan='"+M.length+"'>"+M.nalu_type+"</td>";for(var j=0;j<M.length;j++){var D=M[j];j!==0&&(A+="<tr>"),A+="<td>",A+=D.data.reduce(function(at,it){return at+it.toString(16).padStart(2,"0")},"0x"),A+="</td></tr>"}}return A+="</tbody></table>",A};var h=t.readUint8();for(n=0;n<h;n++){var p=[];this.nalu_arrays.push(p),f=t.readUint8(),p.completeness=(f&128)>>7,p.nalu_type=f&63;var g=t.readUint16();for(r=0;r<g;r++){var S={};p.push(S);var C=t.readUint16();S.data=t.readUint8Array(C)}}}),o.createBoxCtor("lsel","LayerSelectorProperty",function(t){this.layer_id=t.readUint16()}),o.createBoxCtor("maxr","hintmaxrate",function(t){this.period=t.readUint32(),this.bytes=t.readUint32()});function b(t,n){this.x=t,this.y=n}b.prototype.toString=function(){return"("+this.x+","+this.y+")"},o.createBoxCtor("mdcv","MasteringDisplayColourVolumeBox",function(t){this.display_primaries=[],this.display_primaries[0]=new b(t.readUint16(),t.readUint16()),this.display_primaries[1]=new b(t.readUint16(),t.readUint16()),this.display_primaries[2]=new b(t.readUint16(),t.readUint16()),this.white_point=new b(t.readUint16(),t.readUint16()),this.max_display_mastering_luminance=t.readUint32(),this.min_display_mastering_luminance=t.readUint32()}),o.createFullBoxCtor("mdhd","MediaHeaderBox",function(t){this.version==1?(this.creation_time=t.readUint64(),this.modification_time=t.readUint64(),this.timescale=t.readUint32(),this.duration=t.readUint64()):(this.creation_time=t.readUint32(),this.modification_time=t.readUint32(),this.timescale=t.readUint32(),this.duration=t.readUint32()),this.parseLanguage(t),t.readUint16()}),o.createFullBoxCtor("mehd","MovieExtendsHeaderBox",function(t){this.flags&1&&(s.warn("BoxParser","mehd box incorrectly uses flags set to 1, converting version to 1"),this.version=1),this.version==1?this.fragment_duration=t.readUint64():this.fragment_duration=t.readUint32()}),o.createFullBoxCtor("meta","MetaBox",function(t){this.boxes=[],o.ContainerBox.prototype.parse.call(this,t)}),o.createFullBoxCtor("mfhd","MovieFragmentHeaderBox",function(t){this.sequence_number=t.readUint32()}),o.createFullBoxCtor("mfro","MovieFragmentRandomAccessOffsetBox",function(t){this._size=t.readUint32()}),o.createFullBoxCtor("mskC","MaskConfigurationProperty",function(t){this.bits_per_pixel=t.readUint8()}),o.createFullBoxCtor("mvhd","MovieHeaderBox",function(t){this.version==1?(this.creation_time=t.readUint64(),this.modification_time=t.readUint64(),this.timescale=t.readUint32(),this.duration=t.readUint64()):(this.creation_time=t.readUint32(),this.modification_time=t.readUint32(),this.timescale=t.readUint32(),this.duration=t.readUint32()),this.rate=t.readUint32(),this.volume=t.readUint16()>>8,t.readUint16(),t.readUint32Array(2),this.matrix=t.readUint32Array(9),t.readUint32Array(6),this.next_track_id=t.readUint32()}),o.createBoxCtor("npck","hintPacketsSent",function(t){this.packetssent=t.readUint32()}),o.createBoxCtor("nump","hintPacketsSent",function(t){this.packetssent=t.readUint64()}),o.createFullBoxCtor("padb","PaddingBitsBox",function(t){var n=t.readUint32();this.padbits=[];for(var r=0;r<Math.floor((n+1)/2);r++)this.padbits=t.readUint8()}),o.createBoxCtor("pasp","PixelAspectRatioBox",function(t){this.hSpacing=t.readUint32(),this.vSpacing=t.readUint32()}),o.createBoxCtor("payl","CuePayloadBox",function(t){this.text=t.readString(this.size-this.hdr_size)}),o.createBoxCtor("payt","hintpayloadID",function(t){this.payloadID=t.readUint32();var n=t.readUint8();this.rtpmap_string=t.readString(n)}),o.createFullBoxCtor("pdin","ProgressiveDownloadInfoBox",function(t){var n=(this.size-this.hdr_size)/8;this.rate=[],this.initial_delay=[];for(var r=0;r<n;r++)this.rate[r]=t.readUint32(),this.initial_delay[r]=t.readUint32()}),o.createFullBoxCtor("pitm","PrimaryItemBox",function(t){this.version===0?this.item_id=t.readUint16():this.item_id=t.readUint32()}),o.createFullBoxCtor("pixi","PixelInformationProperty",function(t){var n;for(this.num_channels=t.readUint8(),this.bits_per_channels=[],n=0;n<this.num_channels;n++)this.bits_per_channels[n]=t.readUint8()}),o.createBoxCtor("pmax","hintlargestpacket",function(t){this.bytes=t.readUint32()}),o.createFullBoxCtor("prdi","ProgressiveDerivedImageItemInformationProperty",function(t){if(this.step_count=t.readUint16(),this.item_count=[],this.flags&2)for(var n=0;n<this.step_count;n++)this.item_count[n]=t.readUint16()}),o.createFullBoxCtor("prft","ProducerReferenceTimeBox",function(t){this.ref_track_id=t.readUint32(),this.ntp_timestamp=t.readUint64(),this.version===0?this.media_time=t.readUint32():this.media_time=t.readUint64()}),o.createFullBoxCtor("pssh","ProtectionSystemSpecificHeaderBox",function(t){if(this.system_id=o.parseHex16(t),this.version>0){var n=t.readUint32();this.kid=[];for(var r=0;r<n;r++)this.kid[r]=o.parseHex16(t)}var f=t.readUint32();f>0&&(this.data=t.readUint8Array(f))}),o.createFullBoxCtor("clef","TrackCleanApertureDimensionsBox",function(t){this.width=t.readUint32(),this.height=t.readUint32()}),o.createFullBoxCtor("enof","TrackEncodedPixelsDimensionsBox",function(t){this.width=t.readUint32(),this.height=t.readUint32()}),o.createFullBoxCtor("prof","TrackProductionApertureDimensionsBox",function(t){this.width=t.readUint32(),this.height=t.readUint32()}),o.createContainerBoxCtor("tapt","TrackApertureModeDimensionsBox",null,["clef","prof","enof"]),o.createBoxCtor("rtp ","rtpmoviehintinformation",function(t){this.descriptionformat=t.readString(4),this.sdptext=t.readString(this.size-this.hdr_size-4)}),o.createFullBoxCtor("saio","SampleAuxiliaryInformationOffsetsBox",function(t){this.flags&1&&(this.aux_info_type=t.readString(4),this.aux_info_type_parameter=t.readUint32());var n=t.readUint32();this.offset=[];for(var r=0;r<n;r++)this.version===0?this.offset[r]=t.readUint32():this.offset[r]=t.readUint64()}),o.createFullBoxCtor("saiz","SampleAuxiliaryInformationSizesBox",function(t){if(this.flags&1&&(this.aux_info_type=t.readString(4),this.aux_info_type_parameter=t.readUint32()),this.default_sample_info_size=t.readUint8(),this.sample_count=t.readUint32(),this.sample_info_size=[],this.default_sample_info_size===0)for(var n=0;n<this.sample_count;n++)this.sample_info_size[n]=t.readUint8()}),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_METADATA,"mett",function(t){this.parseHeader(t),this.content_encoding=t.readCString(),this.mime_format=t.readCString(),this.parseFooter(t)}),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_METADATA,"metx",function(t){this.parseHeader(t),this.content_encoding=t.readCString(),this.namespace=t.readCString(),this.schema_location=t.readCString(),this.parseFooter(t)}),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_SUBTITLE,"sbtt",function(t){this.parseHeader(t),this.content_encoding=t.readCString(),this.mime_format=t.readCString(),this.parseFooter(t)}),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_SUBTITLE,"stpp",function(t){this.parseHeader(t),this.namespace=t.readCString(),this.schema_location=t.readCString(),this.auxiliary_mime_types=t.readCString(),this.parseFooter(t)}),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_SUBTITLE,"stxt",function(t){this.parseHeader(t),this.content_encoding=t.readCString(),this.mime_format=t.readCString(),this.parseFooter(t)}),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_SUBTITLE,"tx3g",function(t){this.parseHeader(t),this.displayFlags=t.readUint32(),this.horizontal_justification=t.readInt8(),this.vertical_justification=t.readInt8(),this.bg_color_rgba=t.readUint8Array(4),this.box_record=t.readInt16Array(4),this.style_record=t.readUint8Array(12),this.parseFooter(t)}),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_METADATA,"wvtt",function(t){this.parseHeader(t),this.parseFooter(t)}),o.createSampleGroupCtor("alst",function(t){var n,r=t.readUint16();for(this.first_output_sample=t.readUint16(),this.sample_offset=[],n=0;n<r;n++)this.sample_offset[n]=t.readUint32();var f=this.description_length-4-4*r;for(this.num_output_samples=[],this.num_total_samples=[],n=0;n<f/4;n++)this.num_output_samples[n]=t.readUint16(),this.num_total_samples[n]=t.readUint16()}),o.createSampleGroupCtor("avll",function(t){this.layerNumber=t.readUint8(),this.accurateStatisticsFlag=t.readUint8(),this.avgBitRate=t.readUint16(),this.avgFrameRate=t.readUint16()}),o.createSampleGroupCtor("avss",function(t){this.subSequenceIdentifier=t.readUint16(),this.layerNumber=t.readUint8();var n=t.readUint8();this.durationFlag=n>>7,this.avgRateFlag=n>>6&1,this.durationFlag&&(this.duration=t.readUint32()),this.avgRateFlag&&(this.accurateStatisticsFlag=t.readUint8(),this.avgBitRate=t.readUint16(),this.avgFrameRate=t.readUint16()),this.dependency=[];for(var r=t.readUint8(),f=0;f<r;f++){var h={};this.dependency.push(h),h.subSeqDirectionFlag=t.readUint8(),h.layerNumber=t.readUint8(),h.subSequenceIdentifier=t.readUint16()}}),o.createSampleGroupCtor("dtrt",function(t){s.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),o.createSampleGroupCtor("mvif",function(t){s.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),o.createSampleGroupCtor("prol",function(t){this.roll_distance=t.readInt16()}),o.createSampleGroupCtor("rap ",function(t){var n=t.readUint8();this.num_leading_samples_known=n>>7,this.num_leading_samples=n&127}),o.createSampleGroupCtor("rash",function(t){if(this.operation_point_count=t.readUint16(),this.description_length!==2+(this.operation_point_count===1?2:this.operation_point_count*6)+9)s.warn("BoxParser","Mismatch in "+this.grouping_type+" sample group length"),this.data=t.readUint8Array(this.description_length-2);else{if(this.operation_point_count===1)this.target_rate_share=t.readUint16();else{this.target_rate_share=[],this.available_bitrate=[];for(var n=0;n<this.operation_point_count;n++)this.available_bitrate[n]=t.readUint32(),this.target_rate_share[n]=t.readUint16()}this.maximum_bitrate=t.readUint32(),this.minimum_bitrate=t.readUint32(),this.discard_priority=t.readUint8()}}),o.createSampleGroupCtor("roll",function(t){this.roll_distance=t.readInt16()}),o.SampleGroupEntry.prototype.parse=function(t){s.warn("BoxParser","Unknown Sample Group type: "+this.grouping_type),this.data=t.readUint8Array(this.description_length)},o.createSampleGroupCtor("scif",function(t){s.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),o.createSampleGroupCtor("scnm",function(t){s.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),o.createSampleGroupCtor("seig",function(t){this.reserved=t.readUint8();var n=t.readUint8();this.crypt_byte_block=n>>4,this.skip_byte_block=n&15,this.isProtected=t.readUint8(),this.Per_Sample_IV_Size=t.readUint8(),this.KID=o.parseHex16(t),this.constant_IV_size=0,this.constant_IV=0,this.isProtected===1&&this.Per_Sample_IV_Size===0&&(this.constant_IV_size=t.readUint8(),this.constant_IV=t.readUint8Array(this.constant_IV_size))}),o.createSampleGroupCtor("stsa",function(t){s.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),o.createSampleGroupCtor("sync",function(t){var n=t.readUint8();this.NAL_unit_type=n&63}),o.createSampleGroupCtor("tele",function(t){var n=t.readUint8();this.level_independently_decodable=n>>7}),o.createSampleGroupCtor("tsas",function(t){s.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),o.createSampleGroupCtor("tscl",function(t){s.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),o.createSampleGroupCtor("vipr",function(t){s.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),o.createFullBoxCtor("sbgp","SampleToGroupBox",function(t){this.grouping_type=t.readString(4),this.version===1?this.grouping_type_parameter=t.readUint32():this.grouping_type_parameter=0,this.entries=[];for(var n=t.readUint32(),r=0;r<n;r++){var f={};this.entries.push(f),f.sample_count=t.readInt32(),f.group_description_index=t.readInt32()}});function v(t,n){this.bad_pixel_row=t,this.bad_pixel_column=n}v.prototype.toString=function(){return"[row: "+this.bad_pixel_row+", column: "+this.bad_pixel_column+"]"},o.createFullBoxCtor("sbpm","SensorBadPixelsMapBox",function(t){var n;for(this.component_count=t.readUint16(),this.component_index=[],n=0;n<this.component_count;n++)this.component_index.push(t.readUint16());var r=t.readUint8();for(this.correction_applied=(r&128)==128,this.num_bad_rows=t.readUint32(),this.num_bad_cols=t.readUint32(),this.num_bad_pixels=t.readUint32(),this.bad_rows=[],this.bad_columns=[],this.bad_pixels=[],n=0;n<this.num_bad_rows;n++)this.bad_rows.push(t.readUint32());for(n=0;n<this.num_bad_cols;n++)this.bad_columns.push(t.readUint32());for(n=0;n<this.num_bad_pixels;n++){var f=t.readUint32(),h=t.readUint32();this.bad_pixels.push(new v(f,h))}}),o.createFullBoxCtor("schm","SchemeTypeBox",function(t){this.scheme_type=t.readString(4),this.scheme_version=t.readUint32(),this.flags&1&&(this.scheme_uri=t.readString(this.size-this.hdr_size-8))}),o.createBoxCtor("sdp ","rtptracksdphintinformation",function(t){this.sdptext=t.readString(this.size-this.hdr_size)}),o.createFullBoxCtor("sdtp","SampleDependencyTypeBox",function(t){var n,r=this.size-this.hdr_size;this.is_leading=[],this.sample_depends_on=[],this.sample_is_depended_on=[],this.sample_has_redundancy=[];for(var f=0;f<r;f++)n=t.readUint8(),this.is_leading[f]=n>>6,this.sample_depends_on[f]=n>>4&3,this.sample_is_depended_on[f]=n>>2&3,this.sample_has_redundancy[f]=n&3}),o.createFullBoxCtor("senc","SampleEncryptionBox"),o.createFullBoxCtor("sgpd","SampleGroupDescriptionBox",function(t){this.grouping_type=t.readString(4),s.debug("BoxParser","Found Sample Groups of type "+this.grouping_type),this.version===1?this.default_length=t.readUint32():this.default_length=0,this.version>=2&&(this.default_group_description_index=t.readUint32()),this.entries=[];for(var n=t.readUint32(),r=0;r<n;r++){var f;o[this.grouping_type+"SampleGroupEntry"]?f=new o[this.grouping_type+"SampleGroupEntry"](this.grouping_type):f=new o.SampleGroupEntry(this.grouping_type),this.entries.push(f),this.version===1?this.default_length===0?f.description_length=t.readUint32():f.description_length=this.default_length:f.description_length=this.default_length,f.write===o.SampleGroupEntry.prototype.write&&(s.info("BoxParser","SampleGroup for type "+this.grouping_type+" writing not yet implemented, keeping unparsed data in memory for later write"),f.data=t.readUint8Array(f.description_length),t.position-=f.description_length),f.parse(t)}}),o.createFullBoxCtor("sidx","CompressedSegmentIndexBox",function(t){this.reference_ID=t.readUint32(),this.timescale=t.readUint32(),this.version===0?(this.earliest_presentation_time=t.readUint32(),this.first_offset=t.readUint32()):(this.earliest_presentation_time=t.readUint64(),this.first_offset=t.readUint64()),t.readUint16(),this.references=[];for(var n=t.readUint16(),r=0;r<n;r++){var f={};this.references.push(f);var h=t.readUint32();f.reference_type=h>>31&1,f.referenced_size=h&2147483647,f.subsegment_duration=t.readUint32(),h=t.readUint32(),f.starts_with_SAP=h>>31&1,f.SAP_type=h>>28&7,f.SAP_delta_time=h&268435455}}),o.SingleItemTypeReferenceBox=function(t,n,r,f){o.Box.call(this,t,n),this.hdr_size=r,this.start=f},o.SingleItemTypeReferenceBox.prototype=new o.Box,o.SingleItemTypeReferenceBox.prototype.parse=function(t){this.from_item_ID=t.readUint16();var n=t.readUint16();this.references=[];for(var r=0;r<n;r++)this.references[r]={},this.references[r].to_item_ID=t.readUint16()},o.SingleItemTypeReferenceBoxLarge=function(t,n,r,f){o.Box.call(this,t,n),this.hdr_size=r,this.start=f},o.SingleItemTypeReferenceBoxLarge.prototype=new o.Box,o.SingleItemTypeReferenceBoxLarge.prototype.parse=function(t){this.from_item_ID=t.readUint32();var n=t.readUint16();this.references=[];for(var r=0;r<n;r++)this.references[r]={},this.references[r].to_item_ID=t.readUint32()},o.createFullBoxCtor("SmDm","SMPTE2086MasteringDisplayMetadataBox",function(t){this.primaryRChromaticity_x=t.readUint16(),this.primaryRChromaticity_y=t.readUint16(),this.primaryGChromaticity_x=t.readUint16(),this.primaryGChromaticity_y=t.readUint16(),this.primaryBChromaticity_x=t.readUint16(),this.primaryBChromaticity_y=t.readUint16(),this.whitePointChromaticity_x=t.readUint16(),this.whitePointChromaticity_y=t.readUint16(),this.luminanceMax=t.readUint32(),this.luminanceMin=t.readUint32()}),o.createFullBoxCtor("smhd","SoundMediaHeaderBox",function(t){this.balance=t.readUint16(),t.readUint16()}),o.createFullBoxCtor("ssix","CompressedSubsegmentIndexBox",function(t){this.subsegments=[];for(var n=t.readUint32(),r=0;r<n;r++){var f={};this.subsegments.push(f),f.ranges=[];for(var h=t.readUint32(),p=0;p<h;p++){var g={};f.ranges.push(g),g.level=t.readUint8(),g.range_size=t.readUint24()}}}),o.createFullBoxCtor("stco","ChunkOffsetBox",function(t){var n;if(n=t.readUint32(),this.chunk_offsets=[],this.version===0)for(var r=0;r<n;r++)this.chunk_offsets.push(t.readUint32())}),o.createFullBoxCtor("stdp","DegradationPriorityBox",function(t){var n=(this.size-this.hdr_size)/2;this.priority=[];for(var r=0;r<n;r++)this.priority[r]=t.readUint16()}),o.createFullBoxCtor("sthd","SubtitleMediaHeaderBox"),o.createFullBoxCtor("stri","SubTrackInformationBox",function(t){this.switch_group=t.readUint16(),this.alternate_group=t.readUint16(),this.sub_track_id=t.readUint32();var n=(this.size-this.hdr_size-8)/4;this.attribute_list=[];for(var r=0;r<n;r++)this.attribute_list[r]=t.readUint32()}),o.createFullBoxCtor("stsc","SampleToChunkBox",function(t){var n,r;if(n=t.readUint32(),this.first_chunk=[],this.samples_per_chunk=[],this.sample_description_index=[],this.version===0)for(r=0;r<n;r++)this.first_chunk.push(t.readUint32()),this.samples_per_chunk.push(t.readUint32()),this.sample_description_index.push(t.readUint32())}),o.createFullBoxCtor("stsd","SampleDescriptionBox",function(t){var n,r,f,h;for(this.entries=[],f=t.readUint32(),n=1;n<=f;n++)if(r=o.parseOneBox(t,!0,this.size-(t.getPosition()-this.start)),r.code===o.OK)o[r.type+"SampleEntry"]?(h=new o[r.type+"SampleEntry"](r.size),h.hdr_size=r.hdr_size,h.start=r.start):(s.warn("BoxParser","Unknown sample entry type: "+r.type),h=new o.SampleEntry(r.type,r.size,r.hdr_size,r.start)),h.write===o.SampleEntry.prototype.write&&(s.info("BoxParser","SampleEntry "+h.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),h.parseDataAndRewind(t)),h.parse(t),this.entries.push(h);else return}),o.createFullBoxCtor("stsg","SubTrackSampleGroupBox",function(t){this.grouping_type=t.readUint32();var n=t.readUint16();this.group_description_index=[];for(var r=0;r<n;r++)this.group_description_index[r]=t.readUint32()}),o.createFullBoxCtor("stsh","ShadowSyncSampleBox",function(t){var n,r;if(n=t.readUint32(),this.shadowed_sample_numbers=[],this.sync_sample_numbers=[],this.version===0)for(r=0;r<n;r++)this.shadowed_sample_numbers.push(t.readUint32()),this.sync_sample_numbers.push(t.readUint32())}),o.createFullBoxCtor("stss","SyncSampleBox",function(t){var n,r;if(r=t.readUint32(),this.version===0)for(this.sample_numbers=[],n=0;n<r;n++)this.sample_numbers.push(t.readUint32())}),o.createFullBoxCtor("stsz","SampleSizeBox",function(t){var n;if(this.sample_sizes=[],this.version===0)for(this.sample_size=t.readUint32(),this.sample_count=t.readUint32(),n=0;n<this.sample_count;n++)this.sample_size===0?this.sample_sizes.push(t.readUint32()):this.sample_sizes[n]=this.sample_size}),o.createFullBoxCtor("stts","TimeToSampleBox",function(t){var n,r,f;if(n=t.readUint32(),this.sample_counts=[],this.sample_deltas=[],this.version===0)for(r=0;r<n;r++)this.sample_counts.push(t.readUint32()),f=t.readInt32(),f<0&&(s.warn("BoxParser","File uses negative stts sample delta, using value 1 instead, sync may be lost!"),f=1),this.sample_deltas.push(f)}),o.createFullBoxCtor("stvi","StereoVideoBox",function(t){var n=t.readUint32();this.single_view_allowed=n&3,this.stereo_scheme=t.readUint32();var r=t.readUint32();this.stereo_indication_type=t.readString(r);var f,h;for(this.boxes=[];t.getPosition()<this.start+this.size;)if(f=o.parseOneBox(t,!1,this.size-(t.getPosition()-this.start)),f.code===o.OK)h=f.box,this.boxes.push(h),this[h.type]=h;else return}),o.createBoxCtor("styp","SegmentTypeBox",function(t){o.ftypBox.prototype.parse.call(this,t)}),o.createFullBoxCtor("stz2","CompactSampleSizeBox",function(t){var n,r;if(this.sample_sizes=[],this.version===0)if(this.reserved=t.readUint24(),this.field_size=t.readUint8(),r=t.readUint32(),this.field_size===4)for(n=0;n<r;n+=2){var f=t.readUint8();this.sample_sizes[n]=f>>4&15,this.sample_sizes[n+1]=f&15}else if(this.field_size===8)for(n=0;n<r;n++)this.sample_sizes[n]=t.readUint8();else if(this.field_size===16)for(n=0;n<r;n++)this.sample_sizes[n]=t.readUint16();else s.error("BoxParser","Error in length field in stz2 box")}),o.createFullBoxCtor("subs","SubSampleInformationBox",function(t){var n,r,f,h;for(f=t.readUint32(),this.entries=[],n=0;n<f;n++){var p={};if(this.entries[n]=p,p.sample_delta=t.readUint32(),p.subsamples=[],h=t.readUint16(),h>0)for(r=0;r<h;r++){var g={};p.subsamples.push(g),this.version==1?g.size=t.readUint32():g.size=t.readUint16(),g.priority=t.readUint8(),g.discardable=t.readUint8(),g.codec_specific_parameters=t.readUint32()}}}),o.createFullBoxCtor("tenc","TrackEncryptionBox",function(t){if(t.readUint8(),this.version===0)t.readUint8();else{var n=t.readUint8();this.default_crypt_byte_block=n>>4&15,this.default_skip_byte_block=n&15}this.default_isProtected=t.readUint8(),this.default_Per_Sample_IV_Size=t.readUint8(),this.default_KID=o.parseHex16(t),this.default_isProtected===1&&this.default_Per_Sample_IV_Size===0&&(this.default_constant_IV_size=t.readUint8(),this.default_constant_IV=t.readUint8Array(this.default_constant_IV_size))}),o.createFullBoxCtor("tfdt","TrackFragmentBaseMediaDecodeTimeBox",function(t){this.version==1?this.baseMediaDecodeTime=t.readUint64():this.baseMediaDecodeTime=t.readUint32()}),o.createFullBoxCtor("tfhd","TrackFragmentHeaderBox",function(t){var n=0;this.track_id=t.readUint32(),this.size-this.hdr_size>n&&this.flags&o.TFHD_FLAG_BASE_DATA_OFFSET?(this.base_data_offset=t.readUint64(),n+=8):this.base_data_offset=0,this.size-this.hdr_size>n&&this.flags&o.TFHD_FLAG_SAMPLE_DESC?(this.default_sample_description_index=t.readUint32(),n+=4):this.default_sample_description_index=0,this.size-this.hdr_size>n&&this.flags&o.TFHD_FLAG_SAMPLE_DUR?(this.default_sample_duration=t.readUint32(),n+=4):this.default_sample_duration=0,this.size-this.hdr_size>n&&this.flags&o.TFHD_FLAG_SAMPLE_SIZE?(this.default_sample_size=t.readUint32(),n+=4):this.default_sample_size=0,this.size-this.hdr_size>n&&this.flags&o.TFHD_FLAG_SAMPLE_FLAGS?(this.default_sample_flags=t.readUint32(),n+=4):this.default_sample_flags=0}),o.createFullBoxCtor("tfra","TrackFragmentRandomAccessBox",function(t){this.track_ID=t.readUint32(),t.readUint24();var n=t.readUint8();this.length_size_of_traf_num=n>>4&3,this.length_size_of_trun_num=n>>2&3,this.length_size_of_sample_num=n&3,this.entries=[];for(var r=t.readUint32(),f=0;f<r;f++)this.version===1?(this.time=t.readUint64(),this.moof_offset=t.readUint64()):(this.time=t.readUint32(),this.moof_offset=t.readUint32()),this.traf_number=t["readUint"+8*(this.length_size_of_traf_num+1)](),this.trun_number=t["readUint"+8*(this.length_size_of_trun_num+1)](),this.sample_number=t["readUint"+8*(this.length_size_of_sample_num+1)]()}),o.createFullBoxCtor("tkhd","TrackHeaderBox",function(t){this.version==1?(this.creation_time=t.readUint64(),this.modification_time=t.readUint64(),this.track_id=t.readUint32(),t.readUint32(),this.duration=t.readUint64()):(this.creation_time=t.readUint32(),this.modification_time=t.readUint32(),this.track_id=t.readUint32(),t.readUint32(),this.duration=t.readUint32()),t.readUint32Array(2),this.layer=t.readInt16(),this.alternate_group=t.readInt16(),this.volume=t.readInt16()>>8,t.readUint16(),this.matrix=t.readInt32Array(9),this.width=t.readUint32(),this.height=t.readUint32()}),o.createBoxCtor("tmax","hintmaxrelativetime",function(t){this.time=t.readUint32()}),o.createBoxCtor("tmin","hintminrelativetime",function(t){this.time=t.readUint32()}),o.createBoxCtor("totl","hintBytesSent",function(t){this.bytessent=t.readUint32()}),o.createBoxCtor("tpay","hintBytesSent",function(t){this.bytessent=t.readUint32()}),o.createBoxCtor("tpyl","hintBytesSent",function(t){this.bytessent=t.readUint64()}),o.TrackGroupTypeBox.prototype.parse=function(t){this.parseFullHeader(t),this.track_group_id=t.readUint32()},o.createTrackGroupCtor("msrc"),o.TrackReferenceTypeBox=function(t,n,r,f){o.Box.call(this,t,n),this.hdr_size=r,this.start=f},o.TrackReferenceTypeBox.prototype=new o.Box,o.TrackReferenceTypeBox.prototype.parse=function(t){this.track_ids=t.readUint32Array((this.size-this.hdr_size)/4)},o.trefBox.prototype.parse=function(t){for(var n,r;t.getPosition()<this.start+this.size;)if(n=o.parseOneBox(t,!0,this.size-(t.getPosition()-this.start)),n.code===o.OK)r=new o.TrackReferenceTypeBox(n.type,n.size,n.hdr_size,n.start),r.write===o.Box.prototype.write&&r.type!=="mdat"&&(s.info("BoxParser","TrackReference "+r.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),r.parseDataAndRewind(t)),r.parse(t),this.boxes.push(r);else return},o.createFullBoxCtor("trep","TrackExtensionPropertiesBox",function(t){for(this.track_ID=t.readUint32(),this.boxes=[];t.getPosition()<this.start+this.size;)if(ret=o.parseOneBox(t,!1,this.size-(t.getPosition()-this.start)),ret.code===o.OK)box=ret.box,this.boxes.push(box);else return}),o.createFullBoxCtor("trex","TrackExtendsBox",function(t){this.track_id=t.readUint32(),this.default_sample_description_index=t.readUint32(),this.default_sample_duration=t.readUint32(),this.default_sample_size=t.readUint32(),this.default_sample_flags=t.readUint32()}),o.createBoxCtor("trpy","hintBytesSent",function(t){this.bytessent=t.readUint64()}),o.createFullBoxCtor("trun","TrackRunBox",function(t){var n=0;if(this.sample_count=t.readUint32(),n+=4,this.size-this.hdr_size>n&&this.flags&o.TRUN_FLAGS_DATA_OFFSET?(this.data_offset=t.readInt32(),n+=4):this.data_offset=0,this.size-this.hdr_size>n&&this.flags&o.TRUN_FLAGS_FIRST_FLAG?(this.first_sample_flags=t.readUint32(),n+=4):this.first_sample_flags=0,this.sample_duration=[],this.sample_size=[],this.sample_flags=[],this.sample_composition_time_offset=[],this.size-this.hdr_size>n)for(var r=0;r<this.sample_count;r++)this.flags&o.TRUN_FLAGS_DURATION&&(this.sample_duration[r]=t.readUint32()),this.flags&o.TRUN_FLAGS_SIZE&&(this.sample_size[r]=t.readUint32()),this.flags&o.TRUN_FLAGS_FLAGS&&(this.sample_flags[r]=t.readUint32()),this.flags&o.TRUN_FLAGS_CTS_OFFSET&&(this.version===0?this.sample_composition_time_offset[r]=t.readUint32():this.sample_composition_time_offset[r]=t.readInt32())}),o.createFullBoxCtor("tsel","TrackSelectionBox",function(t){this.switch_group=t.readUint32();var n=(this.size-this.hdr_size-4)/4;this.attribute_list=[];for(var r=0;r<n;r++)this.attribute_list[r]=t.readUint32()}),o.createFullBoxCtor("txtC","TextConfigBox",function(t){this.config=t.readCString()}),o.createBoxCtor("tyco","TypeCombinationBox",function(t){var n=(this.size-this.hdr_size)/4;this.compatible_brands=[];for(var r=0;r<n;r++)this.compatible_brands[r]=t.readString(4)}),o.createFullBoxCtor("udes","UserDescriptionProperty",function(t){this.lang=t.readCString(),this.name=t.readCString(),this.description=t.readCString(),this.tags=t.readCString()}),o.createFullBoxCtor("uncC","UncompressedFrameConfigBox",function(t){var n;if(this.profile=t.readString(4),this.version!=1){if(this.version==0){for(this.component_count=t.readUint32(),this.component_index=[],this.component_bit_depth_minus_one=[],this.component_format=[],this.component_align_size=[],n=0;n<this.component_count;n++)this.component_index.push(t.readUint16()),this.component_bit_depth_minus_one.push(t.readUint8()),this.component_format.push(t.readUint8()),this.component_align_size.push(t.readUint8());this.sampling_type=t.readUint8(),this.interleave_type=t.readUint8(),this.block_size=t.readUint8();var r=t.readUint8();this.component_little_endian=r>>7&1,this.block_pad_lsb=r>>6&1,this.block_little_endian=r>>5&1,this.block_reversed=r>>4&1,this.pad_unknown=r>>3&1,this.pixel_size=t.readUint32(),this.row_align_size=t.readUint32(),this.tile_align_size=t.readUint32(),this.num_tile_cols_minus_one=t.readUint32(),this.num_tile_rows_minus_one=t.readUint32()}}}),o.createFullBoxCtor("url ","DataEntryUrlBox",function(t){this.flags!==1&&(this.location=t.readCString())}),o.createFullBoxCtor("urn ","DataEntryUrnBox",function(t){this.name=t.readCString(),this.size-this.hdr_size-this.name.length-1>0&&(this.location=t.readCString())}),o.createUUIDBox("a5d40b30e81411ddba2f0800200c9a66","LiveServerManifestBox",!0,!1,function(t){this.LiveServerManifest=t.readString(this.size-this.hdr_size).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}),o.createUUIDBox("d08a4f1810f34a82b6c832d8aba183d3","PiffProtectionSystemSpecificHeaderBox",!0,!1,function(t){this.system_id=o.parseHex16(t);var n=t.readUint32();n>0&&(this.data=t.readUint8Array(n))}),o.createUUIDBox("a2394f525a9b4f14a2446c427c648df4","PiffSampleEncryptionBox",!0,!1),o.createUUIDBox("8974dbce7be74c5184f97148f9882554","PiffTrackEncryptionBox",!0,!1,function(t){this.default_AlgorithmID=t.readUint24(),this.default_IV_size=t.readUint8(),this.default_KID=o.parseHex16(t)}),o.createUUIDBox("d4807ef2ca3946958e5426cb9e46a79f","TfrfBox",!0,!1,function(t){this.fragment_count=t.readUint8(),this.entries=[];for(var n=0;n<this.fragment_count;n++){var r={},f=0,h=0;this.version===1?(f=t.readUint64(),h=t.readUint64()):(f=t.readUint32(),h=t.readUint32()),r.absolute_time=f,r.absolute_duration=h,this.entries.push(r)}}),o.createUUIDBox("6d1d9b0542d544e680e2141daff757b2","TfxdBox",!0,!1,function(t){this.version===1?(this.absolute_time=t.readUint64(),this.duration=t.readUint64()):(this.absolute_time=t.readUint32(),this.duration=t.readUint32())}),o.createFullBoxCtor("vmhd","VideoMediaHeaderBox",function(t){this.graphicsmode=t.readUint16(),this.opcolor=t.readUint16Array(3)}),o.createFullBoxCtor("vpcC","VPCodecConfigurationRecord",function(t){var n;this.version===1?(this.profile=t.readUint8(),this.level=t.readUint8(),n=t.readUint8(),this.bitDepth=n>>4,this.chromaSubsampling=n>>1&7,this.videoFullRangeFlag=n&1,this.colourPrimaries=t.readUint8(),this.transferCharacteristics=t.readUint8(),this.matrixCoefficients=t.readUint8(),this.codecIntializationDataSize=t.readUint16(),this.codecIntializationData=t.readUint8Array(this.codecIntializationDataSize)):(this.profile=t.readUint8(),this.level=t.readUint8(),n=t.readUint8(),this.bitDepth=n>>4&15,this.colorSpace=n&15,n=t.readUint8(),this.chromaSubsampling=n>>4&15,this.transferFunction=n>>1&7,this.videoFullRangeFlag=n&1,this.codecIntializationDataSize=t.readUint16(),this.codecIntializationData=t.readUint8Array(this.codecIntializationDataSize))}),o.createBoxCtor("vttC","WebVTTConfigurationBox",function(t){this.text=t.readString(this.size-this.hdr_size)}),o.createFullBoxCtor("vvcC","VvcConfigurationBox",function(t){var n,r,f={held_bits:void 0,num_held_bits:0,stream_read_1_bytes:function(D){this.held_bits=D.readUint8(),this.num_held_bits=8},stream_read_2_bytes:function(D){this.held_bits=D.readUint16(),this.num_held_bits=16},extract_bits:function(D){var at=this.held_bits>>this.num_held_bits-D&(1<<D)-1;return this.num_held_bits-=D,at}};if(f.stream_read_1_bytes(t),f.extract_bits(5),this.lengthSizeMinusOne=f.extract_bits(2),this.ptl_present_flag=f.extract_bits(1),this.ptl_present_flag){f.stream_read_2_bytes(t),this.ols_idx=f.extract_bits(9),this.num_sublayers=f.extract_bits(3),this.constant_frame_rate=f.extract_bits(2),this.chroma_format_idc=f.extract_bits(2),f.stream_read_1_bytes(t),this.bit_depth_minus8=f.extract_bits(3),f.extract_bits(5);{if(f.stream_read_2_bytes(t),f.extract_bits(2),this.num_bytes_constraint_info=f.extract_bits(6),this.general_profile_idc=f.extract_bits(7),this.general_tier_flag=f.extract_bits(1),this.general_level_idc=t.readUint8(),f.stream_read_1_bytes(t),this.ptl_frame_only_constraint_flag=f.extract_bits(1),this.ptl_multilayer_enabled_flag=f.extract_bits(1),this.general_constraint_info=new Uint8Array(this.num_bytes_constraint_info),this.num_bytes_constraint_info){for(n=0;n<this.num_bytes_constraint_info-1;n++){var h=f.extract_bits(6);f.stream_read_1_bytes(t);var p=f.extract_bits(2);this.general_constraint_info[n]=h<<2|p}this.general_constraint_info[this.num_bytes_constraint_info-1]=f.extract_bits(6)}else f.extract_bits(6);if(this.num_sublayers>1){for(f.stream_read_1_bytes(t),this.ptl_sublayer_present_mask=0,r=this.num_sublayers-2;r>=0;--r){var g=f.extract_bits(1);this.ptl_sublayer_present_mask|=g<<r}for(r=this.num_sublayers;r<=8&&this.num_sublayers>1;++r)f.extract_bits(1);for(this.sublayer_level_idc=[],r=this.num_sublayers-2;r>=0;--r)this.ptl_sublayer_present_mask&1<<r&&(this.sublayer_level_idc[r]=t.readUint8())}if(this.ptl_num_sub_profiles=t.readUint8(),this.general_sub_profile_idc=[],this.ptl_num_sub_profiles)for(n=0;n<this.ptl_num_sub_profiles;n++)this.general_sub_profile_idc.push(t.readUint32())}this.max_picture_width=t.readUint16(),this.max_picture_height=t.readUint16(),this.avg_frame_rate=t.readUint16()}var S=12,C=13;this.nalu_arrays=[];var A=t.readUint8();for(n=0;n<A;n++){var L=[];this.nalu_arrays.push(L),f.stream_read_1_bytes(t),L.completeness=f.extract_bits(1),f.extract_bits(2),L.nalu_type=f.extract_bits(5);var M=1;for(L.nalu_type!=C&&L.nalu_type!=S&&(M=t.readUint16()),r=0;r<M;r++){var j=t.readUint16();L.push({data:t.readUint8Array(j),length:j})}}}),o.createFullBoxCtor("vvnC","VvcNALUConfigBox",function(t){var n=strm.readUint8();this.lengthSizeMinusOne=n&3}),o.SampleEntry.prototype.isVideo=function(){return!1},o.SampleEntry.prototype.isAudio=function(){return!1},o.SampleEntry.prototype.isSubtitle=function(){return!1},o.SampleEntry.prototype.isMetadata=function(){return!1},o.SampleEntry.prototype.isHint=function(){return!1},o.SampleEntry.prototype.getCodec=function(){return this.type.replace(".","")},o.SampleEntry.prototype.getWidth=function(){return""},o.SampleEntry.prototype.getHeight=function(){return""},o.SampleEntry.prototype.getChannelCount=function(){return""},o.SampleEntry.prototype.getSampleRate=function(){return""},o.SampleEntry.prototype.getSampleSize=function(){return""},o.VisualSampleEntry.prototype.isVideo=function(){return!0},o.VisualSampleEntry.prototype.getWidth=function(){return this.width},o.VisualSampleEntry.prototype.getHeight=function(){return this.height},o.AudioSampleEntry.prototype.isAudio=function(){return!0},o.AudioSampleEntry.prototype.getChannelCount=function(){return this.channel_count},o.AudioSampleEntry.prototype.getSampleRate=function(){return this.samplerate},o.AudioSampleEntry.prototype.getSampleSize=function(){return this.samplesize},o.SubtitleSampleEntry.prototype.isSubtitle=function(){return!0},o.MetadataSampleEntry.prototype.isMetadata=function(){return!0},o.decimalToHex=function(t,n){var r=Number(t).toString(16);for(n=typeof n>"u"||n===null?n=2:n;r.length<n;)r="0"+r;return r},o.avc1SampleEntry.prototype.getCodec=o.avc2SampleEntry.prototype.getCodec=o.avc3SampleEntry.prototype.getCodec=o.avc4SampleEntry.prototype.getCodec=function(){var t=o.SampleEntry.prototype.getCodec.call(this);return this.avcC?t+"."+o.decimalToHex(this.avcC.AVCProfileIndication)+o.decimalToHex(this.avcC.profile_compatibility)+o.decimalToHex(this.avcC.AVCLevelIndication):t},o.hev1SampleEntry.prototype.getCodec=o.hvc1SampleEntry.prototype.getCodec=function(){var t,n=o.SampleEntry.prototype.getCodec.call(this);if(this.hvcC){switch(n+=".",this.hvcC.general_profile_space){case 0:n+="";break;case 1:n+="A";break;case 2:n+="B";break;case 3:n+="C";break}n+=this.hvcC.general_profile_idc,n+=".";var r=this.hvcC.general_profile_compatibility,f=0;for(t=0;t<32&&(f|=r&1,t!=31);t++)f<<=1,r>>=1;n+=o.decimalToHex(f,0),n+=".",this.hvcC.general_tier_flag===0?n+="L":n+="H",n+=this.hvcC.general_level_idc;var h=!1,p="";for(t=5;t>=0;t--)(this.hvcC.general_constraint_indicator[t]||h)&&(p="."+o.decimalToHex(this.hvcC.general_constraint_indicator[t],0)+p,h=!0);n+=p}return n},o.vvc1SampleEntry.prototype.getCodec=o.vvi1SampleEntry.prototype.getCodec=function(){var t,n=o.SampleEntry.prototype.getCodec.call(this);if(this.vvcC){n+="."+this.vvcC.general_profile_idc,this.vvcC.general_tier_flag?n+=".H":n+=".L",n+=this.vvcC.general_level_idc;var r="";if(this.vvcC.general_constraint_info){var f=[],h=0;h|=this.vvcC.ptl_frame_only_constraint<<7,h|=this.vvcC.ptl_multilayer_enabled<<6;var p;for(t=0;t<this.vvcC.general_constraint_info.length;++t)h|=this.vvcC.general_constraint_info[t]>>2&63,f.push(h),h&&(p=t),h=this.vvcC.general_constraint_info[t]>>2&3;if(p===void 0)r=".CA";else{r=".C";var g="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",S=0,C=0;for(t=0;t<=p;++t)for(S=S<<8|f[t],C+=8;C>=5;){var A=S>>C-5&31;r+=g[A],C-=5,S&=(1<<C)-1}C&&(S<<=5-C,r+=g[S&31])}}n+=r}return n},o.mp4aSampleEntry.prototype.getCodec=function(){var t=o.SampleEntry.prototype.getCodec.call(this);if(this.esds&&this.esds.esd){var n=this.esds.esd.getOTI(),r=this.esds.esd.getAudioConfig();return t+"."+o.decimalToHex(n)+(r?"."+r:"")}else return t},o.stxtSampleEntry.prototype.getCodec=function(){var t=o.SampleEntry.prototype.getCodec.call(this);return this.mime_format?t+"."+this.mime_format:t},o.vp08SampleEntry.prototype.getCodec=o.vp09SampleEntry.prototype.getCodec=function(){var t=o.SampleEntry.prototype.getCodec.call(this),n=this.vpcC.level;n==0&&(n="00");var r=this.vpcC.bitDepth;return r==8&&(r="08"),t+".0"+this.vpcC.profile+"."+n+"."+r},o.av01SampleEntry.prototype.getCodec=function(){var t=o.SampleEntry.prototype.getCodec.call(this),n=this.av1C.seq_level_idx_0;n<10&&(n="0"+n);var r;return this.av1C.seq_profile===2&&this.av1C.high_bitdepth===1?r=this.av1C.twelve_bit===1?"12":"10":this.av1C.seq_profile<=2&&(r=this.av1C.high_bitdepth===1?"10":"08"),t+"."+this.av1C.seq_profile+"."+n+(this.av1C.seq_tier_0?"H":"M")+"."+r},o.Box.prototype.writeHeader=function(t,n){this.size+=8,this.size>c&&(this.size+=8),this.type==="uuid"&&(this.size+=16),s.debug("BoxWriter","Writing box "+this.type+" of size: "+this.size+" at position "+t.getPosition()+(n||"")),this.size>c?t.writeUint32(1):(this.sizePosition=t.getPosition(),t.writeUint32(this.size)),t.writeString(this.type,null,4),this.type==="uuid"&&t.writeUint8Array(this.uuid),this.size>c&&t.writeUint64(this.size)},o.FullBox.prototype.writeHeader=function(t){this.size+=4,o.Box.prototype.writeHeader.call(this,t," v="+this.version+" f="+this.flags),t.writeUint8(this.version),t.writeUint24(this.flags)},o.Box.prototype.write=function(t){this.type==="mdat"?this.data&&(this.size=this.data.length,this.writeHeader(t),t.writeUint8Array(this.data)):(this.size=this.data?this.data.length:0,this.writeHeader(t),this.data&&t.writeUint8Array(this.data))},o.ContainerBox.prototype.write=function(t){this.size=0,this.writeHeader(t);for(var n=0;n<this.boxes.length;n++)this.boxes[n]&&(this.boxes[n].write(t),this.size+=this.boxes[n].size);s.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),t.adjustUint32(this.sizePosition,this.size)},o.TrackReferenceTypeBox.prototype.write=function(t){this.size=this.track_ids.length*4,this.writeHeader(t),t.writeUint32Array(this.track_ids)},o.avcCBox.prototype.write=function(t){var n;for(this.size=7,n=0;n<this.SPS.length;n++)this.size+=2+this.SPS[n].length;for(n=0;n<this.PPS.length;n++)this.size+=2+this.PPS[n].length;for(this.ext&&(this.size+=this.ext.length),this.writeHeader(t),t.writeUint8(this.configurationVersion),t.writeUint8(this.AVCProfileIndication),t.writeUint8(this.profile_compatibility),t.writeUint8(this.AVCLevelIndication),t.writeUint8(this.lengthSizeMinusOne+252),t.writeUint8(this.SPS.length+224),n=0;n<this.SPS.length;n++)t.writeUint16(this.SPS[n].length),t.writeUint8Array(this.SPS[n].nalu);for(t.writeUint8(this.PPS.length),n=0;n<this.PPS.length;n++)t.writeUint16(this.PPS[n].length),t.writeUint8Array(this.PPS[n].nalu);this.ext&&t.writeUint8Array(this.ext)},o.co64Box.prototype.write=function(t){var n;for(this.version=0,this.flags=0,this.size=4+8*this.chunk_offsets.length,this.writeHeader(t),t.writeUint32(this.chunk_offsets.length),n=0;n<this.chunk_offsets.length;n++)t.writeUint64(this.chunk_offsets[n])},o.cslgBox.prototype.write=function(t){this.version=0,this.flags=0,this.size=4*5,this.writeHeader(t),t.writeInt32(this.compositionToDTSShift),t.writeInt32(this.leastDecodeToDisplayDelta),t.writeInt32(this.greatestDecodeToDisplayDelta),t.writeInt32(this.compositionStartTime),t.writeInt32(this.compositionEndTime)},o.cttsBox.prototype.write=function(t){var n;for(this.version=0,this.flags=0,this.size=4+8*this.sample_counts.length,this.writeHeader(t),t.writeUint32(this.sample_counts.length),n=0;n<this.sample_counts.length;n++)t.writeUint32(this.sample_counts[n]),this.version===1?t.writeInt32(this.sample_offsets[n]):t.writeUint32(this.sample_offsets[n])},o.drefBox.prototype.write=function(t){this.version=0,this.flags=0,this.size=4,this.writeHeader(t),t.writeUint32(this.entries.length);for(var n=0;n<this.entries.length;n++)this.entries[n].write(t),this.size+=this.entries[n].size;s.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),t.adjustUint32(this.sizePosition,this.size)},o.elngBox.prototype.write=function(t){this.version=0,this.flags=0,this.size=this.extended_language.length,this.writeHeader(t),t.writeString(this.extended_language)},o.elstBox.prototype.write=function(t){this.version=0,this.flags=0,this.size=4+12*this.entries.length,this.writeHeader(t),t.writeUint32(this.entries.length);for(var n=0;n<this.entries.length;n++){var r=this.entries[n];t.writeUint32(r.segment_duration),t.writeInt32(r.media_time),t.writeInt16(r.media_rate_integer),t.writeInt16(r.media_rate_fraction)}},o.emsgBox.prototype.write=function(t){this.version=0,this.flags=0,this.size=4*4+this.message_data.length+(this.scheme_id_uri.length+1)+(this.value.length+1),this.writeHeader(t),t.writeCString(this.scheme_id_uri),t.writeCString(this.value),t.writeUint32(this.timescale),t.writeUint32(this.presentation_time_delta),t.writeUint32(this.event_duration),t.writeUint32(this.id),t.writeUint8Array(this.message_data)},o.ftypBox.prototype.write=function(t){this.size=8+4*this.compatible_brands.length,this.writeHeader(t),t.writeString(this.major_brand,null,4),t.writeUint32(this.minor_version);for(var n=0;n<this.compatible_brands.length;n++)t.writeString(this.compatible_brands[n],null,4)},o.hdlrBox.prototype.write=function(t){this.size=5*4+this.name.length+1,this.version=0,this.flags=0,this.writeHeader(t),t.writeUint32(0),t.writeString(this.handler,null,4),t.writeUint32(0),t.writeUint32(0),t.writeUint32(0),t.writeCString(this.name)},o.hvcCBox.prototype.write=function(t){var n,r;for(this.size=23,n=0;n<this.nalu_arrays.length;n++)for(this.size+=3,r=0;r<this.nalu_arrays[n].length;r++)this.size+=2+this.nalu_arrays[n][r].data.length;for(this.writeHeader(t),t.writeUint8(this.configurationVersion),t.writeUint8((this.general_profile_space<<6)+(this.general_tier_flag<<5)+this.general_profile_idc),t.writeUint32(this.general_profile_compatibility),t.writeUint8Array(this.general_constraint_indicator),t.writeUint8(this.general_level_idc),t.writeUint16(this.min_spatial_segmentation_idc+(15<<24)),t.writeUint8(this.parallelismType+252),t.writeUint8(this.chroma_format_idc+252),t.writeUint8(this.bit_depth_luma_minus8+248),t.writeUint8(this.bit_depth_chroma_minus8+248),t.writeUint16(this.avgFrameRate),t.writeUint8((this.constantFrameRate<<6)+(this.numTemporalLayers<<3)+(this.temporalIdNested<<2)+this.lengthSizeMinusOne),t.writeUint8(this.nalu_arrays.length),n=0;n<this.nalu_arrays.length;n++)for(t.writeUint8((this.nalu_arrays[n].completeness<<7)+this.nalu_arrays[n].nalu_type),t.writeUint16(this.nalu_arrays[n].length),r=0;r<this.nalu_arrays[n].length;r++)t.writeUint16(this.nalu_arrays[n][r].data.length),t.writeUint8Array(this.nalu_arrays[n][r].data)},o.kindBox.prototype.write=function(t){this.version=0,this.flags=0,this.size=this.schemeURI.length+1+(this.value.length+1),this.writeHeader(t),t.writeCString(this.schemeURI),t.writeCString(this.value)},o.mdhdBox.prototype.write=function(t){this.size=4*4+2*2,this.flags=0,this.version=0,this.writeHeader(t),t.writeUint32(this.creation_time),t.writeUint32(this.modification_time),t.writeUint32(this.timescale),t.writeUint32(this.duration),t.writeUint16(this.language),t.writeUint16(0)},o.mehdBox.prototype.write=function(t){this.version=0,this.flags=0,this.size=4,this.writeHeader(t),t.writeUint32(this.fragment_duration)},o.mfhdBox.prototype.write=function(t){this.version=0,this.flags=0,this.size=4,this.writeHeader(t),t.writeUint32(this.sequence_number)},o.mvhdBox.prototype.write=function(t){this.version=0,this.flags=0,this.size=23*4+2*2,this.writeHeader(t),t.writeUint32(this.creation_time),t.writeUint32(this.modification_time),t.writeUint32(this.timescale),t.writeUint32(this.duration),t.writeUint32(this.rate),t.writeUint16(this.volume<<8),t.writeUint16(0),t.writeUint32(0),t.writeUint32(0),t.writeUint32Array(this.matrix),t.writeUint32(0),t.writeUint32(0),t.writeUint32(0),t.writeUint32(0),t.writeUint32(0),t.writeUint32(0),t.writeUint32(this.next_track_id)},o.SampleEntry.prototype.writeHeader=function(t){this.size=8,o.Box.prototype.writeHeader.call(this,t),t.writeUint8(0),t.writeUint8(0),t.writeUint8(0),t.writeUint8(0),t.writeUint8(0),t.writeUint8(0),t.writeUint16(this.data_reference_index)},o.SampleEntry.prototype.writeFooter=function(t){for(var n=0;n<this.boxes.length;n++)this.boxes[n].write(t),this.size+=this.boxes[n].size;s.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),t.adjustUint32(this.sizePosition,this.size)},o.SampleEntry.prototype.write=function(t){this.writeHeader(t),t.writeUint8Array(this.data),this.size+=this.data.length,s.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),t.adjustUint32(this.sizePosition,this.size)},o.VisualSampleEntry.prototype.write=function(t){this.writeHeader(t),this.size+=2*7+6*4+32,t.writeUint16(0),t.writeUint16(0),t.writeUint32(0),t.writeUint32(0),t.writeUint32(0),t.writeUint16(this.width),t.writeUint16(this.height),t.writeUint32(this.horizresolution),t.writeUint32(this.vertresolution),t.writeUint32(0),t.writeUint16(this.frame_count),t.writeUint8(Math.min(31,this.compressorname.length)),t.writeString(this.compressorname,null,31),t.writeUint16(this.depth),t.writeInt16(-1),this.writeFooter(t)},o.AudioSampleEntry.prototype.write=function(t){this.writeHeader(t),this.size+=2*4+3*4,t.writeUint32(0),t.writeUint32(0),t.writeUint16(this.channel_count),t.writeUint16(this.samplesize),t.writeUint16(0),t.writeUint16(0),t.writeUint32(this.samplerate<<16),this.writeFooter(t)},o.stppSampleEntry.prototype.write=function(t){this.writeHeader(t),this.size+=this.namespace.length+1+this.schema_location.length+1+this.auxiliary_mime_types.length+1,t.writeCString(this.namespace),t.writeCString(this.schema_location),t.writeCString(this.auxiliary_mime_types),this.writeFooter(t)},o.SampleGroupEntry.prototype.write=function(t){t.writeUint8Array(this.data)},o.sbgpBox.prototype.write=function(t){this.version=1,this.flags=0,this.size=12+8*this.entries.length,this.writeHeader(t),t.writeString(this.grouping_type,null,4),t.writeUint32(this.grouping_type_parameter),t.writeUint32(this.entries.length);for(var n=0;n<this.entries.length;n++){var r=this.entries[n];t.writeInt32(r.sample_count),t.writeInt32(r.group_description_index)}},o.sgpdBox.prototype.write=function(t){var n,r;for(this.flags=0,this.size=12,n=0;n<this.entries.length;n++)r=this.entries[n],this.version===1&&(this.default_length===0&&(this.size+=4),this.size+=r.data.length);for(this.writeHeader(t),t.writeString(this.grouping_type,null,4),this.version===1&&t.writeUint32(this.default_length),this.version>=2&&t.writeUint32(this.default_sample_description_index),t.writeUint32(this.entries.length),n=0;n<this.entries.length;n++)r=this.entries[n],this.version===1&&this.default_length===0&&t.writeUint32(r.description_length),r.write(t)},o.sidxBox.prototype.write=function(t){this.version=0,this.flags=0,this.size=4*4+2+2+12*this.references.length,this.writeHeader(t),t.writeUint32(this.reference_ID),t.writeUint32(this.timescale),t.writeUint32(this.earliest_presentation_time),t.writeUint32(this.first_offset),t.writeUint16(0),t.writeUint16(this.references.length);for(var n=0;n<this.references.length;n++){var r=this.references[n];t.writeUint32(r.reference_type<<31|r.referenced_size),t.writeUint32(r.subsegment_duration),t.writeUint32(r.starts_with_SAP<<31|r.SAP_type<<28|r.SAP_delta_time)}},o.smhdBox.prototype.write=function(t){this.version=0,this.flags=1,this.size=4,this.writeHeader(t),t.writeUint16(this.balance),t.writeUint16(0)},o.stcoBox.prototype.write=function(t){this.version=0,this.flags=0,this.size=4+4*this.chunk_offsets.length,this.writeHeader(t),t.writeUint32(this.chunk_offsets.length),t.writeUint32Array(this.chunk_offsets)},o.stscBox.prototype.write=function(t){var n;for(this.version=0,this.flags=0,this.size=4+12*this.first_chunk.length,this.writeHeader(t),t.writeUint32(this.first_chunk.length),n=0;n<this.first_chunk.length;n++)t.writeUint32(this.first_chunk[n]),t.writeUint32(this.samples_per_chunk[n]),t.writeUint32(this.sample_description_index[n])},o.stsdBox.prototype.write=function(t){var n;for(this.version=0,this.flags=0,this.size=0,this.writeHeader(t),t.writeUint32(this.entries.length),this.size+=4,n=0;n<this.entries.length;n++)this.entries[n].write(t),this.size+=this.entries[n].size;s.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),t.adjustUint32(this.sizePosition,this.size)},o.stshBox.prototype.write=function(t){var n;for(this.version=0,this.flags=0,this.size=4+8*this.shadowed_sample_numbers.length,this.writeHeader(t),t.writeUint32(this.shadowed_sample_numbers.length),n=0;n<this.shadowed_sample_numbers.length;n++)t.writeUint32(this.shadowed_sample_numbers[n]),t.writeUint32(this.sync_sample_numbers[n])},o.stssBox.prototype.write=function(t){this.version=0,this.flags=0,this.size=4+4*this.sample_numbers.length,this.writeHeader(t),t.writeUint32(this.sample_numbers.length),t.writeUint32Array(this.sample_numbers)},o.stszBox.prototype.write=function(t){var n,r=!0;if(this.version=0,this.flags=0,this.sample_sizes.length>0)for(n=0;n+1<this.sample_sizes.length;)if(this.sample_sizes[n+1]!==this.sample_sizes[0]){r=!1;break}else n++;else r=!1;this.size=8,r||(this.size+=4*this.sample_sizes.length),this.writeHeader(t),r?t.writeUint32(this.sample_sizes[0]):t.writeUint32(0),t.writeUint32(this.sample_sizes.length),r||t.writeUint32Array(this.sample_sizes)},o.sttsBox.prototype.write=function(t){var n;for(this.version=0,this.flags=0,this.size=4+8*this.sample_counts.length,this.writeHeader(t),t.writeUint32(this.sample_counts.length),n=0;n<this.sample_counts.length;n++)t.writeUint32(this.sample_counts[n]),t.writeUint32(this.sample_deltas[n])},o.tfdtBox.prototype.write=function(t){var n=Math.pow(2,32)-1;this.version=this.baseMediaDecodeTime>n?1:0,this.flags=0,this.size=4,this.version===1&&(this.size+=4),this.writeHeader(t),this.version===1?t.writeUint64(this.baseMediaDecodeTime):t.writeUint32(this.baseMediaDecodeTime)},o.tfhdBox.prototype.write=function(t){this.version=0,this.size=4,this.flags&o.TFHD_FLAG_BASE_DATA_OFFSET&&(this.size+=8),this.flags&o.TFHD_FLAG_SAMPLE_DESC&&(this.size+=4),this.flags&o.TFHD_FLAG_SAMPLE_DUR&&(this.size+=4),this.flags&o.TFHD_FLAG_SAMPLE_SIZE&&(this.size+=4),this.flags&o.TFHD_FLAG_SAMPLE_FLAGS&&(this.size+=4),this.writeHeader(t),t.writeUint32(this.track_id),this.flags&o.TFHD_FLAG_BASE_DATA_OFFSET&&t.writeUint64(this.base_data_offset),this.flags&o.TFHD_FLAG_SAMPLE_DESC&&t.writeUint32(this.default_sample_description_index),this.flags&o.TFHD_FLAG_SAMPLE_DUR&&t.writeUint32(this.default_sample_duration),this.flags&o.TFHD_FLAG_SAMPLE_SIZE&&t.writeUint32(this.default_sample_size),this.flags&o.TFHD_FLAG_SAMPLE_FLAGS&&t.writeUint32(this.default_sample_flags)},o.tkhdBox.prototype.write=function(t){this.version=0,this.size=4*18+2*4,this.writeHeader(t),t.writeUint32(this.creation_time),t.writeUint32(this.modification_time),t.writeUint32(this.track_id),t.writeUint32(0),t.writeUint32(this.duration),t.writeUint32(0),t.writeUint32(0),t.writeInt16(this.layer),t.writeInt16(this.alternate_group),t.writeInt16(this.volume<<8),t.writeUint16(0),t.writeInt32Array(this.matrix),t.writeUint32(this.width),t.writeUint32(this.height)},o.trexBox.prototype.write=function(t){this.version=0,this.flags=0,this.size=4*5,this.writeHeader(t),t.writeUint32(this.track_id),t.writeUint32(this.default_sample_description_index),t.writeUint32(this.default_sample_duration),t.writeUint32(this.default_sample_size),t.writeUint32(this.default_sample_flags)},o.trunBox.prototype.write=function(t){this.version=0,this.size=4,this.flags&o.TRUN_FLAGS_DATA_OFFSET&&(this.size+=4),this.flags&o.TRUN_FLAGS_FIRST_FLAG&&(this.size+=4),this.flags&o.TRUN_FLAGS_DURATION&&(this.size+=4*this.sample_duration.length),this.flags&o.TRUN_FLAGS_SIZE&&(this.size+=4*this.sample_size.length),this.flags&o.TRUN_FLAGS_FLAGS&&(this.size+=4*this.sample_flags.length),this.flags&o.TRUN_FLAGS_CTS_OFFSET&&(this.size+=4*this.sample_composition_time_offset.length),this.writeHeader(t),t.writeUint32(this.sample_count),this.flags&o.TRUN_FLAGS_DATA_OFFSET&&(this.data_offset_position=t.getPosition(),t.writeInt32(this.data_offset)),this.flags&o.TRUN_FLAGS_FIRST_FLAG&&t.writeUint32(this.first_sample_flags);for(var n=0;n<this.sample_count;n++)this.flags&o.TRUN_FLAGS_DURATION&&t.writeUint32(this.sample_duration[n]),this.flags&o.TRUN_FLAGS_SIZE&&t.writeUint32(this.sample_size[n]),this.flags&o.TRUN_FLAGS_FLAGS&&t.writeUint32(this.sample_flags[n]),this.flags&o.TRUN_FLAGS_CTS_OFFSET&&(this.version===0?t.writeUint32(this.sample_composition_time_offset[n]):t.writeInt32(this.sample_composition_time_offset[n]))},o["url Box"].prototype.write=function(t){this.version=0,this.location?(this.flags=0,this.size=this.location.length+1):(this.flags=1,this.size=0),this.writeHeader(t),this.location&&t.writeCString(this.location)},o["urn Box"].prototype.write=function(t){this.version=0,this.flags=0,this.size=this.name.length+1+(this.location?this.location.length+1:0),this.writeHeader(t),t.writeCString(this.name),this.location&&t.writeCString(this.location)},o.vmhdBox.prototype.write=function(t){this.version=0,this.flags=1,this.size=8,this.writeHeader(t),t.writeUint16(this.graphicsmode),t.writeUint16Array(this.opcolor)},o.cttsBox.prototype.unpack=function(t){var n,r,f;for(f=0,n=0;n<this.sample_counts.length;n++)for(r=0;r<this.sample_counts[n];r++)t[f].pts=t[f].dts+this.sample_offsets[n],f++},o.sttsBox.prototype.unpack=function(t){var n,r,f;for(f=0,n=0;n<this.sample_counts.length;n++)for(r=0;r<this.sample_counts[n];r++)f===0?t[f].dts=0:t[f].dts=t[f-1].dts+this.sample_deltas[n],f++},o.stcoBox.prototype.unpack=function(t){var n;for(n=0;n<this.chunk_offsets.length;n++)t[n].offset=this.chunk_offsets[n]},o.stscBox.prototype.unpack=function(t){var n,r,f,h,p;for(h=0,p=0,n=0;n<this.first_chunk.length;n++)for(r=0;r<(n+1<this.first_chunk.length?this.first_chunk[n+1]:1/0);r++)for(p++,f=0;f<this.samples_per_chunk[n];f++){if(t[h])t[h].description_index=this.sample_description_index[n],t[h].chunk_index=p;else return;h++}},o.stszBox.prototype.unpack=function(t){var n;for(n=0;n<this.sample_sizes.length;n++)t[n].size=this.sample_sizes[n]},o.DIFF_BOXES_PROP_NAMES=["boxes","entries","references","subsamples","items","item_infos","extents","associations","subsegments","ranges","seekLists","seekPoints","esd","levels"],o.DIFF_PRIMITIVE_ARRAY_PROP_NAMES=["compatible_brands","matrix","opcolor","sample_counts","sample_deltas","first_chunk","samples_per_chunk","sample_sizes","chunk_offsets","sample_offsets","sample_description_index","sample_duration"],o.boxEqualFields=function(t,n){if(t&&!n)return!1;var r;for(r in t)if(!(o.DIFF_BOXES_PROP_NAMES.indexOf(r)>-1)){if(t[r]instanceof o.Box||n[r]instanceof o.Box)continue;if(typeof t[r]>"u"||typeof n[r]>"u")continue;if(typeof t[r]=="function"||typeof n[r]=="function")continue;if(t.subBoxNames&&t.subBoxNames.indexOf(r.slice(0,4))>-1||n.subBoxNames&&n.subBoxNames.indexOf(r.slice(0,4))>-1)continue;if(r==="data"||r==="start"||r==="size"||r==="creation_time"||r==="modification_time")continue;if(o.DIFF_PRIMITIVE_ARRAY_PROP_NAMES.indexOf(r)>-1)continue;if(t[r]!==n[r])return!1}return!0},o.boxEqual=function(t,n){if(!o.boxEqualFields(t,n))return!1;for(var r=0;r<o.DIFF_BOXES_PROP_NAMES.length;r++){var f=o.DIFF_BOXES_PROP_NAMES[r];if(t[f]&&n[f]&&!o.boxEqual(t[f],n[f]))return!1}return!0};var x=function(){};x.prototype.parseSample=function(t){var n,r,f=new a(t.buffer);for(n=[];!f.isEos();)r=o.parseOneBox(f,!1),r.code===o.OK&&r.box.type==="vttc"&&n.push(r.box);return n},x.prototype.getText=function(t,n,r){function f(A,L,M){return M=M||"0",A=A+"",A.length>=L?A:new Array(L-A.length+1).join(M)+A}function h(A){var L=Math.floor(A/3600),M=Math.floor((A-L*3600)/60),j=Math.floor(A-L*3600-M*60),D=Math.floor((A-L*3600-M*60-j)*1e3);return""+f(L,2)+":"+f(M,2)+":"+f(j,2)+"."+f(D,3)}for(var p=this.parseSample(r),g="",S=0;S<p.length;S++){var C=p[S];g+=h(t)+" --> "+h(n)+`\r
`,g+=C.payl.text}return g};var E=function(){};E.prototype.parseSample=function(t){var n={},r;n.resources=[];var f=new a(t.data.buffer);if(!t.subsamples||t.subsamples.length===0)n.documentString=f.readString(t.data.length);else if(n.documentString=f.readString(t.subsamples[0].size),t.subsamples.length>1)for(r=1;r<t.subsamples.length;r++)n.resources[r]=f.readUint8Array(t.subsamples[r].size);return typeof DOMParser<"u"&&(n.document=new DOMParser().parseFromString(n.documentString,"application/xml")),n};var B=function(){};B.prototype.parseSample=function(t){var n,r=new a(t.data.buffer);return n=r.readString(t.data.length),n},B.prototype.parseConfig=function(t){var n,r=new a(t.buffer);return r.readUint32(),n=r.readCString(),n},e.VTTin4Parser=x,e.XMLSubtitlein4Parser=E,e.Textin4Parser=B;var U=function(t){this.stream=t||new u,this.boxes=[],this.mdats=[],this.moofs=[],this.isProgressive=!1,this.moovStartFound=!1,this.onMoovStart=null,this.moovStartSent=!1,this.onReady=null,this.readySent=!1,this.onSegment=null,this.onSamples=null,this.onError=null,this.sampleListBuilt=!1,this.fragmentedTracks=[],this.extractedTracks=[],this.isFragmentationInitialized=!1,this.sampleProcessingStarted=!1,this.nextMoofNumber=0,this.itemListBuilt=!1,this.items=[],this.entity_groups=[],this.onSidx=null,this.sidxSent=!1};U.prototype.setSegmentOptions=function(t,n,r){var f=this.getTrackById(t);if(f){var h={};this.fragmentedTracks.push(h),h.id=t,h.user=n,h.trak=f,f.nextSample=0,h.segmentStream=null,h.nb_samples=1e3,h.rapAlignement=!0,r&&(r.nbSamples&&(h.nb_samples=r.nbSamples),r.rapAlignement&&(h.rapAlignement=r.rapAlignement))}},U.prototype.unsetSegmentOptions=function(t){for(var n=-1,r=0;r<this.fragmentedTracks.length;r++){var f=this.fragmentedTracks[r];f.id==t&&(n=r)}n>-1&&this.fragmentedTracks.splice(n,1)},U.prototype.setExtractionOptions=function(t,n,r){var f=this.getTrackById(t);if(f){var h={};this.extractedTracks.push(h),h.id=t,h.user=n,h.trak=f,f.nextSample=0,h.nb_samples=1e3,h.samples=[],r&&r.nbSamples&&(h.nb_samples=r.nbSamples)}},U.prototype.unsetExtractionOptions=function(t){for(var n=-1,r=0;r<this.extractedTracks.length;r++){var f=this.extractedTracks[r];f.id==t&&(n=r)}n>-1&&this.extractedTracks.splice(n,1)},U.prototype.parse=function(){var t,n,r=!1;if(!(this.restoreParsePosition&&!this.restoreParsePosition()))for(;;)if(this.hasIncompleteMdat&&this.hasIncompleteMdat()){if(this.processIncompleteMdat())continue;return}else if(this.saveParsePosition&&this.saveParsePosition(),t=o.parseOneBox(this.stream,r),t.code===o.ERR_NOT_ENOUGH_DATA)if(this.processIncompleteBox){if(this.processIncompleteBox(t))continue;return}else return;else{var f;switch(n=t.box,f=n.type!=="uuid"?n.type:n.uuid,this.boxes.push(n),f){case"mdat":this.mdats.push(n);break;case"moof":this.moofs.push(n);break;case"moov":this.moovStartFound=!0,this.mdats.length===0&&(this.isProgressive=!0);default:this[f]!==void 0&&s.warn("ISOFile","Duplicate Box of type: "+f+", overriding previous occurrence"),this[f]=n;break}this.updateUsedBytes&&this.updateUsedBytes(n,t)}},U.prototype.checkBuffer=function(t){if(t==null)throw"Buffer must be defined and non empty";if(t.fileStart===void 0)throw"Buffer must have a fileStart property";return t.byteLength===0?(s.warn("ISOFile","Ignoring empty buffer (fileStart: "+t.fileStart+")"),this.stream.logBufferLevel(),!1):(s.info("ISOFile","Processing buffer (fileStart: "+t.fileStart+")"),t.usedBytes=0,this.stream.insertBuffer(t),this.stream.logBufferLevel(),this.stream.initialized()?!0:(s.warn("ISOFile","Not ready to start parsing"),!1))},U.prototype.appendBuffer=function(t,n){var r;if(this.checkBuffer(t))return this.parse(),this.moovStartFound&&!this.moovStartSent&&(this.moovStartSent=!0,this.onMoovStart&&this.onMoovStart()),this.moov?(this.sampleListBuilt||(this.buildSampleLists(),this.sampleListBuilt=!0),this.updateSampleLists(),this.onReady&&!this.readySent&&(this.readySent=!0,this.onReady(this.getInfo())),this.processSamples(n),this.nextSeekPosition?(r=this.nextSeekPosition,this.nextSeekPosition=void 0):r=this.nextParsePosition,this.stream.getEndFilePositionAfter&&(r=this.stream.getEndFilePositionAfter(r))):this.nextParsePosition?r=this.nextParsePosition:r=0,this.sidx&&this.onSidx&&!this.sidxSent&&(this.onSidx(this.sidx),this.sidxSent=!0),this.meta&&(this.flattenItemInfo&&!this.itemListBuilt&&(this.flattenItemInfo(),this.itemListBuilt=!0),this.processItems&&this.processItems(this.onItem)),this.stream.cleanBuffers&&(s.info("ISOFile","Done processing buffer (fileStart: "+t.fileStart+") - next buffer to fetch should have a fileStart position of "+r),this.stream.logBufferLevel(),this.stream.cleanBuffers(),this.stream.logBufferLevel(!0),s.info("ISOFile","Sample data size in memory: "+this.getAllocatedSampleDataSize())),r},U.prototype.getInfo=function(){var t,n,r={},f,h,p,g,S=new Date("1904-01-01T00:00:00Z").getTime();if(this.moov)for(r.hasMoov=!0,r.duration=this.moov.mvhd.duration,r.timescale=this.moov.mvhd.timescale,r.isFragmented=this.moov.mvex!=null,r.isFragmented&&this.moov.mvex.mehd&&(r.fragment_duration=this.moov.mvex.mehd.fragment_duration),r.isProgressive=this.isProgressive,r.hasIOD=this.moov.iods!=null,r.brands=[],r.brands.push(this.ftyp.major_brand),r.brands=r.brands.concat(this.ftyp.compatible_brands),r.created=new Date(S+this.moov.mvhd.creation_time*1e3),r.modified=new Date(S+this.moov.mvhd.modification_time*1e3),r.tracks=[],r.audioTracks=[],r.videoTracks=[],r.subtitleTracks=[],r.metadataTracks=[],r.hintTracks=[],r.otherTracks=[],t=0;t<this.moov.traks.length;t++){if(f=this.moov.traks[t],g=f.mdia.minf.stbl.stsd.entries[0],h={},r.tracks.push(h),h.id=f.tkhd.track_id,h.name=f.mdia.hdlr.name,h.references=[],f.tref)for(n=0;n<f.tref.boxes.length;n++)p={},h.references.push(p),p.type=f.tref.boxes[n].type,p.track_ids=f.tref.boxes[n].track_ids;f.edts&&(h.edits=f.edts.elst.entries),h.created=new Date(S+f.tkhd.creation_time*1e3),h.modified=new Date(S+f.tkhd.modification_time*1e3),h.movie_duration=f.tkhd.duration,h.movie_timescale=r.timescale,h.layer=f.tkhd.layer,h.alternate_group=f.tkhd.alternate_group,h.volume=f.tkhd.volume,h.matrix=f.tkhd.matrix,h.track_width=f.tkhd.width/65536,h.track_height=f.tkhd.height/65536,h.timescale=f.mdia.mdhd.timescale,h.cts_shift=f.mdia.minf.stbl.cslg,h.duration=f.mdia.mdhd.duration,h.samples_duration=f.samples_duration,h.codec=g.getCodec(),h.kind=f.udta&&f.udta.kinds.length?f.udta.kinds[0]:{schemeURI:"",value:""},h.language=f.mdia.elng?f.mdia.elng.extended_language:f.mdia.mdhd.languageString,h.nb_samples=f.samples.length,h.size=f.samples_size,h.bitrate=h.size*8*h.timescale/h.samples_duration,g.isAudio()?(h.type="audio",r.audioTracks.push(h),h.audio={},h.audio.sample_rate=g.getSampleRate(),h.audio.channel_count=g.getChannelCount(),h.audio.sample_size=g.getSampleSize()):g.isVideo()?(h.type="video",r.videoTracks.push(h),h.video={},h.video.width=g.getWidth(),h.video.height=g.getHeight()):g.isSubtitle()?(h.type="subtitles",r.subtitleTracks.push(h)):g.isHint()?(h.type="metadata",r.hintTracks.push(h)):g.isMetadata()?(h.type="metadata",r.metadataTracks.push(h)):(h.type="metadata",r.otherTracks.push(h))}else r.hasMoov=!1;if(r.mime="",r.hasMoov&&r.tracks){for(r.videoTracks&&r.videoTracks.length>0?r.mime+='video/mp4; codecs="':r.audioTracks&&r.audioTracks.length>0?r.mime+='audio/mp4; codecs="':r.mime+='application/mp4; codecs="',t=0;t<r.tracks.length;t++)t!==0&&(r.mime+=","),r.mime+=r.tracks[t].codec;r.mime+='"; profiles="',r.mime+=this.ftyp.compatible_brands.join(),r.mime+='"'}return r},U.prototype.setNextSeekPositionFromSample=function(t){t&&(this.nextSeekPosition?this.nextSeekPosition=Math.min(t.offset+t.alreadyRead,this.nextSeekPosition):this.nextSeekPosition=t.offset+t.alreadyRead)},U.prototype.processSamples=function(t){var n,r;if(this.sampleProcessingStarted){if(this.isFragmentationInitialized&&this.onSegment!==null)for(n=0;n<this.fragmentedTracks.length;n++){var f=this.fragmentedTracks[n];for(r=f.trak;r.nextSample<r.samples.length&&this.sampleProcessingStarted;){s.debug("ISOFile","Creating media fragment on track #"+f.id+" for sample "+r.nextSample);var h=this.createFragment(f.id,r.nextSample,f.segmentStream);if(h)f.segmentStream=h,r.nextSample++;else break;if((r.nextSample%f.nb_samples===0||t||r.nextSample>=r.samples.length)&&(s.info("ISOFile","Sending fragmented data on track #"+f.id+" for samples ["+Math.max(0,r.nextSample-f.nb_samples)+","+(r.nextSample-1)+"]"),s.info("ISOFile","Sample data size in memory: "+this.getAllocatedSampleDataSize()),this.onSegment&&this.onSegment(f.id,f.user,f.segmentStream.buffer,r.nextSample,t||r.nextSample>=r.samples.length),f.segmentStream=null,f!==this.fragmentedTracks[n]))break}}if(this.onSamples!==null)for(n=0;n<this.extractedTracks.length;n++){var p=this.extractedTracks[n];for(r=p.trak;r.nextSample<r.samples.length&&this.sampleProcessingStarted;){s.debug("ISOFile","Exporting on track #"+p.id+" sample #"+r.nextSample);var g=this.getSample(r,r.nextSample);if(g)r.nextSample++,p.samples.push(g);else{this.setNextSeekPositionFromSample(r.samples[r.nextSample]);break}if((r.nextSample%p.nb_samples===0||r.nextSample>=r.samples.length)&&(s.debug("ISOFile","Sending samples on track #"+p.id+" for sample "+r.nextSample),this.onSamples&&this.onSamples(p.id,p.user,p.samples),p.samples=[],p!==this.extractedTracks[n]))break}}}},U.prototype.getBox=function(t){var n=this.getBoxes(t,!0);return n.length?n[0]:null},U.prototype.getBoxes=function(t,n){var r=[];return U._sweep.call(this,t,r,n),r},U._sweep=function(t,n,r){this.type&&this.type==t&&n.push(this);for(var f in this.boxes){if(n.length&&r)return;U._sweep.call(this.boxes[f],t,n,r)}},U.prototype.getTrackSamplesInfo=function(t){var n=this.getTrackById(t);if(n)return n.samples},U.prototype.getTrackSample=function(t,n){var r=this.getTrackById(t),f=this.getSample(r,n);return f},U.prototype.releaseUsedSamples=function(t,n){var r=0,f=this.getTrackById(t);f.lastValidSample||(f.lastValidSample=0);for(var h=f.lastValidSample;h<n;h++)r+=this.releaseSample(f,h);s.info("ISOFile","Track #"+t+" released samples up to "+n+" (released size: "+r+", remaining: "+this.samplesDataSize+")"),f.lastValidSample=n},U.prototype.start=function(){this.sampleProcessingStarted=!0,this.processSamples(!1)},U.prototype.stop=function(){this.sampleProcessingStarted=!1},U.prototype.flush=function(){s.info("ISOFile","Flushing remaining samples"),this.updateSampleLists(),this.processSamples(!0),this.stream.cleanBuffers(),this.stream.logBufferLevel(!0)},U.prototype.seekTrack=function(t,n,r){var f,h,p=1/0,g=0,S=0,C;if(r.samples.length===0)return s.info("ISOFile","No sample in track, cannot seek! Using time "+s.getDurationString(0,1)+" and offset: 0"),{offset:0,time:0};for(f=0;f<r.samples.length;f++){if(h=r.samples[f],f===0)S=0,C=h.timescale;else if(h.cts>t*h.timescale){S=f-1;break}n&&h.is_sync&&(g=f)}for(n&&(S=g),t=r.samples[S].cts,r.nextSample=S;r.samples[S].alreadyRead===r.samples[S].size&&r.samples[S+1];)S++;return p=r.samples[S].offset+r.samples[S].alreadyRead,s.info("ISOFile","Seeking to "+(n?"RAP":"")+" sample #"+r.nextSample+" on track "+r.tkhd.track_id+", time "+s.getDurationString(t,C)+" and offset: "+p),{offset:p,time:t/C}},U.prototype.getTrackDuration=function(t){var n;return t.samples?(n=t.samples[t.samples.length-1],(n.cts+n.duration)/n.timescale):1/0},U.prototype.seek=function(t,n){var r=this.moov,f,h,p,g={offset:1/0,time:1/0};if(this.moov){for(p=0;p<r.traks.length;p++)f=r.traks[p],!(t>this.getTrackDuration(f))&&(h=this.seekTrack(t,n,f),h.offset<g.offset&&(g.offset=h.offset),h.time<g.time&&(g.time=h.time));return s.info("ISOFile","Seeking at time "+s.getDurationString(g.time,1)+" needs a buffer with a fileStart position of "+g.offset),g.offset===1/0?g={offset:this.nextParsePosition,time:0}:g.offset=this.stream.getEndFilePositionAfter(g.offset),s.info("ISOFile","Adjusted seek position (after checking data already in buffer): "+g.offset),g}else throw"Cannot seek: moov not received!"},U.prototype.equal=function(t){for(var n=0;n<this.boxes.length&&n<t.boxes.length;){var r=this.boxes[n],f=t.boxes[n];if(!o.boxEqual(r,f))return!1;n++}return!0},e.ISOFile=U,U.prototype.lastBoxStartPosition=0,U.prototype.parsingMdat=null,U.prototype.nextParsePosition=0,U.prototype.discardMdatData=!1,U.prototype.processIncompleteBox=function(t){var n,r,f;return t.type==="mdat"?(n=new o[t.type+"Box"](t.size),this.parsingMdat=n,this.boxes.push(n),this.mdats.push(n),n.start=t.start,n.hdr_size=t.hdr_size,this.stream.addUsedBytes(n.hdr_size),this.lastBoxStartPosition=n.start+n.size,f=this.stream.seek(n.start+n.size,!1,this.discardMdatData),f?(this.parsingMdat=null,!0):(this.moovStartFound?this.nextParsePosition=this.stream.findEndContiguousBuf():this.nextParsePosition=n.start+n.size,!1)):(t.type==="moov"&&(this.moovStartFound=!0,this.mdats.length===0&&(this.isProgressive=!0)),r=this.stream.mergeNextBuffer?this.stream.mergeNextBuffer():!1,r?(this.nextParsePosition=this.stream.getEndPosition(),!0):(t.type?this.moovStartFound?this.nextParsePosition=this.stream.getEndPosition():this.nextParsePosition=this.stream.getPosition()+t.size:this.nextParsePosition=this.stream.getEndPosition(),!1))},U.prototype.hasIncompleteMdat=function(){return this.parsingMdat!==null},U.prototype.processIncompleteMdat=function(){var t,n;return t=this.parsingMdat,n=this.stream.seek(t.start+t.size,!1,this.discardMdatData),n?(s.debug("ISOFile","Found 'mdat' end in buffered data"),this.parsingMdat=null,!0):(this.nextParsePosition=this.stream.findEndContiguousBuf(),!1)},U.prototype.restoreParsePosition=function(){return this.stream.seek(this.lastBoxStartPosition,!0,this.discardMdatData)},U.prototype.saveParsePosition=function(){this.lastBoxStartPosition=this.stream.getPosition()},U.prototype.updateUsedBytes=function(t,n){this.stream.addUsedBytes&&(t.type==="mdat"?(this.stream.addUsedBytes(t.hdr_size),this.discardMdatData&&this.stream.addUsedBytes(t.size-t.hdr_size)):this.stream.addUsedBytes(t.size))},U.prototype.add=o.Box.prototype.add,U.prototype.addBox=o.Box.prototype.addBox,U.prototype.init=function(t){var n=t||{};this.add("ftyp").set("major_brand",n.brands&&n.brands[0]||"iso4").set("minor_version",0).set("compatible_brands",n.brands||["iso4"]);var r=this.add("moov");return r.add("mvhd").set("timescale",n.timescale||600).set("rate",n.rate||65536).set("creation_time",0).set("modification_time",0).set("duration",n.duration||0).set("volume",n.width?0:256).set("matrix",[65536,0,0,0,65536,0,0,0,1073741824]).set("next_track_id",1),r.add("mvex"),this},U.prototype.addTrack=function(t){this.moov||this.init(t);var n=t||{};n.width=n.width||320,n.height=n.height||320,n.id=n.id||this.moov.mvhd.next_track_id,n.type=n.type||"avc1";var r=this.moov.add("trak");this.moov.mvhd.next_track_id=n.id+1,r.add("tkhd").set("flags",o.TKHD_FLAG_ENABLED|o.TKHD_FLAG_IN_MOVIE|o.TKHD_FLAG_IN_PREVIEW).set("creation_time",0).set("modification_time",0).set("track_id",n.id).set("duration",n.duration||0).set("layer",n.layer||0).set("alternate_group",0).set("volume",1).set("matrix",[65536,0,0,0,65536,0,0,0,1073741824]).set("width",n.width<<16).set("height",n.height<<16);var f=r.add("mdia");f.add("mdhd").set("creation_time",0).set("modification_time",0).set("timescale",n.timescale||1).set("duration",n.media_duration||0).set("language",n.language||"und"),f.add("hdlr").set("handler",n.hdlr||"vide").set("name",n.name||"Track created with MP4Box.js"),f.add("elng").set("extended_language",n.language||"fr-FR");var h=f.add("minf");if(o[n.type+"SampleEntry"]!==void 0){var p=new o[n.type+"SampleEntry"];p.data_reference_index=1;var g="";for(var S in o.sampleEntryCodes)for(var C=o.sampleEntryCodes[S],A=0;A<C.length;A++)if(C.indexOf(n.type)>-1){g=S;break}switch(g){case"Visual":if(h.add("vmhd").set("graphicsmode",0).set("opcolor",[0,0,0]),p.set("width",n.width).set("height",n.height).set("horizresolution",72<<16).set("vertresolution",72<<16).set("frame_count",1).set("compressorname",n.type+" Compressor").set("depth",24),n.avcDecoderConfigRecord){var L=new o.avcCBox;L.parse(new a(n.avcDecoderConfigRecord)),p.addBox(L)}else if(n.hevcDecoderConfigRecord){var M=new o.hvcCBox;M.parse(new a(n.hevcDecoderConfigRecord)),p.addBox(M)}break;case"Audio":h.add("smhd").set("balance",n.balance||0),p.set("channel_count",n.channel_count||2).set("samplesize",n.samplesize||16).set("samplerate",n.samplerate||65536);break;case"Hint":h.add("hmhd");break;case"Subtitle":switch(h.add("sthd"),n.type){case"stpp":p.set("namespace",n.namespace||"nonamespace").set("schema_location",n.schema_location||"").set("auxiliary_mime_types",n.auxiliary_mime_types||"");break}break;case"Metadata":h.add("nmhd");break;case"System":h.add("nmhd");break;default:h.add("nmhd");break}n.description&&p.addBox(n.description),n.description_boxes&&n.description_boxes.forEach(function(D){p.addBox(D)}),h.add("dinf").add("dref").addEntry(new o["url Box"]().set("flags",1));var j=h.add("stbl");return j.add("stsd").addEntry(p),j.add("stts").set("sample_counts",[]).set("sample_deltas",[]),j.add("stsc").set("first_chunk",[]).set("samples_per_chunk",[]).set("sample_description_index",[]),j.add("stco").set("chunk_offsets",[]),j.add("stsz").set("sample_sizes",[]),this.moov.mvex.add("trex").set("track_id",n.id).set("default_sample_description_index",n.default_sample_description_index||1).set("default_sample_duration",n.default_sample_duration||0).set("default_sample_size",n.default_sample_size||0).set("default_sample_flags",n.default_sample_flags||0),this.buildTrakSampleLists(r),n.id}},o.Box.prototype.computeSize=function(t){var n=t||new l;n.endianness=l.BIG_ENDIAN,this.write(n)},U.prototype.addSample=function(t,n,r){var f=r||{},h={},p=this.getTrackById(t);if(p!==null){h.number=p.samples.length,h.track_id=p.tkhd.track_id,h.timescale=p.mdia.mdhd.timescale,h.description_index=f.sample_description_index?f.sample_description_index-1:0,h.description=p.mdia.minf.stbl.stsd.entries[h.description_index],h.data=n,h.size=n.byteLength,h.alreadyRead=h.size,h.duration=f.duration||1,h.cts=f.cts||0,h.dts=f.dts||0,h.is_sync=f.is_sync||!1,h.is_leading=f.is_leading||0,h.depends_on=f.depends_on||0,h.is_depended_on=f.is_depended_on||0,h.has_redundancy=f.has_redundancy||0,h.degradation_priority=f.degradation_priority||0,h.offset=0,h.subsamples=f.subsamples,p.samples.push(h),p.samples_size+=h.size,p.samples_duration+=h.duration,p.first_dts===void 0&&(p.first_dts=f.dts),this.processSamples();var g=this.createSingleSampleMoof(h);return this.addBox(g),g.computeSize(),g.trafs[0].truns[0].data_offset=g.size+8,this.add("mdat").data=new Uint8Array(n),h}},U.prototype.createSingleSampleMoof=function(t){var n=0;t.is_sync?n=1<<25:n=65536;var r=new o.moofBox;r.add("mfhd").set("sequence_number",this.nextMoofNumber),this.nextMoofNumber++;var f=r.add("traf"),h=this.getTrackById(t.track_id);return f.add("tfhd").set("track_id",t.track_id).set("flags",o.TFHD_FLAG_DEFAULT_BASE_IS_MOOF),f.add("tfdt").set("baseMediaDecodeTime",t.dts-(h.first_dts||0)),f.add("trun").set("flags",o.TRUN_FLAGS_DATA_OFFSET|o.TRUN_FLAGS_DURATION|o.TRUN_FLAGS_SIZE|o.TRUN_FLAGS_FLAGS|o.TRUN_FLAGS_CTS_OFFSET).set("data_offset",0).set("first_sample_flags",0).set("sample_count",1).set("sample_duration",[t.duration]).set("sample_size",[t.size]).set("sample_flags",[n]).set("sample_composition_time_offset",[t.cts-t.dts]),r},U.prototype.lastMoofIndex=0,U.prototype.samplesDataSize=0,U.prototype.resetTables=function(){var t,n,r,f,h,p,g,S;for(this.initial_duration=this.moov.mvhd.duration,this.moov.mvhd.duration=0,t=0;t<this.moov.traks.length;t++){n=this.moov.traks[t],n.tkhd.duration=0,n.mdia.mdhd.duration=0,r=n.mdia.minf.stbl.stco||n.mdia.minf.stbl.co64,r.chunk_offsets=[],f=n.mdia.minf.stbl.stsc,f.first_chunk=[],f.samples_per_chunk=[],f.sample_description_index=[],h=n.mdia.minf.stbl.stsz||n.mdia.minf.stbl.stz2,h.sample_sizes=[],p=n.mdia.minf.stbl.stts,p.sample_counts=[],p.sample_deltas=[],g=n.mdia.minf.stbl.ctts,g&&(g.sample_counts=[],g.sample_offsets=[]),S=n.mdia.minf.stbl.stss;var C=n.mdia.minf.stbl.boxes.indexOf(S);C!=-1&&(n.mdia.minf.stbl.boxes[C]=null)}},U.initSampleGroups=function(t,n,r,f,h){var p,g,S,C;function A(L,M,j){this.grouping_type=L,this.grouping_type_parameter=M,this.sbgp=j,this.last_sample_in_run=-1,this.entry_index=-1}for(n&&(n.sample_groups_info=[]),t.sample_groups_info||(t.sample_groups_info=[]),g=0;g<r.length;g++){for(C=r[g].grouping_type+"/"+r[g].grouping_type_parameter,S=new A(r[g].grouping_type,r[g].grouping_type_parameter,r[g]),n&&(n.sample_groups_info[C]=S),t.sample_groups_info[C]||(t.sample_groups_info[C]=S),p=0;p<f.length;p++)f[p].grouping_type===r[g].grouping_type&&(S.description=f[p],S.description.used=!0);if(h)for(p=0;p<h.length;p++)h[p].grouping_type===r[g].grouping_type&&(S.fragment_description=h[p],S.fragment_description.used=!0,S.is_fragment=!0)}if(n){if(h)for(g=0;g<h.length;g++)!h[g].used&&h[g].version>=2&&(C=h[g].grouping_type+"/0",S=new A(h[g].grouping_type,0),S.is_fragment=!0,n.sample_groups_info[C]||(n.sample_groups_info[C]=S))}else for(g=0;g<f.length;g++)!f[g].used&&f[g].version>=2&&(C=f[g].grouping_type+"/0",S=new A(f[g].grouping_type,0),t.sample_groups_info[C]||(t.sample_groups_info[C]=S))},U.setSampleGroupProperties=function(t,n,r,f){var h,p;n.sample_groups=[];for(h in f)if(n.sample_groups[h]={},n.sample_groups[h].grouping_type=f[h].grouping_type,n.sample_groups[h].grouping_type_parameter=f[h].grouping_type_parameter,r>=f[h].last_sample_in_run&&(f[h].last_sample_in_run<0&&(f[h].last_sample_in_run=0),f[h].entry_index++,f[h].entry_index<=f[h].sbgp.entries.length-1&&(f[h].last_sample_in_run+=f[h].sbgp.entries[f[h].entry_index].sample_count)),f[h].entry_index<=f[h].sbgp.entries.length-1?n.sample_groups[h].group_description_index=f[h].sbgp.entries[f[h].entry_index].group_description_index:n.sample_groups[h].group_description_index=-1,n.sample_groups[h].group_description_index!==0){var g;f[h].fragment_description?g=f[h].fragment_description:g=f[h].description,n.sample_groups[h].group_description_index>0?(n.sample_groups[h].group_description_index>65535?p=(n.sample_groups[h].group_description_index>>16)-1:p=n.sample_groups[h].group_description_index-1,g&&p>=0&&(n.sample_groups[h].description=g.entries[p])):g&&g.version>=2&&g.default_group_description_index>0&&(n.sample_groups[h].description=g.entries[g.default_group_description_index-1])}},U.process_sdtp=function(t,n,r){n&&(t?(n.is_leading=t.is_leading[r],n.depends_on=t.sample_depends_on[r],n.is_depended_on=t.sample_is_depended_on[r],n.has_redundancy=t.sample_has_redundancy[r]):(n.is_leading=0,n.depends_on=0,n.is_depended_on=0,n.has_redundancy=0))},U.prototype.buildSampleLists=function(){var t,n;for(t=0;t<this.moov.traks.length;t++)n=this.moov.traks[t],this.buildTrakSampleLists(n)},U.prototype.buildTrakSampleLists=function(t){var n,r,f,h,p,g,S,C,A,L,M,j,D,at,it,ut,tt,J,pt,mt,wt,gt,Ut,zt;if(t.samples=[],t.samples_duration=0,t.samples_size=0,r=t.mdia.minf.stbl.stco||t.mdia.minf.stbl.co64,f=t.mdia.minf.stbl.stsc,h=t.mdia.minf.stbl.stsz||t.mdia.minf.stbl.stz2,p=t.mdia.minf.stbl.stts,g=t.mdia.minf.stbl.ctts,S=t.mdia.minf.stbl.stss,C=t.mdia.minf.stbl.stsd,A=t.mdia.minf.stbl.subs,j=t.mdia.minf.stbl.stdp,L=t.mdia.minf.stbl.sbgps,M=t.mdia.minf.stbl.sgpds,J=-1,pt=-1,mt=-1,wt=-1,gt=0,Ut=0,zt=0,U.initSampleGroups(t,null,L,M),!(typeof h>"u")){for(n=0;n<h.sample_sizes.length;n++){var Q={};Q.number=n,Q.track_id=t.tkhd.track_id,Q.timescale=t.mdia.mdhd.timescale,Q.alreadyRead=0,t.samples[n]=Q,Q.size=h.sample_sizes[n],t.samples_size+=Q.size,n===0?(at=1,D=0,Q.chunk_index=at,Q.chunk_run_index=D,tt=f.samples_per_chunk[D],ut=0,D+1<f.first_chunk.length?it=f.first_chunk[D+1]-1:it=1/0):n<tt?(Q.chunk_index=at,Q.chunk_run_index=D):(at++,Q.chunk_index=at,ut=0,at<=it||(D++,D+1<f.first_chunk.length?it=f.first_chunk[D+1]-1:it=1/0),Q.chunk_run_index=D,tt+=f.samples_per_chunk[D]),Q.description_index=f.sample_description_index[Q.chunk_run_index]-1,Q.description=C.entries[Q.description_index],Q.offset=r.chunk_offsets[Q.chunk_index-1]+ut,ut+=Q.size,n>J&&(pt++,J<0&&(J=0),J+=p.sample_counts[pt]),n>0?(t.samples[n-1].duration=p.sample_deltas[pt],t.samples_duration+=t.samples[n-1].duration,Q.dts=t.samples[n-1].dts+t.samples[n-1].duration):Q.dts=0,g?(n>=mt&&(wt++,mt<0&&(mt=0),mt+=g.sample_counts[wt]),Q.cts=t.samples[n].dts+g.sample_offsets[wt]):Q.cts=Q.dts,S?(n==S.sample_numbers[gt]-1?(Q.is_sync=!0,gt++):(Q.is_sync=!1,Q.degradation_priority=0),A&&A.entries[Ut].sample_delta+zt==n+1&&(Q.subsamples=A.entries[Ut].subsamples,zt+=A.entries[Ut].sample_delta,Ut++)):Q.is_sync=!0,U.process_sdtp(t.mdia.minf.stbl.sdtp,Q,Q.number),j?Q.degradation_priority=j.priority[n]:Q.degradation_priority=0,A&&A.entries[Ut].sample_delta+zt==n&&(Q.subsamples=A.entries[Ut].subsamples,zt+=A.entries[Ut].sample_delta),(L.length>0||M.length>0)&&U.setSampleGroupProperties(t,Q,n,t.sample_groups_info)}n>0&&(t.samples[n-1].duration=Math.max(t.mdia.mdhd.duration-t.samples[n-1].dts,0),t.samples_duration+=t.samples[n-1].duration)}},U.prototype.updateSampleLists=function(){var t,n,r,f,h,p,g,S,C,A,L,M,j,D,at;if(this.moov!==void 0){for(;this.lastMoofIndex<this.moofs.length;)if(C=this.moofs[this.lastMoofIndex],this.lastMoofIndex++,C.type=="moof")for(A=C,t=0;t<A.trafs.length;t++){for(L=A.trafs[t],M=this.getTrackById(L.tfhd.track_id),j=this.getTrexById(L.tfhd.track_id),L.tfhd.flags&o.TFHD_FLAG_SAMPLE_DESC?f=L.tfhd.default_sample_description_index:f=j?j.default_sample_description_index:1,L.tfhd.flags&o.TFHD_FLAG_SAMPLE_DUR?h=L.tfhd.default_sample_duration:h=j?j.default_sample_duration:0,L.tfhd.flags&o.TFHD_FLAG_SAMPLE_SIZE?p=L.tfhd.default_sample_size:p=j?j.default_sample_size:0,L.tfhd.flags&o.TFHD_FLAG_SAMPLE_FLAGS?g=L.tfhd.default_sample_flags:g=j?j.default_sample_flags:0,L.sample_number=0,L.sbgps.length>0&&U.initSampleGroups(M,L,L.sbgps,M.mdia.minf.stbl.sgpds,L.sgpds),n=0;n<L.truns.length;n++){var it=L.truns[n];for(r=0;r<it.sample_count;r++){D={},D.moof_number=this.lastMoofIndex,D.number_in_traf=L.sample_number,L.sample_number++,D.number=M.samples.length,L.first_sample_index=M.samples.length,M.samples.push(D),D.track_id=M.tkhd.track_id,D.timescale=M.mdia.mdhd.timescale,D.description_index=f-1,D.description=M.mdia.minf.stbl.stsd.entries[D.description_index],D.size=p,it.flags&o.TRUN_FLAGS_SIZE&&(D.size=it.sample_size[r]),M.samples_size+=D.size,D.duration=h,it.flags&o.TRUN_FLAGS_DURATION&&(D.duration=it.sample_duration[r]),M.samples_duration+=D.duration,M.first_traf_merged||r>0?D.dts=M.samples[M.samples.length-2].dts+M.samples[M.samples.length-2].duration:(L.tfdt?D.dts=L.tfdt.baseMediaDecodeTime:D.dts=0,M.first_traf_merged=!0),D.cts=D.dts,it.flags&o.TRUN_FLAGS_CTS_OFFSET&&(D.cts=D.dts+it.sample_composition_time_offset[r]),at=g,it.flags&o.TRUN_FLAGS_FLAGS?at=it.sample_flags[r]:r===0&&it.flags&o.TRUN_FLAGS_FIRST_FLAG&&(at=it.first_sample_flags),D.is_sync=!(at>>16&1),D.is_leading=at>>26&3,D.depends_on=at>>24&3,D.is_depended_on=at>>22&3,D.has_redundancy=at>>20&3,D.degradation_priority=at&65535;var ut=!!(L.tfhd.flags&o.TFHD_FLAG_BASE_DATA_OFFSET),tt=!!(L.tfhd.flags&o.TFHD_FLAG_DEFAULT_BASE_IS_MOOF),J=!!(it.flags&o.TRUN_FLAGS_DATA_OFFSET),pt=0;ut?pt=L.tfhd.base_data_offset:tt||n===0?pt=A.start:pt=S,n===0&&r===0?J?D.offset=pt+it.data_offset:D.offset=pt:D.offset=S,S=D.offset+D.size,(L.sbgps.length>0||L.sgpds.length>0||M.mdia.minf.stbl.sbgps.length>0||M.mdia.minf.stbl.sgpds.length>0)&&U.setSampleGroupProperties(M,D,D.number_in_traf,L.sample_groups_info)}}if(L.subs){M.has_fragment_subsamples=!0;var mt=L.first_sample_index;for(n=0;n<L.subs.entries.length;n++)mt+=L.subs.entries[n].sample_delta,D=M.samples[mt-1],D.subsamples=L.subs.entries[n].subsamples}}}},U.prototype.getSample=function(t,n){var r,f=t.samples[n];if(!this.moov)return null;if(!f.data)f.data=new Uint8Array(f.size),f.alreadyRead=0,this.samplesDataSize+=f.size,s.debug("ISOFile","Allocating sample #"+n+" on track #"+t.tkhd.track_id+" of size "+f.size+" (total: "+this.samplesDataSize+")");else if(f.alreadyRead==f.size)return f;for(;;){var h=this.stream.findPosition(!0,f.offset+f.alreadyRead,!1);if(h>-1){r=this.stream.buffers[h];var p=r.byteLength-(f.offset+f.alreadyRead-r.fileStart);if(f.size-f.alreadyRead<=p)return s.debug("ISOFile","Getting sample #"+n+" data (alreadyRead: "+f.alreadyRead+" offset: "+(f.offset+f.alreadyRead-r.fileStart)+" read size: "+(f.size-f.alreadyRead)+" full size: "+f.size+")"),l.memcpy(f.data.buffer,f.alreadyRead,r,f.offset+f.alreadyRead-r.fileStart,f.size-f.alreadyRead),r.usedBytes+=f.size-f.alreadyRead,this.stream.logBufferLevel(),f.alreadyRead=f.size,f;if(p===0)return null;s.debug("ISOFile","Getting sample #"+n+" partial data (alreadyRead: "+f.alreadyRead+" offset: "+(f.offset+f.alreadyRead-r.fileStart)+" read size: "+p+" full size: "+f.size+")"),l.memcpy(f.data.buffer,f.alreadyRead,r,f.offset+f.alreadyRead-r.fileStart,p),f.alreadyRead+=p,r.usedBytes+=p,this.stream.logBufferLevel()}else return null}},U.prototype.releaseSample=function(t,n){var r=t.samples[n];return r.data?(this.samplesDataSize-=r.size,r.data=null,r.alreadyRead=0,r.size):0},U.prototype.getAllocatedSampleDataSize=function(){return this.samplesDataSize},U.prototype.getCodecs=function(){var t,n="";for(t=0;t<this.moov.traks.length;t++){var r=this.moov.traks[t];t>0&&(n+=","),n+=r.mdia.minf.stbl.stsd.entries[0].getCodec()}return n},U.prototype.getTrexById=function(t){var n;if(!this.moov||!this.moov.mvex)return null;for(n=0;n<this.moov.mvex.trexs.length;n++){var r=this.moov.mvex.trexs[n];if(r.track_id==t)return r}return null},U.prototype.getTrackById=function(t){if(this.moov===void 0)return null;for(var n=0;n<this.moov.traks.length;n++){var r=this.moov.traks[n];if(r.tkhd.track_id==t)return r}return null},U.prototype.itemsDataSize=0,U.prototype.flattenItemInfo=function(){var t=this.items,n=this.entity_groups,r,f,h,p=this.meta;if(p!=null&&p.hdlr!==void 0&&p.iinf!==void 0){for(r=0;r<p.iinf.item_infos.length;r++)h={},h.id=p.iinf.item_infos[r].item_ID,t[h.id]=h,h.ref_to=[],h.name=p.iinf.item_infos[r].item_name,p.iinf.item_infos[r].protection_index>0&&(h.protection=p.ipro.protections[p.iinf.item_infos[r].protection_index-1]),p.iinf.item_infos[r].item_type?h.type=p.iinf.item_infos[r].item_type:h.type="mime",h.content_type=p.iinf.item_infos[r].content_type,h.content_encoding=p.iinf.item_infos[r].content_encoding,h.item_uri_type=p.iinf.item_infos[r].item_uri_type;if(p.grpl)for(r=0;r<p.grpl.boxes.length;r++)entity_group={},entity_group.id=p.grpl.boxes[r].group_id,entity_group.entity_ids=p.grpl.boxes[r].entity_ids,entity_group.type=p.grpl.boxes[r].type,n[entity_group.id]=entity_group;if(p.iloc)for(r=0;r<p.iloc.items.length;r++){var g=p.iloc.items[r];switch(h=t[g.item_ID],g.data_reference_index!==0&&(s.warn("Item storage with reference to other files: not supported"),h.source=p.dinf.boxes[g.data_reference_index-1]),g.construction_method){case 0:break;case 1:break;case 2:s.warn("Item storage with construction_method : not supported");break}for(h.extents=[],h.size=0,f=0;f<g.extents.length;f++)h.extents[f]={},h.extents[f].offset=g.extents[f].extent_offset+g.base_offset,g.construction_method==1&&(h.extents[f].offset+=p.idat.start+p.idat.hdr_size),h.extents[f].length=g.extents[f].extent_length,h.extents[f].alreadyRead=0,h.size+=h.extents[f].length}if(p.pitm&&(t[p.pitm.item_id].primary=!0),p.iref)for(r=0;r<p.iref.references.length;r++){var S=p.iref.references[r];for(f=0;f<S.references.length;f++)t[S.from_item_ID].ref_to.push({type:S.type,id:S.references[f]})}if(p.iprp)for(var C=0;C<p.iprp.ipmas.length;C++){var A=p.iprp.ipmas[C];for(r=0;r<A.associations.length;r++){var L=A.associations[r];if(h=t[L.id],h||(h=n[L.id]),h)for(h.properties===void 0&&(h.properties={},h.properties.boxes=[]),f=0;f<L.props.length;f++){var M=L.props[f];if(M.property_index>0&&M.property_index-1<p.iprp.ipco.boxes.length){var j=p.iprp.ipco.boxes[M.property_index-1];h.properties[j.type]=j,h.properties.boxes.push(j)}}}}}},U.prototype.getItem=function(t){var n,r;if(!this.meta)return null;if(r=this.items[t],!r.data&&r.size)r.data=new Uint8Array(r.size),r.alreadyRead=0,this.itemsDataSize+=r.size,s.debug("ISOFile","Allocating item #"+t+" of size "+r.size+" (total: "+this.itemsDataSize+")");else if(r.alreadyRead===r.size)return r;for(var f=0;f<r.extents.length;f++){var h=r.extents[f];if(h.alreadyRead!==h.length){var p=this.stream.findPosition(!0,h.offset+h.alreadyRead,!1);if(p>-1){n=this.stream.buffers[p];var g=n.byteLength-(h.offset+h.alreadyRead-n.fileStart);if(h.length-h.alreadyRead<=g)s.debug("ISOFile","Getting item #"+t+" extent #"+f+" data (alreadyRead: "+h.alreadyRead+" offset: "+(h.offset+h.alreadyRead-n.fileStart)+" read size: "+(h.length-h.alreadyRead)+" full extent size: "+h.length+" full item size: "+r.size+")"),l.memcpy(r.data.buffer,r.alreadyRead,n,h.offset+h.alreadyRead-n.fileStart,h.length-h.alreadyRead),n.usedBytes+=h.length-h.alreadyRead,this.stream.logBufferLevel(),r.alreadyRead+=h.length-h.alreadyRead,h.alreadyRead=h.length;else return s.debug("ISOFile","Getting item #"+t+" extent #"+f+" partial data (alreadyRead: "+h.alreadyRead+" offset: "+(h.offset+h.alreadyRead-n.fileStart)+" read size: "+g+" full extent size: "+h.length+" full item size: "+r.size+")"),l.memcpy(r.data.buffer,r.alreadyRead,n,h.offset+h.alreadyRead-n.fileStart,g),h.alreadyRead+=g,r.alreadyRead+=g,n.usedBytes+=g,this.stream.logBufferLevel(),null}else return null}}return r.alreadyRead===r.size?r:null},U.prototype.releaseItem=function(t){var n=this.items[t];if(n.data){this.itemsDataSize-=n.size,n.data=null,n.alreadyRead=0;for(var r=0;r<n.extents.length;r++){var f=n.extents[r];f.alreadyRead=0}return n.size}else return 0},U.prototype.processItems=function(t){for(var n in this.items){var r=this.items[n];this.getItem(r.id),t&&!r.sent&&(t(r),r.sent=!0,r.data=null)}},U.prototype.hasItem=function(t){for(var n in this.items){var r=this.items[n];if(r.name===t)return r.id}return-1},U.prototype.getMetaHandler=function(){return this.meta?this.meta.hdlr.handler:null},U.prototype.getPrimaryItem=function(){return!this.meta||!this.meta.pitm?null:this.getItem(this.meta.pitm.item_id)},U.prototype.itemToFragmentedTrackFile=function(t){var n=t||{},r=null;if(n.itemId?r=this.getItem(n.itemId):r=this.getPrimaryItem(),r==null)return null;var f=new U;f.discardMdatData=!1;var h={type:r.type,description_boxes:r.properties.boxes};r.properties.ispe&&(h.width=r.properties.ispe.image_width,h.height=r.properties.ispe.image_height);var p=f.addTrack(h);return p?(f.addSample(p,r.data),f):null},U.prototype.write=function(t){for(var n=0;n<this.boxes.length;n++)this.boxes[n].write(t)},U.prototype.createFragment=function(t,n,r){var f=this.getTrackById(t),h=this.getSample(f,n);if(h==null)return this.setNextSeekPositionFromSample(f.samples[n]),null;var p=r||new l;p.endianness=l.BIG_ENDIAN;var g=this.createSingleSampleMoof(h);g.write(p),g.trafs[0].truns[0].data_offset=g.size+8,s.debug("MP4Box","Adjusting data_offset with new value "+g.trafs[0].truns[0].data_offset),p.adjustUint32(g.trafs[0].truns[0].data_offset_position,g.trafs[0].truns[0].data_offset);var S=new o.mdatBox;return S.data=h.data,S.write(p),p},U.writeInitializationSegment=function(t,n,r,f){var h;s.debug("ISOFile","Generating initialization segment");var p=new l;p.endianness=l.BIG_ENDIAN,t.write(p);var g=n.add("mvex");for(r&&g.add("mehd").set("fragment_duration",r),h=0;h<n.traks.length;h++)g.add("trex").set("track_id",n.traks[h].tkhd.track_id).set("default_sample_description_index",1).set("default_sample_duration",f).set("default_sample_size",0).set("default_sample_flags",65536);return n.write(p),p.buffer},U.prototype.save=function(t){var n=new l;n.endianness=l.BIG_ENDIAN,this.write(n),n.save(t)},U.prototype.getBuffer=function(){var t=new l;return t.endianness=l.BIG_ENDIAN,this.write(t),t.buffer},U.prototype.initializeSegmentation=function(){var t,n,r,f;for(this.onSegment===null&&s.warn("MP4Box","No segmentation callback set!"),this.isFragmentationInitialized||(this.isFragmentationInitialized=!0,this.nextMoofNumber=0,this.resetTables()),n=[],t=0;t<this.fragmentedTracks.length;t++){var h=new o.moovBox;h.mvhd=this.moov.mvhd,h.boxes.push(h.mvhd),r=this.getTrackById(this.fragmentedTracks[t].id),h.boxes.push(r),h.traks.push(r),f={},f.id=r.tkhd.track_id,f.user=this.fragmentedTracks[t].user,f.buffer=U.writeInitializationSegment(this.ftyp,h,this.moov.mvex&&this.moov.mvex.mehd?this.moov.mvex.mehd.fragment_duration:void 0,this.moov.traks[t].samples.length>0?this.moov.traks[t].samples[0].duration:0),n.push(f)}return n},o.Box.prototype.printHeader=function(t){this.size+=8,this.size>c&&(this.size+=8),this.type==="uuid"&&(this.size+=16),t.log(t.indent+"size:"+this.size),t.log(t.indent+"type:"+this.type)},o.FullBox.prototype.printHeader=function(t){this.size+=4,o.Box.prototype.printHeader.call(this,t),t.log(t.indent+"version:"+this.version),t.log(t.indent+"flags:"+this.flags)},o.Box.prototype.print=function(t){this.printHeader(t)},o.ContainerBox.prototype.print=function(t){this.printHeader(t);for(var n=0;n<this.boxes.length;n++)if(this.boxes[n]){var r=t.indent;t.indent+=" ",this.boxes[n].print(t),t.indent=r}},U.prototype.print=function(t){t.indent="";for(var n=0;n<this.boxes.length;n++)this.boxes[n]&&this.boxes[n].print(t)},o.mvhdBox.prototype.print=function(t){o.FullBox.prototype.printHeader.call(this,t),t.log(t.indent+"creation_time: "+this.creation_time),t.log(t.indent+"modification_time: "+this.modification_time),t.log(t.indent+"timescale: "+this.timescale),t.log(t.indent+"duration: "+this.duration),t.log(t.indent+"rate: "+this.rate),t.log(t.indent+"volume: "+(this.volume>>8)),t.log(t.indent+"matrix: "+this.matrix.join(", ")),t.log(t.indent+"next_track_id: "+this.next_track_id)},o.tkhdBox.prototype.print=function(t){o.FullBox.prototype.printHeader.call(this,t),t.log(t.indent+"creation_time: "+this.creation_time),t.log(t.indent+"modification_time: "+this.modification_time),t.log(t.indent+"track_id: "+this.track_id),t.log(t.indent+"duration: "+this.duration),t.log(t.indent+"volume: "+(this.volume>>8)),t.log(t.indent+"matrix: "+this.matrix.join(", ")),t.log(t.indent+"layer: "+this.layer),t.log(t.indent+"alternate_group: "+this.alternate_group),t.log(t.indent+"width: "+this.width),t.log(t.indent+"height: "+this.height)};var G={};G.createFile=function(t,n){var r=t!==void 0?t:!0,f=new U(n);return f.discardMdatData=!r,f},e.createFile=G.createFile}(Qi)),Qi}var Fc=Pc();const Ic=Tc(Fc);async function Lc(e,s,a,l=1e6){let c,u;const d=Ic.createFile(),o=new Map;let _=1;const b=function(r){var f=r.id,h=r.codec,p='video/mp4; codecs="'+h+'"',g,S=typeof TrackDefault<"u";MediaSource.isTypeSupported(p)?(c=s.addSourceBuffer(p),o.set(f,c),S&&(c.trackDefaults=new TrackDefaultList([g])),c.addEventListener("error",function(C){Log.error("MSE SourceBuffer #"+f,C)}),c.ms=s,c.id=f,d.setSegmentOptions(f,c,{nbSamples:10}),c.pendingAppends=[]):console.error("ms not supported")},v=function n(r){const f=r.target;f.ms.readyState==="open"&&(f.sampleNum=0,f.removeEventListener("updateend",n),f.addEventListener("updateend",x.bind(f,!0,!0)),x.call(f,!1,!0),f.ms.pendingInits--)},x=function n(r,f){if(f===!0){if(r===!0&&this.ms.readyState==="open"&&this.buffered.length>0)try{const p=e.currentTime;for(let g=0;g<this.buffered.length;g++){const S=this.buffered.start(g),C=this.buffered.end(g);if(C<p-3){this.remove(S,C);break}}}catch{}if(this.sampleNum&&(d.releaseUsedSamples(this.id,this.sampleNum),delete this.sampleNum),this.is_last)try{this.ms.endOfStream()}catch{}}if(this.ms.readyState==="open"&&this.updating===!1&&this.pendingAppends.length>0){var h=this.pendingAppends.shift();this.sampleNum=h.sampleNum,this.is_last=h.is_last;try{this.appendBuffer(h.buffer)}catch(p){p.name==="QuotaExceededError"&&(this.pendingAppends.splice(0,0,h),setTimeout(()=>{n.apply(this,arguments)},1e3))}}};d.onMoovStart=function(){},d.onReady=function(n){if(s.movieInfo=n,n.isFragmented?s.duration=n.fragment_duration/n.timescale:s.duration=n.duration/n.timescale,n){for(const f of n.tracks)b(f);const r=d.initializeSegmentation();for(let f=0;f<r.length;f++){const h=r[f].user;f===0&&(h.ms.pendingInits=0),h.addEventListener("updateend",v),h.appendBuffer(r[f].buffer),h.segmentIndex=0,h.ms.pendingInits++}}},d.onSegment=function(n,r,f,h,p){const g=r;g.segmentIndex++,g.pendingAppends.push({id:n,buffer:f,sampleNum:h,is_last:p}),x.call(g,!0,!1)},d.start();function E(){let n,r,f;for(n=0;n<e.buffered.length;n++)if(r=e.buffered.start(n),f=e.buffered.end(n),e.currentTime>=r&&e.currentTime<=f-Math.ceil(11*e.playbackRate))return;const h=d.seek(e.currentTime,!0);t(h.offset,h.offset+l),e.lastSeekTime=e.currentTime}function B(){e.lastSeekTime!==e.currentTime&&E()}function U(){(isNaN(U.last_time)||e.currentTime-U.last_time>Math.ceil(10*e.playbackRate))&&(E(),U.last_time=e.currentTime)}e.addEventListener("seeking",B),e.addEventListener("timeupdate",U);const G=()=>{u=!0,e.removeEventListener("seeking",B),e.removeEventListener("timeupdate",U),o.forEach((n,r)=>{try{n.updating&&n.abort(),s.readyState==="open"&&s.removeSourceBuffer(n),n.removeEventListener("updateend",x),d.releaseUsedSamples(r,n.sampleNum)}catch(f){console.warn("Error cleaning up SourceBuffer:",f)}}),o.clear(),d&&(d.flush(),d.onSegment=null,d.onReady=null,d.onMoovStart=null,d.stop())};async function t(n,r,f=null,h=0){if(f===null)f=++_;else if(f!==_)return!0;if(u)return-1;if(h>64)return 3;const p=new Blob([await a(n,r)]);if(f!==_)return 2;if(!p.size){const C=new ArrayBuffer(0);return C.fileStart=n,d.appendBuffer(C,!0),d.flush(),1}const g=await p.arrayBuffer();g.fileStart=n;const S=d.appendBuffer(g,!!p.eof);return d.flush(),S?await t(S,S+l,f,++h):p.eof?!1:null}return queueMicrotask(async()=>{await t(0,999999)}),G}const Rc={name:"VideoDecryption",data(){return{ctx:null,file:null,password:"",playing:!1,cleanup:null}},methods:{handleFileSelect(e){this.file=e.target.files[0]},async playVideo(){try{this.playing=!0,await this.$nextTick();const e=await ro();this.ctx=e;const s=this.file,a=async(d,o)=>{const _=s.slice(d,o);return new Uint8Array(await _.arrayBuffer())},l=this.password;await oo(e,new ao((d,o)=>a(d,o)),s.size,l),console.log("ctx=",e);const c=this.$refs.videoPlayer;c.controls=!0;let u;await new Promise(d=>{u=new MediaSource,c.src=URL.createObjectURL(u),u.addEventListener("sourceopen",()=>{d()},{once:!0})}),this.cleanup=await Lc(c,u,async(d,o)=>await lo(e,d,o)),this.$refs.videoDialog.showModal()}catch(e){console.error(e),alert(e),this.playing=!1}},closeDialog(){this.$refs.videoDialog.close()},handleDialogClose(){this.playing=!1,this.cleanup&&(this.cleanup(),this.cleanup=null),no(this.ctx),console.log("ctx destroy",this.ctx),this.ctx=null}}},zc={class:"video-decrypt-container"},kc=["disabled"],Mc={key:0,ref:"videoPlayer",controls:"",style:{flex:"1"}};function Dc(e,s,a,l,c,u){return Mt(),Gt("div",zc,[K("input",{type:"file",onChange:s[0]||(s[0]=(...d)=>u.handleFileSelect&&u.handleFileSelect(...d))},null,32),re(K("input",{type:"password","onUpdate:modelValue":s[1]||(s[1]=d=>c.password=d),placeholder:"输入解密密码"},null,512),[[be,c.password]]),K("button",{onClick:s[2]||(s[2]=(...d)=>u.playVideo&&u.playVideo(...d)),disabled:!c.file||c.playing},"播放视频",8,kc),K("dialog",{style:{width:"100%",height:"100%",display:"flex","flex-direction":"column"},ref:"videoDialog",onClose:s[4]||(s[4]=(...d)=>u.handleDialogClose&&u.handleDialogClose(...d))},[c.playing?(Mt(),Gt("video",Mc,null,512)):Re("",!0),K("button",{onClick:s[3]||(s[3]=(...d)=>u.closeDialog&&u.closeDialog(...d)),style:{"margin-top":"0.5em"}},"关闭")],544)])}const Oc=fi(Rc,[["render",Dc],["__scopeId","data-v-94003151"]]),Nc=[{path:"/message",name:"message",component:Wf},{path:"/file",name:"file",component:uc},{path:"/file-classic",name:"file-classic",component:Ac},{path:"/video-decrypt",name:"video-decrypt",component:Oc},{path:"/",redirect:"/message"}],Hc=kf({history:hf(),routes:Nc});Bl(Il).use(Hc).mount("#app");
//# sourceMappingURL=index-XwhFpNBx.js.map
