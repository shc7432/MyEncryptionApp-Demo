var rt=Object.defineProperty,Be=(e,t)=>{for(var o in t)rt(e,o,{get:t[o],enumerable:!0})},Se=new Array(256);for(let e=0;e<256;e++)Se[e]=e.toString(16).padStart(2,"0");function W(e){if(!e||!(e instanceof Uint8Array))throw new TypeError("Input must be a Uint8Array");const t=e.length,o=new Array(t);for(let a=0;a<t;a++)o[a]=Se[e[a]];return o.join("")}var Ce={get InvalidHexStringException(){throw new TypeError("Invalid hex string")}};function P(e){if(typeof e!="string")throw new TypeError("Input must be a string");const t=e.length;if(t%2!==0)throw new TypeError("Hex string must have even length");e=e.toLowerCase();const o=new Uint8Array(t>>1);for(let a=0;a<t;a+=2){const r=e.charCodeAt(a),n=e.charCodeAt(a+1),u=r>=97&&r<=102?r-87:r>=48&&r<=57?r-48:Ce.InvalidHexStringException,i=n>=97&&n<=102?n-87:n>=48&&n<=57?n-48:Ce.InvalidHexStringException;o[a>>1]=u<<4|i}return o}function Z(e){const t=new Uint8Array(e);return crypto.getRandomValues(t),t}function ot(){const e=Z(1);return new Uint8Array(e)[0]}function G(e,t="utf-8"){if(typeof e!="string")throw new TypeError("Input must be a string");if(t.toLowerCase()!=="utf-8")throw new Error("Only 'utf-8' encoding is supported");return new TextEncoder().encode(e)}function M(e,t="utf-8"){if(e instanceof Uint8Array||(e=new Uint8Array(e)),t.toLowerCase()!=="utf-8")throw new Error("Only 'utf-8' encoding is supported");return new TextDecoder().decode(e)}var at={};Be(at,{BadDataException:()=>V,CannotDecryptException:()=>ve,ChaCha20NotSupportedException:()=>qe,CryptContextNotInitedException:()=>je,CryptContextReleasedException:()=>ze,CryptContextReusedException:()=>Ve,DangerousEncryptionAlgorithmException:()=>Ge,DataError:()=>H,DeprecationException:()=>Pe,EncryptionAlgorithmNotSupportedException:()=>X,EncryptionError:()=>he,EncryptionVersionMismatchException:()=>Q,EndOfFileException:()=>it,ExpectedError:()=>Ne,FileCorruptedException:()=>de,IVException:()=>Fe,InputError:()=>te,InternalError:()=>F,InvalidCryptContextTypeException:()=>Ke,InvalidEndMarkerException:()=>ye,InvalidFileFormatException:()=>we,InvalidParameterException:()=>U,InvalidScryptParameterException:()=>Le,LibraryError:()=>pe,NetworkError:()=>Te,NotSupportedException:()=>ge,OperationNotPermittedException:()=>me,ParameterError:()=>K,RuntimeException:()=>Ae,UnexpectedError:()=>ee,UnexpectedFailureInChunkDecryptionException:()=>Oe,UserException:()=>Me,VersionSystemError:()=>Re,raise:()=>De});var pe=class extends Error{constructor(e="Library Error",t=void 0){super(e,t),this.name="LibraryError"}};function De(e){throw e}var he=class extends pe{constructor(e="Encryption Error",t=void 0){super(e,t),this.name="EncryptionError"}},Te=class extends pe{constructor(e="(Network Error)",t=void 0){super(e,t),this.name="NetworkError"}},Ne=class extends he{constructor(e="(Expected Error)",t=void 0){super(e,t),this.name="ExpectedError"}},Ae=class extends he{constructor(e="(Runtime Error)",t=void 0){super(e,t),this.name="RuntimeException"}},ee=class extends Ae{constructor(e="(Unexpected Error)",t=void 0){super(e,t),this.name="UnexpectedError"}},F=class extends ee{constructor(e="(Internal Error)",t=void 0){super(e,t),this.name="InternalError"}},te=class extends Ae{constructor(e="(Input Error)",t=void 0){super(e,t),this.name="InputError"}},K=class extends te{constructor(e="(Data Error)",t=void 0){super(e,t),this.name="ParameterError"}},H=class extends te{constructor(e="(Data Error)",t=void 0){super(e,t),this.name="DataError"}},Me=class extends Ae{constructor(e="(The end user has a fault that caused the exception. This is not code bug.)",t=void 0){super(e,t),this.name="UserException"}},Re=class extends H{constructor(e="(Version System Error)",t=void 0){super(e,t),this.name="VersionSystemError"}},U=class extends K{constructor(e="The parameter provided is invalid.",t=void 0){super(e,t),this.name="InvalidParameterException"}},V=class extends H{constructor(e="The data is bad.",t=void 0){super(e,t),this.name="BadDataException"}},Le=class extends K{constructor(e="The N, r, or p is not valid or out of range.",t=void 0){super(e,t),this.name="InvalidScryptParameterException"}},Q=class extends Re{constructor(e="The version of the encryption library doesn't match.",t=void 0){super(e,t),this.name="EncryptionVersionMismatchException"}},we=class extends H{constructor(e="The file format is invalid.",t=void 0){super(e,t),this.name="InvalidFileFormatException"}},Fe=class extends F{constructor(e="IV Exception.",t=void 0){super(e,t),this.name="IVException"}},de=class extends H{constructor(e="File is corrupted.",t=void 0){super(e,t),this.name="FileCorruptedException"}},ye=class extends H{constructor(e="The end marker is invalid.",t=void 0){super(e,t),this.name="InvalidEndMarkerException"}},ve=class extends Me{constructor(e="Cannot decrypt",t=void 0){super(e,t),this.name="CannotDecryptException"}},Oe=class extends ee{constructor(e="An unexpected failure occurred while decrypting the chunk. The file may be corrupted.",t=void 0){super(e,t),this.name="UnexpectedFailureInChunkDecryptionException"}},Ve=class extends K{constructor(e="Not allowed to reuse a crypt context.",t=void 0){super(e,t),this.name="CryptContextReusedException"}},ge=class extends te{constructor(e="Operation not supported",t=void 0){super(e,t),this.name="NotSupportedException"}},Pe=class extends te{constructor(e="Trying to use a deprecated feature.",t=void 0){super(e,t),this.name="DeprecationException"}},it=class extends Ne{constructor(e="End of File",t=void 0){super(e,t),this.name="EndOfFileException",globalThis.console.warn(`%c[npm::simple-data-crypto] %c[EndOfFileException] %cDEPRECATED!! %cDeprecated and will be removed in the next MAJOR version. See %csrc/exceptions.js%c for more information.
%cNote: %cThis %cdoes not%c indicate the package is deprecated. Instead, it indicates that your code uses the %cdeprecated%c class %cEndOfFileException%c. Fix your code to suppress this warning.`,"color: #007700","color: #570263","color: red; font-weight: bold;","","font-weight: bold;","","font-weight: bold; color: #0000ff","","color: red; font-weight: bold;","","font-style: italic","","color: #570263","")}},je=class extends K{constructor(e="Crypt context is not initialized.",t=void 0){super(e,t),this.name="CryptContextNotInitedException"}},Ke=class extends K{constructor(e="Invalid crypt context type.",t=void 0){super(e,t),this.name="InvalidCryptContextTypeException"}},ze=class extends K{constructor(e="Crypt context has been released.",t=void 0){super(e,t),this.name="CryptContextReleasedException"}},me=class extends K{constructor(e="Operation not permitted.",t=void 0){super(e,t),this.name="OperationNotPermittedException"}},X=class extends H{constructor(e="The specified encryption algorithm is not supported.",t=void 0){super(e,t),this.name="EncryptionAlgorithmNotSupportedException"}},qe=class extends X{constructor(e="ChaCha20 is not supported yet.",t=void 0){super(e,t),this.name="ChaCha20NotSupportedException"}},Ge=class extends X{constructor(e="The specified encryption algorithm is DANGEROUS.",t=void 0){super(e,t),this.name="DangerousEncryptionAlgorithmException"}},Ee={};(function(){const e=Ee;var t;(function(n){function u(s){return x?new x(s):new Array(s)}function i(s){return x?new x(s):s}function h(s){for(var w=s.length/2,v=u(w),d=0;d<w;d++){var g=parseInt(s.substr(2*d,2),16);if(isNaN(g))throw Error("invalid hex data");v[d]=g}return v}function c(s){for(var w=s.length,v="",d=0;d<w;d++){var g=255&s[d],p=g.toString(16);g<16&&(p="0"+p),v+=p}return v}function l(s){var w=e.TextEncoder;if(w)return new w().encode(s);for(var v=[],d=0,g=0,p=encodeURI(s),T=p.length;d<T;){var k=p.charCodeAt(d);if(k==37){var E=p.substr(d+1,2);k=parseInt(E,16),d+=3}else d++;v[g++]=k}return i(v)}function f(s){for(var w=s.length,v="",d=0;d<w;d++){var g=s[d],p=g.toString(16);g<16&&(p="0"+p),v+="%"+p}return decodeURIComponent(v)}function m(s){s.style.cssText="position:absolute;top:-999px"}var x=e.Uint8Array;n.hexToBytes=h,n.bytesToHex=c,n.strToBytes=l,n.bytesToStr=f,n.hideDom=m})(t||(t={}));var o;(function(n){function u(){return"Worker"in e}function i(w){r.__asmjs_cb=x,async function(){try{const v=`
const window = globalThis["scrypt_loader_9470f487e3aa154f278269e99e6a42502ca77b8da3867a46a548909659a3db4a"]
/// START ASM.JS
!function(){function A(){"use strict";function A(A){return r(self,{},A)}function e(){return 8200}var r=function(A,e,r){"use asm";var n=new A.Int32Array(r),t=A.Math.imul,i=new A.Int8Array(r),a=new A.Uint8Array(r);function o(A,e,r,o,u,c,s){A=A|0;e=e|0;r=r|0;o=o|0;u=u|0;c=c|0;s=s|0;var l=0,w=0,h=0,v=0,d=0,y=0,p=0,g=0,b=0,m=0,M=0,k=0,U=0,L=0,I=0,x=0,E=0,D=0,K=0,R=0,B=0,F=0,O=0,_=0,C=0,H=0,j=0,q=0,G=0,N=0,P=0,S=0;C=e<<7;q=e<<5;N=o+C|0;M=o+(e<<8)|0;if(u|0){A:do if(c>>>0<s>>>0){k=C+-64|0;U=o+k|0;L=A+-1|0;I=q&1073741792;x=N+k|0;if(!I){b=c;while(1){f(o,N,e);f(N,o,e);b=b+2|0;if(b>>>0>=s>>>0)break A}}else g=c;do{_=M+((t(n[U>>2]&L,q)|0)<<2)|0;v=0;do{H=o+(v<<2)|0;n[H>>2]=n[H>>2]^n[_+(v<<2)>>2];v=v+1|0}while((v|0)!=(I|0));f(o,N,e);j=M+((t(n[x>>2]&L,q)|0)<<2)|0;d=0;do{G=N+(d<<2)|0;n[G>>2]=n[G>>2]^n[j+(d<<2)>>2];d=d+1|0}while((d|0)!=(I|0));f(N,o,e);g=g+2|0}while(g>>>0<s>>>0)}while(0);if((s|0)==(A|0)&(q|0)!=0)m=0;else return;do{P=r+(m<<2)|0;S=n[o+(m<<2)>>2]|0;i[P>>0]=S;i[P+1>>0]=S>>>8;i[P+2>>0]=S>>>16;i[P+3>>0]=S>>>24;m=m+1|0}while((m|0)!=(q|0));return}if((c|0)==0&(q|0)!=0){p=0;do{E=r+(p<<2)|0;n[o+(p<<2)>>2]=(a[E+1>>0]|0)<<8|(a[E>>0]|0)|(a[E+2>>0]|0)<<16|(a[E+3>>0]|0)<<24;p=p+1|0}while((p|0)!=(q|0))}D=t(q,c)|0;K=t(q,s)|0;if(D>>>0>=K>>>0)return;R=q&1073741792;if(!R){w=D;do{f(o,N,e);w=w+q+q|0;f(N,o,e)}while(w>>>0<K>>>0);return}else l=D;do{B=M+(l<<2)|0;h=0;do{n[B+(h<<2)>>2]=n[o+(h<<2)>>2];h=h+1|0}while((h|0)!=(R|0));F=l+q|0;f(o,N,e);O=M+(F<<2)|0;y=0;do{n[O+(y<<2)>>2]=n[N+(y<<2)>>2];y=y+1|0}while((y|0)!=(R|0));l=F+q|0;f(N,o,e)}while(l>>>0<K>>>0);return}function f(A,e,r){A=A|0;e=e|0;r=r|0;var t=0,i=0,a=0,o=0,f=0,u=0,c=0,s=0,l=0,w=0,h=0,v=0,d=0,y=0,p=0,g=0,b=0,m=0,M=0,k=0,U=0,L=0,I=0,x=0,E=0,D=0,K=0,R=0,B=0,F=0,O=0,_=0,C=0,H=0,j=0,q=0,G=0,N=0,P=0,S=0,V=0,Z=0,Q=0,T=0,J=0,Y=0,W=0,z=0,X=0,$=0,AA=0,eA=0,rA=0,nA=0,tA=0,iA=0,aA=0,oA=0,fA=0,uA=0,cA=0,sA=0,lA=0,wA=0,hA=0,vA=0,dA=0,yA=0,pA=0,gA=0,bA=0,mA=0,MA=0,kA=0,UA=0,LA=0,IA=0,xA=0,EA=0,DA=0,KA=0,RA=0,BA=0,FA=0,OA=0,_A=0,CA=0,HA=0,jA=0,qA=0,GA=0,NA=0,PA=0,SA=0,VA=0,ZA=0,QA=0,TA=0,JA=0,YA=0,WA=0,zA=0,XA=0,$A=0,Ae=0,ee=0,re=0,ne=0,te=0,ie=0,ae=0,oe=0,fe=0,ue=0,ce=0,se=0,le=0,we=0,he=0,ve=0,de=0,ye=0,pe=0,ge=0,be=0,me=0,Me=0,ke=0,Ue=0,Le=0,Ie=0,xe=0,Ee=0,De=0,Ke=0,Re=0,Be=0,Fe=0,Oe=0,_e=0,Ce=0,He=0,je=0,qe=0,Ge=0,Ne=0,Pe=0,Se=0,Ve=0,Ze=0,Qe=0,Te=0,Je=0,Ye=0,We=0,ze=0,Xe=0,$e=0,Ar=0,er=0,rr=0,nr=0,tr=0,ir=0,ar=0,or=0,fr=0,ur=0,cr=0,sr=0,lr=0,wr=0,hr=0,vr=0,dr=0,yr=0,pr=0,gr=0,br=0,mr=0,Mr=0,kr=0,Ur=0,Lr=0,Ir=0,xr=0,Er=0,Dr=0,Kr=0,Rr=0,Br=0,Fr=0,Or=0,_r=0,Cr=0,Hr=0,jr=0,qr=0,Gr=0,Nr=0,Pr=0,Sr=0,Vr=0,Zr=0,Qr=0,Tr=0,Jr=0,Yr=0,Wr=0,zr=0,Xr=0,$r=0,An=0,en=0,rn=0,nn=0,tn=0,an=0,on=0,fn=0,un=0,cn=0,sn=0,ln=0,wn=0,hn=0,vn=0,dn=0,yn=0,pn=0,gn=0,bn=0,mn=0,Mn=0,kn=0,Un=0,Ln=0,In=0,xn=0,En=0,Dn=0,Kn=0,Rn=0,Bn=0,Fn=0,On=0,_n=0,Cn=0,Hn=0,jn=0,qn=0,Gn=0,Nn=0,Pn=0,Sn=0,Vn=0,Zn=0,Qn=0,Tn=0,Jn=0,Yn=0,Wn=0,zn=0,Xn=0,$n=0,At=0,et=0,rt=0,nt=0,tt=0,it=0,at=0,ot=0,ft=0,ut=0,ct=0,st=0,lt=0,wt=0,ht=0,vt=0,dt=0,yt=0,pt=0,gt=0,bt=0,mt=0,Mt=0,kt=0,Ut=0,Lt=0,It=0,xt=0,Et=0,Dt=0,Kt=0,Rt=0,Bt=0,Ft=0,Ot=0,_t=0,Ct=0,Ht=0,jt=0,qt=0,Gt=0,Nt=0,Pt=0,St=0,Vt=0,Zt=0,Qt=0,Tt=0,Jt=0,Yt=0,Wt=0,zt=0,Xt=0,$t=0,Ai=0,ei=0,ri=0,ni=0,ti=0,ii=0,ai=0,oi=0,fi=0,ui=0,ci=0,si=0,li=0,wi=0,hi=0,vi=0,di=0,yi=0,pi=0,gi=0,bi=0,mi=0,Mi=0,ki=0,Ui=0,Li=0,Ii=0,xi=0,Ei=0,Di=0,Ki=0,Ri=0,Bi=0,Fi=0,Oi=0,_i=0,Ci=0,Hi=0,ji=0,qi=0,Gi=0,Ni=0,Pi=0,Si=0,Vi=0,Zi=0,Qi=0,Ti=0,Ji=0,Yi=0,Wi=0,zi=0,Xi=0,$i=0,Aa=0,ea=0,ra=0,na=0,ta=0,ia=0,aa=0,oa=0,fa=0,ua=0,ca=0,sa=0,la=0,wa=0,ha=0,va=0,da=0,ya=0,pa=0,ga=0,ba=0,ma=0,Ma=0,ka=0,Ua=0,La=0,Ia=0,xa=0,Ea=0,Da=0,Ka=0,Ra=0,Ba=0,Fa=0,Oa=0,_a=0,Ca=0,Ha=0,ja=0,qa=0,Ga=0,Na=0,Pa=0,Sa=0,Va=0,Za=0,Qa=0,Ta=0,Ja=0,Ya=0,Wa=0,za=0,Xa=0,$a=0,Ao=0,eo=0,ro=0,no=0,to=0,io=0,ao=0,oo=0,fo=0,uo=0,co=0,so=0,lo=0,wo=0,ho=0,vo=0,yo=0,po=0,go=0,bo=0,mo=0,Mo=0,ko=0,Uo=0,Lo=0,Io=0,xo=0,Eo=0,Do=0,Ko=0,Ro=0,Bo=0,Fo=0,Oo=0,_o=0,Co=0,Ho=0,jo=0,qo=0,Go=0,No=0,Po=0,So=0,Vo=0,Zo=0,Qo=0,To=0,Jo=0,Yo=0,Wo=0,zo=0,Xo=0,$o=0,Af=0,ef=0,rf=0,nf=0,tf=0,af=0,of=0,ff=0,uf=0,cf=0,sf=0,lf=0,wf=0,hf=0,vf=0,df=0,yf=0,pf=0,gf=0,bf=0,mf=0,Mf=0,kf=0,Uf=0,Lf=0,If=0,xf=0,Ef=0,Df=0,Kf=0,Rf=0,Bf=0,Ff=0,Of=0,_f=0,Cf=0,Hf=0,jf=0,qf=0,Gf=0,Nf=0,Pf=0,Sf=0,Vf=0,Zf=0,Qf=0,Tf=0,Jf=0,Yf=0,Wf=0,zf=0,Xf=0,$f=0,Au=0,eu=0,ru=0,nu=0,tu=0,iu=0,au=0,ou=0,fu=0,uu=0,cu=0,su=0,lu=0,wu=0,hu=0,vu=0,du=0,yu=0,pu=0,gu=0,bu=0,mu=0,Mu=0,ku=0,Uu=0,Lu=0,Iu=0,xu=0,Eu=0,Du=0,Ku=0,Ru=0,Bu=0,Fu=0,Ou=0,_u=0,Cu=0,Hu=0,ju=0,qu=0,Gu=0,Nu=0,Pu=0,Su=0,Vu=0;ct=r<<1;Ba=A+((r<<5)+-16<<2)|0;if(!ct)return;Tt=r<<4;t=n[Ba>>2]|0;i=n[Ba+4>>2]|0;a=n[Ba+8>>2]|0;o=n[Ba+12>>2]|0;f=n[Ba+16>>2]|0;u=n[Ba+20>>2]|0;c=n[Ba+24>>2]|0;s=n[Ba+28>>2]|0;l=n[Ba+32>>2]|0;w=n[Ba+36>>2]|0;h=n[Ba+40>>2]|0;v=n[Ba+44>>2]|0;d=n[Ba+48>>2]|0;y=n[Ba+52>>2]|0;p=n[Ba+56>>2]|0;g=n[Ba+60>>2]|0;b=0;do{Xt=b<<4;ni=A+(Xt<<2)|0;li=n[ni>>2]^t;Li=n[ni+4>>2]^i;ji=n[ni+8>>2]^a;zi=n[ni+12>>2]^o;ca=n[ni+16>>2]^f;ka=n[ni+20>>2]^u;Ha=n[ni+24>>2]^c;Wa=n[ni+28>>2]^s;fo=n[ni+32>>2]^l;mo=n[ni+36>>2]^w;Bo=n[ni+40>>2]^h;Wo=n[ni+44>>2]^v;ff=n[ni+48>>2]^d;gf=n[ni+52>>2]^y;Bf=n[ni+56>>2]^p;Zf=n[ni+60>>2]^g;Wf=ff+li|0;wu=(Wf<<7|Wf>>>25)^ca;pu=wu+li|0;_u=(pu<<9|pu>>>23)^fo;Gu=_u+wu|0;F=(Gu<<13|Gu>>>19)^ff;j=F+_u|0;eA=(j<<18|j>>>14)^li;aA=ka+Li|0;kA=mo^(aA<<7|aA>>>25);EA=kA+ka|0;ZA=gf^(EA<<9|EA>>>23);WA=ZA+kA|0;we=(WA<<13|WA>>>19)^Li;pe=we+ZA|0;_e=(pe<<18|pe>>>14)^ka;Ge=Bo+Ha|0;nr=Bf^(Ge<<7|Ge>>>25);fr=nr+Bo|0;Lr=(fr<<9|fr>>>23)^ji;Kr=Lr+nr|0;Zr=(Kr<<13|Kr>>>19)^Ha;Yr=Zr+Lr|0;en=(Yr<<18|Yr>>>14)^Bo;rn=Zf+Wo|0;nn=(rn<<7|rn>>>25)^zi;tn=nn+Zf|0;an=(tn<<9|tn>>>23)^Wa;on=an+nn|0;fn=(on<<13|on>>>19)^Wo;un=fn+an|0;cn=(un<<18|un>>>14)^Zf;sn=eA+nn|0;ln=(sn<<7|sn>>>25)^we;wn=ln+eA|0;hn=(wn<<9|wn>>>23)^Lr;vn=hn+ln|0;dn=(vn<<13|vn>>>19)^nn;yn=dn+hn|0;pn=(yn<<18|yn>>>14)^eA;gn=_e+wu|0;bn=(gn<<7|gn>>>25)^Zr;mn=bn+_e|0;Mn=(mn<<9|mn>>>23)^an;kn=Mn+bn|0;Un=(kn<<13|kn>>>19)^wu;Ln=Un+Mn|0;In=(Ln<<18|Ln>>>14)^_e;xn=en+kA|0;En=(xn<<7|xn>>>25)^fn;Dn=En+en|0;Kn=(Dn<<9|Dn>>>23)^_u;Rn=Kn+En|0;Bn=(Rn<<13|Rn>>>19)^kA;Fn=Bn+Kn|0;On=(Fn<<18|Fn>>>14)^en;_n=cn+nr|0;Cn=(_n<<7|_n>>>25)^F;Hn=Cn+cn|0;jn=(Hn<<9|Hn>>>23)^ZA;qn=jn+Cn|0;Gn=(qn<<13|qn>>>19)^nr;Nn=Gn+jn|0;Pn=(Nn<<18|Nn>>>14)^cn;Sn=pn+Cn|0;Vn=(Sn<<7|Sn>>>25)^Un;Zn=Vn+pn|0;Qn=(Zn<<9|Zn>>>23)^Kn;Tn=Qn+Vn|0;Jn=(Tn<<13|Tn>>>19)^Cn;Yn=Jn+Qn|0;Wn=(Yn<<18|Yn>>>14)^pn;zn=In+ln|0;Xn=(zn<<7|zn>>>25)^Bn;$n=Xn+In|0;At=($n<<9|$n>>>23)^jn;et=At+Xn|0;rt=(et<<13|et>>>19)^ln;nt=rt+At|0;tt=(nt<<18|nt>>>14)^In;it=On+bn|0;at=(it<<7|it>>>25)^Gn;ot=at+On|0;ft=(ot<<9|ot>>>23)^hn;ut=ft+at|0;st=(ut<<13|ut>>>19)^bn;lt=st+ft|0;wt=(lt<<18|lt>>>14)^On;ht=Pn+En|0;vt=(ht<<7|ht>>>25)^dn;dt=vt+Pn|0;yt=(dt<<9|dt>>>23)^Mn;pt=yt+vt|0;gt=(pt<<13|pt>>>19)^En;bt=gt+yt|0;mt=(bt<<18|bt>>>14)^Pn;Mt=Wn+vt|0;kt=(Mt<<7|Mt>>>25)^rt;Ut=kt+Wn|0;Lt=(Ut<<9|Ut>>>23)^ft;It=Lt+kt|0;xt=(It<<13|It>>>19)^vt;Et=xt+Lt|0;Dt=(Et<<18|Et>>>14)^Wn;Kt=tt+Vn|0;Rt=(Kt<<7|Kt>>>25)^st;Bt=Rt+tt|0;Ft=(Bt<<9|Bt>>>23)^yt;Ot=Ft+Rt|0;_t=(Ot<<13|Ot>>>19)^Vn;Ct=_t+Ft|0;Ht=(Ct<<18|Ct>>>14)^tt;jt=wt+Xn|0;qt=(jt<<7|jt>>>25)^gt;Gt=qt+wt|0;Nt=(Gt<<9|Gt>>>23)^Qn;Pt=Nt+qt|0;St=(Pt<<13|Pt>>>19)^Xn;Vt=St+Nt|0;Zt=(Vt<<18|Vt>>>14)^wt;Qt=mt+at|0;Jt=(Qt<<7|Qt>>>25)^Jn;Yt=Jt+mt|0;Wt=(Yt<<9|Yt>>>23)^At;zt=Wt+Jt|0;$t=(zt<<13|zt>>>19)^at;Ai=$t+Wt|0;ei=(Ai<<18|Ai>>>14)^mt;ri=Dt+Jt|0;ti=(ri<<7|ri>>>25)^_t;ii=ti+Dt|0;ai=(ii<<9|ii>>>23)^Nt;oi=ai+ti|0;fi=(oi<<13|oi>>>19)^Jt;ui=fi+ai|0;ci=(ui<<18|ui>>>14)^Dt;si=Ht+kt|0;wi=(si<<7|si>>>25)^St;hi=wi+Ht|0;vi=(hi<<9|hi>>>23)^Wt;di=vi+wi|0;yi=(di<<13|di>>>19)^kt;pi=yi+vi|0;gi=(pi<<18|pi>>>14)^Ht;bi=Zt+Rt|0;mi=(bi<<7|bi>>>25)^$t;Mi=mi+Zt|0;ki=(Mi<<9|Mi>>>23)^Lt;Ui=ki+mi|0;Ii=(Ui<<13|Ui>>>19)^Rt;xi=Ii+ki|0;Ei=(xi<<18|xi>>>14)^Zt;Di=ei+qt|0;Ki=(Di<<7|Di>>>25)^xt;Ri=Ki+ei|0;Bi=(Ri<<9|Ri>>>23)^Ft;Fi=Bi+Ki|0;Oi=(Fi<<13|Fi>>>19)^qt;_i=Oi+Bi|0;Ci=(_i<<18|_i>>>14)^ei;Hi=ci+Ki|0;qi=(Hi<<7|Hi>>>25)^yi;Gi=qi+ci|0;Ni=(Gi<<9|Gi>>>23)^ki;Pi=Ni+qi|0;Si=(Pi<<13|Pi>>>19)^Ki;Vi=Si+Ni|0;Zi=(Vi<<18|Vi>>>14)^ci;Qi=gi+ti|0;Ti=(Qi<<7|Qi>>>25)^Ii;Ji=Ti+gi|0;Yi=(Ji<<9|Ji>>>23)^Bi;Wi=Yi+Ti|0;Xi=(Wi<<13|Wi>>>19)^ti;$i=Xi+Yi|0;Aa=($i<<18|$i>>>14)^gi;ea=Ei+wi|0;ra=(ea<<7|ea>>>25)^Oi;na=ra+Ei|0;ta=(na<<9|na>>>23)^ai;ia=ta+ra|0;aa=(ia<<13|ia>>>19)^wi;oa=aa+ta|0;fa=(oa<<18|oa>>>14)^Ei;ua=Ci+mi|0;sa=(ua<<7|ua>>>25)^fi;la=sa+Ci|0;wa=(la<<9|la>>>23)^vi;ha=wa+sa|0;va=(ha<<13|ha>>>19)^mi;da=va+wa|0;ya=(da<<18|da>>>14)^Ci;pa=Zi+sa|0;ga=(pa<<7|pa>>>25)^Xi;ba=ga+Zi|0;ma=(ba<<9|ba>>>23)^ta;Ma=ma+ga|0;Ua=(Ma<<13|Ma>>>19)^sa;La=Ua+ma|0;Ia=(La<<18|La>>>14)^Zi;xa=Aa+qi|0;Ea=(xa<<7|xa>>>25)^aa;Da=Ea+Aa|0;Ka=(Da<<9|Da>>>23)^wa;Ra=Ka+Ea|0;Fa=(Ra<<13|Ra>>>19)^qi;Oa=Fa+Ka|0;_a=(Oa<<18|Oa>>>14)^Aa;Ca=fa+Ti|0;ja=(Ca<<7|Ca>>>25)^va;qa=ja+fa|0;Ga=(qa<<9|qa>>>23)^Ni;Na=Ga+ja|0;Pa=(Na<<13|Na>>>19)^Ti;Sa=Pa+Ga|0;Va=(Sa<<18|Sa>>>14)^fa;Za=ya+ra|0;Qa=(Za<<7|Za>>>25)^Si;Ta=Qa+ya|0;Ja=(Ta<<9|Ta>>>23)^Yi;Ya=Ja+Qa|0;za=(Ya<<13|Ya>>>19)^ra;Xa=za+Ja|0;$a=(Xa<<18|Xa>>>14)^ya;Ao=Ia+Qa|0;eo=(Ao<<7|Ao>>>25)^Fa;ro=eo+Ia|0;no=(ro<<9|ro>>>23)^Ga;to=no+eo|0;io=(to<<13|to>>>19)^Qa;ao=io+no|0;oo=_a+ga|0;uo=(oo<<7|oo>>>25)^Pa;co=uo+_a|0;so=(co<<9|co>>>23)^Ja;lo=so+uo|0;wo=(lo<<13|lo>>>19)^ga;ho=wo+so|0;vo=Va+Ea|0;yo=(vo<<7|vo>>>25)^za;po=yo+Va|0;go=(po<<9|po>>>23)^ma;bo=go+yo|0;Mo=(bo<<13|bo>>>19)^Ea;ko=Mo+go|0;Uo=$a+ja|0;Lo=(Uo<<7|Uo>>>25)^Ua;Io=Lo+$a|0;xo=(Io<<9|Io>>>23)^Ka;Eo=xo+Lo|0;Do=(Eo<<13|Eo>>>19)^ja;Ko=Do+xo|0;Ro=((ao<<18|ao>>>14)^Ia)+li|0;Fo=eo+Li|0;Oo=no+ji|0;_o=io+zi|0;Co=wo+ca|0;Ho=((ho<<18|ho>>>14)^_a)+ka|0;jo=uo+Ha|0;qo=so+Wa|0;Go=go+fo|0;No=Mo+mo|0;Po=((ko<<18|ko>>>14)^Va)+Bo|0;So=yo+Wo|0;Vo=Lo+ff|0;Zo=xo+gf|0;Qo=Do+Bf|0;To=((Ko<<18|Ko>>>14)^$a)+Zf|0;Jo=b<<3;Yo=e+(Jo<<2)|0;n[Yo>>2]=Ro;n[Yo+4>>2]=Fo;n[Yo+8>>2]=Oo;n[Yo+12>>2]=_o;n[Yo+16>>2]=Co;n[Yo+20>>2]=Ho;n[Yo+24>>2]=jo;n[Yo+28>>2]=qo;n[Yo+32>>2]=Go;n[Yo+36>>2]=No;n[Yo+40>>2]=Po;n[Yo+44>>2]=So;n[Yo+48>>2]=Vo;n[Yo+52>>2]=Zo;n[Yo+56>>2]=Qo;n[Yo+60>>2]=To;zo=A+((Xt|16)<<2)|0;Xo=Ro^n[zo>>2];$o=Fo^n[zo+4>>2];Af=Oo^n[zo+8>>2];ef=_o^n[zo+12>>2];rf=Co^n[zo+16>>2];nf=Ho^n[zo+20>>2];tf=jo^n[zo+24>>2];af=qo^n[zo+28>>2];of=Go^n[zo+32>>2];uf=No^n[zo+36>>2];cf=Po^n[zo+40>>2];sf=So^n[zo+44>>2];lf=Vo^n[zo+48>>2];wf=Zo^n[zo+52>>2];hf=Qo^n[zo+56>>2];vf=To^n[zo+60>>2];df=Xo+lf|0;yf=(df<<7|df>>>25)^rf;pf=yf+Xo|0;bf=(pf<<9|pf>>>23)^of;mf=bf+yf|0;Mf=(mf<<13|mf>>>19)^lf;kf=Mf+bf|0;Uf=(kf<<18|kf>>>14)^Xo;Lf=nf+$o|0;If=(Lf<<7|Lf>>>25)^uf;xf=If+nf|0;Ef=(xf<<9|xf>>>23)^wf;Df=Ef+If|0;Kf=(Df<<13|Df>>>19)^$o;Rf=Kf+Ef|0;Ff=(Rf<<18|Rf>>>14)^nf;Of=cf+tf|0;_f=(Of<<7|Of>>>25)^hf;Cf=_f+cf|0;Hf=(Cf<<9|Cf>>>23)^Af;jf=Hf+_f|0;qf=(jf<<13|jf>>>19)^tf;Gf=qf+Hf|0;Nf=(Gf<<18|Gf>>>14)^cf;Pf=vf+sf|0;Sf=(Pf<<7|Pf>>>25)^ef;Vf=Sf+vf|0;Qf=(Vf<<9|Vf>>>23)^af;Tf=Qf+Sf|0;Jf=(Tf<<13|Tf>>>19)^sf;Yf=Jf+Qf|0;zf=(Yf<<18|Yf>>>14)^vf;Xf=Uf+Sf|0;$f=(Xf<<7|Xf>>>25)^Kf;Au=$f+Uf|0;eu=(Au<<9|Au>>>23)^Hf;ru=eu+$f|0;nu=(ru<<13|ru>>>19)^Sf;tu=nu+eu|0;iu=(tu<<18|tu>>>14)^Uf;au=Ff+yf|0;ou=(au<<7|au>>>25)^qf;fu=ou+Ff|0;uu=(fu<<9|fu>>>23)^Qf;cu=uu+ou|0;su=(cu<<13|cu>>>19)^yf;lu=su+uu|0;hu=(lu<<18|lu>>>14)^Ff;vu=Nf+If|0;du=(vu<<7|vu>>>25)^Jf;yu=du+Nf|0;gu=(yu<<9|yu>>>23)^bf;bu=gu+du|0;mu=(bu<<13|bu>>>19)^If;Mu=mu+gu|0;ku=(Mu<<18|Mu>>>14)^Nf;Uu=zf+_f|0;Lu=(Uu<<7|Uu>>>25)^Mf;Iu=Lu+zf|0;xu=(Iu<<9|Iu>>>23)^Ef;Eu=xu+Lu|0;Du=(Eu<<13|Eu>>>19)^_f;Ku=Du+xu|0;Ru=(Ku<<18|Ku>>>14)^zf;Bu=iu+Lu|0;Fu=(Bu<<7|Bu>>>25)^su;Ou=Fu+iu|0;Cu=(Ou<<9|Ou>>>23)^gu;Hu=Cu+Fu|0;ju=(Hu<<13|Hu>>>19)^Lu;qu=ju+Cu|0;Nu=(qu<<18|qu>>>14)^iu;Pu=hu+$f|0;Su=(Pu<<7|Pu>>>25)^mu;Vu=Su+hu|0;m=(Vu<<9|Vu>>>23)^xu;M=m+Su|0;k=(M<<13|M>>>19)^$f;U=k+m|0;L=(U<<18|U>>>14)^hu;I=ku+ou|0;x=(I<<7|I>>>25)^Du;E=x+ku|0;D=(E<<9|E>>>23)^eu;K=D+x|0;R=(K<<13|K>>>19)^ou;B=R+D|0;O=(B<<18|B>>>14)^ku;_=Ru+du|0;C=(_<<7|_>>>25)^nu;H=C+Ru|0;q=(H<<9|H>>>23)^uu;G=q+C|0;N=(G<<13|G>>>19)^du;P=N+q|0;S=(P<<18|P>>>14)^Ru;V=Nu+C|0;Z=(V<<7|V>>>25)^k;Q=Z+Nu|0;T=(Q<<9|Q>>>23)^D;J=T+Z|0;Y=(J<<13|J>>>19)^C;W=Y+T|0;z=(W<<18|W>>>14)^Nu;X=L+Fu|0;$=(X<<7|X>>>25)^R;AA=$+L|0;rA=(AA<<9|AA>>>23)^q;nA=rA+$|0;tA=(nA<<13|nA>>>19)^Fu;iA=tA+rA|0;oA=(iA<<18|iA>>>14)^L;fA=O+Su|0;uA=(fA<<7|fA>>>25)^N;cA=uA+O|0;sA=(cA<<9|cA>>>23)^Cu;lA=sA+uA|0;wA=(lA<<13|lA>>>19)^Su;hA=wA+sA|0;vA=(hA<<18|hA>>>14)^O;dA=S+x|0;yA=(dA<<7|dA>>>25)^ju;pA=yA+S|0;gA=(pA<<9|pA>>>23)^m;bA=gA+yA|0;mA=(bA<<13|bA>>>19)^x;MA=mA+gA|0;UA=(MA<<18|MA>>>14)^S;LA=z+yA|0;IA=(LA<<7|LA>>>25)^tA;xA=IA+z|0;DA=(xA<<9|xA>>>23)^sA;KA=DA+IA|0;RA=(KA<<13|KA>>>19)^yA;BA=RA+DA|0;FA=(BA<<18|BA>>>14)^z;OA=oA+Z|0;_A=(OA<<7|OA>>>25)^wA;CA=_A+oA|0;HA=(CA<<9|CA>>>23)^gA;jA=HA+_A|0;qA=(jA<<13|jA>>>19)^Z;GA=qA+HA|0;NA=(GA<<18|GA>>>14)^oA;PA=vA+$|0;SA=(PA<<7|PA>>>25)^mA;VA=SA+vA|0;QA=(VA<<9|VA>>>23)^T;TA=QA+SA|0;JA=(TA<<13|TA>>>19)^$;YA=JA+QA|0;zA=(YA<<18|YA>>>14)^vA;XA=UA+uA|0;$A=(XA<<7|XA>>>25)^Y;Ae=$A+UA|0;ee=(Ae<<9|Ae>>>23)^rA;re=ee+$A|0;ne=(re<<13|re>>>19)^uA;te=ne+ee|0;ie=(te<<18|te>>>14)^UA;ae=FA+$A|0;oe=(ae<<7|ae>>>25)^qA;fe=oe+FA|0;ue=(fe<<9|fe>>>23)^QA;ce=ue+oe|0;se=(ce<<13|ce>>>19)^$A;le=se+ue|0;he=(le<<18|le>>>14)^FA;ve=NA+IA|0;de=(ve<<7|ve>>>25)^JA;ye=de+NA|0;ge=(ye<<9|ye>>>23)^ee;be=ge+de|0;me=(be<<13|be>>>19)^IA;Me=me+ge|0;ke=(Me<<18|Me>>>14)^NA;Ue=zA+_A|0;Le=(Ue<<7|Ue>>>25)^ne;Ie=Le+zA|0;xe=(Ie<<9|Ie>>>23)^DA;Ee=xe+Le|0;De=(Ee<<13|Ee>>>19)^_A;Ke=De+xe|0;Re=(Ke<<18|Ke>>>14)^zA;Be=ie+SA|0;Fe=(Be<<7|Be>>>25)^RA;Oe=Fe+ie|0;Ce=(Oe<<9|Oe>>>23)^HA;He=Ce+Fe|0;je=(He<<13|He>>>19)^SA;qe=je+Ce|0;Ne=(qe<<18|qe>>>14)^ie;Pe=he+Fe|0;Se=(Pe<<7|Pe>>>25)^me;Ve=Se+he|0;Ze=(Ve<<9|Ve>>>23)^xe;Qe=Ze+Se|0;Te=(Qe<<13|Qe>>>19)^Fe;Je=Te+Ze|0;Ye=(Je<<18|Je>>>14)^he;We=ke+oe|0;ze=(We<<7|We>>>25)^De;Xe=ze+ke|0;$e=(Xe<<9|Xe>>>23)^Ce;Ar=$e+ze|0;er=(Ar<<13|Ar>>>19)^oe;rr=er+$e|0;tr=(rr<<18|rr>>>14)^ke;ir=Re+de|0;ar=(ir<<7|ir>>>25)^je;or=ar+Re|0;ur=(or<<9|or>>>23)^ue;cr=ur+ar|0;sr=(cr<<13|cr>>>19)^de;lr=sr+ur|0;wr=(lr<<18|lr>>>14)^Re;hr=Ne+Le|0;vr=(hr<<7|hr>>>25)^se;dr=vr+Ne|0;yr=(dr<<9|dr>>>23)^ge;pr=yr+vr|0;gr=(pr<<13|pr>>>19)^Le;br=gr+yr|0;mr=(br<<18|br>>>14)^Ne;Mr=Ye+vr|0;kr=(Mr<<7|Mr>>>25)^er;Ur=kr+Ye|0;Ir=(Ur<<9|Ur>>>23)^ur;xr=Ir+kr|0;Er=(xr<<13|xr>>>19)^vr;Dr=Er+Ir|0;Rr=tr+Se|0;Br=(Rr<<7|Rr>>>25)^sr;Fr=Br+tr|0;Or=(Fr<<9|Fr>>>23)^yr;_r=Or+Br|0;Cr=(_r<<13|_r>>>19)^Se;Hr=Cr+Or|0;jr=wr+ze|0;qr=(jr<<7|jr>>>25)^gr;Gr=qr+wr|0;Nr=(Gr<<9|Gr>>>23)^Ze;Pr=Nr+qr|0;Sr=(Pr<<13|Pr>>>19)^ze;Vr=Sr+Nr|0;Qr=mr+ar|0;Tr=(Qr<<7|Qr>>>25)^Te;Jr=Tr+mr|0;Wr=(Jr<<9|Jr>>>23)^$e;zr=Wr+Tr|0;Xr=(zr<<13|zr>>>19)^ar;$r=Xr+Wr|0;t=((Dr<<18|Dr>>>14)^Ye)+Xo|0;i=kr+$o|0;a=Ir+Af|0;o=Er+ef|0;f=Cr+rf|0;u=((Hr<<18|Hr>>>14)^tr)+nf|0;c=Br+tf|0;s=Or+af|0;l=Nr+of|0;w=Sr+uf|0;h=((Vr<<18|Vr>>>14)^wr)+cf|0;v=qr+sf|0;d=Tr+lf|0;y=Wr+wf|0;p=Xr+hf|0;g=(($r<<18|$r>>>14)^mr)+vf|0;An=e+(Jo+Tt<<2)|0;n[An>>2]=t;n[An+4>>2]=i;n[An+8>>2]=a;n[An+12>>2]=o;n[An+16>>2]=f;n[An+20>>2]=u;n[An+24>>2]=c;n[An+28>>2]=s;n[An+32>>2]=l;n[An+36>>2]=w;n[An+40>>2]=h;n[An+44>>2]=v;n[An+48>>2]=d;n[An+52>>2]=y;n[An+56>>2]=p;n[An+60>>2]=g;b=b+2|0}while(b>>>0<ct>>>0);return}return{_SMix:o}};return{create:A,getHeap:e}}function e(){"use strict";function A(A){for(var e=new Uint8Array(A),n=atob("mC+KQpFEN3HP+8C1pdu16VvCVjnxEfFZpII/ktVeHKuYqgfYAVuDEr6FMSTDfQxVdF2+cv6x3oCnBtybdPGbwcFpm+SGR77vxp3BD8yhDCRvLOktqoR0StypsFzaiPl2UlE+mG3GMajIJwOwx39Zv/ML4MZHkafVUWPKBmcpKRSFCrcnOCEbLvxtLE0TDThTVHMKZbsKanYuycKBhSxykqHov6JLZhqocItLwqNRbMcZ6JLRJAaZ1oU1DvRwoGoQFsGkGQhsNx5Md0gntbywNLMMHDlKqthOT8qcW/NvLmjugo90b2OleBR4yIQIAseM+v++kOtsUKT3o/m+8nhxxgUAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAACAAAAYAcAAAAEAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAr/////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAQAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=="),t=8,i=0;i<n.length;i++)e[t+i]=n.charCodeAt(i);return r(self,{},A)}function e(){return 8636}var r=function(A,e,r){"use asm";var n=new A.Int32Array(r),t=new A.Int8Array(r),i=new A.Uint8Array(r);function a(A,e,r,i,a,u){A=A|0;e=e|0;r=r|0;i=i|0;a=a|0;u=u|0;var s=0,l=0,w=0,h=0,v=0,d=0,y=0,p=0,g=0,b=0,m=0;if(e>>>0>64){n[191]=0;n[183]=1779033703;n[184]=-1150833019;n[185]=1013904242;n[186]=-1521486534;n[187]=1359893119;n[188]=-1694144372;n[189]=528734635;n[190]=1541459225;o(732,A,e);c(1816,732);l=1816;w=32}else{l=A;w=e}n[191]=0;n[183]=1779033703;n[184]=-1150833019;n[185]=1013904242;n[186]=-1521486534;n[187]=1359893119;n[188]=-1694144372;n[189]=528734635;n[190]=1541459225;g=1752;m=g+64|0;do{t[g>>0]=54;g=g+1|0}while((g|0)<(m|0));if(!w)h=1;else{t[1752]=t[l>>0]^54;if((w|0)==1)h=0;else{t[1753]=t[l+1>>0]^54;if((w|0)==2)h=0;else{t[1754]=t[l+2>>0]^54;if((w|0)==3)h=0;else{v=3;do{t[1752+v>>0]=t[l+v>>0]^t[1752+v>>0];v=v+1|0}while((v|0)!=(w|0));h=0}}}}o(732,1752,64);n[216]=0;n[208]=1779033703;n[209]=-1150833019;n[210]=1013904242;n[211]=-1521486534;n[212]=1359893119;n[213]=-1694144372;n[214]=528734635;n[215]=1541459225;g=1752;m=g+64|0;do{t[g>>0]=92;g=g+1|0}while((g|0)<(m|0));if(!h){t[1752]=t[l>>0]^92;if((w|0)!=1){t[1753]=t[l+1>>0]^92;if((w|0)!=2){t[1754]=t[l+2>>0]^92;if((w|0)!=3){d=3;do{t[1752+d>>0]=t[l+d>>0]^t[1752+d>>0];d=d+1|0}while((d|0)!=(w|0))}}}}o(832,1752,64);o(732,r,i);if(u|0){s=0;p=0;do{s=s+1|0;t[1687]=s;t[1686]=s>>>8;t[1685]=s>>>16;t[1684]=s>>>24;f(932,732,200)|0;o(932,1684,4);c(1848,932);o(1032,1848,32);c(1688,1032);g=1720;b=1688;m=g+32|0;do{t[g>>0]=t[b>>0]|0;g=g+1|0;b=b+1|0}while((g|0)<(m|0));y=u-p|0;f(a+p|0,1720,(y>>>0>32?32:y)|0)|0;p=s<<5}while(p>>>0<u>>>0)}return}function o(A,e,r){A=A|0;e=e|0;r=r|0;var t=0,i=0,a=0,o=0,c=0,s=0,l=0,w=0,h=0,v=0,d=0,y=0,p=0,g=0,b=0;do if(r|0){p=A+32|0;g=n[p>>2]|0;b=g>>>3&63;n[p>>2]=g+(r<<3);c=64-b|0;s=A+36+b|0;if(c>>>0>r>>>0){f(s|0,e|0,r|0)|0;break}f(s|0,e|0,c|0)|0;l=A+36|0;u(A,l);w=e+c|0;h=r-c|0;if(h>>>0>63){v=b+r+-128|0;d=v&-64;y=d+128-b|0;a=h;o=w;while(1){u(A,o);a=a+-64|0;if(a>>>0<=63)break;else o=o+64|0}t=e+y|0;i=v-d|0}else{t=w;i=h}f(l|0,t|0,i|0)|0}while(0);return}function f(A,e,r){A=A|0;e=e|0;r=r|0;var i=0;i=A|0;if((A&3)==(e&3)){while(A&3){if(!r)return i|0;t[A>>0]=t[e>>0]|0;A=A+1|0;e=e+1|0;r=r-1|0}while((r|0)>=4){n[A>>2]=n[e>>2];A=A+4|0;e=e+4|0;r=r-4|0}}while((r|0)>0){t[A>>0]=t[e>>0]|0;A=A+1|0;e=e+1|0;r=r-1|0}return i|0}function u(A,e){A=A|0;e=e|0;var r=0,t=0,a=0,o=0,f=0,u=0,c=0,s=0,l=0,w=0,h=0,v=0,d=0,y=0,p=0,g=0,b=0;r=0;do{w=e+(r<<2)|0;n[444+(r<<2)>>2]=(i[w+2>>0]|0)<<8|(i[w+3>>0]|0)|(i[w+1>>0]|0)<<16|(i[w>>0]|0)<<24;r=r+1|0}while((r|0)!=16);t=16;h=n[111]|0;do{l=n[444+(t+-2<<2)>>2]|0;b=h;h=n[444+(t+-15<<2)>>2]|0;n[444+(t<<2)>>2]=b+(n[444+(t+-7<<2)>>2]|0)+((l>>>19|l<<13)^l>>>10^(l>>>17|l<<15))+((h>>>18|h<<14)^h>>>3^(h>>>7|h<<25));t=t+1|0}while((t|0)!=64);n[175]=n[A>>2];n[176]=n[A+4>>2];n[177]=n[A+8>>2];n[178]=n[A+12>>2];n[179]=n[A+16>>2];n[180]=n[A+20>>2];n[181]=n[A+24>>2];n[182]=n[A+28>>2];a=0;do{v=700+(((71-a|0)%8|0)<<2)|0;d=n[700+(((68-a|0)%8|0)<<2)>>2]|0;y=n[700+(((70-a|0)%8|0)<<2)>>2]|0;p=(n[444+(a<<2)>>2]|0)+(n[v>>2]|0)+((d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7))+(n[8+(a<<2)>>2]|0)+((y^n[700+(((69-a|0)%8|0)<<2)>>2])&d^y)|0;g=n[700+(((64-a|0)%8|0)<<2)>>2]|0;f=n[700+(((65-a|0)%8|0)<<2)>>2]|0;u=n[700+(((66-a|0)%8|0)<<2)>>2]|0;c=700+(((67-a|0)%8|0)<<2)|0;n[c>>2]=(n[c>>2]|0)+p;n[v>>2]=((g>>>2|g<<30)^(g>>>13|g<<19)^(g>>>22|g<<10))+p+((u|f)&g|u&f);a=a+1|0}while((a|0)!=64);o=0;do{s=A+(o<<2)|0;n[s>>2]=(n[s>>2]|0)+(n[700+(o<<2)>>2]|0);o=o+1|0}while((o|0)!=8);return}function c(A,e){A=A|0;e=e|0;var r=0,i=0,a=0,f=0,u=0;u=n[e+32>>2]|0;t[1139]=u;t[1138]=u>>>8;t[1137]=u>>>16;t[1136]=u>>>24;i=u>>>3&63;n[283]=0;o(e,380,(i>>>0<56?56:120)-i|0);o(e,1132,8);r=0;do{a=A+(r<<2)|0;f=n[e+(r<<2)>>2]|0;t[a+3>>0]=f;t[a+2>>0]=f>>>8;t[a+1>>0]=f>>>16;t[a>>0]=f>>>24;r=r+1|0}while((r|0)!=8);return}return{_PBKDF2_OneIter:a}};return{create:A,getHeap:e}}var r,n=function(){"use strict";function e(){}function r(A,r){u=A,c=r,f=128*r,o=d+f;var n=d+f*(3+A),t=16777216*Math.ceil(n/16777216);if(!s||s.byteLength<t){try{s=new ArrayBuffer(t)}catch(A){return!1}l=new Uint8Array(s),p=y.create(s),e()}return!0}function n(A){var e=new Uint8Array(A);l.set(e,d),h=262144/c,w=0,v=!0}function t(A){h=h*A>>1<<1}function i(){var A,e=h,r=w,n=r+e,i=0;switch(n>=u&&(n=u,e=n-r,i=v?1:2),2!=i&&g(e),0==i&&(A=b()),p._SMix(u,c,d,o,v?0:1,r,n),i){case 0:A=b()-A,w=n,t(100/A);break;case 1:w=0,v=!1,t(.7);break;case 2:var a=s.slice(d,d+f);g({state:"done",step:e,output:a},[a])}}function a(A){var e=A.data;if(e===!0)return void i();switch(e.cmd){case"task":n(e.input),i();break;case"config":var t=r(e.N,e.r);g({state:t?"ready":"fail"});break;case"free":p=l=s=null}}var o,f,u,c,s,l,w,h,v,d=64,y=A(),p=null,g=self.postMessage,b=Date.now;addEventListener("message",a)};!function(r){function t(A,e,r,n,t,i,a){L=128*e,h=r,E=r*A*2,I=n,K=0;var o=O.getHeap();p=o,o+=t,g=o,o+=i,b=o,o+=a,m=o,o+=L*r,o=65536*Math.ceil(o/65536),(!d||d.byteLength<o)&&(d=new ArrayBuffer(o),y=new Uint8Array(d),_=O.create(d)),v||(v=u());for(var f=0;f<I;f++){var c=C[f];c||(c=new Worker(v),c.onmessage=s,c.tag=0,C[f]=c),c.postMessage({cmd:"config",N:A,r:e})}}function i(A,e,r){y.set(A,p),y.set(e,g),M=A.length,k=e.length,U=r,x=!0,D=0,R=0,B=0,_._PBKDF2_OneIter(p,M,g,k,m,L*h);for(var n=0;n<I;n++)l(C[n])}function a(){x=!1}function o(){C.forEach(function(A){A.postMessage({cmd:"free"})})}function f(){C.forEach(function(A){A.terminate()}),C=[],d=y=O=null,URL.revokeObjectURL(v)}function u(){var e="("+n+")();"+A,r=new Blob([e],{type:"text/javascript"});return URL.createObjectURL(r)}function c(){_._PBKDF2_OneIter(p,M,m,L*h,b,U>32?U:32);var A=new Uint8Array(d,b,U);x=!1,w("oncomplete",A)}function s(A){var e=this,r=A.data;if("number"==typeof r){if(!x)return;e.postMessage(!0),D+=r;var n=Date.now();return n-F>50&&w("onprogress",D/E),void(F=n)}switch(r.state){case"done":if(!x)return;var t=new Uint8Array(r.output),i=e.tag;y.set(t,m+L*i),D+=r.step,++B==h?c():R<h&&l(e);break;case"ready":++K==I&&w("onready");break;case"fail":w("onerror","memory alloc fail")}}function l(A){var e=m+R*L,r=d.slice(e,e+L);A.tag=R++,A.postMessage({cmd:"task",input:r},[r])}function w(A,e){var r=window.scrypt;r&&r.__asmjs_cb(A,e)}var h,v,d,y,p,g,b,m,M,k,U,L,I,x,E,D,K,R,B,F,O=e(),_=null,C=[];r.config=t,r.hash=i,r.stop=a,r.free=o,r.unload=f,w("onload",r)}(r||(r={}))}();
//# sourceMappingURL=../sourcemap/asmjs.js.map
///END ASM.JS
`,d=new Blob([v],{type:"text/javascript"});await import(URL.createObjectURL(d))}catch{n.onerror("script load fail")}}()}function h(w,v,d){s.hash(w,v,d)}function c(w,v,d,g,p,T,k){s.config.apply(this,arguments)}function l(){s.stop()}function f(){s.free()}function m(){s&&(s.unload(),s=null)}function x(w,v){w=="onload"&&(s=v),n[w](v),w==="onload"&&delete globalThis.scrypt_loader_9470f487e3aa154f278269e99e6a42502ca77b8da3867a46a548909659a3db4a}var s;n.check=u,n.load=i,n.hash=h,n.config=c,n.stop=l,n.free=f,n.unload=m})(o||(o={}));var a,r;(function(n){function u(){return"asmjs"}function i(A,y){if(A)switch(arguments.length){case 1:return A();case 2:return A(y)}}function h(){I&&(clearTimeout(I),I=0)}function c(A,y,D){if(b<2)throw Error("scrypt not loaded");if(b<4)throw Error("scrypt not configed");if(b==5)throw Error("scrypt is running");if(b=5,D=D||L,A=A||[],y=y||[],A.length>N)throw Error("pass.length > maxPassLen");if(y.length>R)throw Error("salt.length > maxSaltLen");if(D>L)throw Error("dkLen > maxDkLen");E.hash(A,y,D)}function l(){if(!B){B=[];for(var A in S)S[A].check()&&B.push(A)}return B}function f(A){if(!(b>=1)){if(!A&&(A=u(),!A))throw Error("no available mod");if(E=S[A],!E)throw Error("unsupported mod: "+A);E.onload=function(){h(),i(n.onload)},E.onerror=function(y){s(),i(n.onerror,y)},E.onready=function(){b=4,i(n.onready)},E.onprogress=function(y){i(n.onprogress,y)},E.oncomplete=function(y){b=4,i(n.onprogress,1),i(n.oncomplete,y)},h(),I=setTimeout(function(){s(),i(n.onerror,"load timeout")},C),b=1,E.load(_)}}function m(){E.stop(),b=4}function x(){b==4&&(E.free(),b=2)}function s(){b!=0&&(E.unload(),b=0),h()}function w(A,y,D){if(!A)throw Error("config() takes at least 1 argument");var O=0|A.N;if(!(1<O&&O<=8388608))throw Error("param N out of range (1 < N <= 2^23)");if(O&O-1)throw Error("param N must be power of 2");var re=0|A.r;if(!(0<re&&re<256))throw Error("param r out of range (0 < r < 256)");var J=0|A.P;if(!(0<J&&J<256))throw Error("param P out of range (0 < P < 256)");var et=O*re*128;if(et>1073741824)throw Error("memory limit exceeded (N * r * 128 > 1G)");if(y){var oe=y.maxPassLen;if(oe==null)oe=N;else if(oe<=0)throw Error("invalid maxPassLen");var ae=y.maxSaltLen;if(ae==null)ae=R;else if(ae<=0)throw Error("invalid maxSaltLen");var ie=y.maxDkLen;if(ie==null)ie=L;else if(ie<=0)throw Error("invalid maxDkLen");var se=y.maxThread;if(se==null)se=z;else if(se<=0)throw Error("invalid maxThread");D||(N=0|oe,R=0|ae,L=0|ie,z=0|se)}if(!D){var tt=Math.ceil(J/z),nt=Math.ceil(J/tt);E.config(O,re,J,nt,N,R,L),b=3}}function v(A){return t.strToBytes(A)}function d(A){return t.bytesToStr(A)}function g(A){if(A.length%2)throw Error("invalid hex length");return t.hexToBytes(A)}function p(A){return t.bytesToHex(A)}function T(A){/\/$/.test(A)||(A+="/"),_=A}function k(A){C=A}var E,B,S={asmjs:o,flash:a},b=0,_="",I=0,C=3e4,N=64,R=64,L=64,z=1;n.hash=c,n.getAvailableMod=l,n.load=f,n.stop=m,n.free=x,n.unload=s,n.config=w,n.strToBin=v,n.binToStr=d,n.hexToBin=g,n.binToHex=p,n.setResPath=T,n.setResTimeout=k,e.scrypt=n})(r||(r={}))})();globalThis.scrypt_loader_9470f487e3aa154f278269e99e6a42502ca77b8da3867a46a548909659a3db4a=Ee;var q=Ee.scrypt;q.load();var st=function(){const e=[];let t=!1;const o=r=>new Promise(async(n,u)=>{q.onprogress=i=>{r.onprogress&&r.onprogress(i)},q.oncomplete=i=>{r.resolve(i),n(!0)},q.onerror=i=>{r.reject(i),n(!1)};try{q.config({N:r.N,r:r.r,P:r.p},{maxPassLen:8192,maxSaltLen:2048,maxDkLen:1024,maxThread:1}),await new Promise(i=>q.onready=i),q.hash(r.key,r.salt,r.dklen)}catch(i){u(i)}});async function a(){let r=null;for(;e.length;)try{r=e.splice(0,1)[0],await o(r),await ct()}catch(n){r?.reject(n)}t=!1}return function(n,u,i,h,c,l,f=null){return new Promise((m,x)=>{e.push({key:n,salt:u,N:i,r:h,p:c,dklen:l,resolve:m,reject:x,onprogress:f}),t||(t=!0,setTimeout(a))})}}();function ct(){return new Promise(e=>setTimeout(e))}var j=4096,He=[85,170,85,170,85,170,85,170],be=[85,170,85,170,85,170,85,170,170,85,170,85,170,85,170,85,85,170,85,170,85,170,85,170,170,85,170,85,170,85,170,85],_e=[85,170,85,170,85,170,85,170,85,170,85,170,85,170,85,170,85,170,85,170,85,170,85,170,85,170,85,170,85,170,85,170],ue=[255,253,240,16,19,208,18,24,85,170],$e=2n**64n;if($e!==BigInt("18446744073709551616"))throw new ee("POWER_2_64 is not 2^64");var ut=typeof process>"u"?requestAnimationFrame:setTimeout;function xe(){return new Promise(e=>ut(e))}function le(e,t=null){if(!e)return"Unknown Version";let o=String(t);return String(e)==="1.1"&&(o="null"),t?`${e}/${o}`:`${e}/0`}var Ye=le("1.1"),ft=le("1.2",10020);async function Je(e){const t=await e(0,13);if(M(t)!=="MyEncryption/")throw new we;const o=M(await e(13,16));if(!["1.1","1.2"].includes(o))throw new Q;const a=new DataView((await e(16,20)).buffer).getUint32(0,!0);return le(o,a)}function We(e){if(e&&e!=="AES-GCM")throw e==="ChaCha20"||e==="ChaCha20-Poly1305"?new qe:e==="DES"||e==="RC4"?new Ge:e==="XTS-AES"?new X("XTS-AES Not supported yet"):new X(void 0,{cause:new Error(String(e))})}var fe=globalThis.crypto;function At(e){try{const t=JSON.parse(e);if(!t||!t.data||!t.parameter||!t.N||!t.v)throw new V("The message is bad since the JSON is not complete.");return t}catch{throw new V("The message is bad since it is neither a JSON or a new-format ciphertext.")}}async function Ie(e,t,o=null,a=null){const r=Z(12),{derived_key:n,parameter:u,N:i}=await Y(t,r,o,a);a=i;const h=await fe.subtle.importKey("raw",n,"AES-GCM",!1,["encrypt"]);if(typeof e!="string")throw new me("The ability to directly encrypt binary data has been removed in the new version. Please use `encrypt_file` instead.");const c="AES-GCM",l=await fe.subtle.encrypt({name:c,iv:r},h,G(e)),f=new Uint8Array(r.length+l.byteLength);return f.set(r,0),f.set(new Uint8Array(l),r.length),`:${W(f)}:${u}:${a}:${5.6}:${c}:`}async function Ze(e){let t;if(e.charAt(0)===":"){const f=e.split(":");if(f.length!==8)throw new V("The message is bad.");const[,m,x,s,w,v,d]=f;t={data:m,phrase:x,salt:s,N:+w,v:+v,a:d}}else t=At(e);const o=parseInt(t.N),a=t.a;We(a);const r=P(t.data);let n,u;t.parameter?[n,u]=t.parameter.split(":"):(n=t.phrase,u=t.salt);const i=P(u);if(isNaN(o)||!n||typeof n!="string"||!r||!i)throw new V("The message or parameters are bad.");if(r.length<28)throw new V("The message was too short.");const h=r.slice(0,12),c=r.slice(12,-16),l=r.slice(-16);return{iv:h,ciphertext:c,tag:l,phrase:n,salt:i,N:o}}async function ne(e,t){const{iv:o,ciphertext:a,tag:r,phrase:n,salt:u,N:i}=await Ze(e),h=typeof t=="string"?(await Y(t,o,n,i,u)).derived_key:t;if(!(h instanceof Uint8Array))throw new U("The key is not valid.");const c=await fe.subtle.importKey("raw",h,"AES-GCM",!1,["decrypt"]);try{const l=await fe.subtle.decrypt({name:"AES-GCM",iv:o},c,new Uint8Array([...a,...r]));try{return M(l)}catch{throw new me("The ability to directly decrypt binary data has been removed in the new version. If you have encrypted binary data, please recover it using the old version.")}}catch(l){if(!l||!(l instanceof DOMException))throw new F("Internal error.",{cause:l});const f=l.name;throw f==="InvalidAccessError"?new U("InvalidAccessError.",{cause:l}):f==="OperationError"?new ve("Cannot decrypt. Did you provide the correct password?",{cause:l}):new F("Unexpected error.",{cause:l})}}var Ue=["Furina","Neuvillette","Venti","Nahida","Kinich","Kazuha"];async function Y(e,t,o=null,a=null,r=null,n=8,u=1,i=32){if(a===null&&(a=262144),typeof a!="number"||a>2097152||n<1||u<1||typeof n!="number"||typeof u!="number"||typeof i!="number")throw new Le;if(typeof e!="string")throw new U("key must be a string");if(!(t instanceof Uint8Array))throw new U("iv must be a Uint8Array");if(o!==null&&typeof o!="string")throw new U("phrase must be a string");if(r||(r=Z(64)),o||(o=Ue[ot()%Ue.length]),o.includes(":"))throw new U('phrase MUST NOT contain ":"');const h=`${o}:${W(r)}`,c=`MyEncryption/1.1 Fontaine/4.2 Iv/${W(t)} user_parameter=${h} user_key=${e}`;return{derived_key:await st(G(c),r,a,n,u,i),parameter:h,N:a}}var $=globalThis.crypto;async function mt(e,t,o,a=null,r=null,n=null,u=32*1024*1024){if(!u)throw new U("chunk_size must be greater than 0.");await t(G("MyEncryption/1.2"));const i=10020,h=new ArrayBuffer(4);new DataView(h).setUint32(0,i,!0),await t(new Uint8Array(h));const c=W(Z(64)),l=await Ie(c,o,r,n),f=G(l);if(n=8192,f.length>j)throw new F("(Internal Error) This should not happen. Contact the application developer.");const m=new ArrayBuffer(4);new DataView(m).setUint32(0,f.length,!0),await t(new Uint8Array(m)),await t(f);const x=new Uint8Array(j-f.length-4).fill(0);await t(x),a?.(0),await xe();const s=Z(12),{derived_key:w,parameter:v,N:d}=await Y(c,s,r,n);n=d;const g={parameter:v,N:n,v:5.5,a:"AES-GCM",iv:W(s)},p=G(JSON.stringify(g)),T=new ArrayBuffer(4);new DataView(T).setUint32(0,p.length,!0),await t(new Uint8Array(T)),await t(p);const k=new ArrayBuffer(8);new DataView(k).setBigUint64(0,BigInt(u),!0),await t(new Uint8Array(k));let E=0,B=BigInt(1),S=0;const b=new ArrayBuffer(8);new DataView(b).setBigUint64(0,B,!0),await t(new Uint8Array(b)),a?.(0);const _=await $.subtle.importKey("raw",w,{name:"AES-GCM"},!1,["encrypt"]);for(;;){const C=await e(S,S+u);if(!(C instanceof Uint8Array))throw new V("The file chunk is not a Uint8Array.");if(C.length===0)break;const N=C.length<u,R=new ArrayBuffer(12);if(B>=$e)throw new Fe("nonce_counter exceeded the maximum value.");if(new DataView(R).setBigUint64(4,B,!0),B++,N){await t(new Uint8Array(be));const y=new ArrayBuffer(8);new DataView(y).setBigUint64(0,BigInt(C.length),!0),await t(new Uint8Array(y))}const L=new Uint8Array(R),z=await $.subtle.encrypt({name:"AES-GCM",iv:L},_,C),A=new Uint8Array(z);await t(A),E+=C.length,S+=C.length,a?.(E)}await t(new Uint8Array(_e));const I=new ArrayBuffer(8);return new DataView(I).setBigUint64(0,BigInt(E),!0),await t(new Uint8Array(I)),await t(new Uint8Array(ue)),!0}async function lt(e,t,o,a=null){const r=await e(0,16);if(M(r)!=="MyEncryption/1.1")throw new TypeError("Invalid file format");let n=16;const u=await e(n,n+4),i=new DataView(u.buffer).getUint32(0,!0);n+=4;const h=M(await e(n,n+i));n+=1024;const c=await ne(h,o),l=await e(n,n+4),f=new DataView(l.buffer).getUint32(0,!0);n+=4;const m=JSON.parse(M(await e(n,n+f)));n+=f;const[x,s]=m.parameter.split(":"),w=P(s),v=P(m.iv),d=m.N;a?.(0),await xe();const{derived_key:g}=await Y(c,v,x,d,w);let p=0;const T=await $.subtle.importKey("raw",g,{name:"AES-GCM"},!1,["decrypt"]);for(;;){const S=await e(n,n+8);if(n+=8,S.every((R,L)=>R===[255,253,240,16,19,208,18,24][L]))break;const b=Number(new DataView(S.buffer).getBigUint64(0,!0)),_=await e(n,n+12);n+=12;const I=await e(n,n+b+16);n+=b+16;const C=I,N=await $.subtle.decrypt({name:"AES-GCM",iv:_},T,C);await t(new Uint8Array(N)),p+=N.byteLength,a&&a(p)}const k=await e(n,n+8),E=Number(new DataView(k.buffer).getBigUint64(0,!0));n+=8;const B=await e(n,n+2);if(p!==E)throw new de("File corrupted: total bytes mismatch");if(!B.every((S,b)=>S===[85,170][b]))throw new ye("Invalid end marker");return!0}async function pt(e,t,o,a=null){let r=20;if(await Je(e)===Ye){if(typeof o!="string")throw new ge("operation not supported");return await lt(e,t,o,a)}const u=new DataView((await e(r,r+4)).buffer).getUint32(0,!0),i=M(await e(r+4,r+4+u));if(r+=j,u>j)throw new F("(Internal Error) This should not happen. Contact the application developer.");const h=typeof o=="string"?await ne(i,o):null,c=await e(r,r+4),l=new DataView(c.buffer).getUint32(0,!0);r+=4;const f=JSON.parse(M(await e(r,r+l)));r+=l;const m=f.v;if(![5.5].includes(m))throw new Q;const[x,s]=f.parameter.split(":"),w=P(s),v=P(f.iv),d=f.N,g=f.a;We(g);const p=Number(new DataView((await e(r,r+8)).buffer).getBigUint64(0,!0));let T=BigInt(new DataView((await e(r+8,r+16)).buffer).getBigUint64(0,!0));r+=16,a?.(0),await xe();const k=typeof o=="string"?h?(await Y(h,v,x,d,w)).derived_key:De(new F):o;let E=0,B=!1;const S=await $.subtle.importKey("raw",k,{name:"AES-GCM"},!1,["decrypt"]);for(;;){const C=await e(r,r+8);let N=0;if(C.every((y,D)=>y===He[D])){const y=await e(r,r+32);if(y.every((D,O)=>D===_e[O])){r+=32;break}if(y.every((D,O)=>D===be[O])){B=!0,r+=32;const D=await e(r,r+8);if(r+=8,N=Number(new DataView(D.buffer).getBigUint64(0,!0)),N===0)break}}const R=B?N:p,L=new ArrayBuffer(12);new DataView(L).setBigUint64(4,BigInt(T),!0),T++;const z=await e(r,r+R+16);r+=R+16;const A=z;try{const y=await $.subtle.decrypt({name:"AES-GCM",iv:new Uint8Array(L)},S,A);await t(new Uint8Array(y)),E+=y.byteLength}catch(y){if(!y||!(y instanceof DOMException))throw new F("Internal error.",{cause:y});const D=y.name;throw D==="InvalidAccessError"?new U("InvalidAccessError.",{cause:y}):D==="OperationError"?new Oe(void 0,{cause:y}):new F("Unexpected error.",{cause:y})}a&&a(E)}const b=await e(r,r+8),_=Number(new DataView(b.buffer).getBigUint64(0,!0));r+=8;const I=await e(r,r+ue.length);if(E!==_)throw new de("total bytes mismatch");if(!I.every((C,N)=>C===ue[N]))throw new ye;return!0}async function Et(e,t){if(!(e instanceof Blob))throw new U("blob must be a Blob");const o=[];if(!await pt(async(n,u)=>new Uint8Array(await e.slice(n,u).arrayBuffer()),async n=>{o.push(n)},t))throw new ee;return new Blob(o)}async function ht(e,t,o){if(!(e instanceof Blob))throw new U;if(typeof t!="string"||typeof o!="string")throw new U;if(e.size<1044)throw new V("Data not enough");const a=e.slice(0,16);if(await a.text()!=="MyEncryption/1.1")throw new TypeError("Invalid file format");const n=new DataView(await e.slice(16,20).arrayBuffer()).getUint32(0,!0),u=M(await e.slice(20,20+n).arrayBuffer()),i=await Ie(await ne(u,t),o);if(i.length>1024)throw new Error("(Internal Error) This should not happen. Contact the application developer.");const h=i.length,c=new ArrayBuffer(4);new DataView(c).setUint32(0,h,!0);const f=[a,c,G(i)],m=new Uint8Array(1024-i.length).fill(0);return f.push(m),new Blob(f)}async function bt(e,t,o,a=null,r=null){if(!(e instanceof Blob))throw new U;if(typeof t!="string"||typeof o!="string")throw new U;if(e.size<1044)throw new V("Data not enough");if(await Je(async(s,w)=>new Uint8Array(await e.slice(s,w).arrayBuffer()))===Ye)return await ht(e,t,o);const u=new DataView(await e.slice(20,24).arrayBuffer()).getUint32(0,!0),i=M(await e.slice(24,24+u).arrayBuffer());if(!r||!a){const{N:s,phrase:w}=await Ze(i);r||(r=s),a||(a=w)}const h=await Ie(await ne(i,t),o,a,r);if(h.length>1024)throw new Error("(Internal Error) This should not happen. Contact the application developer.");const c=h.length,l=new ArrayBuffer(4);new DataView(l).setUint32(0,c,!0);const m=[e.slice(0,20),l,G(h)],x=new Uint8Array(j-h.length-4).fill(0);return m.push(x),new Blob(m)}var ke=Object.create(null);ke[Symbol.toStringTag]="CryptContext";ke.toString=function(){return`${this[Symbol.toStringTag]} Object`};async function ce(e){return e instanceof Promise?await e:e}async function _t(){const e=Object.create(ke);return Object.defineProperty(e,"_created",{value:!0}),e}async function xt(e){if(!e||e._released)throw new U("Invalid context");for(const t of Reflect.ownKeys(e)){if(typeof t=="symbol"){Reflect.deleteProperty(e,t);continue}const o=Reflect.get(e,t);o&&(o.release?await ce(o.release()):o.free?await ce(o.free()):o.reset?await ce(o.reset()):o.clear&&await ce(o.clear())),t.startsWith("_")||Reflect.deleteProperty(e,t)}return Object.defineProperty(e,"_released",{value:!0}),!0}var Qe=globalThis.crypto,It=class{#n;#e={position:0,end:0,data:null};#t;get[Symbol.toStringTag](){return"Stream"}constructor(e,t){if(typeof e!="function")throw new U("Stream: Invalid reader");if(this.#n=e,typeof t!="number")throw new U("Stream: Invalid size");this.#t=t}get size(){return this.#t}#r=null;async read(e,t,o=null,a=null){if(!this.#n)throw new Error("Stream: The stream has been closed.");if(this.#e.position!=null&&this.#e.end&&this.#e.data&&e>=this.#e.position&&t<=this.#e.end)return this.#e.data.slice(e-this.#e.position,t-this.#e.position);if(e<0)throw new U("Stream: Invalid start position");if(t>this.#t&&(t=this.#t),o!=null&&o>this.#t&&(o=this.#t),this.#r=a,o!=null&&o!==0){const n=await this.#n(e,o,a?.signal);return this.#r=null,this.#e.position=e,this.#e.end=e+n.length,this.#e.data=n,n.slice(0,t-e)}const r=await this.#n(e,t,a?.signal);return this.#r=null,r}abort(){this.#r?.abort()}purge(){this.#e.position=this.#e.end=0,this.#e.data=null}close(){this.#n=null,this.purge()}};async function kt(e,t,o,{cache:a=!0,cache_max_size:r=256*1024*1024}={}){if(e._inited)throw new Ve;Object.defineProperty(e,"_inited",{value:!0}),e._type="@decrypt_stream",e.stream={stream:t,release:()=>e.stream.stream.close()};const n=await t.read(0,13,5e3);if(M(n)!=="MyEncryption/")throw new we;const u=M(await t.read(13,16));if(!["1.1","1.2"].includes(u))throw new Q;const i=new DataView((await t.read(16,20)).buffer).getUint32(0,!0),h=le(u,i);let c=20;if(h!==ft)throw new ge("Cannot perform a streamed decryption on V1.1 files");const l=new DataView((await t.read(c,c+4)).buffer).getUint32(0,!0),f=M(await t.read(c+4,c+4+l));if(c+=j,l>j)throw new F("(Internal Error) This should not happen. Contact the application developer.");const m=await ne(f,o),x=await t.read(c,c+4),s=new DataView(x.buffer).getUint32(0,!0);c+=4;const w=JSON.parse(M(await t.read(c,c+s)));c+=s;const v=w.v;if(![5.5].includes(v))throw new Q;const[d,g]=w.parameter.split(":"),p=P(g),T=P(w.iv),k=w.N,E=Number(new DataView((await t.read(c,c+8)).buffer).getBigUint64(0,!0));let B=Number(new DataView((await t.read(c+8,c+16)).buffer).getBigUint64(0,!0));c+=16;const{derived_key:S}=await Y(m,T,d,k,p),b=await Qe.subtle.importKey("raw",S,{name:"AES-GCM"},!1,["decrypt"]);return e.key=b,e.chunk_size=E,e.nonce_counter=B,e.header_json_length=s,e.cache_enabled=!!a,e.cached_chunks=new Map,e.cached_chunks_add_order=new Array,e.cached_size=0,e.cache_max_size=r,!0}async function Ct(e,t,o,a){if(!e._inited)throw new je;if(e._type!=="@decrypt_stream")throw new Ke(e._type);if(e._released)throw new ze;const r=e.stream.stream,n=e.chunk_size,u=e.nonce_counter,i=[],h=20+j+4+e.header_json_length+8+8,c=n+16,l=Math.floor((r.size-h-(80+ue.length))/c),f=Math.max(0,Math.floor(t/n)),m=Math.min(l,Math.floor(o/n));if(m<0||f>l)throw new U("Out of range");const x=async g=>{if(e.cache_enabled&&e.cached_chunks.has(g))return e.cached_chunks.get(g);let p=h+g*c;const T=await r.read(p,p+8,p+2*c,a);let k=0;if(T.every((_,I)=>_===He[I])){const _=await r.read(p,p+32,null,a);if(p+=32,_.every((I,C)=>I===_e[C]))return!1;if(_.every((I,C)=>I===be[C])){const I=await r.read(p,p+8,null,a);if(p+=8,k=Number(new DataView(I.buffer).getBigUint64(0,!0)),k===0)return!1}}const E=k||n,B=await r.read(p,p+E+16,null,a),S=u+g,b=new ArrayBuffer(12);new DataView(b).setBigUint64(4,BigInt(S),!0);try{const _=await Qe.subtle.decrypt({name:"AES-GCM",iv:new Uint8Array(b)},e.key,B);if(e.cache_enabled)for(_.byteLength<e.cache_max_size&&(e.cached_chunks_add_order.push(g),e.cached_chunks.set(g,_),e.cached_size+=_.byteLength);e.cached_size>e.cache_max_size;){const I=e.cached_chunks_add_order.shift();e.cached_size-=e.cached_chunks.get(I).byteLength,e.cached_chunks.delete(I)}return _}catch(_){if(!_||!(_ instanceof DOMException))throw new F("Internal error.",{cause:_});const I=_.name;throw I==="InvalidAccessError"?new U("InvalidAccessError.",{cause:_}):I==="OperationError"?new ve("Cannot decrypt. Did you provide the correct password?",{cause:_}):new F("Unexpected error.",{cause:_})}};let s=!1;for(let g=f;g<=m;g++){const p=await x(g);if(!p){s=!0;break}i.push(p)}const w=new Blob(i),v=f*n,d=w.slice(t-v,o-v);return s&&(d.eof=!0),d}var wt={};Be(wt,{createReaderForFileSystemHandle:()=>dt,createReaderForLocalFile:()=>Xe,createReaderForRemoteObject:()=>yt,createWriterForFileSystemHandle:()=>vt,createWriterForMemoryBuffer:()=>gt});async function Xe(e){return async(t,o)=>new Uint8Array(await e.slice(t,o).arrayBuffer())}async function dt(e){const t=await e.getFile();return await Xe(t)}async function yt(e){return async(t,o)=>{const a=await fetch(e,{headers:{Range:`bytes=${t}-${o-1}`}});if(!a.ok)throw new Te(`Network Error: HTTP ${a.status} : ${a.statusText}`,{response:a});return new Uint8Array(await a.arrayBuffer())}}async function vt(e){throw new Pe}async function gt(e){return async t=>{e.push(t)}}export{It as I,pt as a,mt as b,bt as c,ne as d,Ie as e,xt as f,_t as g,kt as h,Ct as i,Et as j};
//# sourceMappingURL=main.bundle.builder-BNL2S5MP.js.map
